/*! For license information please see main.529f8b6f.js.LICENSE.txt */
!function(){var e={1132:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},o=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,a=t.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!a&&!i)return!1;for(r in e);return"undefined"===typeof r||t.call(e,r)},s=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},u=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(a)return a(e,n).value}return e[n]};e.exports=function e(){var t,n,r,a,l,c,f=arguments[0],d=1,h=arguments.length,p=!1;for("boolean"===typeof f&&(p=f,f=arguments[1]||{},d=2),(null==f||"object"!==typeof f&&"function"!==typeof f)&&(f={});d<h;++d)if(null!=(t=arguments[d]))for(n in t)r=u(f,n),f!==(a=u(t,n))&&(p&&a&&(o(a)||(l=i(a)))?(l?(l=!1,c=r&&i(r)?r:[]):c=r&&o(r)?r:{},s(f,{name:n,newValue:e(p,c,a)})):"undefined"!==typeof a&&s(f,{name:n,newValue:a}));return f}},2110:function(e,t,n){"use strict";var r=n(7441),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=h(n);a&&a!==p&&e(t,a,r)}var o=c(n);f&&(o=o.concat(f(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var g=o[m];if(!i[g]&&(!r||!r[g])&&(!v||!v[g])&&(!s||!s[g])){var y=d(n,g);try{l(t,g,y)}catch(b){}}}}return t}},9020:function(e){var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,a=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,u=/^\s+|\s+$/g,l="";function c(e){return e?e.replace(u,l):l}e.exports=function(e,u){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];u=u||{};var f=1,d=1;function h(e){var t=e.match(n);t&&(f+=t.length);var r=e.lastIndexOf("\n");d=~r?e.length-r:d+e.length}function p(){var e={line:f,column:d};return function(t){return t.position=new v(e),b(),t}}function v(e){this.start=e,this.end={line:f,column:d},this.source=u.source}v.prototype.content=e;var m=[];function g(t){var n=new Error(u.source+":"+f+":"+d+": "+t);if(n.reason=t,n.filename=u.source,n.line=f,n.column=d,n.source=e,!u.silent)throw n;m.push(n)}function y(t){var n=t.exec(e);if(n){var r=n[0];return h(r),e=e.slice(r.length),n}}function b(){y(r)}function x(e){var t;for(e=e||[];t=w();)!1!==t&&e.push(t);return e}function w(){var t=p();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;l!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,l===e.charAt(n-1))return g("End of comment missing");var r=e.slice(2,n-2);return d+=2,h(r),e=e.slice(n),d+=2,t({type:"comment",comment:r})}}function k(){var e=p(),n=y(a);if(n){if(w(),!y(i))return g("property missing ':'");var r=y(o),u=e({type:"declaration",property:c(n[0].replace(t,l)),value:r?c(r[0].replace(t,l)):l});return y(s),u}}return b(),function(){var e,t=[];for(x(t);e=k();)!1!==e&&(t.push(e),x(t));return t}()}},5586:function(e){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},763:function(e,t,n){var r;e=n.nmd(e),function(){var a,i="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,l=32,c=64,f=128,d=256,h=1/0,p=9007199254740991,v=NaN,m=4294967295,g=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",l],["partialRight",c],["rearg",d]],y="[object Arguments]",b="[object Array]",x="[object Boolean]",w="[object Date]",k="[object Error]",S="[object Function]",_="[object GeneratorFunction]",C="[object Map]",E="[object Number]",T="[object Object]",I="[object Promise]",A="[object RegExp]",N="[object Set]",R="[object String]",M="[object Symbol]",O="[object WeakMap]",D="[object ArrayBuffer]",L="[object DataView]",j="[object Float32Array]",P="[object Float64Array]",F="[object Int8Array]",B="[object Int16Array]",z="[object Int32Array]",U="[object Uint8Array]",W="[object Uint8ClampedArray]",G="[object Uint16Array]",V="[object Uint32Array]",H=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,X=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,Z=RegExp(Y.source),Q=RegExp(K.source),$=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ae=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(ae.source),oe=/^\s+/,se=/\s/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,he=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ve=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,xe=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ke=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ce="\\u2700-\\u27bf",Ee="a-z\\xdf-\\xf6\\xf8-\\xff",Te="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",Ae="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ne="['\u2019]",Re="[\\ud800-\\udfff]",Me="["+Ae+"]",Oe="["+_e+"]",De="\\d+",Le="[\\u2700-\\u27bf]",je="["+Ee+"]",Pe="[^\\ud800-\\udfff"+Ae+De+Ce+Ee+Te+"]",Fe="\\ud83c[\\udffb-\\udfff]",Be="[^\\ud800-\\udfff]",ze="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",We="["+Te+"]",Ge="(?:"+je+"|"+Pe+")",Ve="(?:"+We+"|"+Pe+")",He="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",qe="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Xe="(?:"+Oe+"|"+Fe+")"+"?",Ye="[\\ufe0e\\ufe0f]?",Ke=Ye+Xe+("(?:\\u200d(?:"+[Be,ze,Ue].join("|")+")"+Ye+Xe+")*"),Ze="(?:"+[Le,ze,Ue].join("|")+")"+Ke,Qe="(?:"+[Be+Oe+"?",Oe,ze,Ue,Re].join("|")+")",$e=RegExp(Ne,"g"),Je=RegExp(Oe,"g"),et=RegExp(Fe+"(?="+Fe+")|"+Qe+Ke,"g"),tt=RegExp([We+"?"+je+"+"+He+"(?="+[Me,We,"$"].join("|")+")",Ve+"+"+qe+"(?="+[Me,We+Ge,"$"].join("|")+")",We+"?"+Ge+"+"+He,We+"+"+qe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",De,Ze].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+_e+Ie+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ot={};ot[j]=ot[P]=ot[F]=ot[B]=ot[z]=ot[U]=ot[W]=ot[G]=ot[V]=!0,ot[y]=ot[b]=ot[D]=ot[x]=ot[L]=ot[w]=ot[k]=ot[S]=ot[C]=ot[E]=ot[T]=ot[A]=ot[N]=ot[R]=ot[O]=!1;var st={};st[y]=st[b]=st[D]=st[L]=st[x]=st[w]=st[j]=st[P]=st[F]=st[B]=st[z]=st[C]=st[E]=st[T]=st[A]=st[N]=st[R]=st[M]=st[U]=st[W]=st[G]=st[V]=!0,st[k]=st[S]=st[O]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,ct=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,dt="object"==typeof self&&self&&self.Object===Object&&self,ht=ft||dt||Function("return this")(),pt=t&&!t.nodeType&&t,vt=pt&&e&&!e.nodeType&&e,mt=vt&&vt.exports===pt,gt=mt&&ft.process,yt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(t){}}(),bt=yt&&yt.isArrayBuffer,xt=yt&&yt.isDate,wt=yt&&yt.isMap,kt=yt&&yt.isRegExp,St=yt&&yt.isSet,_t=yt&&yt.isTypedArray;function Ct(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Et(e,t,n,r){for(var a=-1,i=null==e?0:e.length;++a<i;){var o=e[a];t(r,o,n(o),e)}return r}function Tt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Nt(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}function Rt(e,t){return!!(null==e?0:e.length)&&Ut(e,t,0)>-1}function Mt(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}function Dt(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function Lt(e,t,n,r){var a=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}function jt(e,t,n,r){var a=null==e?0:e.length;for(r&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function Pt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=Ht("length");function Bt(e,t,n){var r;return n(e,(function(e,n,a){if(t(e,n,a))return r=n,!1})),r}function zt(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}function Ut(e,t,n){return t===t?function(e,t,n){var r=n-1,a=e.length;for(;++r<a;)if(e[r]===t)return r;return-1}(e,t,n):zt(e,Gt,n)}function Wt(e,t,n,r){for(var a=n-1,i=e.length;++a<i;)if(r(e[a],t))return a;return-1}function Gt(e){return e!==e}function Vt(e,t){var n=null==e?0:e.length;return n?Yt(e,t)/n:v}function Ht(e){return function(t){return null==t?a:t[e]}}function qt(e){return function(t){return null==e?a:e[t]}}function Xt(e,t,n,r,a){return a(e,(function(e,a,i){n=r?(r=!1,e):t(n,e,a,i)})),n}function Yt(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==a&&(n=n===a?o:n+o)}return n}function Kt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Zt(e){return e?e.slice(0,vn(e)+1).replace(oe,""):e}function Qt(e){return function(t){return e(t)}}function $t(e,t){return Ot(t,(function(t){return e[t]}))}function Jt(e,t){return e.has(t)}function en(e,t){for(var n=-1,r=e.length;++n<r&&Ut(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&Ut(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var rn=qt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=qt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+ut[e]}function sn(e){return nt.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function cn(e,t){for(var n=-1,r=e.length,a=0,i=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,i[a++]=n)}return i}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function hn(e){return sn(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Ft(e)}function pn(e){return sn(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function vn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var mn=qt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gn=function e(t){var n=(t=null==t?ht:gn.defaults(ht.Object(),t,gn.pick(ht,at))).Array,r=t.Date,se=t.Error,_e=t.Function,Ce=t.Math,Ee=t.Object,Te=t.RegExp,Ie=t.String,Ae=t.TypeError,Ne=n.prototype,Re=_e.prototype,Me=Ee.prototype,Oe=t["__core-js_shared__"],De=Re.toString,Le=Me.hasOwnProperty,je=0,Pe=function(){var e=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Me.toString,Be=De.call(Ee),ze=ht._,Ue=Te("^"+De.call(Le).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=mt?t.Buffer:a,Ge=t.Symbol,Ve=t.Uint8Array,He=We?We.allocUnsafe:a,qe=ln(Ee.getPrototypeOf,Ee),Xe=Ee.create,Ye=Me.propertyIsEnumerable,Ke=Ne.splice,Ze=Ge?Ge.isConcatSpreadable:a,Qe=Ge?Ge.iterator:a,et=Ge?Ge.toStringTag:a,nt=function(){try{var e=di(Ee,"defineProperty");return e({},"",{}),e}catch(t){}}(),ut=t.clearTimeout!==ht.clearTimeout&&t.clearTimeout,ft=r&&r.now!==ht.Date.now&&r.now,dt=t.setTimeout!==ht.setTimeout&&t.setTimeout,pt=Ce.ceil,vt=Ce.floor,gt=Ee.getOwnPropertySymbols,yt=We?We.isBuffer:a,Ft=t.isFinite,qt=Ne.join,yn=ln(Ee.keys,Ee),bn=Ce.max,xn=Ce.min,wn=r.now,kn=t.parseInt,Sn=Ce.random,_n=Ne.reverse,Cn=di(t,"DataView"),En=di(t,"Map"),Tn=di(t,"Promise"),In=di(t,"Set"),An=di(t,"WeakMap"),Nn=di(Ee,"create"),Rn=An&&new An,Mn={},On=Bi(Cn),Dn=Bi(En),Ln=Bi(Tn),jn=Bi(In),Pn=Bi(An),Fn=Ge?Ge.prototype:a,Bn=Fn?Fn.valueOf:a,zn=Fn?Fn.toString:a;function Un(e){if(rs(e)&&!qo(e)&&!(e instanceof Hn)){if(e instanceof Vn)return e;if(Le.call(e,"__wrapped__"))return zi(e)}return new Vn(e)}var Wn=function(){function e(){}return function(t){if(!ns(t))return{};if(Xe)return Xe(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function Gn(){}function Vn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function Hn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Yn;++t<n;)this.add(e[t])}function Zn(e){var t=this.__data__=new Xn(e);this.size=t.size}function Qn(e,t){var n=qo(e),r=!n&&Ho(e),a=!n&&!r&&Zo(e),i=!n&&!r&&!a&&fs(e),o=n||r||a||i,s=o?Kt(e.length,Ie):[],u=s.length;for(var l in e)!t&&!Le.call(e,l)||o&&("length"==l||a&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||bi(l,u))||s.push(l);return s}function $n(e){var t=e.length;return t?e[Kr(0,t-1)]:a}function Jn(e,t){return ji(Na(e),ur(t,0,e.length))}function er(e){return ji(Na(e))}function tr(e,t,n){(n!==a&&!Wo(e[t],n)||n===a&&!(t in e))&&or(e,t,n)}function nr(e,t,n){var r=e[t];Le.call(e,t)&&Wo(r,n)&&(n!==a||t in e)||or(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Wo(e[n][0],t))return n;return-1}function ar(e,t,n,r){return hr(e,(function(e,a,i){t(r,e,n(e),i)})),r}function ir(e,t){return e&&Ra(t,Os(t),e)}function or(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,i=t.length,o=n(i),s=null==e;++r<i;)o[r]=s?a:Is(e,t[r]);return o}function ur(e,t,n){return e===e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function lr(e,t,n,r,i,o){var s,u=1&t,l=2&t,c=4&t;if(n&&(s=i?n(e,r,i,o):n(e)),s!==a)return s;if(!ns(e))return e;var f=qo(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Le.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return Na(e,s)}else{var d=vi(e),h=d==S||d==_;if(Zo(e))return _a(e,u);if(d==T||d==y||h&&!i){if(s=l||h?{}:gi(e),!u)return l?function(e,t){return Ra(e,pi(e),t)}(e,function(e,t){return e&&Ra(t,Ds(t),e)}(s,e)):function(e,t){return Ra(e,hi(e),t)}(e,ir(s,e))}else{if(!st[d])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case D:return Ca(e);case x:case w:return new r(+e);case L:return function(e,t){var n=t?Ca(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case j:case P:case F:case B:case z:case U:case W:case G:case V:return Ea(e,n);case C:return new r;case E:case R:return new r(e);case A:return function(e){var t=new e.constructor(e.source,ve.exec(e));return t.lastIndex=e.lastIndex,t}(e);case N:return new r;case M:return a=e,Bn?Ee(Bn.call(a)):{}}var a}(e,d,u)}}o||(o=new Zn);var p=o.get(e);if(p)return p;o.set(e,s),us(e)?e.forEach((function(r){s.add(lr(r,t,n,r,e,o))})):as(e)&&e.forEach((function(r,a){s.set(a,lr(r,t,n,a,e,o))}));var v=f?a:(c?l?ii:ai:l?Ds:Os)(e);return Tt(v||e,(function(r,a){v&&(r=e[a=r]),nr(s,a,lr(r,t,n,a,e,o))})),s}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ee(e);r--;){var i=n[r],o=t[i],s=e[i];if(s===a&&!(i in e)||!o(s))return!1}return!0}function fr(e,t,n){if("function"!=typeof e)throw new Ae(i);return Mi((function(){e.apply(a,n)}),t)}function dr(e,t,n,r){var a=-1,i=Rt,o=!0,s=e.length,u=[],l=t.length;if(!s)return u;n&&(t=Ot(t,Qt(n))),r?(i=Mt,o=!1):t.length>=200&&(i=Jt,o=!1,t=new Kn(t));e:for(;++a<s;){var c=e[a],f=null==n?c:n(c);if(c=r||0!==c?c:0,o&&f===f){for(var d=l;d--;)if(t[d]===f)continue e;u.push(c)}else i(t,f,r)||u.push(c)}return u}Un.templateSettings={escape:$,evaluate:J,interpolate:ee,variable:"",imports:{_:Un}},Un.prototype=Gn.prototype,Un.prototype.constructor=Un,Vn.prototype=Wn(Gn.prototype),Vn.prototype.constructor=Vn,Hn.prototype=Wn(Gn.prototype),Hn.prototype.constructor=Hn,qn.prototype.clear=function(){this.__data__=Nn?Nn(null):{},this.size=0},qn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},qn.prototype.get=function(e){var t=this.__data__;if(Nn){var n=t[e];return n===o?a:n}return Le.call(t,e)?t[e]:a},qn.prototype.has=function(e){var t=this.__data__;return Nn?t[e]!==a:Le.call(t,e)},qn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Nn&&t===a?o:t,this},Xn.prototype.clear=function(){this.__data__=[],this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ke.call(t,n,1),--this.size,!0)},Xn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?a:t[n][1]},Xn.prototype.has=function(e){return rr(this.__data__,e)>-1},Xn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new qn,map:new(En||Xn),string:new qn}},Yn.prototype.delete=function(e){var t=ci(this,e).delete(e);return this.size-=t?1:0,t},Yn.prototype.get=function(e){return ci(this,e).get(e)},Yn.prototype.has=function(e){return ci(this,e).has(e)},Yn.prototype.set=function(e,t){var n=ci(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(e){return this.__data__.set(e,o),this},Kn.prototype.has=function(e){return this.__data__.has(e)},Zn.prototype.clear=function(){this.__data__=new Xn,this.size=0},Zn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Zn.prototype.get=function(e){return this.__data__.get(e)},Zn.prototype.has=function(e){return this.__data__.has(e)},Zn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Xn){var r=n.__data__;if(!En||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(e,t),this.size=n.size,this};var hr=Da(wr),pr=Da(kr,!0);function vr(e,t){var n=!0;return hr(e,(function(e,r,a){return n=!!t(e,r,a)})),n}function mr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(null!=s&&(u===a?s===s&&!cs(s):n(s,u)))var u=s,l=o}return l}function gr(e,t){var n=[];return hr(e,(function(e,r,a){t(e,r,a)&&n.push(e)})),n}function yr(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=yi),a||(a=[]);++i<o;){var s=e[i];t>0&&n(s)?t>1?yr(s,t-1,n,r,a):Dt(a,s):r||(a[a.length]=s)}return a}var br=La(),xr=La(!0);function wr(e,t){return e&&br(e,t,Os)}function kr(e,t){return e&&xr(e,t,Os)}function Sr(e,t){return Nt(t,(function(t){return Jo(e[t])}))}function _r(e,t){for(var n=0,r=(t=xa(t,e)).length;null!=e&&n<r;)e=e[Fi(t[n++])];return n&&n==r?e:a}function Cr(e,t,n){var r=t(e);return qo(e)?r:Dt(r,n(e))}function Er(e){return null==e?e===a?"[object Undefined]":"[object Null]":et&&et in Ee(e)?function(e){var t=Le.call(e,et),n=e[et];try{e[et]=a;var r=!0}catch(o){}var i=Fe.call(e);r&&(t?e[et]=n:delete e[et]);return i}(e):function(e){return Fe.call(e)}(e)}function Tr(e,t){return e>t}function Ir(e,t){return null!=e&&Le.call(e,t)}function Ar(e,t){return null!=e&&t in Ee(e)}function Nr(e,t,r){for(var i=r?Mt:Rt,o=e[0].length,s=e.length,u=s,l=n(s),c=1/0,f=[];u--;){var d=e[u];u&&t&&(d=Ot(d,Qt(t))),c=xn(d.length,c),l[u]=!r&&(t||o>=120&&d.length>=120)?new Kn(u&&d):a}d=e[0];var h=-1,p=l[0];e:for(;++h<o&&f.length<c;){var v=d[h],m=t?t(v):v;if(v=r||0!==v?v:0,!(p?Jt(p,m):i(f,m,r))){for(u=s;--u;){var g=l[u];if(!(g?Jt(g,m):i(e[u],m,r)))continue e}p&&p.push(m),f.push(v)}}return f}function Rr(e,t,n){var r=null==(e=Ii(e,t=xa(t,e)))?e:e[Fi(Qi(t))];return null==r?a:Ct(r,e,n)}function Mr(e){return rs(e)&&Er(e)==y}function Or(e,t,n,r,i){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!==e&&t!==t:function(e,t,n,r,i,o){var s=qo(e),u=qo(t),l=s?b:vi(e),c=u?b:vi(t),f=(l=l==y?T:l)==T,d=(c=c==y?T:c)==T,h=l==c;if(h&&Zo(e)){if(!Zo(t))return!1;s=!0,f=!1}if(h&&!f)return o||(o=new Zn),s||fs(e)?ni(e,t,n,r,i,o):function(e,t,n,r,a,i,o){switch(n){case L:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!i(new Ve(e),new Ve(t)));case x:case w:case E:return Wo(+e,+t);case k:return e.name==t.name&&e.message==t.message;case A:case R:return e==t+"";case C:var s=un;case N:var u=1&r;if(s||(s=fn),e.size!=t.size&&!u)return!1;var l=o.get(e);if(l)return l==t;r|=2,o.set(e,t);var c=ni(s(e),s(t),r,a,i,o);return o.delete(e),c;case M:if(Bn)return Bn.call(e)==Bn.call(t)}return!1}(e,t,l,n,r,i,o);if(!(1&n)){var p=f&&Le.call(e,"__wrapped__"),v=d&&Le.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,g=v?t.value():t;return o||(o=new Zn),i(m,g,n,r,o)}}if(!h)return!1;return o||(o=new Zn),function(e,t,n,r,i,o){var s=1&n,u=ai(e),l=u.length,c=ai(t).length;if(l!=c&&!s)return!1;var f=l;for(;f--;){var d=u[f];if(!(s?d in t:Le.call(t,d)))return!1}var h=o.get(e),p=o.get(t);if(h&&p)return h==t&&p==e;var v=!0;o.set(e,t),o.set(t,e);var m=s;for(;++f<l;){var g=e[d=u[f]],y=t[d];if(r)var b=s?r(y,g,d,t,e,o):r(g,y,d,e,t,o);if(!(b===a?g===y||i(g,y,n,r,o):b)){v=!1;break}m||(m="constructor"==d)}if(v&&!m){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(v=!1)}return o.delete(e),o.delete(t),v}(e,t,n,r,i,o)}(e,t,n,r,Or,i))}function Dr(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=Ee(e);i--;){var u=n[i];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<o;){var l=(u=n[i])[0],c=e[l],f=u[1];if(s&&u[2]){if(c===a&&!(l in e))return!1}else{var d=new Zn;if(r)var h=r(c,f,l,e,t,d);if(!(h===a?Or(f,c,3,r,d):h))return!1}}return!0}function Lr(e){return!(!ns(e)||(t=e,Pe&&Pe in t))&&(Jo(e)?Ue:ye).test(Bi(e));var t}function jr(e){return"function"==typeof e?e:null==e?iu:"object"==typeof e?qo(e)?Wr(e[0],e[1]):Ur(e):pu(e)}function Pr(e){if(!_i(e))return yn(e);var t=[];for(var n in Ee(e))Le.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Fr(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var n in Ee(e))t.push(n);return t}(e);var t=_i(e),n=[];for(var r in e)("constructor"!=r||!t&&Le.call(e,r))&&n.push(r);return n}function Br(e,t){return e<t}function zr(e,t){var r=-1,a=Yo(e)?n(e.length):[];return hr(e,(function(e,n,i){a[++r]=t(e,n,i)})),a}function Ur(e){var t=fi(e);return 1==t.length&&t[0][2]?Ei(t[0][0],t[0][1]):function(n){return n===e||Dr(n,e,t)}}function Wr(e,t){return wi(e)&&Ci(t)?Ei(Fi(e),t):function(n){var r=Is(n,e);return r===a&&r===t?As(n,e):Or(t,r,3)}}function Gr(e,t,n,r,i){e!==t&&br(t,(function(o,s){if(i||(i=new Zn),ns(o))!function(e,t,n,r,i,o,s){var u=Ni(e,n),l=Ni(t,n),c=s.get(l);if(c)return void tr(e,n,c);var f=o?o(u,l,n+"",e,t,s):a,d=f===a;if(d){var h=qo(l),p=!h&&Zo(l),v=!h&&!p&&fs(l);f=l,h||p||v?qo(u)?f=u:Ko(u)?f=Na(u):p?(d=!1,f=_a(l,!0)):v?(d=!1,f=Ea(l,!0)):f=[]:os(l)||Ho(l)?(f=u,Ho(u)?f=bs(u):ns(u)&&!Jo(u)||(f=gi(l))):d=!1}d&&(s.set(l,f),i(f,l,r,o,s),s.delete(l));tr(e,n,f)}(e,t,s,n,Gr,r,i);else{var u=r?r(Ni(e,s),o,s+"",e,t,i):a;u===a&&(u=o),tr(e,s,u)}}),Ds)}function Vr(e,t){var n=e.length;if(n)return bi(t+=t<0?n:0,n)?e[t]:a}function Hr(e,t,n){t=t.length?Ot(t,(function(e){return qo(e)?function(t){return _r(t,1===e.length?e[0]:e)}:e})):[iu];var r=-1;t=Ot(t,Qt(li()));var a=zr(e,(function(e,n,a){var i=Ot(t,(function(t){return t(e)}));return{criteria:i,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(a,(function(e,t){return function(e,t,n){var r=-1,a=e.criteria,i=t.criteria,o=a.length,s=n.length;for(;++r<o;){var u=Ta(a[r],i[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function qr(e,t,n){for(var r=-1,a=t.length,i={};++r<a;){var o=t[r],s=_r(e,o);n(s,o)&&ea(i,xa(o,e),s)}return i}function Xr(e,t,n,r){var a=r?Wt:Ut,i=-1,o=t.length,s=e;for(e===t&&(t=Na(t)),n&&(s=Ot(e,Qt(n)));++i<o;)for(var u=0,l=t[i],c=n?n(l):l;(u=a(s,c,u,r))>-1;)s!==e&&Ke.call(s,u,1),Ke.call(e,u,1);return e}function Yr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var a=t[n];if(n==r||a!==i){var i=a;bi(a)?Ke.call(e,a,1):da(e,a)}}return e}function Kr(e,t){return e+vt(Sn()*(t-e+1))}function Zr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function Qr(e,t){return Oi(Ti(e,t,iu),e+"")}function $r(e){return $n(Ws(e))}function Jr(e,t){var n=Ws(e);return ji(n,ur(t,0,n.length))}function ea(e,t,n,r){if(!ns(e))return e;for(var i=-1,o=(t=xa(t,e)).length,s=o-1,u=e;null!=u&&++i<o;){var l=Fi(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=s){var f=u[l];(c=r?r(f,l,u):a)===a&&(c=ns(f)?f:bi(t[i+1])?[]:{})}nr(u,l,c),u=u[l]}return e}var ta=Rn?function(e,t){return Rn.set(e,t),e}:iu,na=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:nu(t),writable:!0})}:iu;function ra(e){return ji(Ws(e))}function aa(e,t,r){var a=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=n(i);++a<i;)o[a]=e[a+t];return o}function ia(e,t){var n;return hr(e,(function(e,r,a){return!(n=t(e,r,a))})),!!n}function oa(e,t,n){var r=0,a=null==e?r:e.length;if("number"==typeof t&&t===t&&a<=2147483647){for(;r<a;){var i=r+a>>>1,o=e[i];null!==o&&!cs(o)&&(n?o<=t:o<t)?r=i+1:a=i}return a}return sa(e,t,iu,n)}function sa(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!==t,u=null===t,l=cs(t),c=t===a;i<o;){var f=vt((i+o)/2),d=n(e[f]),h=d!==a,p=null===d,v=d===d,m=cs(d);if(s)var g=r||v;else g=c?v&&(r||h):u?v&&h&&(r||!p):l?v&&h&&!p&&(r||!m):!p&&!m&&(r?d<=t:d<t);g?i=f+1:o=f}return xn(o,4294967294)}function ua(e,t){for(var n=-1,r=e.length,a=0,i=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Wo(s,u)){var u=s;i[a++]=0===o?0:o}}return i}function la(e){return"number"==typeof e?e:cs(e)?v:+e}function ca(e){if("string"==typeof e)return e;if(qo(e))return Ot(e,ca)+"";if(cs(e))return zn?zn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fa(e,t,n){var r=-1,a=Rt,i=e.length,o=!0,s=[],u=s;if(n)o=!1,a=Mt;else if(i>=200){var l=t?null:Za(e);if(l)return fn(l);o=!1,a=Jt,u=new Kn}else u=t?[]:s;e:for(;++r<i;){var c=e[r],f=t?t(c):c;if(c=n||0!==c?c:0,o&&f===f){for(var d=u.length;d--;)if(u[d]===f)continue e;t&&u.push(f),s.push(c)}else a(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}function da(e,t){return null==(e=Ii(e,t=xa(t,e)))||delete e[Fi(Qi(t))]}function ha(e,t,n,r){return ea(e,t,n(_r(e,t)),r)}function pa(e,t,n,r){for(var a=e.length,i=r?a:-1;(r?i--:++i<a)&&t(e[i],i,e););return n?aa(e,r?0:i,r?i+1:a):aa(e,r?i+1:0,r?a:i)}function va(e,t){var n=e;return n instanceof Hn&&(n=n.value()),Lt(t,(function(e,t){return t.func.apply(t.thisArg,Dt([e],t.args))}),n)}function ma(e,t,r){var a=e.length;if(a<2)return a?fa(e[0]):[];for(var i=-1,o=n(a);++i<a;)for(var s=e[i],u=-1;++u<a;)u!=i&&(o[i]=dr(o[i]||s,e[u],t,r));return fa(yr(o,1),t,r)}function ga(e,t,n){for(var r=-1,i=e.length,o=t.length,s={};++r<i;){var u=r<o?t[r]:a;n(s,e[r],u)}return s}function ya(e){return Ko(e)?e:[]}function ba(e){return"function"==typeof e?e:iu}function xa(e,t){return qo(e)?e:wi(e,t)?[e]:Pi(xs(e))}var wa=Qr;function ka(e,t,n){var r=e.length;return n=n===a?r:n,!t&&n>=r?e:aa(e,t,n)}var Sa=ut||function(e){return ht.clearTimeout(e)};function _a(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function Ca(e){var t=new e.constructor(e.byteLength);return new Ve(t).set(new Ve(e)),t}function Ea(e,t){var n=t?Ca(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ta(e,t){if(e!==t){var n=e!==a,r=null===e,i=e===e,o=cs(e),s=t!==a,u=null===t,l=t===t,c=cs(t);if(!u&&!c&&!o&&e>t||o&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||u&&n&&i||!s&&i||!l)return-1}return 0}function Ia(e,t,r,a){for(var i=-1,o=e.length,s=r.length,u=-1,l=t.length,c=bn(o-s,0),f=n(l+c),d=!a;++u<l;)f[u]=t[u];for(;++i<s;)(d||i<o)&&(f[r[i]]=e[i]);for(;c--;)f[u++]=e[i++];return f}function Aa(e,t,r,a){for(var i=-1,o=e.length,s=-1,u=r.length,l=-1,c=t.length,f=bn(o-u,0),d=n(f+c),h=!a;++i<f;)d[i]=e[i];for(var p=i;++l<c;)d[p+l]=t[l];for(;++s<u;)(h||i<o)&&(d[p+r[s]]=e[i++]);return d}function Na(e,t){var r=-1,a=e.length;for(t||(t=n(a));++r<a;)t[r]=e[r];return t}function Ra(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var u=t[o],l=r?r(n[u],e[u],u,n,e):a;l===a&&(l=e[u]),i?or(n,u,l):nr(n,u,l)}return n}function Ma(e,t){return function(n,r){var a=qo(n)?Et:ar,i=t?t():{};return a(n,e,li(r,2),i)}}function Oa(e){return Qr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:a,s=i>2?n[2]:a;for(o=e.length>3&&"function"==typeof o?(i--,o):a,s&&xi(n[0],n[1],s)&&(o=i<3?a:o,i=1),t=Ee(t);++r<i;){var u=n[r];u&&e(t,u,r,o)}return t}))}function Da(e,t){return function(n,r){if(null==n)return n;if(!Yo(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Ee(n);(t?i--:++i<a)&&!1!==r(o[i],i,o););return n}}function La(e){return function(t,n,r){for(var a=-1,i=Ee(t),o=r(t),s=o.length;s--;){var u=o[e?s:++a];if(!1===n(i[u],u,i))break}return t}}function ja(e){return function(t){var n=sn(t=xs(t))?pn(t):a,r=n?n[0]:t.charAt(0),i=n?ka(n,1).join(""):t.slice(1);return r[e]()+i}}function Pa(e){return function(t){return Lt(Js(Hs(t).replace($e,"")),e,"")}}function Fa(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Wn(e.prototype),r=e.apply(n,t);return ns(r)?r:n}}function Ba(e){return function(t,n,r){var i=Ee(t);if(!Yo(t)){var o=li(n,3);t=Os(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:a}}function za(e){return ri((function(t){var n=t.length,r=n,o=Vn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Ae(i);if(o&&!u&&"wrapper"==si(s))var u=new Vn([],!0)}for(r=u?r:n;++r<n;){var l=si(s=t[r]),c="wrapper"==l?oi(s):a;u=c&&ki(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[si(c[0])].apply(u,c[3]):1==s.length&&ki(s)?u[l]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&qo(r))return u.plant(r).value();for(var a=0,i=n?t[a].apply(this,e):r;++a<n;)i=t[a].call(this,i);return i}}))}function Ua(e,t,r,i,o,s,u,l,c,d){var h=t&f,p=1&t,v=2&t,m=24&t,g=512&t,y=v?a:Fa(e);return function a(){for(var f=arguments.length,b=n(f),x=f;x--;)b[x]=arguments[x];if(m)var w=ui(a),k=nn(b,w);if(i&&(b=Ia(b,i,o,m)),s&&(b=Aa(b,s,u,m)),f-=k,m&&f<d){var S=cn(b,w);return Ya(e,t,Ua,a.placeholder,r,b,S,l,c,d-f)}var _=p?r:this,C=v?_[e]:e;return f=b.length,l?b=Ai(b,l):g&&f>1&&b.reverse(),h&&c<f&&(b.length=c),this&&this!==ht&&this instanceof a&&(C=y||Fa(C)),C.apply(_,b)}}function Wa(e,t){return function(n,r){return function(e,t,n,r){return wr(e,(function(e,a,i){t(r,n(e),a,i)})),r}(n,e,t(r),{})}}function Ga(e,t){return function(n,r){var i;if(n===a&&r===a)return t;if(n!==a&&(i=n),r!==a){if(i===a)return r;"string"==typeof n||"string"==typeof r?(n=ca(n),r=ca(r)):(n=la(n),r=la(r)),i=e(n,r)}return i}}function Va(e){return ri((function(t){return t=Ot(t,Qt(li())),Qr((function(n){var r=this;return e(t,(function(e){return Ct(e,r,n)}))}))}))}function Ha(e,t){var n=(t=t===a?" ":ca(t)).length;if(n<2)return n?Zr(t,e):t;var r=Zr(t,pt(e/hn(t)));return sn(t)?ka(pn(r),0,e).join(""):r.slice(0,e)}function qa(e){return function(t,r,i){return i&&"number"!=typeof i&&xi(t,r,i)&&(r=i=a),t=vs(t),r===a?(r=t,t=0):r=vs(r),function(e,t,r,a){for(var i=-1,o=bn(pt((t-e)/(r||1)),0),s=n(o);o--;)s[a?o:++i]=e,e+=r;return s}(t,r,i=i===a?t<r?1:-1:vs(i),e)}}function Xa(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ys(t),n=ys(n)),e(t,n)}}function Ya(e,t,n,r,i,o,s,u,f,d){var h=8&t;t|=h?l:c,4&(t&=~(h?c:l))||(t&=-4);var p=[e,t,i,h?o:a,h?s:a,h?a:o,h?a:s,u,f,d],v=n.apply(a,p);return ki(e)&&Ri(v,p),v.placeholder=r,Di(v,e,t)}function Ka(e){var t=Ce[e];return function(e,n){if(e=ys(e),(n=null==n?0:xn(ms(n),292))&&Ft(e)){var r=(xs(e)+"e").split("e");return+((r=(xs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Za=In&&1/fn(new In([,-0]))[1]==h?function(e){return new In(e)}:cu;function Qa(e){return function(t){var n=vi(t);return n==C?un(t):n==N?dn(t):function(e,t){return Ot(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function $a(e,t,r,o,h,p,v,m){var g=2&t;if(!g&&"function"!=typeof e)throw new Ae(i);var y=o?o.length:0;if(y||(t&=-97,o=h=a),v=v===a?v:bn(ms(v),0),m=m===a?m:ms(m),y-=h?h.length:0,t&c){var b=o,x=h;o=h=a}var w=g?a:oi(e),k=[e,t,r,o,h,b,x,p,v,m];if(w&&function(e,t){var n=e[1],r=t[1],a=n|r,i=a<131,o=r==f&&8==n||r==f&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!i&&!o)return e;1&r&&(e[2]=t[2],a|=1&n?0:4);var u=t[3];if(u){var l=e[3];e[3]=l?Ia(l,u,t[4]):u,e[4]=l?cn(e[3],s):t[4]}(u=t[5])&&(l=e[5],e[5]=l?Aa(l,u,t[6]):u,e[6]=l?cn(e[5],s):t[6]);(u=t[7])&&(e[7]=u);r&f&&(e[8]=null==e[8]?t[8]:xn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=a}(k,w),e=k[0],t=k[1],r=k[2],o=k[3],h=k[4],!(m=k[9]=k[9]===a?g?0:e.length:bn(k[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==u?function(e,t,r){var i=Fa(e);return function o(){for(var s=arguments.length,u=n(s),l=s,c=ui(o);l--;)u[l]=arguments[l];var f=s<3&&u[0]!==c&&u[s-1]!==c?[]:cn(u,c);return(s-=f.length)<r?Ya(e,t,Ua,o.placeholder,a,u,f,a,a,r-s):Ct(this&&this!==ht&&this instanceof o?i:e,this,u)}}(e,t,m):t!=l&&33!=t||h.length?Ua.apply(a,k):function(e,t,r,a){var i=1&t,o=Fa(e);return function t(){for(var s=-1,u=arguments.length,l=-1,c=a.length,f=n(c+u),d=this&&this!==ht&&this instanceof t?o:e;++l<c;)f[l]=a[l];for(;u--;)f[l++]=arguments[++s];return Ct(d,i?r:this,f)}}(e,t,r,o);else var S=function(e,t,n){var r=1&t,a=Fa(e);return function t(){return(this&&this!==ht&&this instanceof t?a:e).apply(r?n:this,arguments)}}(e,t,r);return Di((w?ta:Ri)(S,k),e,t)}function Ja(e,t,n,r){return e===a||Wo(e,Me[n])&&!Le.call(r,n)?t:e}function ei(e,t,n,r,i,o){return ns(e)&&ns(t)&&(o.set(t,e),Gr(e,t,a,ei,o),o.delete(t)),e}function ti(e){return os(e)?a:e}function ni(e,t,n,r,i,o){var s=1&n,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=o.get(e),f=o.get(t);if(c&&f)return c==t&&f==e;var d=-1,h=!0,p=2&n?new Kn:a;for(o.set(e,t),o.set(t,e);++d<u;){var v=e[d],m=t[d];if(r)var g=s?r(m,v,d,t,e,o):r(v,m,d,e,t,o);if(g!==a){if(g)continue;h=!1;break}if(p){if(!Pt(t,(function(e,t){if(!Jt(p,t)&&(v===e||i(v,e,n,r,o)))return p.push(t)}))){h=!1;break}}else if(v!==m&&!i(v,m,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function ri(e){return Oi(Ti(e,a,qi),e+"")}function ai(e){return Cr(e,Os,hi)}function ii(e){return Cr(e,Ds,pi)}var oi=Rn?function(e){return Rn.get(e)}:cu;function si(e){for(var t=e.name+"",n=Mn[t],r=Le.call(Mn,t)?n.length:0;r--;){var a=n[r],i=a.func;if(null==i||i==e)return a.name}return t}function ui(e){return(Le.call(Un,"placeholder")?Un:e).placeholder}function li(){var e=Un.iteratee||ou;return e=e===ou?jr:e,arguments.length?e(arguments[0],arguments[1]):e}function ci(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function fi(e){for(var t=Os(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,Ci(a)]}return t}function di(e,t){var n=function(e,t){return null==e?a:e[t]}(e,t);return Lr(n)?n:a}var hi=gt?function(e){return null==e?[]:(e=Ee(e),Nt(gt(e),(function(t){return Ye.call(e,t)})))}:gu,pi=gt?function(e){for(var t=[];e;)Dt(t,hi(e)),e=qe(e);return t}:gu,vi=Er;function mi(e,t,n){for(var r=-1,a=(t=xa(t,e)).length,i=!1;++r<a;){var o=Fi(t[r]);if(!(i=null!=e&&n(e,o)))break;e=e[o]}return i||++r!=a?i:!!(a=null==e?0:e.length)&&ts(a)&&bi(o,a)&&(qo(e)||Ho(e))}function gi(e){return"function"!=typeof e.constructor||_i(e)?{}:Wn(qe(e))}function yi(e){return qo(e)||Ho(e)||!!(Ze&&e&&e[Ze])}function bi(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&xe.test(e))&&e>-1&&e%1==0&&e<t}function xi(e,t,n){if(!ns(n))return!1;var r=typeof t;return!!("number"==r?Yo(n)&&bi(t,n.length):"string"==r&&t in n)&&Wo(n[t],e)}function wi(e,t){if(qo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!cs(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Ee(t))}function ki(e){var t=si(e),n=Un[t];if("function"!=typeof n||!(t in Hn.prototype))return!1;if(e===n)return!0;var r=oi(n);return!!r&&e===r[0]}(Cn&&vi(new Cn(new ArrayBuffer(1)))!=L||En&&vi(new En)!=C||Tn&&vi(Tn.resolve())!=I||In&&vi(new In)!=N||An&&vi(new An)!=O)&&(vi=function(e){var t=Er(e),n=t==T?e.constructor:a,r=n?Bi(n):"";if(r)switch(r){case On:return L;case Dn:return C;case Ln:return I;case jn:return N;case Pn:return O}return t});var Si=Oe?Jo:yu;function _i(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Me)}function Ci(e){return e===e&&!ns(e)}function Ei(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==a||e in Ee(n)))}}function Ti(e,t,r){return t=bn(t===a?e.length-1:t,0),function(){for(var a=arguments,i=-1,o=bn(a.length-t,0),s=n(o);++i<o;)s[i]=a[t+i];i=-1;for(var u=n(t+1);++i<t;)u[i]=a[i];return u[t]=r(s),Ct(e,this,u)}}function Ii(e,t){return t.length<2?e:_r(e,aa(t,0,-1))}function Ai(e,t){for(var n=e.length,r=xn(t.length,n),i=Na(e);r--;){var o=t[r];e[r]=bi(o,n)?i[o]:a}return e}function Ni(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ri=Li(ta),Mi=dt||function(e,t){return ht.setTimeout(e,t)},Oi=Li(na);function Di(e,t,n){var r=t+"";return Oi(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ue,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Tt(g,(function(n){var r="_."+n[0];t&n[1]&&!Rt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(ce):[]}(r),n)))}function Li(e){var t=0,n=0;return function(){var r=wn(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(a,arguments)}}function ji(e,t){var n=-1,r=e.length,i=r-1;for(t=t===a?r:t;++n<t;){var o=Kr(n,i),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Pi=function(e){var t=jo(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,a){t.push(r?a.replace(he,"$1"):n||e)})),t}));function Fi(e){if("string"==typeof e||cs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bi(e){if(null!=e){try{return De.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function zi(e){if(e instanceof Hn)return e.clone();var t=new Vn(e.__wrapped__,e.__chain__);return t.__actions__=Na(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ui=Qr((function(e,t){return Ko(e)?dr(e,yr(t,1,Ko,!0)):[]})),Wi=Qr((function(e,t){var n=Qi(t);return Ko(n)&&(n=a),Ko(e)?dr(e,yr(t,1,Ko,!0),li(n,2)):[]})),Gi=Qr((function(e,t){var n=Qi(t);return Ko(n)&&(n=a),Ko(e)?dr(e,yr(t,1,Ko,!0),a,n):[]}));function Vi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:ms(n);return a<0&&(a=bn(r+a,0)),zt(e,li(t,3),a)}function Hi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==a&&(i=ms(n),i=n<0?bn(r+i,0):xn(i,r-1)),zt(e,li(t,3),i,!0)}function qi(e){return(null==e?0:e.length)?yr(e,1):[]}function Xi(e){return e&&e.length?e[0]:a}var Yi=Qr((function(e){var t=Ot(e,ya);return t.length&&t[0]===e[0]?Nr(t):[]})),Ki=Qr((function(e){var t=Qi(e),n=Ot(e,ya);return t===Qi(n)?t=a:n.pop(),n.length&&n[0]===e[0]?Nr(n,li(t,2)):[]})),Zi=Qr((function(e){var t=Qi(e),n=Ot(e,ya);return(t="function"==typeof t?t:a)&&n.pop(),n.length&&n[0]===e[0]?Nr(n,a,t):[]}));function Qi(e){var t=null==e?0:e.length;return t?e[t-1]:a}var $i=Qr(Ji);function Ji(e,t){return e&&e.length&&t&&t.length?Xr(e,t):e}var eo=ri((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Yr(e,Ot(t,(function(e){return bi(e,n)?+e:e})).sort(Ta)),r}));function to(e){return null==e?e:_n.call(e)}var no=Qr((function(e){return fa(yr(e,1,Ko,!0))})),ro=Qr((function(e){var t=Qi(e);return Ko(t)&&(t=a),fa(yr(e,1,Ko,!0),li(t,2))})),ao=Qr((function(e){var t=Qi(e);return t="function"==typeof t?t:a,fa(yr(e,1,Ko,!0),a,t)}));function io(e){if(!e||!e.length)return[];var t=0;return e=Nt(e,(function(e){if(Ko(e))return t=bn(e.length,t),!0})),Kt(t,(function(t){return Ot(e,Ht(t))}))}function oo(e,t){if(!e||!e.length)return[];var n=io(e);return null==t?n:Ot(n,(function(e){return Ct(t,a,e)}))}var so=Qr((function(e,t){return Ko(e)?dr(e,t):[]})),uo=Qr((function(e){return ma(Nt(e,Ko))})),lo=Qr((function(e){var t=Qi(e);return Ko(t)&&(t=a),ma(Nt(e,Ko),li(t,2))})),co=Qr((function(e){var t=Qi(e);return t="function"==typeof t?t:a,ma(Nt(e,Ko),a,t)})),fo=Qr(io);var ho=Qr((function(e){var t=e.length,n=t>1?e[t-1]:a;return n="function"==typeof n?(e.pop(),n):a,oo(e,n)}));function po(e){var t=Un(e);return t.__chain__=!0,t}function vo(e,t){return t(e)}var mo=ri((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Hn&&bi(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:vo,args:[i],thisArg:a}),new Vn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(a),e}))):this.thru(i)}));var go=Ma((function(e,t,n){Le.call(e,n)?++e[n]:or(e,n,1)}));var yo=Ba(Vi),bo=Ba(Hi);function xo(e,t){return(qo(e)?Tt:hr)(e,li(t,3))}function wo(e,t){return(qo(e)?It:pr)(e,li(t,3))}var ko=Ma((function(e,t,n){Le.call(e,n)?e[n].push(t):or(e,n,[t])}));var So=Qr((function(e,t,r){var a=-1,i="function"==typeof t,o=Yo(e)?n(e.length):[];return hr(e,(function(e){o[++a]=i?Ct(t,e,r):Rr(e,t,r)})),o})),_o=Ma((function(e,t,n){or(e,n,t)}));function Co(e,t){return(qo(e)?Ot:zr)(e,li(t,3))}var Eo=Ma((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var To=Qr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&xi(e,t[0],t[1])?t=[]:n>2&&xi(t[0],t[1],t[2])&&(t=[t[0]]),Hr(e,yr(t,1),[])})),Io=ft||function(){return ht.Date.now()};function Ao(e,t,n){return t=n?a:t,t=e&&null==t?e.length:t,$a(e,f,a,a,a,a,t)}function No(e,t){var n;if("function"!=typeof t)throw new Ae(i);return e=ms(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var Ro=Qr((function(e,t,n){var r=1;if(n.length){var a=cn(n,ui(Ro));r|=l}return $a(e,r,t,n,a)})),Mo=Qr((function(e,t,n){var r=3;if(n.length){var a=cn(n,ui(Mo));r|=l}return $a(t,r,e,n,a)}));function Oo(e,t,n){var r,o,s,u,l,c,f=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new Ae(i);function v(t){var n=r,i=o;return r=o=a,f=t,u=e.apply(i,n)}function m(e){return f=e,l=Mi(y,t),d?v(e):u}function g(e){var n=e-c;return c===a||n>=t||n<0||h&&e-f>=s}function y(){var e=Io();if(g(e))return b(e);l=Mi(y,function(e){var n=t-(e-c);return h?xn(n,s-(e-f)):n}(e))}function b(e){return l=a,p&&r?v(e):(r=o=a,u)}function x(){var e=Io(),n=g(e);if(r=arguments,o=this,c=e,n){if(l===a)return m(c);if(h)return Sa(l),l=Mi(y,t),v(c)}return l===a&&(l=Mi(y,t)),u}return t=ys(t)||0,ns(n)&&(d=!!n.leading,s=(h="maxWait"in n)?bn(ys(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),x.cancel=function(){l!==a&&Sa(l),f=0,r=c=o=l=a},x.flush=function(){return l===a?u:b(Io())},x}var Do=Qr((function(e,t){return fr(e,1,t)})),Lo=Qr((function(e,t,n){return fr(e,ys(t)||0,n)}));function jo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ae(i);var n=function n(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(jo.Cache||Yn),n}function Po(e){if("function"!=typeof e)throw new Ae(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}jo.Cache=Yn;var Fo=wa((function(e,t){var n=(t=1==t.length&&qo(t[0])?Ot(t[0],Qt(li())):Ot(yr(t,1),Qt(li()))).length;return Qr((function(r){for(var a=-1,i=xn(r.length,n);++a<i;)r[a]=t[a].call(this,r[a]);return Ct(e,this,r)}))})),Bo=Qr((function(e,t){var n=cn(t,ui(Bo));return $a(e,l,a,t,n)})),zo=Qr((function(e,t){var n=cn(t,ui(zo));return $a(e,c,a,t,n)})),Uo=ri((function(e,t){return $a(e,d,a,a,a,t)}));function Wo(e,t){return e===t||e!==e&&t!==t}var Go=Xa(Tr),Vo=Xa((function(e,t){return e>=t})),Ho=Mr(function(){return arguments}())?Mr:function(e){return rs(e)&&Le.call(e,"callee")&&!Ye.call(e,"callee")},qo=n.isArray,Xo=bt?Qt(bt):function(e){return rs(e)&&Er(e)==D};function Yo(e){return null!=e&&ts(e.length)&&!Jo(e)}function Ko(e){return rs(e)&&Yo(e)}var Zo=yt||yu,Qo=xt?Qt(xt):function(e){return rs(e)&&Er(e)==w};function $o(e){if(!rs(e))return!1;var t=Er(e);return t==k||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!os(e)}function Jo(e){if(!ns(e))return!1;var t=Er(e);return t==S||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function es(e){return"number"==typeof e&&e==ms(e)}function ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var as=wt?Qt(wt):function(e){return rs(e)&&vi(e)==C};function is(e){return"number"==typeof e||rs(e)&&Er(e)==E}function os(e){if(!rs(e)||Er(e)!=T)return!1;var t=qe(e);if(null===t)return!0;var n=Le.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&De.call(n)==Be}var ss=kt?Qt(kt):function(e){return rs(e)&&Er(e)==A};var us=St?Qt(St):function(e){return rs(e)&&vi(e)==N};function ls(e){return"string"==typeof e||!qo(e)&&rs(e)&&Er(e)==R}function cs(e){return"symbol"==typeof e||rs(e)&&Er(e)==M}var fs=_t?Qt(_t):function(e){return rs(e)&&ts(e.length)&&!!ot[Er(e)]};var ds=Xa(Br),hs=Xa((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(Yo(e))return ls(e)?pn(e):Na(e);if(Qe&&e[Qe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Qe]());var t=vi(e);return(t==C?un:t==N?fn:Ws)(e)}function vs(e){return e?(e=ys(e))===h||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ms(e){var t=vs(e),n=t%1;return t===t?n?t-n:t:0}function gs(e){return e?ur(ms(e),0,m):0}function ys(e){if("number"==typeof e)return e;if(cs(e))return v;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zt(e);var n=ge.test(e);return n||be.test(e)?ct(e.slice(2),n?2:8):me.test(e)?v:+e}function bs(e){return Ra(e,Ds(e))}function xs(e){return null==e?"":ca(e)}var ws=Oa((function(e,t){if(_i(t)||Yo(t))Ra(t,Os(t),e);else for(var n in t)Le.call(t,n)&&nr(e,n,t[n])})),ks=Oa((function(e,t){Ra(t,Ds(t),e)})),Ss=Oa((function(e,t,n,r){Ra(t,Ds(t),e,r)})),_s=Oa((function(e,t,n,r){Ra(t,Os(t),e,r)})),Cs=ri(sr);var Es=Qr((function(e,t){e=Ee(e);var n=-1,r=t.length,i=r>2?t[2]:a;for(i&&xi(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],s=Ds(o),u=-1,l=s.length;++u<l;){var c=s[u],f=e[c];(f===a||Wo(f,Me[c])&&!Le.call(e,c))&&(e[c]=o[c])}return e})),Ts=Qr((function(e){return e.push(a,ei),Ct(js,a,e)}));function Is(e,t,n){var r=null==e?a:_r(e,t);return r===a?n:r}function As(e,t){return null!=e&&mi(e,t,Ar)}var Ns=Wa((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),nu(iu)),Rs=Wa((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Le.call(e,t)?e[t].push(n):e[t]=[n]}),li),Ms=Qr(Rr);function Os(e){return Yo(e)?Qn(e):Pr(e)}function Ds(e){return Yo(e)?Qn(e,!0):Fr(e)}var Ls=Oa((function(e,t,n){Gr(e,t,n)})),js=Oa((function(e,t,n,r){Gr(e,t,n,r)})),Ps=ri((function(e,t){var n={};if(null==e)return n;var r=!1;t=Ot(t,(function(t){return t=xa(t,e),r||(r=t.length>1),t})),Ra(e,ii(e),n),r&&(n=lr(n,7,ti));for(var a=t.length;a--;)da(n,t[a]);return n}));var Fs=ri((function(e,t){return null==e?{}:function(e,t){return qr(e,t,(function(t,n){return As(e,n)}))}(e,t)}));function Bs(e,t){if(null==e)return{};var n=Ot(ii(e),(function(e){return[e]}));return t=li(t),qr(e,n,(function(e,n){return t(e,n[0])}))}var zs=Qa(Os),Us=Qa(Ds);function Ws(e){return null==e?[]:$t(e,Os(e))}var Gs=Pa((function(e,t,n){return t=t.toLowerCase(),e+(n?Vs(t):t)}));function Vs(e){return $s(xs(e).toLowerCase())}function Hs(e){return(e=xs(e))&&e.replace(we,rn).replace(Je,"")}var qs=Pa((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Xs=Pa((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ys=ja("toLowerCase");var Ks=Pa((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Zs=Pa((function(e,t,n){return e+(n?" ":"")+$s(t)}));var Qs=Pa((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),$s=ja("toUpperCase");function Js(e,t,n){return e=xs(e),(t=n?a:t)===a?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(fe)||[]}(e):e.match(t)||[]}var eu=Qr((function(e,t){try{return Ct(e,a,t)}catch(n){return $o(n)?n:new se(n)}})),tu=ri((function(e,t){return Tt(t,(function(t){t=Fi(t),or(e,t,Ro(e[t],e))})),e}));function nu(e){return function(){return e}}var ru=za(),au=za(!0);function iu(e){return e}function ou(e){return jr("function"==typeof e?e:lr(e,1))}var su=Qr((function(e,t){return function(n){return Rr(n,e,t)}})),uu=Qr((function(e,t){return function(n){return Rr(e,n,t)}}));function lu(e,t,n){var r=Os(t),a=Sr(t,r);null!=n||ns(t)&&(a.length||!r.length)||(n=t,t=e,e=this,a=Sr(t,Os(t)));var i=!(ns(n)&&"chain"in n)||!!n.chain,o=Jo(e);return Tt(a,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),a=n.__actions__=Na(this.__actions__);return a.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Dt([this.value()],arguments))})})),e}function cu(){}var fu=Va(Ot),du=Va(At),hu=Va(Pt);function pu(e){return wi(e)?Ht(Fi(e)):function(e){return function(t){return _r(t,e)}}(e)}var vu=qa(),mu=qa(!0);function gu(){return[]}function yu(){return!1}var bu=Ga((function(e,t){return e+t}),0),xu=Ka("ceil"),wu=Ga((function(e,t){return e/t}),1),ku=Ka("floor");var Su=Ga((function(e,t){return e*t}),1),_u=Ka("round"),Cu=Ga((function(e,t){return e-t}),0);return Un.after=function(e,t){if("function"!=typeof t)throw new Ae(i);return e=ms(e),function(){if(--e<1)return t.apply(this,arguments)}},Un.ary=Ao,Un.assign=ws,Un.assignIn=ks,Un.assignInWith=Ss,Un.assignWith=_s,Un.at=Cs,Un.before=No,Un.bind=Ro,Un.bindAll=tu,Un.bindKey=Mo,Un.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return qo(e)?e:[e]},Un.chain=po,Un.chunk=function(e,t,r){t=(r?xi(e,t,r):t===a)?1:bn(ms(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,u=n(pt(i/t));o<i;)u[s++]=aa(e,o,o+=t);return u},Un.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,a=[];++t<n;){var i=e[t];i&&(a[r++]=i)}return a},Un.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Dt(qo(r)?Na(r):[r],yr(t,1))},Un.cond=function(e){var t=null==e?0:e.length,n=li();return e=t?Ot(e,(function(e){if("function"!=typeof e[1])throw new Ae(i);return[n(e[0]),e[1]]})):[],Qr((function(n){for(var r=-1;++r<t;){var a=e[r];if(Ct(a[0],this,n))return Ct(a[1],this,n)}}))},Un.conforms=function(e){return function(e){var t=Os(e);return function(n){return cr(n,e,t)}}(lr(e,1))},Un.constant=nu,Un.countBy=go,Un.create=function(e,t){var n=Wn(e);return null==t?n:ir(n,t)},Un.curry=function e(t,n,r){var i=$a(t,8,a,a,a,a,a,n=r?a:n);return i.placeholder=e.placeholder,i},Un.curryRight=function e(t,n,r){var i=$a(t,u,a,a,a,a,a,n=r?a:n);return i.placeholder=e.placeholder,i},Un.debounce=Oo,Un.defaults=Es,Un.defaultsDeep=Ts,Un.defer=Do,Un.delay=Lo,Un.difference=Ui,Un.differenceBy=Wi,Un.differenceWith=Gi,Un.drop=function(e,t,n){var r=null==e?0:e.length;return r?aa(e,(t=n||t===a?1:ms(t))<0?0:t,r):[]},Un.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?aa(e,0,(t=r-(t=n||t===a?1:ms(t)))<0?0:t):[]},Un.dropRightWhile=function(e,t){return e&&e.length?pa(e,li(t,3),!0,!0):[]},Un.dropWhile=function(e,t){return e&&e.length?pa(e,li(t,3),!0):[]},Un.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&xi(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=ms(n))<0&&(n=-n>i?0:i+n),(r=r===a||r>i?i:ms(r))<0&&(r+=i),r=n>r?0:gs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Un.filter=function(e,t){return(qo(e)?Nt:gr)(e,li(t,3))},Un.flatMap=function(e,t){return yr(Co(e,t),1)},Un.flatMapDeep=function(e,t){return yr(Co(e,t),h)},Un.flatMapDepth=function(e,t,n){return n=n===a?1:ms(n),yr(Co(e,t),n)},Un.flatten=qi,Un.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,h):[]},Un.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===a?1:ms(t)):[]},Un.flip=function(e){return $a(e,512)},Un.flow=ru,Un.flowRight=au,Un.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var a=e[t];r[a[0]]=a[1]}return r},Un.functions=function(e){return null==e?[]:Sr(e,Os(e))},Un.functionsIn=function(e){return null==e?[]:Sr(e,Ds(e))},Un.groupBy=ko,Un.initial=function(e){return(null==e?0:e.length)?aa(e,0,-1):[]},Un.intersection=Yi,Un.intersectionBy=Ki,Un.intersectionWith=Zi,Un.invert=Ns,Un.invertBy=Rs,Un.invokeMap=So,Un.iteratee=ou,Un.keyBy=_o,Un.keys=Os,Un.keysIn=Ds,Un.map=Co,Un.mapKeys=function(e,t){var n={};return t=li(t,3),wr(e,(function(e,r,a){or(n,t(e,r,a),e)})),n},Un.mapValues=function(e,t){var n={};return t=li(t,3),wr(e,(function(e,r,a){or(n,r,t(e,r,a))})),n},Un.matches=function(e){return Ur(lr(e,1))},Un.matchesProperty=function(e,t){return Wr(e,lr(t,1))},Un.memoize=jo,Un.merge=Ls,Un.mergeWith=js,Un.method=su,Un.methodOf=uu,Un.mixin=lu,Un.negate=Po,Un.nthArg=function(e){return e=ms(e),Qr((function(t){return Vr(t,e)}))},Un.omit=Ps,Un.omitBy=function(e,t){return Bs(e,Po(li(t)))},Un.once=function(e){return No(2,e)},Un.orderBy=function(e,t,n,r){return null==e?[]:(qo(t)||(t=null==t?[]:[t]),qo(n=r?a:n)||(n=null==n?[]:[n]),Hr(e,t,n))},Un.over=fu,Un.overArgs=Fo,Un.overEvery=du,Un.overSome=hu,Un.partial=Bo,Un.partialRight=zo,Un.partition=Eo,Un.pick=Fs,Un.pickBy=Bs,Un.property=pu,Un.propertyOf=function(e){return function(t){return null==e?a:_r(e,t)}},Un.pull=$i,Un.pullAll=Ji,Un.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Xr(e,t,li(n,2)):e},Un.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Xr(e,t,a,n):e},Un.pullAt=eo,Un.range=vu,Un.rangeRight=mu,Un.rearg=Uo,Un.reject=function(e,t){return(qo(e)?Nt:gr)(e,Po(li(t,3)))},Un.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],i=e.length;for(t=li(t,3);++r<i;){var o=e[r];t(o,r,e)&&(n.push(o),a.push(r))}return Yr(e,a),n},Un.rest=function(e,t){if("function"!=typeof e)throw new Ae(i);return Qr(e,t=t===a?t:ms(t))},Un.reverse=to,Un.sampleSize=function(e,t,n){return t=(n?xi(e,t,n):t===a)?1:ms(t),(qo(e)?Jn:Jr)(e,t)},Un.set=function(e,t,n){return null==e?e:ea(e,t,n)},Un.setWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:ea(e,t,n,r)},Un.shuffle=function(e){return(qo(e)?er:ra)(e)},Un.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&xi(e,t,n)?(t=0,n=r):(t=null==t?0:ms(t),n=n===a?r:ms(n)),aa(e,t,n)):[]},Un.sortBy=To,Un.sortedUniq=function(e){return e&&e.length?ua(e):[]},Un.sortedUniqBy=function(e,t){return e&&e.length?ua(e,li(t,2)):[]},Un.split=function(e,t,n){return n&&"number"!=typeof n&&xi(e,t,n)&&(t=n=a),(n=n===a?m:n>>>0)?(e=xs(e))&&("string"==typeof t||null!=t&&!ss(t))&&!(t=ca(t))&&sn(e)?ka(pn(e),0,n):e.split(t,n):[]},Un.spread=function(e,t){if("function"!=typeof e)throw new Ae(i);return t=null==t?0:bn(ms(t),0),Qr((function(n){var r=n[t],a=ka(n,0,t);return r&&Dt(a,r),Ct(e,this,a)}))},Un.tail=function(e){var t=null==e?0:e.length;return t?aa(e,1,t):[]},Un.take=function(e,t,n){return e&&e.length?aa(e,0,(t=n||t===a?1:ms(t))<0?0:t):[]},Un.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?aa(e,(t=r-(t=n||t===a?1:ms(t)))<0?0:t,r):[]},Un.takeRightWhile=function(e,t){return e&&e.length?pa(e,li(t,3),!1,!0):[]},Un.takeWhile=function(e,t){return e&&e.length?pa(e,li(t,3)):[]},Un.tap=function(e,t){return t(e),e},Un.throttle=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new Ae(i);return ns(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Oo(e,t,{leading:r,maxWait:t,trailing:a})},Un.thru=vo,Un.toArray=ps,Un.toPairs=zs,Un.toPairsIn=Us,Un.toPath=function(e){return qo(e)?Ot(e,Fi):cs(e)?[e]:Na(Pi(xs(e)))},Un.toPlainObject=bs,Un.transform=function(e,t,n){var r=qo(e),a=r||Zo(e)||fs(e);if(t=li(t,4),null==n){var i=e&&e.constructor;n=a?r?new i:[]:ns(e)&&Jo(i)?Wn(qe(e)):{}}return(a?Tt:wr)(e,(function(e,r,a){return t(n,e,r,a)})),n},Un.unary=function(e){return Ao(e,1)},Un.union=no,Un.unionBy=ro,Un.unionWith=ao,Un.uniq=function(e){return e&&e.length?fa(e):[]},Un.uniqBy=function(e,t){return e&&e.length?fa(e,li(t,2)):[]},Un.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?fa(e,a,t):[]},Un.unset=function(e,t){return null==e||da(e,t)},Un.unzip=io,Un.unzipWith=oo,Un.update=function(e,t,n){return null==e?e:ha(e,t,ba(n))},Un.updateWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:ha(e,t,ba(n),r)},Un.values=Ws,Un.valuesIn=function(e){return null==e?[]:$t(e,Ds(e))},Un.without=so,Un.words=Js,Un.wrap=function(e,t){return Bo(ba(t),e)},Un.xor=uo,Un.xorBy=lo,Un.xorWith=co,Un.zip=fo,Un.zipObject=function(e,t){return ga(e||[],t||[],nr)},Un.zipObjectDeep=function(e,t){return ga(e||[],t||[],ea)},Un.zipWith=ho,Un.entries=zs,Un.entriesIn=Us,Un.extend=ks,Un.extendWith=Ss,lu(Un,Un),Un.add=bu,Un.attempt=eu,Un.camelCase=Gs,Un.capitalize=Vs,Un.ceil=xu,Un.clamp=function(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=(n=ys(n))===n?n:0),t!==a&&(t=(t=ys(t))===t?t:0),ur(ys(e),t,n)},Un.clone=function(e){return lr(e,4)},Un.cloneDeep=function(e){return lr(e,5)},Un.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:a)},Un.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:a)},Un.conformsTo=function(e,t){return null==t||cr(e,t,Os(t))},Un.deburr=Hs,Un.defaultTo=function(e,t){return null==e||e!==e?t:e},Un.divide=wu,Un.endsWith=function(e,t,n){e=xs(e),t=ca(t);var r=e.length,i=n=n===a?r:ur(ms(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Un.eq=Wo,Un.escape=function(e){return(e=xs(e))&&Q.test(e)?e.replace(K,an):e},Un.escapeRegExp=function(e){return(e=xs(e))&&ie.test(e)?e.replace(ae,"\\$&"):e},Un.every=function(e,t,n){var r=qo(e)?At:vr;return n&&xi(e,t,n)&&(t=a),r(e,li(t,3))},Un.find=yo,Un.findIndex=Vi,Un.findKey=function(e,t){return Bt(e,li(t,3),wr)},Un.findLast=bo,Un.findLastIndex=Hi,Un.findLastKey=function(e,t){return Bt(e,li(t,3),kr)},Un.floor=ku,Un.forEach=xo,Un.forEachRight=wo,Un.forIn=function(e,t){return null==e?e:br(e,li(t,3),Ds)},Un.forInRight=function(e,t){return null==e?e:xr(e,li(t,3),Ds)},Un.forOwn=function(e,t){return e&&wr(e,li(t,3))},Un.forOwnRight=function(e,t){return e&&kr(e,li(t,3))},Un.get=Is,Un.gt=Go,Un.gte=Vo,Un.has=function(e,t){return null!=e&&mi(e,t,Ir)},Un.hasIn=As,Un.head=Xi,Un.identity=iu,Un.includes=function(e,t,n,r){e=Yo(e)?e:Ws(e),n=n&&!r?ms(n):0;var a=e.length;return n<0&&(n=bn(a+n,0)),ls(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&Ut(e,t,n)>-1},Un.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:ms(n);return a<0&&(a=bn(r+a,0)),Ut(e,t,a)},Un.inRange=function(e,t,n){return t=vs(t),n===a?(n=t,t=0):n=vs(n),function(e,t,n){return e>=xn(t,n)&&e<bn(t,n)}(e=ys(e),t,n)},Un.invoke=Ms,Un.isArguments=Ho,Un.isArray=qo,Un.isArrayBuffer=Xo,Un.isArrayLike=Yo,Un.isArrayLikeObject=Ko,Un.isBoolean=function(e){return!0===e||!1===e||rs(e)&&Er(e)==x},Un.isBuffer=Zo,Un.isDate=Qo,Un.isElement=function(e){return rs(e)&&1===e.nodeType&&!os(e)},Un.isEmpty=function(e){if(null==e)return!0;if(Yo(e)&&(qo(e)||"string"==typeof e||"function"==typeof e.splice||Zo(e)||fs(e)||Ho(e)))return!e.length;var t=vi(e);if(t==C||t==N)return!e.size;if(_i(e))return!Pr(e).length;for(var n in e)if(Le.call(e,n))return!1;return!0},Un.isEqual=function(e,t){return Or(e,t)},Un.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:a)?n(e,t):a;return r===a?Or(e,t,a,n):!!r},Un.isError=$o,Un.isFinite=function(e){return"number"==typeof e&&Ft(e)},Un.isFunction=Jo,Un.isInteger=es,Un.isLength=ts,Un.isMap=as,Un.isMatch=function(e,t){return e===t||Dr(e,t,fi(t))},Un.isMatchWith=function(e,t,n){return n="function"==typeof n?n:a,Dr(e,t,fi(t),n)},Un.isNaN=function(e){return is(e)&&e!=+e},Un.isNative=function(e){if(Si(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Lr(e)},Un.isNil=function(e){return null==e},Un.isNull=function(e){return null===e},Un.isNumber=is,Un.isObject=ns,Un.isObjectLike=rs,Un.isPlainObject=os,Un.isRegExp=ss,Un.isSafeInteger=function(e){return es(e)&&e>=-9007199254740991&&e<=p},Un.isSet=us,Un.isString=ls,Un.isSymbol=cs,Un.isTypedArray=fs,Un.isUndefined=function(e){return e===a},Un.isWeakMap=function(e){return rs(e)&&vi(e)==O},Un.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==Er(e)},Un.join=function(e,t){return null==e?"":qt.call(e,t)},Un.kebabCase=qs,Un.last=Qi,Un.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==a&&(i=(i=ms(n))<0?bn(r+i,0):xn(i,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):zt(e,Gt,i,!0)},Un.lowerCase=Xs,Un.lowerFirst=Ys,Un.lt=ds,Un.lte=hs,Un.max=function(e){return e&&e.length?mr(e,iu,Tr):a},Un.maxBy=function(e,t){return e&&e.length?mr(e,li(t,2),Tr):a},Un.mean=function(e){return Vt(e,iu)},Un.meanBy=function(e,t){return Vt(e,li(t,2))},Un.min=function(e){return e&&e.length?mr(e,iu,Br):a},Un.minBy=function(e,t){return e&&e.length?mr(e,li(t,2),Br):a},Un.stubArray=gu,Un.stubFalse=yu,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=Su,Un.nth=function(e,t){return e&&e.length?Vr(e,ms(t)):a},Un.noConflict=function(){return ht._===this&&(ht._=ze),this},Un.noop=cu,Un.now=Io,Un.pad=function(e,t,n){e=xs(e);var r=(t=ms(t))?hn(e):0;if(!t||r>=t)return e;var a=(t-r)/2;return Ha(vt(a),n)+e+Ha(pt(a),n)},Un.padEnd=function(e,t,n){e=xs(e);var r=(t=ms(t))?hn(e):0;return t&&r<t?e+Ha(t-r,n):e},Un.padStart=function(e,t,n){e=xs(e);var r=(t=ms(t))?hn(e):0;return t&&r<t?Ha(t-r,n)+e:e},Un.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),kn(xs(e).replace(oe,""),t||0)},Un.random=function(e,t,n){if(n&&"boolean"!=typeof n&&xi(e,t,n)&&(t=n=a),n===a&&("boolean"==typeof t?(n=t,t=a):"boolean"==typeof e&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=vs(e),t===a?(t=e,e=0):t=vs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Sn();return xn(e+i*(t-e+lt("1e-"+((i+"").length-1))),t)}return Kr(e,t)},Un.reduce=function(e,t,n){var r=qo(e)?Lt:Xt,a=arguments.length<3;return r(e,li(t,4),n,a,hr)},Un.reduceRight=function(e,t,n){var r=qo(e)?jt:Xt,a=arguments.length<3;return r(e,li(t,4),n,a,pr)},Un.repeat=function(e,t,n){return t=(n?xi(e,t,n):t===a)?1:ms(t),Zr(xs(e),t)},Un.replace=function(){var e=arguments,t=xs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Un.result=function(e,t,n){var r=-1,i=(t=xa(t,e)).length;for(i||(i=1,e=a);++r<i;){var o=null==e?a:e[Fi(t[r])];o===a&&(r=i,o=n),e=Jo(o)?o.call(e):o}return e},Un.round=_u,Un.runInContext=e,Un.sample=function(e){return(qo(e)?$n:$r)(e)},Un.size=function(e){if(null==e)return 0;if(Yo(e))return ls(e)?hn(e):e.length;var t=vi(e);return t==C||t==N?e.size:Pr(e).length},Un.snakeCase=Ks,Un.some=function(e,t,n){var r=qo(e)?Pt:ia;return n&&xi(e,t,n)&&(t=a),r(e,li(t,3))},Un.sortedIndex=function(e,t){return oa(e,t)},Un.sortedIndexBy=function(e,t,n){return sa(e,t,li(n,2))},Un.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oa(e,t);if(r<n&&Wo(e[r],t))return r}return-1},Un.sortedLastIndex=function(e,t){return oa(e,t,!0)},Un.sortedLastIndexBy=function(e,t,n){return sa(e,t,li(n,2),!0)},Un.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oa(e,t,!0)-1;if(Wo(e[n],t))return n}return-1},Un.startCase=Zs,Un.startsWith=function(e,t,n){return e=xs(e),n=null==n?0:ur(ms(n),0,e.length),t=ca(t),e.slice(n,n+t.length)==t},Un.subtract=Cu,Un.sum=function(e){return e&&e.length?Yt(e,iu):0},Un.sumBy=function(e,t){return e&&e.length?Yt(e,li(t,2)):0},Un.template=function(e,t,n){var r=Un.templateSettings;n&&xi(e,t,n)&&(t=a),e=xs(e),t=Ss({},t,r,Ja);var i,o,s=Ss({},t.imports,r.imports,Ja),u=Os(s),l=$t(s,u),c=0,f=t.interpolate||ke,d="__p += '",h=Te((t.escape||ke).source+"|"+f.source+"|"+(f===ee?pe:ke).source+"|"+(t.evaluate||ke).source+"|$","g"),p="//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(h,(function(t,n,r,a,s,u){return r||(r=a),d+=e.slice(c,u).replace(Se,on),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),d+="';\n";var v=Le.call(t,"variable")&&t.variable;if(v){if(de.test(v))throw new se("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(H,""):d).replace(q,"$1").replace(X,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=eu((function(){return _e(u,p+"return "+d).apply(a,l)}));if(m.source=d,$o(m))throw m;return m},Un.times=function(e,t){if((e=ms(e))<1||e>p)return[];var n=m,r=xn(e,m);t=li(t),e-=m;for(var a=Kt(r,t);++n<e;)t(n);return a},Un.toFinite=vs,Un.toInteger=ms,Un.toLength=gs,Un.toLower=function(e){return xs(e).toLowerCase()},Un.toNumber=ys,Un.toSafeInteger=function(e){return e?ur(ms(e),-9007199254740991,p):0===e?e:0},Un.toString=xs,Un.toUpper=function(e){return xs(e).toUpperCase()},Un.trim=function(e,t,n){if((e=xs(e))&&(n||t===a))return Zt(e);if(!e||!(t=ca(t)))return e;var r=pn(e),i=pn(t);return ka(r,en(r,i),tn(r,i)+1).join("")},Un.trimEnd=function(e,t,n){if((e=xs(e))&&(n||t===a))return e.slice(0,vn(e)+1);if(!e||!(t=ca(t)))return e;var r=pn(e);return ka(r,0,tn(r,pn(t))+1).join("")},Un.trimStart=function(e,t,n){if((e=xs(e))&&(n||t===a))return e.replace(oe,"");if(!e||!(t=ca(t)))return e;var r=pn(e);return ka(r,en(r,pn(t))).join("")},Un.truncate=function(e,t){var n=30,r="...";if(ns(t)){var i="separator"in t?t.separator:i;n="length"in t?ms(t.length):n,r="omission"in t?ca(t.omission):r}var o=(e=xs(e)).length;if(sn(e)){var s=pn(e);o=s.length}if(n>=o)return e;var u=n-hn(r);if(u<1)return r;var l=s?ka(s,0,u).join(""):e.slice(0,u);if(i===a)return l+r;if(s&&(u+=l.length-u),ss(i)){if(e.slice(u).search(i)){var c,f=l;for(i.global||(i=Te(i.source,xs(ve.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var d=c.index;l=l.slice(0,d===a?u:d)}}else if(e.indexOf(ca(i),u)!=u){var h=l.lastIndexOf(i);h>-1&&(l=l.slice(0,h))}return l+r},Un.unescape=function(e){return(e=xs(e))&&Z.test(e)?e.replace(Y,mn):e},Un.uniqueId=function(e){var t=++je;return xs(e)+t},Un.upperCase=Qs,Un.upperFirst=$s,Un.each=xo,Un.eachRight=wo,Un.first=Xi,lu(Un,function(){var e={};return wr(Un,(function(t,n){Le.call(Un.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Un.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Un[e].placeholder=Un})),Tt(["drop","take"],(function(e,t){Hn.prototype[e]=function(n){n=n===a?1:bn(ms(n),0);var r=this.__filtered__&&!t?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=xn(n,r.__takeCount__):r.__views__.push({size:xn(n,m),type:e+(r.__dir__<0?"Right":"")}),r},Hn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Tt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Hn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:li(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Tt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Hn.prototype[e]=function(){return this[n](1).value()[0]}})),Tt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Hn.prototype[e]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(iu)},Hn.prototype.find=function(e){return this.filter(e).head()},Hn.prototype.findLast=function(e){return this.reverse().find(e)},Hn.prototype.invokeMap=Qr((function(e,t){return"function"==typeof e?new Hn(this):this.map((function(n){return Rr(n,e,t)}))})),Hn.prototype.reject=function(e){return this.filter(Po(li(e)))},Hn.prototype.slice=function(e,t){e=ms(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Hn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(n=(t=ms(t))<0?n.dropRight(-t):n.take(t-e)),n)},Hn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hn.prototype.toArray=function(){return this.take(m)},wr(Hn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Un[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(Un.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Hn,l=s[0],c=u||qo(t),f=function(e){var t=i.apply(Un,Dt([e],s));return r&&d?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var d=this.__chain__,h=!!this.__actions__.length,p=o&&!d,v=u&&!h;if(!o&&c){t=v?t:new Hn(this);var m=e.apply(t,s);return m.__actions__.push({func:vo,args:[f],thisArg:a}),new Vn(m,d)}return p&&v?e.apply(this,s):(m=this.thru(f),p?r?m.value()[0]:m.value():m)})})),Tt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ne[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Un.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var a=this.value();return t.apply(qo(a)?a:[],e)}return this[n]((function(n){return t.apply(qo(n)?n:[],e)}))}})),wr(Hn.prototype,(function(e,t){var n=Un[t];if(n){var r=n.name+"";Le.call(Mn,r)||(Mn[r]=[]),Mn[r].push({name:t,func:n})}})),Mn[Ua(a,2).name]=[{name:"wrapper",func:a}],Hn.prototype.clone=function(){var e=new Hn(this.__wrapped__);return e.__actions__=Na(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Na(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Na(this.__views__),e},Hn.prototype.reverse=function(){if(this.__filtered__){var e=new Hn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=qo(e),r=t<0,a=n?e.length:0,i=function(e,t,n){var r=-1,a=n.length;for(;++r<a;){var i=n[r],o=i.size;switch(i.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=xn(t,e+o);break;case"takeRight":e=bn(e,t-o)}}return{start:e,end:t}}(0,a,this.__views__),o=i.start,s=i.end,u=s-o,l=r?s:o-1,c=this.__iteratees__,f=c.length,d=0,h=xn(u,this.__takeCount__);if(!n||!r&&a==u&&h==u)return va(e,this.__actions__);var p=[];e:for(;u--&&d<h;){for(var v=-1,m=e[l+=t];++v<f;){var g=c[v],y=g.iteratee,b=g.type,x=y(m);if(2==b)m=x;else if(!x){if(1==b)continue e;break e}}p[d++]=m}return p},Un.prototype.at=mo,Un.prototype.chain=function(){return po(this)},Un.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===a&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},Un.prototype.plant=function(e){for(var t,n=this;n instanceof Gn;){var r=zi(n);r.__index__=0,r.__values__=a,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Un.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hn){var t=e;return this.__actions__.length&&(t=new Hn(this)),(t=t.reverse()).__actions__.push({func:vo,args:[to],thisArg:a}),new Vn(t,this.__chain__)}return this.thru(to)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return va(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,Qe&&(Un.prototype[Qe]=function(){return this}),Un}();ht._=gn,(r=function(){return gn}.call(t,n,t,e))===a||(e.exports=r)}.call(this)},8987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(C){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?g:m;if(t){if(e<0)return g;if(e>=h)return k}else{if(e<=-p)return S;if(e+1>=p)return w}return e<0?s(-e,t).neg():u(e%d|0,e/d|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var l=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var a=s(l(n,8)),i=m,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),f=parseInt(e.substring(o,o+u),n);if(u<8){var d=s(l(n,u));i=i.mul(d).add(s(f))}else i=(i=i.mul(a)).add(s(f))}return i.unsigned=t,i}function f(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?c(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=f;var d=4294967296,h=d*d,p=h/2,v=o(1<<24),m=o(0);n.ZERO=m;var g=o(0,!0);n.UZERO=g;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var w=u(-1,2147483647,!1);n.MAX_VALUE=w;var k=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var S=u(0,-2147483648,!1);n.MIN_VALUE=S;var _=n.prototype;_.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},_.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(l(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),c=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},_.isZero=function(){return 0===this.high&&0===this.low},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return 1===(1&this.low)},_.isEven=function(){return 0===(1&this.low)},_.equals=function(e){return r(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},_.eq=_.equals,_.notEquals=function(e){return!this.eq(e)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(e){return this.comp(e)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(e){return this.comp(e)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(e){return this.comp(e)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(e){return this.comp(e)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(e){if(r(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},_.neg=_.negate,_.add=function(e){r(e)||(e=f(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,l=e.low>>>16,c=0,d=0,h=0,p=0;return h+=(p+=i+(65535&e.low))>>>16,d+=(h+=a+l)>>>16,c+=(d+=n+s)>>>16,c+=t+o,u((h&=65535)<<16|(p&=65535),(c&=65535)<<16|(d&=65535),this.unsigned)},_.subtract=function(e){return r(e)||(e=f(e)),this.add(e.neg())},_.sub=_.subtract,_.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=f(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(S))return e.isOdd()?S:m;if(e.eq(S))return this.isOdd()?S:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,l=e.high>>>16,c=65535&e.high,d=e.low>>>16,h=65535&e.low,p=0,g=0,y=0,b=0;return y+=(b+=o*h)>>>16,g+=(y+=i*h)>>>16,y&=65535,g+=(y+=o*d)>>>16,p+=(g+=a*h)>>>16,g&=65535,p+=(g+=i*d)>>>16,g&=65535,p+=(g+=o*c)>>>16,p+=n*h+a*d+i*c+o*l,u((y&=65535)<<16|(b&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},_.mul=_.multiply,_.divide=function(e){if(r(e)||(e=f(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return b;i=g}else{if(this.eq(S))return e.eq(y)||e.eq(x)?S:e.eq(S)?y:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(S))return this.unsigned?g:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=m}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),c=o<=48?1:l(2,o-48),d=s(n),h=d.mul(e);h.isNegative()||h.gt(a);)h=(d=s(n-=c,this.unsigned)).mul(e);d.isZero()&&(d=y),i=i.add(d),a=a.sub(h)}return i},_.div=_.divide,_.modulo=function(e){return r(e)||(e=f(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return u(~this.low,~this.high,this.unsigned)},_.and=function(e){return r(e)||(e=f(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},_.or=function(e){return r(e)||(e=f(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},_.xor=function(e){return r(e)||(e=f(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},_.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},_.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},_.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},888:function(e,t,n){"use strict";var r=n(9047);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),a=n(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=m.hasOwnProperty(t)?m[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!f.call(p,e)||!f.call(h,e)&&(d.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var j,P=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var B=!1;function z(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var a=l.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var u="\n"+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case C:return"Profiler";case _:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return P({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){Q(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return P({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ie(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,fe=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=P({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,_e=null;function Ce(e){if(e=ba(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=wa(t),ke(e.stateNode,e.type,t))}}function Ee(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Te(){if(Se){var e=Se,t=_e;if(_e=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function Ae(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ie(e,t,n)}finally{Ne=!1,(null!==Se||null!==_e)&&(Ae(),Te())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ce){Oe=!1}function Le(e,t,n,r,a,i,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var je=!1,Pe=null,Fe=!1,Be=null,ze={onError:function(e){je=!0,Pe=e}};function Ue(e,t,n,r,a,i,o,s,u){je=!1,Pe=null,Le.apply(ze,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(We(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Ve(a),e;if(o===r)return Ve(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Xe=a.unstable_scheduleCallback,Ye=a.unstable_cancelCallback,Ke=a.unstable_shouldYield,Ze=a.unstable_requestPaint,Qe=a.unstable_now,$e=a.unstable_getCurrentPriorityLevel,Je=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=ft(s):0!==(i&=o)&&(r=ft(i))}else 0!==(o=n&~a)?r=ft(o):0!==i&&(r=ft(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,_t,Ct,Et=!1,Tt=[],It=null,At=null,Nt=null,Rt=new Map,Mt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function jt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Pt(e){var t=ya(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function zt(){Et=!1,null!==It&&Ft(It)&&(It=null),null!==At&&Ft(At)&&(At=null),null!==Nt&&Ft(Nt)&&(Nt=null),Rt.forEach(Bt),Mt.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,zt)))}function Wt(e){function t(t){return Ut(t,e)}if(0<Tt.length){Ut(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Ut(It,e),null!==At&&Ut(At,e),null!==Nt&&Ut(Nt,e),Rt.forEach(t),Mt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Pt(n),null===n.blockedOn&&Ot.shift()}var Gt=x.ReactCurrentBatchConfig,Vt=!0;function Ht(e,t,n,r){var a=bt,i=Gt.transition;Gt.transition=null;try{bt=1,Xt(e,t,n,r)}finally{bt=a,Gt.transition=i}}function qt(e,t,n,r){var a=bt,i=Gt.transition;Gt.transition=null;try{bt=4,Xt(e,t,n,r)}finally{bt=a,Gt.transition=i}}function Xt(e,t,n,r){if(Vt){var a=Kt(e,t,n,r);if(null===a)Vr(e,t,r,Yt,n),Lt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return It=jt(It,e,t,n,r,a),!0;case"dragenter":return At=jt(At,e,t,n,r,a),!0;case"mouseover":return Nt=jt(Nt,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Rt.set(i,jt(Rt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Mt.set(i,jt(Mt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&wt(i),null===(i=Kt(e,t,n,r))&&Vr(e,t,r,Yt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Yt=null;function Kt(e,t,n,r){if(Yt=null,null!==(e=ya(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,r=n.length,a="value"in Qt?Qt.value:Qt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Jt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return P(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),fn=P({},ln,{view:0,detail:0}),dn=an(fn),hn=P({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(hn),vn=an(P({},hn,{dataTransfer:0})),mn=an(P({},fn,{relatedTarget:0})),gn=an(P({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=P({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(P({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return _n}var En=P({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),In=an(P({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(P({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Nn=an(P({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=P({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=an(Rn),On=[9,13,27,32],Dn=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var jn=c&&"TextEvent"in window&&!Ln,Pn=c&&(!Dn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ee(r),0<(t=qr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Xn=null;function Yn(e){Fr(e,0)}function Kn(e){if(X(xa(e)))return e}function Zn(e,t){if("change"===e)return t}var Qn=!1;if(c){var $n;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}$n=Jn}else $n=!1;Qn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Xn=qn=null)}function nr(e){if("value"===e.propertyName&&Kn(Xn)){var t=[];Hn(t,Xn,e,we(e)),Re(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Xn)}function ir(e,t){if("click"===e)return Kn(t)}function or(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!f.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=cr(n,i);var o=cr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Y(r)||("selectionStart"in(r=mr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=qr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},_r={};function Cr(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Sr[e]=n[t];return e}c&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Er=Cr("animationend"),Tr=Cr("animationiteration"),Ir=Cr("animationstart"),Ar=Cr("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Nr.set(e,t),u(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Dr=Rr[Or];Mr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Mr(Er,"onAnimationEnd"),Mr(Tr,"onAnimationIteration"),Mr(Ir,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Ar,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Pr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,u,l){if(Ue.apply(this,arguments),je){if(!je)throw Error(i(198));var c=Pe;je=!1,Pe=null,Fe||(Fe=!0,Be=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Pr(a,s,l),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Pr(a,s,l),i=u}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Br(e,t){var n=t[va];void 0===n&&(n=t[va]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,zr("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Zt(t)){case 1:var a=Ht;break;case 4:a=qt;break;default:a=Xt}n=a.bind(null,t,n,e),a=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ya(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=i,a=we(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":l="focus",u=mn;break;case"focusout":l="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case Er:case Tr:case Ir:u=gn;break;case Ar:u=Nn;break;case"scroll":u=dn;break;case"wheel":u=Mn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var c=0!==(4&t),f=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==d&&(null!=(v=Me(p,d))&&c.push(Hr(p,v,h)))),f)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,a),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(l=n.relatedTarget||n.fromElement)||!ya(l)&&!l[pa])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?ya(l):null)&&(l!==(f=We(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,v="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,v="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==u?s:xa(u),h=null==l?s:xa(l),(s=new c(v,p+"leave",u,n,a)).target=f,s.relatedTarget=h,v=null,ya(a)===r&&((c=new c(d,p+"enter",l,n,a)).target=h,c.relatedTarget=f,v=c),f=v,u&&l)e:{for(d=l,p=0,h=c=u;h;h=Xr(h))p++;for(h=0,v=d;v;v=Xr(v))h++;for(;0<p-h;)c=Xr(c),p--;for(;0<h-p;)d=Xr(d),h--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Xr(c),d=Xr(d)}c=null}else c=null;null!==u&&Yr(o,s,u,c,!1),null!==l&&null!==f&&Yr(o,f,l,c,!0)}if("select"===(u=(s=r?xa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Zn;else if(Vn(s))if(Qn)m=or;else{m=ar;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ir);switch(m&&(m=m(e,r))?Hn(o,m,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?xa(r):window,e){case"focusin":(Vn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,a);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":xr(o,n,a)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Pn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=en()):($t="value"in(Qt=a)?Qt.value:Qt.textContent,Wn=!0)),0<(g=qr(r,b)).length&&(b=new xn(b,e,null,n,a),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=jn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Dn&&zn(e,t)?(e=en(),Jt=$t=Qt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}Fr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Me(e,n))&&r.unshift(Hr(e,i,a)),null!=(i=Me(e,t))&&r.push(Hr(e,i,a))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,a?null!=(u=Me(n,i))&&o.unshift(Hr(n,u,s)):a||null!=(u=Me(n,i))&&o.push(Hr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Kr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Zr,"")}function $r(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(i(425))}function Jr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Wt(t)}function la(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ca(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),da="__reactFiber$"+fa,ha="__reactProps$"+fa,pa="__reactContainer$"+fa,va="__reactEvents$"+fa,ma="__reactListeners$"+fa,ga="__reactHandles$"+fa;function ya(e){var t=e[da];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[da]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ca(e);null!==e;){if(n=e[da])return n;e=ca(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[da]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wa(e){return e[ha]||null}var ka=[],Sa=-1;function _a(e){return{current:e}}function Ca(e){0>Sa||(e.current=ka[Sa],ka[Sa]=null,Sa--)}function Ea(e,t){Sa++,ka[Sa]=e.current,e.current=t}var Ta={},Ia=_a(Ta),Aa=_a(!1),Na=Ta;function Ra(e,t){var n=e.type.contextTypes;if(!n)return Ta;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ma(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oa(){Ca(Aa),Ca(Ia)}function Da(e,t,n){if(Ia.current!==Ta)throw Error(i(168));Ea(Ia,t),Ea(Aa,n)}function La(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,G(e)||"Unknown",a));return P({},n,r)}function ja(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ta,Na=Ia.current,Ea(Ia,e),Ea(Aa,Aa.current),!0}function Pa(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=La(e,t,Na),r.__reactInternalMemoizedMergedChildContext=e,Ca(Aa),Ca(Ia),Ea(Ia,e)):Ca(Aa),Ea(Aa,n)}var Fa=null,Ba=!1,za=!1;function Ua(e){null===Fa?Fa=[e]:Fa.push(e)}function Wa(){if(!za&&null!==Fa){za=!0;var e=0,t=bt;try{var n=Fa;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fa=null,Ba=!1}catch(a){throw null!==Fa&&(Fa=Fa.slice(e+1)),Xe(Je,Wa),a}finally{bt=t,za=!1}}return null}var Ga=[],Va=0,Ha=null,qa=0,Xa=[],Ya=0,Ka=null,Za=1,Qa="";function $a(e,t){Ga[Va++]=qa,Ga[Va++]=Ha,Ha=e,qa=t}function Ja(e,t,n){Xa[Ya++]=Za,Xa[Ya++]=Qa,Xa[Ya++]=Ka,Ka=e;var r=Za;e=Qa;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Za=1<<32-ot(t)+a|n<<a|r,Qa=i+e}else Za=1<<i|n<<a|r,Qa=e}function ei(e){null!==e.return&&($a(e,1),Ja(e,1,0))}function ti(e){for(;e===Ha;)Ha=Ga[--Va],Ga[Va]=null,qa=Ga[--Va],Ga[Va]=null;for(;e===Ka;)Ka=Xa[--Ya],Xa[Ya]=null,Qa=Xa[--Ya],Xa[Ya]=null,Za=Xa[--Ya],Xa[Ya]=null}var ni=null,ri=null,ai=!1,ii=null;function oi(e,t){var n=Rl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=la(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ka?{id:Za,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function ui(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function li(e){if(ai){var t=ri;if(t){var n=t;if(!si(e,t)){if(ui(e))throw Error(i(418));t=la(n.nextSibling);var r=ni;t&&si(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(ui(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function ci(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function fi(e){if(e!==ni)return!1;if(!ai)return ci(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(ui(e))throw di(),Error(i(418));for(;t;)oi(e,t),t=la(t.nextSibling)}if(ci(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=la(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?la(e.stateNode.nextSibling):null;return!0}function di(){for(var e=ri;e;)e=la(e.nextSibling)}function hi(){ri=ni=null,ai=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var vi=x.ReactCurrentBatchConfig;function mi(e,t){if(e&&e.defaultProps){for(var n in t=P({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var gi=_a(null),yi=null,bi=null,xi=null;function wi(){xi=bi=yi=null}function ki(e){var t=gi.current;Ca(gi),e._currentValue=t}function Si(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _i(e,t){yi=e,xi=bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Ci(e){var t=e._currentValue;if(xi!==e)if(e={context:e,memoizedValue:t,next:null},null===bi){if(null===yi)throw Error(i(308));bi=e,yi.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Ei=null;function Ti(e){null===Ei?Ei=[e]:Ei.push(e)}function Ii(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ti(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ai(e,r)}function Ai(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ni=!1;function Ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Di(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Iu)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ai(e,n)}return null===(a=r.interleaved)?(t.next=t,Ti(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ai(e,n)}function Li(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function ji(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Pi(e,t,n,r){var a=e.updateQueue;Ni=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?i=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==i){var f=a.baseState;for(o=0,c=l=u=null,s=i;;){var d=s.lane,h=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(d=t,h=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=v.payload)?p.call(h,f,d):p)||void 0===d)break e;f=P({},f,d);break e;case 2:Ni=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=a.effects)?a.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=h,u=f):c=c.next=h,o|=d;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(d=s).next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}if(null===c&&(u=f),a.baseState=u,a.firstBaseUpdate=l,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);ju|=o,e.lanes=o,e.memoizedState=f}}function Fi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var Bi=(new r.Component).refs;function zi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:P({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ui={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),a=tl(e),i=Oi(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Di(e,i,a))&&(nl(t,e,a,r),Li(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),a=tl(e),i=Oi(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Di(e,i,a))&&(nl(t,e,a,r),Li(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),a=Oi(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Di(e,a,r))&&(nl(t,e,r,n),Li(t,e,r))}};function Wi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,i))}function Gi(e,t,n){var r=!1,a=Ta,i=t.contextType;return"object"===typeof i&&null!==i?i=Ci(i):(a=Ma(t)?Na:Ia.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ra(e,a):Ta),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ui,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Vi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ui.enqueueReplaceState(t,t.state,null)}function Hi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Bi,Ri(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Ci(i):(i=Ma(t)?Na:Ia.current,a.context=Ra(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(zi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Ui.enqueueReplaceState(a,a.state,null),Pi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function qi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===Bi&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Xi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yi(e){return(0,e._init)(e._payload)}function Ki(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Pl(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===S?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===M&&Yi(i)===t.type)?((r=a(t,n.props)).ref=qi(e,t,n),r.return=e,r):((r=Dl(n.type,n.key,n.props,null,e.mode,r)).ref=qi(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Pl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dl(t.type,t.key,t.props,null,e.mode,n)).ref=qi(e,null,t),n.return=e,n;case k:return(t=Fl(t,e.mode,n)).return=e,t;case M:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ll(t,e.mode,n,null)).return=e,t;Xi(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?l(e,t,n,r):null;case k:return n.key===a?c(e,t,n,r):null;case M:return h(e,t,(a=n._init)(n._payload),r)}if(te(n)||L(n))return null!==a?null:f(e,t,n,r,null);Xi(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case M:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,a,null);Xi(t,r)}return null}function v(a,i,s,u){for(var l=null,c=null,f=i,v=i=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=h(a,f,s[v],u);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(a,f),i=o(g,i,v),null===c?l=g:c.sibling=g,c=g,f=m}if(v===s.length)return n(a,f),ai&&$a(a,v),l;if(null===f){for(;v<s.length;v++)null!==(f=d(a,s[v],u))&&(i=o(f,i,v),null===c?l=f:c.sibling=f,c=f);return ai&&$a(a,v),l}for(f=r(a,f);v<s.length;v++)null!==(m=p(f,a,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),i=o(m,i,v),null===c?l=m:c.sibling=m,c=m);return e&&f.forEach((function(e){return t(a,e)})),ai&&$a(a,v),l}function m(a,s,u,l){var c=L(u);if("function"!==typeof c)throw Error(i(150));if(null==(u=c.call(u)))throw Error(i(151));for(var f=c=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=h(a,v,y.value,l);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(a,v),s=o(b,s,m),null===f?c=b:f.sibling=b,f=b,v=g}if(y.done)return n(a,v),ai&&$a(a,m),c;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=d(a,y.value,l))&&(s=o(y,s,m),null===f?c=y:f.sibling=y,f=y);return ai&&$a(a,m),c}for(v=r(a,v);!y.done;m++,y=u.next())null!==(y=p(v,a,m,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===f?c=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(a,e)})),ai&&$a(a,m),c}return function e(r,i,o,u){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var l=o.key,c=i;null!==c;){if(c.key===l){if((l=o.type)===S){if(7===c.tag){n(r,c.sibling),(i=a(c,o.props.children)).return=r,r=i;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===M&&Yi(l)===c.type){n(r,c.sibling),(i=a(c,o.props)).ref=qi(r,c,o),i.return=r,r=i;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===S?((i=Ll(o.props.children,r.mode,u,o.key)).return=r,r=i):((u=Dl(o.type,o.key,o.props,null,r.mode,u)).ref=qi(r,i,o),u.return=r,r=u)}return s(r);case k:e:{for(c=o.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fl(o,r.mode,u)).return=r,r=i}return s(r);case M:return e(r,i,(c=o._init)(o._payload),u)}if(te(o))return v(r,i,o,u);if(L(o))return m(r,i,o,u);Xi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=Pl(o,r.mode,u)).return=r,r=i),s(r)):n(r,i)}}var Zi=Ki(!0),Qi=Ki(!1),$i={},Ji=_a($i),eo=_a($i),to=_a($i);function no(e){if(e===$i)throw Error(i(174));return e}function ro(e,t){switch(Ea(to,t),Ea(eo,e),Ea(Ji,$i),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ca(Ji),Ea(Ji,t)}function ao(){Ca(Ji),Ca(eo),Ca(to)}function io(e){no(to.current);var t=no(Ji.current),n=ue(t,e.type);t!==n&&(Ea(eo,e),Ea(Ji,n))}function oo(e){eo.current===e&&(Ca(Ji),Ca(eo))}var so=_a(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var fo=x.ReactCurrentDispatcher,ho=x.ReactCurrentBatchConfig,po=0,vo=null,mo=null,go=null,yo=!1,bo=!1,xo=0,wo=0;function ko(){throw Error(i(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function _o(e,t,n,r,a,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,a),bo){o=0;do{if(bo=!1,xo=0,25<=o)throw Error(i(301));o+=1,go=mo=null,t.updateQueue=null,fo.current=ls,e=n(r,a)}while(bo)}if(fo.current=os,t=null!==mo&&null!==mo.next,po=0,go=mo=vo=null,yo=!1,t)throw Error(i(300));return e}function Co(){var e=0!==xo;return xo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function Io(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=mo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var u=s=null,l=null,c=o;do{var f=c.lane;if((po&f)===f)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=d,s=r):l=l.next=d,vo.lanes|=f,ju|=f}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,vo.lanes|=o,ju|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(xs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Mo(e,t){var n=vo,r=To(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,xs=!0),r=r.queue,Vo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Bo(9,Do.bind(null,n,r,a,t),void 0,null),null===Au)throw Error(i(349));0!==(30&po)||Oo(n,t,a)}return a}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,jo(t)&&Po(e)}function Lo(e,t,n){return n((function(){jo(t)&&Po(e)}))}function jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Po(e){var t=Ai(e,1);null!==t&&nl(t,e,1,-1)}function Fo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Bo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return To().memoizedState}function Uo(e,t,n,r){var a=Eo();vo.flags|=e,a.memoizedState=Bo(1|t,n,void 0,void 0===r?null:r)}function Wo(e,t,n,r){var a=To();r=void 0===r?null:r;var i=void 0;if(null!==mo){var o=mo.memoizedState;if(i=o.destroy,null!==r&&So(r,o.deps))return void(a.memoizedState=Bo(t,n,i,r))}vo.flags|=e,a.memoizedState=Bo(1|t,n,i,r)}function Go(e,t){return Uo(8390656,8,e,t)}function Vo(e,t){return Wo(2048,8,e,t)}function Ho(e,t){return Wo(4,2,e,t)}function qo(e,t){return Wo(4,4,e,t)}function Xo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Yo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Wo(4,4,Xo.bind(null,t,e),n)}function Ko(){}function Zo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,ju|=n,e.baseState=!0),t)}function Jo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{bt=n,ho.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))as(t,n);else if(null!==(n=Ii(e,t,n,r))){nl(n,e,r,el()),is(n,t,r)}}function ns(e,t,n){var r=tl(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))as(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(a.next=a,Ti(t)):(a.next=u.next,u.next=a),void(t.interleaved=a)}}catch(l){}null!==(n=Ii(e,t,a,r))&&(nl(n,e,r,a=el()),is(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function as(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function is(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ci,useCallback:ko,useContext:ko,useEffect:ko,useImperativeHandle:ko,useInsertionEffect:ko,useLayoutEffect:ko,useMemo:ko,useReducer:ko,useRef:ko,useState:ko,useDebugValue:ko,useDeferredValue:ko,useTransition:ko,useMutableSource:ko,useSyncExternalStore:ko,useId:ko,unstable_isNewReconciler:!1},ss={readContext:Ci,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:Go,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4194308,4,Xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Fo,useDebugValue:Ko,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Jo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,a=Eo();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Au)throw Error(i(349));0!==(30&po)||Oo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Go(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Bo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Au.identifierPrefix;if(ai){var n=Qa;t=":"+t+"R"+(n=(Za&~(1<<32-ot(Za)-1)).toString(32)+n),0<(n=xo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ci,useCallback:Zo,useContext:Ci,useEffect:Vo,useImperativeHandle:Yo,useInsertionEffect:Ho,useLayoutEffect:qo,useMemo:Qo,useReducer:Ao,useRef:zo,useState:function(){return Ao(Io)},useDebugValue:Ko,useDeferredValue:function(e){return $o(To(),mo.memoizedState,e)},useTransition:function(){return[Ao(Io)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Mo,useId:es,unstable_isNewReconciler:!1},ls={readContext:Ci,useCallback:Zo,useContext:Ci,useEffect:Vo,useImperativeHandle:Yo,useInsertionEffect:Ho,useLayoutEffect:qo,useMemo:Qo,useReducer:No,useRef:zo,useState:function(){return No(Io)},useDebugValue:Ko,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:$o(t,mo.memoizedState,e)},useTransition:function(){return[No(Io)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Mo,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vu||(Vu=!0,Hu=r),ds(0,t)},n}function vs(e,t,n){(n=Oi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===qu?qu=new Set([this]):qu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Cl.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oi(-1,1)).tag=2,Di(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bs=x.ReactCurrentOwner,xs=!1;function ws(e,t,n,r){t.child=null===e?Qi(t,null,n,r):Zi(t,e.child,n,r)}function ks(e,t,n,r,a){n=n.render;var i=t.ref;return _i(t,a),r=_o(e,t,n,r,i,a),n=Co(),null===e||xs?(ai&&n&&ei(t),t.flags|=1,ws(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vs(e,t,a))}function Ss(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Ml(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dl(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,_s(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Vs(e,t,a)}return t.flags|=1,(e=Ol(i,r)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Vs(e,t,a);0!==(131072&e.flags)&&(xs=!0)}}return Ts(e,t,n,r,a)}function Cs(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ea(Ou,Mu),Mu|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ea(Ou,Mu),Mu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ea(Ou,Mu),Mu|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ea(Ou,Mu),Mu|=r;return ws(e,t,a,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,a){var i=Ma(n)?Na:Ia.current;return i=Ra(t,i),_i(t,a),n=_o(e,t,n,r,i,a),r=Co(),null===e||xs?(ai&&r&&ei(t),t.flags|=1,ws(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vs(e,t,a))}function Is(e,t,n,r,a){if(Ma(n)){var i=!0;ja(t)}else i=!1;if(_i(t,a),null===t.stateNode)Gs(e,t),Gi(t,n,r),Hi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ci(l):l=Ra(t,l=Ma(n)?Na:Ia.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Vi(t,o,r,l),Ni=!1;var d=t.memoizedState;o.state=d,Pi(t,r,o,a),u=t.memoizedState,s!==r||d!==u||Aa.current||Ni?("function"===typeof c&&(zi(t,n,c,r),u=t.memoizedState),(s=Ni||Wi(t,n,s,r,d,u,l))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Mi(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:mi(t.type,s),o.props=l,f=t.pendingProps,d=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ci(u):u=Ra(t,u=Ma(n)?Na:Ia.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||d!==u)&&Vi(t,o,r,u),Ni=!1,d=t.memoizedState,o.state=d,Pi(t,r,o,a);var p=t.memoizedState;s!==f||d!==p||Aa.current||Ni?("function"===typeof h&&(zi(t,n,h,r),p=t.memoizedState),(l=Ni||Wi(t,n,l,r,d,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,i,a)}function As(e,t,n,r,a,i){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&Pa(t,n,!1),Vs(e,t,i);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Zi(t,e.child,null,i),t.child=Zi(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,a&&Pa(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Da(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Da(0,t.context,!1),ro(e,t.containerInfo)}function Rs(e,t,n,r,a){return hi(),pi(a),t.flags|=256,ws(e,t,n,r),t.child}var Ms,Os,Ds,Ls={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ps(e,t,n){var r,a=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ea(so,1&o),null===e)return li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=a.children,e=a.fallback,s?(a=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=jl(u,a,0,null),e=Ll(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Ls,e):Fs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=fs(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=jl({mode:"visible",children:r.children},a,0,null),(o=Ll(o,a,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Zi(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var u=r.dgst;return r=u,Bs(e,t,s,r=fs(o=Error(i(419)),r,void 0))}if(u=0!==(s&e.childLanes),xs||u){if(null!==(r=Au)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Ai(e,a),nl(r,e,a,-1))}return vl(),Bs(e,t,s,r=fs(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Tl.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ri=la(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&(Xa[Ya++]=Za,Xa[Ya++]=Qa,Xa[Ya++]=Ka,Za=e.id,Qa=e.overflow,Ka=t),(t=Fs(t,r.children)).flags|=4096,t)}(e,t,u,a,r,o,n);if(s){s=a.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:a.children};return 0===(1&u)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=l,t.deletions=null):(a=Ol(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Ol(r,s):(s=Ll(s,u,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,u=null===(u=e.child.memoizedState)?js(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,a}return e=(s=e.child).sibling,a=Ol(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Fs(e,t){return(t=jl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&pi(r),Zi(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Si(e.return,t,n)}function Us(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Ws(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ea(so,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Us(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===uo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Us(t,!0,n,null,i);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ju|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Ma(t.type)&&Oa(),qs(t),null;case 3:return r=t.stateNode,ao(),Ca(Aa),Ca(Ia),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ol(ii),ii=null))),qs(t),null;case 5:oo(t);var a=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return qs(t),null}if(e=no(Ji.current),fi(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[da]=t,r[ha]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(a=0;a<Lr.length;a++)Br(Lr[a],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Z(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ae(r,o),Br("invalid",r)}for(var u in ye(n,o),a=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,l,e),a=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,l,e),a=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Br("scroll",r)}switch(n){case"input":q(r),J(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[da]=t,e[ha]=r,Ms(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),a=r;break;case"iframe":case"object":case"embed":Br("load",e),a=r;break;case"video":case"audio":for(a=0;a<Lr.length;a++)Br(Lr[a],e);a=r;break;case"source":Br("error",e),a=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),a=r;break;case"details":Br("toggle",e),a=r;break;case"input":Z(e,r),a=K(e,r),Br("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=P({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Br("invalid",e)}for(o in ye(n,a),l=a)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Br("scroll",e):null!=c&&b(e,o,c,u))}switch(n){case"input":q(e),J(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Ds(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=no(to.current),no(Ji.current),fi(t)){if(r=t.stateNode,n=t.memoizedProps,r[da]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[da]=t,t.stateNode=r}return qs(t),null;case 13:if(Ca(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))di(),hi(),t.flags|=98560,o=!1;else if(o=fi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[da]=t}else hi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),o=!1}else null!==ii&&(ol(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Du&&(Du=3):vl())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return ao(),null===e&&Wr(t.stateNode.containerInfo),qs(t),null;case 10:return ki(t.type._context),qs(t),null;case 19:if(Ca(so),null===(o=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Hs(o,!1);else{if(0!==Du||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Hs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ea(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Wu&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ai)return qs(t),null}else 2*Qe()-o.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=so.current,Ea(so,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return fl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Mu)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ys(e,t){switch(ti(t),t.tag){case 1:return Ma(t.type)&&Oa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),Ca(Aa),Ca(Ia),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ca(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ca(so),null;case 4:return ao(),null;case 10:return ki(t.type._context),null;case 22:case 23:return fl(),null;default:return null}}Ms=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,no(Ji.current);var i,o=null;switch(n){case"input":a=K(e,a),r=K(e,r),o=[];break;case"select":a=P({},a,{value:void 0}),r=P({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in ye(n,r),n=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var u=a[c];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(i in u)!u.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&u[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Br("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ks=!1,Zs=!1,Qs="function"===typeof WeakSet?WeakSet:Set,$s=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_l(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){_l(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&eu(t,n,i)}a=a.next}while(a!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function iu(e){var t=e.alternate;null!==t&&(e.alternate=null,iu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[da],delete t[ha],delete t[va],delete t[ma],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,fu=!1;function du(e,t,n){for(n=n.child;null!==n;)hu(e,t,n),n=n.sibling}function hu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:Zs||Js(n,t);case 6:var r=cu,a=fu;cu=null,du(e,t,n),fu=a,null!==(cu=r)&&(fu?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(fu?(e=cu,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Wt(e)):ua(cu,n.stateNode));break;case 4:r=cu,a=fu,cu=n.stateNode.containerInfo,fu=!0,du(e,t,n),cu=r,fu=a;break;case 0:case 11:case 14:case 15:if(!Zs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&eu(n,t,o),a=a.next}while(a!==r)}du(e,t,n);break;case 1:if(!Zs&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){_l(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Zs=(r=Zs)||null!==n.memoizedState,du(e,t,n),Zs=r):du(e,t,n);break;default:du(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=Il.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,fu=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===cu)throw Error(i(160));hu(o,s,a),cu=null,fu=!1;var l=a.alternate;null!==l&&(l.return=null),a.return=null}catch(c){_l(a,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),gu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(m){_l(e,e.return,m)}try{nu(5,e,e.return)}catch(m){_l(e,e.return,m)}}break;case 1:vu(t,e),gu(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(vu(t,e),gu(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var a=e.stateNode;try{de(a,"")}catch(m){_l(e,e.return,m)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&Q(a,o),be(u,s);var c=be(u,o);for(s=0;s<l.length;s+=2){var f=l[s],d=l[s+1];"style"===f?me(a,d):"dangerouslySetInnerHTML"===f?fe(a,d):"children"===f?de(a,d):b(a,f,d,c)}switch(u){case"input":$(a,o);break;case"textarea":ie(a,o);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(a,!!o.multiple,p,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[ha]=o}catch(m){_l(e,e.return,m)}}break;case 6:if(vu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(m){_l(e,e.return,m)}}break;case 3:if(vu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(m){_l(e,e.return,m)}break;case 4:default:vu(t,e),gu(e);break;case 13:vu(t,e),gu(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Uu=Qe())),4&r&&pu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Zs=(c=Zs)||f,vu(t,e),Zs=c):vu(t,e),gu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!==(1&e.mode))for($s=e,f=e.child;null!==f;){for(d=$s=f;null!==$s;){switch(p=(h=$s).child,h.tag){case 0:case 11:case 14:case 15:nu(4,h,h.return);break;case 1:Js(h,h.return);var v=h.stateNode;if("function"===typeof v.componentWillUnmount){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){_l(r,n,m)}}break;case 5:Js(h,h.return);break;case 22:if(null!==h.memoizedState){wu(d);continue}}null!==p?(p.return=h,$s=p):wu(d)}f=f.sibling}e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{a=d.stateNode,c?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=d.stateNode,s=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(m){_l(e,e.return,m)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){_l(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vu(t,e),gu(e),4&r&&pu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(de(a,""),r.flags&=-33),lu(e,su(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(i(161))}}catch(s){_l(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){$s=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var a=$s,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Ks;if(!o){var s=a.alternate,u=null!==s&&null!==s.memoizedState||Zs;s=Ks;var l=Zs;if(Ks=o,(Zs=u)&&!l)for($s=a;null!==$s;)u=(o=$s).child,22===o.tag&&null!==o.memoizedState?ku(a):null!==u?(u.return=o,$s=u):ku(a);for(;null!==i;)$s=i,bu(i,t,n),i=i.sibling;$s=a,Ks=s,Zs=l}xu(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,$s=i):xu(e)}}function xu(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zs||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zs)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:mi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fi(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fi(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&Wt(d)}}}break;default:throw Error(i(163))}Zs||512&t.flags&&au(t)}catch(h){_l(t,t.return,h)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function wu(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function ku(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){_l(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(u){_l(t,a,u)}}var i=t.return;try{au(t)}catch(u){_l(t,i,u)}break;case 5:var o=t.return;try{au(t)}catch(u){_l(t,o,u)}}}catch(u){_l(t,t.return,u)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Su,_u=Math.ceil,Cu=x.ReactCurrentDispatcher,Eu=x.ReactCurrentOwner,Tu=x.ReactCurrentBatchConfig,Iu=0,Au=null,Nu=null,Ru=0,Mu=0,Ou=_a(0),Du=0,Lu=null,ju=0,Pu=0,Fu=0,Bu=null,zu=null,Uu=0,Wu=1/0,Gu=null,Vu=!1,Hu=null,qu=null,Xu=!1,Yu=null,Ku=0,Zu=0,Qu=null,$u=-1,Ju=0;function el(){return 0!==(6&Iu)?Qe():-1!==$u?$u:$u=Qe()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Iu)&&0!==Ru?Ru&-Ru:null!==vi.transition?(0===Ju&&(Ju=vt()),Ju):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nl(e,t,n,r){if(50<Zu)throw Zu=0,Qu=null,Error(i(185));gt(e,n,r),0!==(2&Iu)&&e===Au||(e===Au&&(0===(2&Iu)&&(Pu|=n),4===Du&&sl(e,Ru)),rl(e,r),1===n&&0===Iu&&0===(1&t.mode)&&(Wu=Qe()+500,Ba&&Wa()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,u=a[o];-1===u?0!==(s&n)&&0===(s&r)||(a[o]=ht(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=dt(e,e===Au?Ru:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ba=!0,Ua(e)}(ul.bind(null,e)):Ua(ul.bind(null,e)),oa((function(){0===(6&Iu)&&Wa()})),n=null;else{switch(xt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Al(n,al.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function al(e,t){if($u=-1,Ju=0,0!==(6&Iu))throw Error(i(327));var n=e.callbackNode;if(kl()&&e.callbackNode!==n)return null;var r=dt(e,e===Au?Ru:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var a=Iu;Iu|=2;var o=pl();for(Au===e&&Ru===t||(Gu=null,Wu=Qe()+500,dl(e,t));;)try{yl();break}catch(u){hl(e,u)}wi(),Cu.current=o,Iu=a,null!==Nu?t=0:(Au=null,Ru=0,t=Du)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=il(e,a))),1===t)throw n=Lu,dl(e,0),sl(e,r),rl(e,Qe()),n;if(6===t)sl(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=ml(e,r))&&(0!==(o=pt(e))&&(r=o,t=il(e,o))),1===t))throw n=Lu,dl(e,0),sl(e,r),rl(e,Qe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wl(e,zu,Gu);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Uu+500-Qe())){if(0!==dt(e,0))break;if(((a=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(wl.bind(null,e,zu,Gu),t);break}wl(e,zu,Gu);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_u(r/1960))-r)){e.timeoutHandle=ra(wl.bind(null,e,zu,Gu),r);break}wl(e,zu,Gu);break;default:throw Error(i(329))}}}return rl(e,Qe()),e.callbackNode===n?al.bind(null,e):null}function il(e,t){var n=Bu;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=zu,zu=n,null!==t&&ol(t)),e}function ol(e){null===zu?zu=e:zu.push.apply(zu,e)}function sl(e,t){for(t&=~Fu,t&=~Pu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Iu))throw Error(i(327));kl();var t=dt(e,0);if(0===(1&t))return rl(e,Qe()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=il(e,r))}if(1===n)throw n=Lu,dl(e,0),sl(e,t),rl(e,Qe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,zu,Gu),rl(e,Qe()),null}function ll(e,t){var n=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=n)&&(Wu=Qe()+500,Ba&&Wa())}}function cl(e){null!==Yu&&0===Yu.tag&&0===(6&Iu)&&kl();var t=Iu;Iu|=1;var n=Tu.transition,r=bt;try{if(Tu.transition=null,bt=1,e)return e()}finally{bt=r,Tu.transition=n,0===(6&(Iu=t))&&Wa()}}function fl(){Mu=Ou.current,Ca(Ou)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Nu)for(n=Nu.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oa();break;case 3:ao(),Ca(Aa),Ca(Ia),co();break;case 5:oo(r);break;case 4:ao();break;case 13:case 19:Ca(so);break;case 10:ki(r.type._context);break;case 22:case 23:fl()}n=n.return}if(Au=e,Nu=e=Ol(e.current,null),Ru=Mu=t,Du=0,Lu=null,Fu=Pu=ju=0,zu=Bu=null,null!==Ei){for(t=0;t<Ei.length;t++)if(null!==(r=(n=Ei[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}Ei=null}return e}function hl(e,t){for(;;){var n=Nu;try{if(wi(),fo.current=os,yo){for(var r=vo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}yo=!1}if(po=0,go=mo=vo=null,bo=!1,xo=0,Eu.current=null,null===n||null===n.return){Du=1,Lu=t,Nu=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Ru,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,f=u,d=f.tag;if(0===(1&f.mode)&&(0===d||11===d||15===d)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&ms(o,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(l),t.updateQueue=m}else v.add(l);break e}if(0===(1&t)){ms(o,c,t),vl();break e}l=Error(i(426))}else if(ai&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),pi(cs(l,u));break e}}o=l=cs(l,u),4!==Du&&(Du=2),null===Bu?Bu=[o]:Bu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,ji(o,ps(0,l,t));break e;case 1:u=l;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===qu||!qu.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,ji(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}xl(n)}catch(x){t=x,Nu===n&&null!==n&&(Nu=n=n.return);continue}break}}function pl(){var e=Cu.current;return Cu.current=os,null===e?os:e}function vl(){0!==Du&&3!==Du&&2!==Du||(Du=4),null===Au||0===(268435455&ju)&&0===(268435455&Pu)||sl(Au,Ru)}function ml(e,t){var n=Iu;Iu|=2;var r=pl();for(Au===e&&Ru===t||(Gu=null,dl(e,t));;)try{gl();break}catch(a){hl(e,a)}if(wi(),Iu=n,Cu.current=r,null!==Nu)throw Error(i(261));return Au=null,Ru=0,Du}function gl(){for(;null!==Nu;)bl(Nu)}function yl(){for(;null!==Nu&&!Ke();)bl(Nu)}function bl(e){var t=Su(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?xl(e):Nu=t,Eu.current=null}function xl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Mu)))return void(Nu=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Nu=n);if(null===e)return Du=6,void(Nu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nu=t);Nu=t=e}while(null!==t);0===Du&&(Du=5)}function wl(e,t,n){var r=bt,a=Tu.transition;try{Tu.transition=null,bt=1,function(e,t,n,r){do{kl()}while(null!==Yu);if(0!==(6&Iu))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Au&&(Nu=Au=null,Ru=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xu||(Xu=!0,Al(tt,(function(){return kl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tu.transition,Tu.transition=null;var s=bt;bt=1;var u=Iu;Iu|=4,Eu.current=null,function(e,t){if(ea=Vt,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,l=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==a&&3!==d.nodeType||(u=s+a),d!==o||0!==r&&3!==d.nodeType||(l=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===a&&(u=s),h===o&&++f===r&&(l=s),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Vt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:mi(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(w){_l(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}v=tu,tu=!1}(e,n),mu(n,e),pr(ta),Vt=!!ea,ta=ea=null,e.current=n,yu(n,e,a),Ze(),Iu=u,bt=s,Tu.transition=o}else e.current=n;if(Xu&&(Xu=!1,Yu=e,Ku=a),0===(o=e.pendingLanes)&&(qu=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((a=t[n]).value,{componentStack:a.stack,digest:a.digest});if(Vu)throw Vu=!1,e=Hu,Hu=null,e;0!==(1&Ku)&&0!==e.tag&&kl(),0!==(1&(o=e.pendingLanes))?e===Qu?Zu++:(Zu=0,Qu=e):Zu=0,Wa()}(e,t,n,r)}finally{Tu.transition=a,bt=r}return null}function kl(){if(null!==Yu){var e=xt(Ku),t=Tu.transition,n=bt;try{if(Tu.transition=null,bt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Ku=0,0!==(6&Iu))throw Error(i(331));var a=Iu;for(Iu|=4,$s=e.current;null!==$s;){var o=$s,s=o.child;if(0!==(16&$s.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for($s=c;null!==$s;){var f=$s;switch(f.tag){case 0:case 11:case 15:nu(8,f,o)}var d=f.child;if(null!==d)d.return=f,$s=d;else for(;null!==$s;){var h=(f=$s).sibling,p=f.return;if(iu(f),f===c){$s=null;break}if(null!==h){h.return=p,$s=h;break}$s=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}$s=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,$s=s;else e:for(;null!==$s;){if(0!==(2048&(o=$s).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,$s=y;break e}$s=o.return}}var b=e.current;for($s=b;null!==$s;){var x=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,$s=x;else e:for(s=b;null!==$s;){if(0!==(2048&(u=$s).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(k){_l(u,u.return,k)}if(u===s){$s=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,$s=w;break e}$s=u.return}}if(Iu=a,Wa(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{bt=n,Tu.transition=t}}return!1}function Sl(e,t,n){e=Di(e,t=ps(0,t=cs(n,t),1),1),t=el(),null!==e&&(gt(e,1,t),rl(e,t))}function _l(e,t,n){if(3===e.tag)Sl(e,e,n);else for(;null!==t;){if(3===t.tag){Sl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qu||!qu.has(r))){t=Di(t,e=vs(t,e=cs(n,e),1),1),e=el(),null!==t&&(gt(t,1,e),rl(t,e));break}}t=t.return}}function Cl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Au===e&&(Ru&n)===n&&(4===Du||3===Du&&(130023424&Ru)===Ru&&500>Qe()-Uu?dl(e,0):Fu|=n),rl(e,t)}function El(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Ai(e,t))&&(gt(e,t,n),rl(e,n))}function Tl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),El(e,n)}function Il(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),El(e,n)}function Al(e,t){return Xe(e,t)}function Nl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rl(e,t,n,r){return new Nl(e,t,n,r)}function Ml(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=Rl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dl(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Ml(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Ll(n.children,a,o,t);case _:s=8,a|=8;break;case C:return(e=Rl(12,n,t,2|a)).elementType=C,e.lanes=o,e;case A:return(e=Rl(13,n,t,a)).elementType=A,e.lanes=o,e;case N:return(e=Rl(19,n,t,a)).elementType=N,e.lanes=o,e;case O:return jl(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case T:s=9;break e;case I:s=11;break e;case R:s=14;break e;case M:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Rl(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Ll(e,t,n,r){return(e=Rl(7,e,r,t)).lanes=n,e}function jl(e,t,n,r){return(e=Rl(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Pl(e,t,n){return(e=Rl(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=Rl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,a,i,o,s,u){return e=new Bl(e,t,n,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rl(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ri(i),e}function Ul(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Wl(e){if(!e)return Ta;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ma(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ma(n))return La(e,n,t)}return t}function Gl(e,t,n,r,a,i,o,s,u){return(e=zl(n,r,!0,e,0,i,0,s,u)).context=Wl(null),n=e.current,(i=Oi(r=el(),a=tl(n))).callback=void 0!==t&&null!==t?t:null,Di(n,i,a),e.current.lanes=a,gt(e,a,r),rl(e,r),e}function Vl(e,t,n,r){var a=t.current,i=el(),o=tl(a);return n=Wl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oi(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Di(a,t,o))&&(nl(e,a,o,i),Li(e,a,o)),o}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ql(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xl(e,t){ql(e,t),(e=e.alternate)&&ql(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Aa.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),hi();break;case 5:io(t);break;case 1:Ma(t.type)&&ja(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ea(gi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ea(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ps(e,t,n):(Ea(so,1&so.current),null!==(e=Vs(e,t,n))?e.sibling:null);Ea(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ea(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Vs(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ai&&0!==(1048576&t.flags)&&Ja(t,qa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gs(e,t),e=t.pendingProps;var a=Ra(t,Ia.current);_i(t,n),a=_o(null,t,r,e,a,n);var o=Co();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ma(r)?(o=!0,ja(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ri(t),a.updater=Ui,t.stateNode=a,a._reactInternals=t,Hi(t,r,e,n),t=As(null,t,r,!0,o,n)):(t.tag=0,ai&&o&&ei(t),ws(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gs(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Ml(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=mi(r,e),a){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,mi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ts(e,t,r,a=t.elementType===r?a:mi(r,a),n);case 1:return r=t.type,a=t.pendingProps,Is(e,t,r,a=t.elementType===r?a:mi(r,a),n);case 3:e:{if(Ns(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,Mi(e,t),Pi(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,a=cs(Error(i(423)),t));break e}if(r!==a){t=Rs(e,t,r,n,a=cs(Error(i(424)),t));break e}for(ri=la(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=Qi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hi(),r===a){t=Vs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return io(t),null===e&&li(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),Es(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&li(t),null;case 13:return Ps(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Zi(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ks(e,t,r,a=t.elementType===r?a:mi(r,a),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Ea(gi,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Aa.current){t=Vs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Oi(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Si(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Si(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,_i(t,n),r=r(a=Ci(a)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return a=mi(r=t.type,t.pendingProps),Ss(e,t,r,a=mi(r.type,a),n);case 15:return _s(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:mi(r,a),Gs(e,t),t.tag=1,Ma(r)?(e=!0,ja(t)):e=!1,_i(t,n),Gi(t,r,a),Hi(t,r,a,n),As(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Cs(e,t,n)}throw Error(i(156,t.tag))};var Yl="function"===typeof reportError?reportError:function(e){console.error(e)};function Kl(e){this._internalRoot=e}function Zl(e){this._internalRoot=e}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jl(){}function ec(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Hl(o);s.call(e)}}Vl(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Hl(o);i.call(e)}}var o=Gl(t,r,e,0,null,!1,0,"",Jl);return e._reactRootContainer=o,e[pa]=o.current,Wr(8===e.nodeType?e.parentNode:e),cl(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Hl(u);s.call(e)}}var u=zl(e,0,!1,null,0,!1,0,"",Jl);return e._reactRootContainer=u,e[pa]=u.current,Wr(8===e.nodeType?e.parentNode:e),cl((function(){Vl(t,u,n,r)})),u}(n,t,e,a,r);return Hl(o)}Zl.prototype.render=Kl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Vl(e,t,null,null)},Zl.prototype.unmount=Kl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){Vl(null,e,null,null)})),t[pa]=null}},Zl.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Pt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Qe()),0===(6&Iu)&&(Wu=Qe()+500,Wa()))}break;case 13:cl((function(){var t=Ai(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Xl(e,1)}},kt=function(e){if(13===e.tag){var t=Ai(e,134217728);if(null!==t)nl(t,e,134217728,el());Xl(e,134217728)}},St=function(e){if(13===e.tag){var t=tl(e),n=Ai(e,t);if(null!==n)nl(n,e,t,el());Xl(e,t)}},_t=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(i(90));X(r),$(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=ll,Ae=cl;var tc={usingClientEntryPoint:!1,Events:[ba,xa,wa,Ee,Te,ll]},nc={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{at=ac.inject(rc),it=ac}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(t))throw Error(i(200));return Ul(e,t,null,n)},t.createRoot=function(e,t){if(!Ql(e))throw Error(i(299));var n=!1,r="",a=Yl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Kl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!$l(t))throw Error(i(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ql(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=Yl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Gl(t,null,e,1,null!=n?n:null,a,0,o,s),e[pa]=t.current,Wr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Zl(t)},t.render=function(e,t,n){if(!$l(t))throw Error(i(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$l(e))throw Error(i(40));return!!e._reactRootContainer&&(cl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$l(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case f:case i:case s:case o:case h:return e;default:switch(e=e&&e.$$typeof){case l:case d:case m:case v:case u:return e;default:return t}}case a:return t}}}function k(e){return w(e)===f}t.AsyncMode=c,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=i,t.Lazy=m,t.Memo=v,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=h,t.isAsyncMode=function(e){return k(e)||w(e)===c},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===f||e===s||e===o||e===h||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===l||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===g)},t.typeOf=w},7441:function(e,t,n){"use strict";e.exports=n(1372)},7574:function(e,t){"use strict";var n,r=Symbol.for("react.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case i:case s:case o:case d:case h:return e;default:switch(e=e&&e.$$typeof){case c:case l:case f:case v:case p:case u:return e;default:return t}}case a:return t}}}n=Symbol.for("react.module.reference"),t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=i,t.Lazy=v,t.Memo=p,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.SuspenseList=h,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(e){return g(e)===l},t.isContextProvider=function(e){return g(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return g(e)===f},t.isFragment=function(e){return g(e)===i},t.isLazy=function(e){return g(e)===v},t.isMemo=function(e){return g(e)===p},t.isPortal=function(e){return g(e)===a},t.isProfiler=function(e){return g(e)===s},t.isStrictMode=function(e){return g(e)===o},t.isSuspense=function(e){return g(e)===d},t.isSuspenseList=function(e){return g(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===s||e===o||e===d||e===h||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===p||e.$$typeof===u||e.$$typeof===l||e.$$typeof===f||e.$$typeof===n||void 0!==e.getModuleId)},t.typeOf=g},8599:function(e,t,n){"use strict";e.exports=n(7574)},7721:function(e,t,n){var r;e.exports=(r=n(2791),function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=r},function(e,t,n){(function(t){e.exports=function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){return a(t[o][1][e]||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i=!1,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";n.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){var t,n,r=l(e),o=r[0],s=r[1],u=new i(function(e,t){return 3*(e+t)/4-t}(o,s)),c=0,f=0<s?o-4:o;for(n=0;n<f;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===s&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===s&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},n.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],o=0,s=n-a;o<s;o+=16383)i.push(c(e,o,s<o+16383?s:o+16383));return 1==a?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2==a&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],a=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var a,i,o=[],s=t;s<n;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(i=a)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){},{}],3:[function(e,t,n){arguments[4][2][0].apply(n,arguments)},{dup:2}],4:[function(e,t,n){(function(t){"use strict";var r=e("base64-js"),a=e("ieee754"),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=t,n.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},n.INSPECT_MAX_BYTES=50;var o=2147483647;function s(e){if(o<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=new Uint8Array(e);return Object.setPrototypeOf(n,t.prototype),n}function t(e,t,n){if("number"!=typeof e)return u(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}function u(e,n,r){if("string"==typeof e)return function(e,n){if("string"==typeof n&&""!==n||(n="utf8"),!t.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var r=0|h(e,n),a=s(r),i=a.write(e,n);return i!==r&&(a=a.slice(0,i)),a}(e,n);if(ArrayBuffer.isView(e))return f(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer))return function(e,n,r){if(n<0||e.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<n+(r||0))throw new RangeError('"length" is outside of buffer bounds');var a;return a=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),Object.setPrototypeOf(a,t.prototype),a}(e,n,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var a=e.valueOf&&e.valueOf();if(null!=a&&a!==e)return t.from(a,n,r);var i=function(e){if(t.isBuffer(e)){var n=0|d(e.length),r=s(n);return 0===r.length||e.copy(r,0,0,n),r}return void 0!==e.length?"number"!=typeof e.length||P(e.length)?s(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return l(e),s(e<0?0:0|d(e))}function f(e){for(var t=e.length<0?0:0|d(e.length),n=s(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e){if(o<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function h(e,n){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,a=2<arguments.length&&!0===arguments[2];if(!a&&0===r)return 0;for(var i=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return O(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return D(e).length;default:if(i)return a?-1:O(e).length;n=(""+n).toLowerCase(),i=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,n,r,a,i){if(0===e.length)return-1;if("string"==typeof r?(a=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),P(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof n&&(n=t.from(n,a)),t.isBuffer(n))return 0===n.length?-1:m(e,n,r,a,i);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,n,r):Uint8Array.prototype.lastIndexOf.call(e,n,r):m(e,[n],r,a,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,a){var i,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=o=2,u/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var c=-1;for(i=n;i<s;i++)if(l(e,i)===l(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===u)return c*o}else-1!==c&&(i-=i-c),c=-1}else for(s<n+u&&(n=s-u),i=n;0<=i;i--){for(var f=!0,d=0;d<u;d++)if(l(e,i+d)!==l(t,d)){f=!1;break}if(f)return i}return-1}function g(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?a<(r=Number(r))&&(r=a):r=a;var i=t.length;i/2<r&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(P(s))return o;e[n+o]=s}return o}function y(e,t,n,r){return L(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return L(function(e,t){for(var n,r,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,a=n%256,i.push(a),i.push(r);return i}(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function w(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i,o,s,u,l=e[a],c=null,f=239<l?4:223<l?3:191<l?2:1;if(a+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(i=e[a+1]))&&127<(u=(31&l)<<6|63&i)&&(c=u);break;case 3:i=e[a+1],o=e[a+2],128==(192&i)&&128==(192&o)&&2047<(u=(15&l)<<12|(63&i)<<6|63&o)&&(u<55296||57343<u)&&(c=u);break;case 4:i=e[a+1],o=e[a+2],s=e[a+3],128==(192&i)&&128==(192&o)&&128==(192&s)&&65535<(u=(15&l)<<18|(63&i)<<12|(63&o)<<6|63&s)&&u<1114112&&(c=u)}null===c?(c=65533,f=1):65535<c&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),a+=f}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=k));return n}(r)}n.kMaxLength=o,(t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,n){return a=t,i=n,l(r=e),r<=0?s(r):void 0!==a?"string"==typeof i?s(r).fill(a,i):s(r).fill(a):s(r);var r,a,i},t.allocUnsafe=function(e){return c(e)},t.allocUnsafeSlow=function(e){return c(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,n){if(j(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),j(n,Uint8Array)&&(n=t.from(n,n.offset,n.byteLength)),!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var r=e.length,a=n.length,i=0,o=Math.min(r,a);i<o;++i)if(e[i]!==n[i]){r=e[i],a=n[i];break}return r<a?-1:a<r?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var r;if(void 0===n)for(r=n=0;r<e.length;++r)n+=e[r].length;var a=t.allocUnsafe(n),i=0;for(r=0;r<e.length;++r){var o=e[r];if(j(o,Uint8Array)&&(o=t.from(o)),!t.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(a,i),i+=o.length}return a},t.byteLength=h,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},t.prototype.toLocaleString=t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?w(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return _(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},i&&(t.prototype[i]=t.prototype.inspect),t.prototype.compare=function(e,n,r,a,i){if(j(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===a&&(a=0),void 0===i&&(i=this.length),n<0||r>e.length||a<0||i>this.length)throw new RangeError("out of range index");if(i<=a&&r<=n)return 0;if(i<=a)return-1;if(r<=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(a>>>=0),s=(r>>>=0)-(n>>>=0),u=Math.min(o,s),l=this.slice(a,i),c=e.slice(n,r),f=0;f<u;++f)if(l[f]!==c[f]){o=l[f],s=c[f];break}return o<s?-1:s<o?1:0},t.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},t.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},t.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},t.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||a<n)&&(n=a),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,o,s,u,l=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return s=t,u=n,L(O(e,this.length-s),this,s,u);case"ascii":case"latin1":case"binary":return y(this,e,t,n);case"base64":return i=t,o=n,L(D(e),this,i,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,n);default:if(l)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),l=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function S(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function _(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var a="",i=t;i<n;++i)a+=F[e[i]];return a}function E(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function T(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function I(e,n,r,a,i,o){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<n||n<o)throw new RangeError('"value" argument is out of bounds');if(r+a>e.length)throw new RangeError("Index out of range")}function A(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,r,i){return t=+t,n>>>=0,i||A(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function R(e,t,n,r,i){return t=+t,n>>>=0,i||A(e,0,n,8),a.write(e,t,n,r,52,8),n+8}t.prototype.slice=function(e,n){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):r<n&&(n=r),n<e&&(n=e);var a=this.subarray(e,n);return Object.setPrototypeOf(a,t.prototype),a},t.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r},t.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e+--t],a=1;0<t&&(a*=256);)r+=this[e+--t]*a;return r},t.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return(a*=128)<=r&&(r-=Math.pow(2,8*t)),r},t.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=t,a=1,i=this[e+--r];0<r&&(a*=256);)i+=this[e+--r]*a;return(a*=128)<=i&&(i-=Math.pow(2,8*t)),i},t.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),a.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),a.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),a.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),a.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||I(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},t.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||I(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;0<=--a&&(i*=256);)this[t+a]=e/i&255;return t+n},t.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=Math.pow(2,8*n-1);I(this,e,t,n,a-1,-a)}var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},t.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=Math.pow(2,8*n-1);I(this,e,t,n,a-1,-a)}var i=n-1,o=1,s=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},t.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},t.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},t.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},t.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},t.prototype.copy=function(e,n,r,a){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,a||0===a||(a=this.length),n>=e.length&&(n=e.length),n=n||0,0<a&&a<r&&(a=r),a===r)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-n<a-r&&(a=e.length-n+r);var i=a-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,a);else if(this===e&&r<n&&n<a)for(var o=i-1;0<=o;--o)e[o+n]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,a),n);return i},t.prototype.fill=function(e,n,r,a){if("string"==typeof e){if("string"==typeof n?(a=n,n=0,r=this.length):"string"==typeof r&&(a=r,r=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!t.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===e.length){var i=e.charCodeAt(0);("utf8"===a&&i<128||"latin1"===a)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;var o;if(n>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(o=n;o<r;++o)this[o]=e;else{var s=t.isBuffer(e)?e:t.from(e,a),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-n;++o)this[o+n]=s[o%u]}return this};var M=/[^+/0-9A-Za-z-_]/g;function O(e,t){var n;t=t||1/0;for(var r=e.length,a=null,i=[],o=0;o<r;++o){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!a){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(o+1===r){-1<(t-=3)&&i.push(239,191,189);continue}a=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&-1<(t-=3)&&i.push(239,191,189);if(a=null,n<128){if(--t<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function D(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function P(e){return e!=e}var F=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,a=0;a<16;++a)t[r+a]=e[n]+e[a];return t}()}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:233}],5:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},{}],6:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},{"../internals/is-object":73}],7:[function(e,t,n){var r=e("../internals/well-known-symbol"),a=e("../internals/object-create"),i=e("../internals/object-define-property"),o=r("unscopables"),s=Array.prototype;null==s[o]&&i.f(s,o,{configurable:!0,value:a(null)}),t.exports=function(e){s[o][e]=!0}},{"../internals/object-create":89,"../internals/object-define-property":91,"../internals/well-known-symbol":145}],8:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt;t.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},{"../internals/string-multibyte":122}],9:[function(e,t,n){t.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},{}],10:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},{"../internals/is-object":73}],11:[function(e,t,n){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},{}],12:[function(e,t,n){"use strict";function r(e){return u(e)&&l(N,c(e))}var a,i=e("../internals/array-buffer-native"),o=e("../internals/descriptors"),s=e("../internals/global"),u=e("../internals/is-object"),l=e("../internals/has"),c=e("../internals/classof"),f=e("../internals/create-non-enumerable-property"),d=e("../internals/redefine"),h=e("../internals/object-define-property").f,p=e("../internals/object-get-prototype-of"),v=e("../internals/object-set-prototype-of"),m=e("../internals/well-known-symbol"),g=e("../internals/uid"),y=s.Int8Array,b=y&&y.prototype,x=s.Uint8ClampedArray,w=x&&x.prototype,k=y&&p(y),S=b&&p(b),_=Object.prototype,C=_.isPrototypeOf,E=m("toStringTag"),T=g("TYPED_ARRAY_TAG"),I=i&&!!v&&"Opera"!==c(s.opera),A=!1,N={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(a in N)s[a]||(I=!1);if((!I||"function"!=typeof k||k===Function.prototype)&&(k=function(){throw TypeError("Incorrect invocation")},I))for(a in N)s[a]&&v(s[a],k);if((!I||!S||S===_)&&(S=k.prototype,I))for(a in N)s[a]&&v(s[a].prototype,S);if(I&&p(w)!==S&&v(w,S),o&&!l(S,E))for(a in A=!0,h(S,E,{get:function(){return u(this)?this[T]:void 0}}),N)s[a]&&f(s[a],T,a);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_TAG:A&&T,aTypedArray:function(e){if(r(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(v){if(C.call(k,e))return e}else for(var t in N)if(l(N,a)){var n=s[t];if(n&&(e===n||C.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(o){if(n)for(var r in N){var a=s[r];a&&l(a.prototype,e)&&delete a.prototype[e]}S[e]&&!n||d(S,e,n?t:I&&b[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,a;if(o){if(v){if(n)for(r in N)(a=s[r])&&l(a,e)&&delete a[e];if(k[e]&&!n)return;try{return d(k,e,n?t:I&&y[e]||t)}catch(e){}}for(r in N)!(a=s[r])||a[e]&&!n||d(a,e,t)}},isView:function(e){var t=c(e);return"DataView"===t||l(N,t)},isTypedArray:r,TypedArray:k,TypedArrayPrototype:S}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/global":58,"../internals/has":59,"../internals/is-object":73,"../internals/object-define-property":91,"../internals/object-get-prototype-of":96,"../internals/object-set-prototype-of":100,"../internals/redefine":107,"../internals/uid":142,"../internals/well-known-symbol":145}],13:[function(e,t,n){"use strict";function r(e){return[255&e]}function a(e){return[255&e,e>>8&255]}function i(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function o(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function s(e){return W(e,23,4)}function u(e){return W(e,52,8)}function l(e,t){E(e[D],t,{get:function(){return N(this)[t]}})}function c(e,t,n,r){var a=w(n),i=N(e);if(a+t>i.byteLength)throw U(L);var o=N(i.buffer).bytes,s=a+i.byteOffset,u=o.slice(s,s+t);return r?u:u.reverse()}function f(e,t,n,r,a,i){var o=w(n),s=N(e);if(o+t>s.byteLength)throw U(L);for(var u=N(s.buffer).bytes,l=o+s.byteOffset,c=r(+a),f=0;f<t;f++)u[l+f]=c[i?f:t-f-1]}var d=e("../internals/global"),h=e("../internals/descriptors"),p=e("../internals/array-buffer-native"),v=e("../internals/create-non-enumerable-property"),m=e("../internals/redefine-all"),g=e("../internals/fails"),y=e("../internals/an-instance"),b=e("../internals/to-integer"),x=e("../internals/to-length"),w=e("../internals/to-index"),k=e("../internals/ieee754"),S=e("../internals/object-get-prototype-of"),_=e("../internals/object-set-prototype-of"),C=e("../internals/object-get-own-property-names").f,E=e("../internals/object-define-property").f,T=e("../internals/array-fill"),I=e("../internals/set-to-string-tag"),A=e("../internals/internal-state"),N=A.get,R=A.set,M="ArrayBuffer",O="DataView",D="prototype",L="Wrong index",j=d[M],P=j,F=d[O],B=F&&F[D],z=Object.prototype,U=d.RangeError,W=k.pack,G=k.unpack;if(p){if(!g((function(){j(1)}))||!g((function(){new j(-1)}))||g((function(){return new j,new j(1.5),new j(NaN),j.name!=M}))){for(var V,H=(P=function(e){return y(this,P),new j(w(e))})[D]=j[D],q=C(j),X=0;q.length>X;)(V=q[X++])in P||v(P,V,j[V]);H.constructor=P}_&&S(B)!==z&&_(B,z);var Y=new F(new P(2)),K=B.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||m(B,{setInt8:function(e,t){K.call(this,e,t<<24>>24)},setUint8:function(e,t){K.call(this,e,t<<24>>24)}},{unsafe:!0})}else P=function(e){y(this,P,M);var t=w(e);R(this,{bytes:T.call(new Array(t),0),byteLength:t}),h||(this.byteLength=t)},F=function(e,t,n){y(this,F,O),y(e,P,O);var r=N(e).byteLength,a=b(t);if(a<0||r<a)throw U("Wrong offset");if(r<a+(n=void 0===n?r-a:x(n)))throw U("Wrong length");R(this,{buffer:e,byteLength:n,byteOffset:a}),h||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},h&&(l(P,"byteLength"),l(F,"buffer"),l(F,"byteLength"),l(F,"byteOffset")),m(F[D],{getInt8:function(e){return c(this,1,e)[0]<<24>>24},getUint8:function(e){return c(this,1,e)[0]},getInt16:function(e,t){var n=c(this,2,e,1<arguments.length?t:void 0);return(n[1]<<8|n[0])<<16>>16},getUint16:function(e,t){var n=c(this,2,e,1<arguments.length?t:void 0);return n[1]<<8|n[0]},getInt32:function(e,t){return o(c(this,4,e,1<arguments.length?t:void 0))},getUint32:function(e,t){return o(c(this,4,e,1<arguments.length?t:void 0))>>>0},getFloat32:function(e,t){return G(c(this,4,e,1<arguments.length?t:void 0),23)},getFloat64:function(e,t){return G(c(this,8,e,1<arguments.length?t:void 0),52)},setInt8:function(e,t){f(this,1,e,r,t)},setUint8:function(e,t){f(this,1,e,r,t)},setInt16:function(e,t,n){f(this,2,e,a,t,2<arguments.length?n:void 0)},setUint16:function(e,t,n){f(this,2,e,a,t,2<arguments.length?n:void 0)},setInt32:function(e,t,n){f(this,4,e,i,t,2<arguments.length?n:void 0)},setUint32:function(e,t,n){f(this,4,e,i,t,2<arguments.length?n:void 0)},setFloat32:function(e,t,n){f(this,4,e,s,t,2<arguments.length?n:void 0)},setFloat64:function(e,t,n){f(this,8,e,u,t,2<arguments.length?n:void 0)}});I(P,M),I(F,O),t.exports={ArrayBuffer:P,DataView:F}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":58,"../internals/ieee754":64,"../internals/internal-state":69,"../internals/object-define-property":91,"../internals/object-get-own-property-names":94,"../internals/object-get-prototype-of":96,"../internals/object-set-prototype-of":100,"../internals/redefine-all":106,"../internals/set-to-string-tag":116,"../internals/to-index":130,"../internals/to-integer":132,"../internals/to-length":133}],14:[function(e,t,n){"use strict";var r=e("../internals/to-object"),a=e("../internals/to-absolute-index"),i=e("../internals/to-length"),o=Math.min;t.exports=[].copyWithin||function(e,t,n){var s=r(this),u=i(s.length),l=a(e,u),c=a(t,u),f=2<arguments.length?n:void 0,d=o((void 0===f?u:a(f,u))-c,u-l),h=1;for(c<l&&l<c+d&&(h=-1,c+=d-1,l+=d-1);0<d--;)c in s?s[l]=s[c]:delete s[l],l+=h,c+=h;return s}},{"../internals/to-absolute-index":129,"../internals/to-length":133,"../internals/to-object":134}],15:[function(e,t,n){"use strict";var r=e("../internals/to-object"),a=e("../internals/to-absolute-index"),i=e("../internals/to-length");t.exports=function(e,t,n){for(var o=r(this),s=i(o.length),u=arguments.length,l=a(1<u?t:void 0,s),c=2<u?n:void 0,f=void 0===c?s:a(c,s);l<f;)o[l++]=e;return o}},{"../internals/to-absolute-index":129,"../internals/to-length":133,"../internals/to-object":134}],16:[function(e,t,n){"use strict";var r=e("../internals/array-iteration").forEach,a=e("../internals/array-method-is-strict"),i=e("../internals/array-method-uses-to-length"),o=a("forEach"),s=i("forEach");t.exports=o&&s?[].forEach:function(e,t){return r(this,e,1<arguments.length?t:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(e,t,n){"use strict";var r=e("../internals/function-bind-context"),a=e("../internals/to-object"),i=e("../internals/call-with-safe-iteration-closing"),o=e("../internals/is-array-iterator-method"),s=e("../internals/to-length"),u=e("../internals/create-property"),l=e("../internals/get-iterator-method");t.exports=function(e,t,n){var c,f,d,h,p,v,m=a(e),g="function"==typeof this?this:Array,y=arguments.length,b=1<y?t:void 0,x=void 0!==b,w=l(m),k=0;if(x&&(b=r(b,2<y?n:void 0,2)),null==w||g==Array&&o(w))for(f=new g(c=s(m.length));k<c;k++)v=x?b(m[k],k):m[k],u(f,k,v);else for(p=(h=w.call(m)).next,f=new g;!(d=p.call(h)).done;k++)v=x?i(h,b,[d.value,k],!0):d.value,u(f,k,v);return f.length=k,f}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":39,"../internals/function-bind-context":53,"../internals/get-iterator-method":56,"../internals/is-array-iterator-method":70,"../internals/to-length":133,"../internals/to-object":134}],18:[function(e,t,n){function r(e){return function(t,n,r){var s,u=a(t),l=i(u.length),c=o(r,l);if(e&&n!=n){for(;c<l;)if((s=u[c++])!=s)return!0}else for(;c<l;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}var a=e("../internals/to-indexed-object"),i=e("../internals/to-length"),o=e("../internals/to-absolute-index");t.exports={includes:r(!0),indexOf:r(!1)}},{"../internals/to-absolute-index":129,"../internals/to-indexed-object":131,"../internals/to-length":133}],19:[function(e,t,n){function r(e){var t=1==e,n=2==e,r=3==e,c=4==e,f=6==e,d=5==e||f;return function(h,p,v,m){for(var g,y,b=o(h),x=i(b),w=a(p,v,3),k=s(x.length),S=0,_=m||u,C=t?_(h,k):n?_(h,0):void 0;S<k;S++)if((d||S in x)&&(y=w(g=x[S],S,b),e))if(t)C[S]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return S;case 2:l.call(C,g)}else if(c)return!1;return f?-1:r||c?c:C}}var a=e("../internals/function-bind-context"),i=e("../internals/indexed-object"),o=e("../internals/to-object"),s=e("../internals/to-length"),u=e("../internals/array-species-create"),l=[].push;t.exports={forEach:r(0),map:r(1),filter:r(2),some:r(3),every:r(4),find:r(5),findIndex:r(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":53,"../internals/indexed-object":65,"../internals/to-length":133,"../internals/to-object":134}],20:[function(e,t,n){"use strict";var r=e("../internals/to-indexed-object"),a=e("../internals/to-integer"),i=e("../internals/to-length"),o=e("../internals/array-method-is-strict"),s=e("../internals/array-method-uses-to-length"),u=Math.min,l=[].lastIndexOf,c=!!l&&1/[1].lastIndexOf(1,-0)<0,f=o("lastIndexOf"),d=s("indexOf",{ACCESSORS:!0,1:0}),h=c||!f||!d;t.exports=h?function(e,t){if(c)return l.apply(this,arguments)||0;var n=r(this),o=i(n.length),s=o-1;for(1<arguments.length&&(s=u(s,a(t))),s<0&&(s=o+s);0<=s;s--)if(s in n&&n[s]===e)return s||0;return-1}:l},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":131,"../internals/to-integer":132,"../internals/to-length":133}],21:[function(e,t,n){var r=e("../internals/fails"),a=e("../internals/well-known-symbol"),i=e("../internals/engine-v8-version"),o=a("species");t.exports=function(e){return 51<=i||!r((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},{"../internals/engine-v8-version":47,"../internals/fails":50,"../internals/well-known-symbol":145}],22:[function(e,t,n){"use strict";var r=e("../internals/fails");t.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},{"../internals/fails":50}],23:[function(e,t,n){function r(e){throw e}var a=e("../internals/descriptors"),i=e("../internals/fails"),o=e("../internals/has"),s=Object.defineProperty,u={};t.exports=function(e,t){if(o(u,e))return u[e];var n=[][e],l=!!o(t=t||{},"ACCESSORS")&&t.ACCESSORS,c=o(t,0)?t[0]:r,f=o(t,1)?t[1]:void 0;return u[e]=!!n&&!i((function(){if(l&&!a)return!0;var e={length:-1};l?s(e,1,{enumerable:!0,get:r}):e[1]=1,n.call(e,c,f)}))}},{"../internals/descriptors":42,"../internals/fails":50,"../internals/has":59}],24:[function(e,t,n){function r(e){return function(t,n,r,u){a(n);var l=i(t),c=o(l),f=s(l.length),d=e?f-1:0,h=e?-1:1;if(r<2)for(;;){if(d in c){u=c[d],d+=h;break}if(d+=h,e?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?0<=d:d<f;d+=h)d in c&&(u=n(u,c[d],d,l));return u}}var a=e("../internals/a-function"),i=e("../internals/to-object"),o=e("../internals/indexed-object"),s=e("../internals/to-length");t.exports={left:r(!1),right:r(!0)}},{"../internals/a-function":5,"../internals/indexed-object":65,"../internals/to-length":133,"../internals/to-object":134}],25:[function(e,t,n){var r=e("../internals/is-object"),a=e("../internals/is-array"),i=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var n;return a(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!a(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},{"../internals/is-array":71,"../internals/is-object":73,"../internals/well-known-symbol":145}],26:[function(e,t,n){var r=e("../internals/an-object");t.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},{"../internals/an-object":10}],27:[function(e,t,n){var r=e("../internals/well-known-symbol")("iterator"),a=!1;try{var i=0,o={next:function(){return{done:!!i++}},return:function(){a=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}t.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},{"../internals/well-known-symbol":145}],28:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],29:[function(e,t,n){var r=e("../internals/to-string-tag-support"),a=e("../internals/classof-raw"),i=e("../internals/well-known-symbol")("toStringTag"),o="Arguments"==a(function(){return arguments}());t.exports=r?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?a(t):"Object"==(r=a(t))&&"function"==typeof t.callee?"Arguments":r}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":138,"../internals/well-known-symbol":145}],30:[function(e,t,n){"use strict";var r=e("../internals/object-define-property").f,a=e("../internals/object-create"),i=e("../internals/redefine-all"),o=e("../internals/function-bind-context"),s=e("../internals/an-instance"),u=e("../internals/iterate"),l=e("../internals/define-iterator"),c=e("../internals/set-species"),f=e("../internals/descriptors"),d=e("../internals/internal-metadata").fastKey,h=e("../internals/internal-state"),p=h.set,v=h.getterFor;t.exports={getConstructor:function(e,t,n,l){function c(e,t,n){var r,a,i=m(e),o=g(e,t);return o?o.value=n:(i.last=o={index:a=d(t,!0),key:t,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=o),r&&(r.next=o),f?i.size++:e.size++,"F"!==a&&(i.index[a]=o)),e}var h=e((function(e,r){s(e,h,t),p(e,{type:t,index:a(null),first:void 0,last:void 0,size:0}),f||(e.size=0),null!=r&&u(r,e[l],e,n)})),m=v(t),g=function(e,t){var n,r=m(e),a=d(t);if("F"!==a)return r.index[a];for(n=r.first;n;n=n.next)if(n.key==t)return n};return i(h.prototype,{clear:function(){for(var e=m(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,f?e.size=0:this.size=0},delete:function(e){var t=m(this),n=g(this,e);if(n){var r=n.next,a=n.previous;delete t.index[n.index],n.removed=!0,a&&(a.next=r),r&&(r.previous=a),t.first==n&&(t.first=r),t.last==n&&(t.last=a),f?t.size--:this.size--}return!!n},forEach:function(e,t){for(var n,r=m(this),a=o(e,1<arguments.length?t:void 0,3);n=n?n.next:r.first;)for(a(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(e){return!!g(this,e)}}),i(h.prototype,n?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return c(this,0===e?0:e,t)}}:{add:function(e){return c(this,e=0===e?0:e,e)}}),f&&r(h.prototype,"size",{get:function(){return m(this).size}}),h},setStrong:function(e,t,n){var r=t+" Iterator",a=v(t),i=v(r);l(e,t,(function(e,t){p(this,{type:r,target:e,state:a(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:e.target=void 0,done:!0}}),n?"entries":"values",!n,!0),c(t)}}},{"../internals/an-instance":9,"../internals/define-iterator":40,"../internals/descriptors":42,"../internals/function-bind-context":53,"../internals/internal-metadata":68,"../internals/internal-state":69,"../internals/iterate":76,"../internals/object-create":89,"../internals/object-define-property":91,"../internals/redefine-all":106,"../internals/set-species":115}],31:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/global"),i=e("../internals/is-forced"),o=e("../internals/redefine"),s=e("../internals/internal-metadata"),u=e("../internals/iterate"),l=e("../internals/an-instance"),c=e("../internals/is-object"),f=e("../internals/fails"),d=e("../internals/check-correctness-of-iteration"),h=e("../internals/set-to-string-tag"),p=e("../internals/inherit-if-required");t.exports=function(e,t,n){function v(e){var t=x[e];o(x,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!c(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})}var m=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),y=m?"set":"add",b=a[e],x=b&&b.prototype,w=b,k={};if(i(e,"function"!=typeof b||!(g||x.forEach&&!f((function(){(new b).entries().next()})))))w=n.getConstructor(t,e,m,y),s.REQUIRED=!0;else if(i(e,!0)){var S=new w,_=S[y](g?{}:-0,1)!=S,C=f((function(){S.has(1)})),E=d((function(e){new b(e)})),T=!g&&f((function(){for(var e=new b,t=5;t--;)e[y](t,t);return!e.has(-0)}));E||(((w=t((function(t,n){l(t,w,e);var r=p(new b,t,w);return null!=n&&u(n,r[y],r,m),r}))).prototype=x).constructor=w),(C||T)&&(v("delete"),v("has"),m&&v("get")),(T||_)&&v(y),g&&x.clear&&delete x.clear}return k[e]=w,r({global:!0,forced:w!=b},k),h(w,e),g||n.setStrong(w,e,m),w}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":49,"../internals/fails":50,"../internals/global":58,"../internals/inherit-if-required":66,"../internals/internal-metadata":68,"../internals/is-forced":72,"../internals/is-object":73,"../internals/iterate":76,"../internals/redefine":107,"../internals/set-to-string-tag":116}],32:[function(e,t,n){var r=e("../internals/has"),a=e("../internals/own-keys"),i=e("../internals/object-get-own-property-descriptor"),o=e("../internals/object-define-property");t.exports=function(e,t){for(var n=a(t),s=o.f,u=i.f,l=0;l<n.length;l++){var c=n[l];r(e,c)||s(e,c,u(t,c))}}},{"../internals/has":59,"../internals/object-define-property":91,"../internals/object-get-own-property-descriptor":92,"../internals/own-keys":102}],33:[function(e,t,n){var r=e("../internals/well-known-symbol")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},{"../internals/well-known-symbol":145}],34:[function(e,t,n){var r=e("../internals/fails");t.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},{"../internals/fails":50}],35:[function(e,t,n){var r=e("../internals/require-object-coercible"),a=/"/g;t.exports=function(e,t,n,i){var o=String(r(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(i).replace(a,"&quot;")+'"'),s+">"+o+"</"+t+">"}},{"../internals/require-object-coercible":112}],36:[function(e,t,n){"use strict";function r(){return this}var a=e("../internals/iterators-core").IteratorPrototype,i=e("../internals/object-create"),o=e("../internals/create-property-descriptor"),s=e("../internals/set-to-string-tag"),u=e("../internals/iterators");t.exports=function(e,t,n){var l=t+" Iterator";return e.prototype=i(a,{next:o(1,n)}),s(e,l,!1,!0),u[l]=r,e}},{"../internals/create-property-descriptor":38,"../internals/iterators":78,"../internals/iterators-core":77,"../internals/object-create":89,"../internals/set-to-string-tag":116}],37:[function(e,t,n){var r=e("../internals/descriptors"),a=e("../internals/object-define-property"),i=e("../internals/create-property-descriptor");t.exports=r?function(e,t,n){return a.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/object-define-property":91}],38:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],39:[function(e,t,n){"use strict";var r=e("../internals/to-primitive"),a=e("../internals/object-define-property"),i=e("../internals/create-property-descriptor");t.exports=function(e,t,n){var o=r(t);o in e?a.f(e,o,i(0,n)):e[o]=n}},{"../internals/create-property-descriptor":38,"../internals/object-define-property":91,"../internals/to-primitive":137}],40:[function(e,t,n){"use strict";function r(){return this}var a=e("../internals/export"),i=e("../internals/create-iterator-constructor"),o=e("../internals/object-get-prototype-of"),s=e("../internals/object-set-prototype-of"),u=e("../internals/set-to-string-tag"),l=e("../internals/create-non-enumerable-property"),c=e("../internals/redefine"),f=e("../internals/well-known-symbol"),d=e("../internals/is-pure"),h=e("../internals/iterators"),p=e("../internals/iterators-core"),v=p.IteratorPrototype,m=p.BUGGY_SAFARI_ITERATORS,g=f("iterator"),y="values",b="entries";t.exports=function(e,t,n,f,p,x,w){function k(e){if(e===p&&N)return N;if(!m&&e in I)return I[e];switch(e){case"keys":case y:case b:return function(){return new n(this,e)}}return function(){return new n(this)}}i(n,t,f);var S,_,C,E=t+" Iterator",T=!1,I=e.prototype,A=I[g]||I["@@iterator"]||p&&I[p],N=!m&&A||k(p),R="Array"==t&&I.entries||A;if(R&&(S=o(R.call(new e)),v!==Object.prototype&&S.next&&(d||o(S)===v||(s?s(S,v):"function"!=typeof S[g]&&l(S,g,r)),u(S,E,!0,!0),d&&(h[E]=r))),p==y&&A&&A.name!==y&&(T=!0,N=function(){return A.call(this)}),d&&!w||I[g]===N||l(I,g,N),h[t]=N,p)if(_={values:k(y),keys:x?N:k("keys"),entries:k(b)},w)for(C in _)!m&&!T&&C in I||c(I,C,_[C]);else a({target:t,proto:!0,forced:m||T},_);return _}},{"../internals/create-iterator-constructor":36,"../internals/create-non-enumerable-property":37,"../internals/export":49,"../internals/is-pure":74,"../internals/iterators":78,"../internals/iterators-core":77,"../internals/object-get-prototype-of":96,"../internals/object-set-prototype-of":100,"../internals/redefine":107,"../internals/set-to-string-tag":116,"../internals/well-known-symbol":145}],41:[function(e,t,n){var r=e("../internals/path"),a=e("../internals/has"),i=e("../internals/well-known-symbol-wrapped"),o=e("../internals/object-define-property").f;t.exports=function(e){var t=r.Symbol||(r.Symbol={});a(t,e)||o(t,e,{value:i.f(e)})}},{"../internals/has":59,"../internals/object-define-property":91,"../internals/path":103,"../internals/well-known-symbol-wrapped":144}],42:[function(e,t,n){var r=e("../internals/fails");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},{"../internals/fails":50}],43:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/is-object"),i=r.document,o=a(i)&&a(i.createElement);t.exports=function(e){return o?i.createElement(e):{}}},{"../internals/global":58,"../internals/is-object":73}],44:[function(e,t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],45:[function(e,t,n){var r=e("../internals/engine-user-agent");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},{"../internals/engine-user-agent":46}],46:[function(e,t,n){var r=e("../internals/get-built-in");t.exports=r("navigator","userAgent")||""},{"../internals/get-built-in":55}],47:[function(e,t,n){var r,a,i=e("../internals/global"),o=e("../internals/engine-user-agent"),s=i.process,u=s&&s.versions,l=u&&u.v8;l?a=(r=l.split("."))[0]+r[1]:o&&(!(r=o.match(/Edge\/(\d+)/))||74<=r[1])&&(r=o.match(/Chrome\/(\d+)/))&&(a=r[1]),t.exports=a&&+a},{"../internals/engine-user-agent":46,"../internals/global":58}],48:[function(e,t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],49:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/object-get-own-property-descriptor").f,i=e("../internals/create-non-enumerable-property"),o=e("../internals/redefine"),s=e("../internals/set-global"),u=e("../internals/copy-constructor-properties"),l=e("../internals/is-forced");t.exports=function(e,t){var n,c,f,d,h,p=e.target,v=e.global,m=e.stat;if(n=v?r:m?r[p]||s(p,{}):(r[p]||{}).prototype)for(c in t){if(d=t[c],f=e.noTargetGet?(h=a(n,c))&&h.value:n[c],!l(v?c:p+(m?".":"#")+c,e.forced)&&void 0!==f){if(typeof d==typeof f)continue;u(d,f)}(e.sham||f&&f.sham)&&i(d,"sham",!0),o(n,c,d,e)}}},{"../internals/copy-constructor-properties":32,"../internals/create-non-enumerable-property":37,"../internals/global":58,"../internals/is-forced":72,"../internals/object-get-own-property-descriptor":92,"../internals/redefine":107,"../internals/set-global":114}],50:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],51:[function(e,t,n){"use strict";e("../modules/es.regexp.exec");var r=e("../internals/redefine"),a=e("../internals/fails"),i=e("../internals/well-known-symbol"),o=e("../internals/regexp-exec"),s=e("../internals/create-non-enumerable-property"),u=i("species"),l=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),c="$0"==="a".replace(/./,"$0"),f=i("replace"),d=!!/./[f]&&""===/./[f]("a","$0"),h=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(e,t,n,f){var p=i(e),v=!a((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),m=v&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={constructor:{}}).constructor[u]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!v||!m||"replace"===e&&(!l||!c||d)||"split"===e&&!h){var g=/./[p],y=n(p,""[e],(function(e,t,n,r,a){return t.exec===o?v&&!a?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),b=y[0],x=y[1];r(String.prototype,e,b),r(RegExp.prototype,p,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}f&&s(RegExp.prototype[p],"sham",!0)}},{"../internals/create-non-enumerable-property":37,"../internals/fails":50,"../internals/redefine":107,"../internals/regexp-exec":109,"../internals/well-known-symbol":145,"../modules/es.regexp.exec":178}],52:[function(e,t,n){var r=e("../internals/fails");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},{"../internals/fails":50}],53:[function(e,t,n){var r=e("../internals/a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},{"../internals/a-function":5}],54:[function(e,t,n){"use strict";var r=e("../internals/a-function"),a=e("../internals/is-object"),i=[].slice,o={};t.exports=Function.bind||function(e){var t=r(this),n=i.call(arguments,1),s=function r(){var a=n.concat(i.call(arguments));return this instanceof r?function(e,t,n){if(!(t in o)){for(var r=[],a=0;a<t;a++)r[a]="a["+a+"]";o[t]=Function("C,a","return new C("+r.join(",")+")")}return o[t](e,n)}(t,a.length,a):t.apply(e,a)};return a(t.prototype)&&(s.prototype=t.prototype),s}},{"../internals/a-function":5,"../internals/is-object":73}],55:[function(e,t,n){function r(e){return"function"==typeof e?e:void 0}var a=e("../internals/path"),i=e("../internals/global");t.exports=function(e,t){return arguments.length<2?r(a[e])||r(i[e]):a[e]&&a[e][t]||i[e]&&i[e][t]}},{"../internals/global":58,"../internals/path":103}],56:[function(e,t,n){var r=e("../internals/classof"),a=e("../internals/iterators"),i=e("../internals/well-known-symbol")("iterator");t.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||a[r(e)]}},{"../internals/classof":29,"../internals/iterators":78,"../internals/well-known-symbol":145}],57:[function(e,t,n){var r=e("../internals/an-object"),a=e("../internals/get-iterator-method");t.exports=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},{"../internals/an-object":10,"../internals/get-iterator-method":56}],58:[function(e,n,r){(function(e){function t(e){return e&&e.Math==Math&&e}n.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof e&&e)||Function("return this")()}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],59:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],60:[function(e,t,n){t.exports={}},{}],61:[function(e,t,n){var r=e("../internals/global");t.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},{"../internals/global":58}],62:[function(e,t,n){var r=e("../internals/get-built-in");t.exports=r("document","documentElement")},{"../internals/get-built-in":55}],63:[function(e,t,n){var r=e("../internals/descriptors"),a=e("../internals/fails"),i=e("../internals/document-create-element");t.exports=!r&&!a((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},{"../internals/descriptors":42,"../internals/document-create-element":43,"../internals/fails":50}],64:[function(e,t,n){var r=Math.abs,a=Math.pow,i=Math.floor,o=Math.log,s=Math.LN2;t.exports={pack:function(e,t,n){var u,l,c,f=new Array(n),d=8*n-t-1,h=(1<<d)-1,p=h>>1,v=23===t?a(2,-24)-a(2,-77):0,m=e<0||0===e&&1/e<0?1:0,g=0;for((e=r(e))!=e||e===1/0?(l=e!=e?1:0,u=h):(u=i(o(e)/s),e*(c=a(2,-u))<1&&(u--,c*=2),2<=(e+=1<=u+p?v/c:v*a(2,1-p))*c&&(u++,c/=2),h<=u+p?(l=0,u=h):1<=u+p?(l=(e*c-1)*a(2,t),u+=p):(l=e*a(2,p-1)*a(2,t),u=0));8<=t;f[g++]=255&l,l/=256,t-=8);for(u=u<<t|l,d+=t;0<d;f[g++]=255&u,u/=256,d-=8);return f[--g]|=128*m,f},unpack:function(e,t){var n,r=e.length,i=8*r-t-1,o=(1<<i)-1,s=o>>1,u=i-7,l=r-1,c=e[l--],f=127&c;for(c>>=7;0<u;f=256*f+e[l],l--,u-=8);for(n=f&(1<<-u)-1,f>>=-u,u+=t;0<u;n=256*n+e[l],l--,u-=8);if(0===f)f=1-s;else{if(f===o)return n?NaN:c?-1/0:1/0;n+=a(2,t),f-=s}return(c?-1:1)*n*a(2,f-t)}}},{}],65:[function(e,t,n){var r=e("../internals/fails"),a=e("../internals/classof-raw"),i="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?i.call(e,""):Object(e)}:Object},{"../internals/classof-raw":28,"../internals/fails":50}],66:[function(e,t,n){var r=e("../internals/is-object"),a=e("../internals/object-set-prototype-of");t.exports=function(e,t,n){var i,o;return a&&"function"==typeof(i=t.constructor)&&i!==n&&r(o=i.prototype)&&o!==n.prototype&&a(e,o),e}},{"../internals/is-object":73,"../internals/object-set-prototype-of":100}],67:[function(e,t,n){var r=e("../internals/shared-store"),a=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return a.call(e)}),t.exports=r.inspectSource},{"../internals/shared-store":118}],68:[function(e,t,n){function r(e){s(e,c,{value:{objectID:"O"+ ++f,weakData:{}}})}var a=e("../internals/hidden-keys"),i=e("../internals/is-object"),o=e("../internals/has"),s=e("../internals/object-define-property").f,u=e("../internals/uid"),l=e("../internals/freezing"),c=u("meta"),f=0,d=Object.isExtensible||function(){return!0},h=t.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,c)){if(!d(e))return"F";if(!t)return"E";r(e)}return e[c].objectID},getWeakData:function(e,t){if(!o(e,c)){if(!d(e))return!0;if(!t)return!1;r(e)}return e[c].weakData},onFreeze:function(e){return l&&h.REQUIRED&&d(e)&&!o(e,c)&&r(e),e}};a[c]=!0},{"../internals/freezing":52,"../internals/has":59,"../internals/hidden-keys":60,"../internals/is-object":73,"../internals/object-define-property":91,"../internals/uid":142}],69:[function(e,t,n){var r,a,i,o=e("../internals/native-weak-map"),s=e("../internals/global"),u=e("../internals/is-object"),l=e("../internals/create-non-enumerable-property"),c=e("../internals/has"),f=e("../internals/shared-key"),d=e("../internals/hidden-keys"),h=s.WeakMap;if(o){var p=new h,v=p.get,m=p.has,g=p.set;r=function(e,t){return g.call(p,e,t),t},a=function(e){return v.call(p,e)||{}},i=function(e){return m.call(p,e)}}else{var y=f("state");d[y]=!0,r=function(e,t){return l(e,y,t),t},a=function(e){return c(e,y)?e[y]:{}},i=function(e){return c(e,y)}}t.exports={set:r,get:a,has:i,enforce:function(e){return i(e)?a(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=a(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},{"../internals/create-non-enumerable-property":37,"../internals/global":58,"../internals/has":59,"../internals/hidden-keys":60,"../internals/is-object":73,"../internals/native-weak-map":84,"../internals/shared-key":117}],70:[function(e,t,n){var r=e("../internals/well-known-symbol"),a=e("../internals/iterators"),i=r("iterator"),o=Array.prototype;t.exports=function(e){return void 0!==e&&(a.Array===e||o[i]===e)}},{"../internals/iterators":78,"../internals/well-known-symbol":145}],71:[function(e,t,n){var r=e("../internals/classof-raw");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"../internals/classof-raw":28}],72:[function(e,t,n){function r(e,t){var n=s[o(e)];return n==l||n!=u&&("function"==typeof t?a(t):!!t)}var a=e("../internals/fails"),i=/#|\.prototype\./,o=r.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=r.data={},u=r.NATIVE="N",l=r.POLYFILL="P";t.exports=r},{"../internals/fails":50}],73:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],74:[function(e,t,n){t.exports=!1},{}],75:[function(e,t,n){var r=e("../internals/is-object"),a=e("../internals/classof-raw"),i=e("../internals/well-known-symbol")("match");t.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==a(e))}},{"../internals/classof-raw":28,"../internals/is-object":73,"../internals/well-known-symbol":145}],76:[function(e,t,n){function r(e,t){this.stopped=e,this.result=t}var a=e("../internals/an-object"),i=e("../internals/is-array-iterator-method"),o=e("../internals/to-length"),s=e("../internals/function-bind-context"),u=e("../internals/get-iterator-method"),l=e("../internals/call-with-safe-iteration-closing");(t.exports=function(e,t,n,c,f){var d,h,p,v,m,g,y,b=s(t,n,c?2:1);if(f)d=e;else{if("function"!=typeof(h=u(e)))throw TypeError("Target is not iterable");if(i(h)){for(p=0,v=o(e.length);p<v;p++)if((m=c?b(a(y=e[p])[0],y[1]):b(e[p]))&&m instanceof r)return m;return new r(!1)}d=h.call(e)}for(g=d.next;!(y=g.call(d)).done;)if("object"==typeof(m=l(d,b,y.value,c))&&m&&m instanceof r)return m;return new r(!1)}).stop=function(e){return new r(!0,e)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":53,"../internals/get-iterator-method":56,"../internals/is-array-iterator-method":70,"../internals/to-length":133}],77:[function(e,t,n){"use strict";var r,a,i,o=e("../internals/object-get-prototype-of"),s=e("../internals/create-non-enumerable-property"),u=e("../internals/has"),l=e("../internals/well-known-symbol"),c=e("../internals/is-pure"),f=l("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(a=o(o(i)))!==Object.prototype&&(r=a):d=!0),null==r&&(r={}),c||u(r,f)||s(r,f,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},{"../internals/create-non-enumerable-property":37,"../internals/has":59,"../internals/is-pure":74,"../internals/object-get-prototype-of":96,"../internals/well-known-symbol":145}],78:[function(e,t,n){arguments[4][60][0].apply(n,arguments)},{dup:60}],79:[function(e,t,n){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],80:[function(e,t,n){var r,a,i,o,s,u,l,c,f=e("../internals/global"),d=e("../internals/object-get-own-property-descriptor").f,h=e("../internals/classof-raw"),p=e("../internals/task").set,v=e("../internals/engine-is-ios"),m=f.MutationObserver||f.WebKitMutationObserver,g=f.process,y=f.Promise,b="process"==h(g),x=d(f,"queueMicrotask"),w=x&&x.value;w||(r=function(){var e,t;for(b&&(e=g.domain)&&e.exit();a;){t=a.fn,a=a.next;try{t()}catch(e){throw a?o():i=void 0,e}}i=void 0,e&&e.enter()},o=b?function(){g.nextTick(r)}:m&&!v?(s=!0,u=document.createTextNode(""),new m(r).observe(u,{characterData:!0}),function(){u.data=s=!s}):y&&y.resolve?(l=y.resolve(void 0),c=l.then,function(){c.call(l,r)}):function(){p.call(f,r)}),t.exports=w||function(e){var t={fn:e,next:void 0};i&&(i.next=t),a||(a=t,o()),i=t}},{"../internals/classof-raw":28,"../internals/engine-is-ios":45,"../internals/global":58,"../internals/object-get-own-property-descriptor":92,"../internals/task":127}],81:[function(e,t,n){var r=e("../internals/global");t.exports=r.Promise},{"../internals/global":58}],82:[function(e,t,n){var r=e("../internals/fails");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},{"../internals/fails":50}],83:[function(e,t,n){var r=e("../internals/fails"),a=e("../internals/well-known-symbol"),i=e("../internals/is-pure"),o=a("iterator");t.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),i&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},{"../internals/fails":50,"../internals/is-pure":74,"../internals/well-known-symbol":145}],84:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/inspect-source"),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(a(i))},{"../internals/global":58,"../internals/inspect-source":67}],85:[function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=a(t),this.reject=a(n)}var a=e("../internals/a-function");t.exports.f=function(e){return new r(e)}},{"../internals/a-function":5}],86:[function(e,t,n){var r=e("../internals/is-regexp");t.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},{"../internals/is-regexp":75}],87:[function(e,t,n){var r=e("../internals/global").isFinite;t.exports=Number.isFinite||function(e){return"number"==typeof e&&r(e)}},{"../internals/global":58}],88:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),a=e("../internals/fails"),i=e("../internals/object-keys"),o=e("../internals/object-get-own-property-symbols"),s=e("../internals/object-property-is-enumerable"),u=e("../internals/to-object"),l=e("../internals/indexed-object"),c=Object.assign,f=Object.defineProperty;t.exports=!c||a((function(){if(r&&1!==c({b:1},c(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||i(c({},t)).join("")!=a}))?function(e,t){for(var n=u(e),a=arguments.length,c=1,f=o.f,d=s.f;c<a;)for(var h,p=l(arguments[c++]),v=f?i(p).concat(f(p)):i(p),m=v.length,g=0;g<m;)h=v[g++],r&&!d.call(p,h)||(n[h]=p[h]);return n}:c},{"../internals/descriptors":42,"../internals/fails":50,"../internals/indexed-object":65,"../internals/object-get-own-property-symbols":95,"../internals/object-keys":98,"../internals/object-property-is-enumerable":99,"../internals/to-object":134}],89:[function(e,t,n){function r(){}function a(e){return"<script>"+e+"</"+p+">"}var i,o=e("../internals/an-object"),s=e("../internals/object-define-properties"),u=e("../internals/enum-bug-keys"),l=e("../internals/hidden-keys"),c=e("../internals/html"),f=e("../internals/document-create-element"),d=e("../internals/shared-key"),h="prototype",p="script",v=d("IE_PROTO"),m=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;m=i?function(e){e.write(a("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=f("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(a("document.F=Object")),e.close(),e.F);for(var n=u.length;n--;)delete m[h][u[n]];return m()};l[v]=!0,t.exports=Object.create||function(e,t){var n;return null!==e?(r[h]=o(e),n=new r,r[h]=null,n[v]=e):n=m(),void 0===t?n:s(n,t)}},{"../internals/an-object":10,"../internals/document-create-element":43,"../internals/enum-bug-keys":48,"../internals/hidden-keys":60,"../internals/html":62,"../internals/object-define-properties":90,"../internals/shared-key":117}],90:[function(e,t,n){var r=e("../internals/descriptors"),a=e("../internals/object-define-property"),i=e("../internals/an-object"),o=e("../internals/object-keys");t.exports=r?Object.defineProperties:function(e,t){i(e);for(var n,r=o(t),s=r.length,u=0;u<s;)a.f(e,n=r[u++],t[n]);return e}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/object-define-property":91,"../internals/object-keys":98}],91:[function(e,t,n){var r=e("../internals/descriptors"),a=e("../internals/ie8-dom-define"),i=e("../internals/an-object"),o=e("../internals/to-primitive"),s=Object.defineProperty;n.f=r?s:function(e,t,n){if(i(e),t=o(t,!0),i(n),a)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/ie8-dom-define":63,"../internals/to-primitive":137}],92:[function(e,t,n){var r=e("../internals/descriptors"),a=e("../internals/object-property-is-enumerable"),i=e("../internals/create-property-descriptor"),o=e("../internals/to-indexed-object"),s=e("../internals/to-primitive"),u=e("../internals/has"),l=e("../internals/ie8-dom-define"),c=Object.getOwnPropertyDescriptor;n.f=r?c:function(e,t){if(e=o(e),t=s(t,!0),l)try{return c(e,t)}catch(e){}if(u(e,t))return i(!a.f.call(e,t),e[t])}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/has":59,"../internals/ie8-dom-define":63,"../internals/object-property-is-enumerable":99,"../internals/to-indexed-object":131,"../internals/to-primitive":137}],93:[function(e,t,n){var r=e("../internals/to-indexed-object"),a=e("../internals/object-get-own-property-names").f,i={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return o&&"[object Window]"==i.call(e)?function(e){try{return a(e)}catch(e){return o.slice()}}(e):a(r(e))}},{"../internals/object-get-own-property-names":94,"../internals/to-indexed-object":131}],94:[function(e,t,n){var r=e("../internals/object-keys-internal"),a=e("../internals/enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":97}],95:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],96:[function(e,t,n){var r=e("../internals/has"),a=e("../internals/to-object"),i=e("../internals/shared-key"),o=e("../internals/correct-prototype-getter"),s=i("IE_PROTO"),u=Object.prototype;t.exports=o?Object.getPrototypeOf:function(e){return e=a(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},{"../internals/correct-prototype-getter":34,"../internals/has":59,"../internals/shared-key":117,"../internals/to-object":134}],97:[function(e,t,n){var r=e("../internals/has"),a=e("../internals/to-indexed-object"),i=e("../internals/array-includes").indexOf,o=e("../internals/hidden-keys");t.exports=function(e,t){var n,s=a(e),u=0,l=[];for(n in s)!r(o,n)&&r(s,n)&&l.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~i(l,n)||l.push(n));return l}},{"../internals/array-includes":18,"../internals/has":59,"../internals/hidden-keys":60,"../internals/to-indexed-object":131}],98:[function(e,t,n){var r=e("../internals/object-keys-internal"),a=e("../internals/enum-bug-keys");t.exports=Object.keys||function(e){return r(e,a)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":97}],99:[function(e,t,n){"use strict";var r={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,i=a&&!r.call({1:2},1);n.f=i?function(e){var t=a(this,e);return!!t&&t.enumerable}:r},{}],100:[function(e,t,n){var r=e("../internals/an-object"),a=e("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(n){}return function(n,i){return r(n),a(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],101:[function(e,t,n){"use strict";var r=e("../internals/to-string-tag-support"),a=e("../internals/classof");t.exports=r?{}.toString:function(){return"[object "+a(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":138}],102:[function(e,t,n){var r=e("../internals/get-built-in"),a=e("../internals/object-get-own-property-names"),i=e("../internals/object-get-own-property-symbols"),o=e("../internals/an-object");t.exports=r("Reflect","ownKeys")||function(e){var t=a.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},{"../internals/an-object":10,"../internals/get-built-in":55,"../internals/object-get-own-property-names":94,"../internals/object-get-own-property-symbols":95}],103:[function(e,t,n){var r=e("../internals/global");t.exports=r},{"../internals/global":58}],104:[function(e,t,n){t.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},{}],105:[function(e,t,n){var r=e("../internals/an-object"),a=e("../internals/is-object"),i=e("../internals/new-promise-capability");t.exports=function(e,t){if(r(e),a(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},{"../internals/an-object":10,"../internals/is-object":73,"../internals/new-promise-capability":85}],106:[function(e,t,n){var r=e("../internals/redefine");t.exports=function(e,t,n){for(var a in t)r(e,a,t[a],n);return e}},{"../internals/redefine":107}],107:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/create-non-enumerable-property"),i=e("../internals/has"),o=e("../internals/set-global"),s=e("../internals/inspect-source"),u=e("../internals/internal-state"),l=u.get,c=u.enforce,f=String(String).split("String");(t.exports=function(e,t,n,s){var u=!!s&&!!s.unsafe,l=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||a(n,"name",t),c(n).source=f.join("string"==typeof t?t:"")),e!==r?(u?!d&&e[t]&&(l=!0):delete e[t],l?e[t]=n:a(e,t,n)):l?e[t]=n:o(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},{"../internals/create-non-enumerable-property":37,"../internals/global":58,"../internals/has":59,"../internals/inspect-source":67,"../internals/internal-state":69,"../internals/set-global":114}],108:[function(e,t,n){var r=e("./classof-raw"),a=e("./regexp-exec");t.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},{"./classof-raw":28,"./regexp-exec":109}],109:[function(e,t,n){"use strict";var r,a,i=e("./regexp-flags"),o=e("./regexp-sticky-helpers"),s=RegExp.prototype.exec,u=String.prototype.replace,l=s,c=(r=/a/,a=/b*/g,s.call(r,"a"),s.call(a,"a"),0!==r.lastIndex||0!==a.lastIndex),f=o.UNSUPPORTED_Y||o.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(c||d||f)&&(l=function(e){var t,n,r,a,o=this,l=f&&o.sticky,h=i.call(o),p=o.source,v=0,m=e;return l&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),m=String(e).slice(o.lastIndex),0<o.lastIndex&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,v++),n=new RegExp("^(?:"+p+")",h)),d&&(n=new RegExp("^"+p+"$(?!\\s)",h)),c&&(t=o.lastIndex),r=s.call(l?n:o,m),l?r?(r.input=r.input.slice(v),r[0]=r[0].slice(v),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:c&&r&&(o.lastIndex=o.global?r.index+r[0].length:t),d&&r&&1<r.length&&u.call(r[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r}),t.exports=l},{"./regexp-flags":110,"./regexp-sticky-helpers":111}],110:[function(e,t,n){"use strict";var r=e("../internals/an-object");t.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"../internals/an-object":10}],111:[function(e,t,n){"use strict";var r=e("./fails");function a(e,t){return RegExp(e,t)}n.UNSUPPORTED_Y=r((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),n.BROKEN_CARET=r((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},{"./fails":50}],112:[function(e,t,n){t.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},{}],113:[function(e,t,n){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],114:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/create-non-enumerable-property");t.exports=function(e,t){try{a(r,e,t)}catch(n){r[e]=t}return t}},{"../internals/create-non-enumerable-property":37,"../internals/global":58}],115:[function(e,t,n){"use strict";var r=e("../internals/get-built-in"),a=e("../internals/object-define-property"),i=e("../internals/well-known-symbol"),o=e("../internals/descriptors"),s=i("species");t.exports=function(e){var t=r(e),n=a.f;o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":42,"../internals/get-built-in":55,"../internals/object-define-property":91,"../internals/well-known-symbol":145}],116:[function(e,t,n){var r=e("../internals/object-define-property").f,a=e("../internals/has"),i=e("../internals/well-known-symbol")("toStringTag");t.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},{"../internals/has":59,"../internals/object-define-property":91,"../internals/well-known-symbol":145}],117:[function(e,t,n){var r=e("../internals/shared"),a=e("../internals/uid"),i=r("keys");t.exports=function(e){return i[e]||(i[e]=a(e))}},{"../internals/shared":119,"../internals/uid":142}],118:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/set-global"),i="__core-js_shared__",o=r[i]||a(i,{});t.exports=o},{"../internals/global":58,"../internals/set-global":114}],119:[function(e,t,n){var r=e("../internals/is-pure"),a=e("../internals/shared-store");(t.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":74,"../internals/shared-store":118}],120:[function(e,t,n){var r=e("../internals/an-object"),a=e("../internals/a-function"),i=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||null==(n=r(o)[i])?t:a(n)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":145}],121:[function(e,t,n){var r=e("../internals/fails");t.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}))}},{"../internals/fails":50}],122:[function(e,t,n){function r(e){return function(t,n){var r,o,s=String(i(t)),u=a(n),l=s.length;return u<0||l<=u?e?"":void 0:(r=s.charCodeAt(u))<55296||56319<r||u+1===l||(o=s.charCodeAt(u+1))<56320||57343<o?e?s.charAt(u):r:e?s.slice(u,u+2):o-56320+(r-55296<<10)+65536}}var a=e("../internals/to-integer"),i=e("../internals/require-object-coercible");t.exports={codeAt:r(!1),charAt:r(!0)}},{"../internals/require-object-coercible":112,"../internals/to-integer":132}],123:[function(e,t,n){"use strict";function r(e){return e+22+75*(e<26)}function a(e,t,n){var r=0;for(e=n?c(e/700):e>>1,e+=c(e/t);455<e;r+=36)e=c(e/35);return c(r+36*e/(e+38))}function i(e){var t,n,i=[],s=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.charCodeAt(n++);if(55296<=a&&a<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&a)<<10)+(1023&i)+65536):(t.push(a),n--)}else t.push(a)}return t}(e)).length,u=128,d=0,h=72;for(t=0;t<e.length;t++)(n=e[t])<128&&i.push(f(n));var p=i.length,v=p;for(p&&i.push("-");v<s;){var m=o;for(t=0;t<e.length;t++)u<=(n=e[t])&&n<m&&(m=n);var g=v+1;if(m-u>c((o-d)/g))throw RangeError(l);for(d+=(m-u)*g,u=m,t=0;t<e.length;t++){if((n=e[t])<u&&++d>o)throw RangeError(l);if(n==u){for(var y=d,b=36;;b+=36){var x=b<=h?1:h+26<=b?26:b-h;if(y<x)break;var w=y-x,k=36-x;i.push(f(r(x+w%k))),y=c(w/k)}i.push(f(r(y))),h=a(d,g,v==p),d=0,++v}}++d,++u}return i.join("")}var o=2147483647,s=/[^\0-\u007E]/,u=/[.\u3002\uFF0E\uFF61]/g,l="Overflow: input needs wider integers to process",c=Math.floor,f=String.fromCharCode;t.exports=function(e){var t,n,r=[],a=e.toLowerCase().replace(u,".").split(".");for(t=0;t<a.length;t++)n=a[t],r.push(s.test(n)?"xn--"+i(n):n);return r.join(".")}},{}],124:[function(e,t,n){"use strict";var r=e("../internals/to-integer"),a=e("../internals/require-object-coercible");t.exports="".repeat||function(e){var t=String(a(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;0<i;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},{"../internals/require-object-coercible":112,"../internals/to-integer":132}],125:[function(e,t,n){var r=e("../internals/fails"),a=e("../internals/whitespaces");t.exports=function(e){return r((function(){return!!a[e]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[e]()||a[e].name!==e}))}},{"../internals/fails":50,"../internals/whitespaces":146}],126:[function(e,t,n){function r(e){return function(t){var n=String(a(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(s,"")),n}}var a=e("../internals/require-object-coercible"),i="["+e("../internals/whitespaces")+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$");t.exports={start:r(1),end:r(2),trim:r(3)}},{"../internals/require-object-coercible":112,"../internals/whitespaces":146}],127:[function(e,t,n){function r(e){if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}}function a(e){return function(){r(e)}}function i(e){r(e.data)}function o(e){c.postMessage(e+"",g.protocol+"//"+g.host)}var s,u,l,c=e("../internals/global"),f=e("../internals/fails"),d=e("../internals/classof-raw"),h=e("../internals/function-bind-context"),p=e("../internals/html"),v=e("../internals/document-create-element"),m=e("../internals/engine-is-ios"),g=c.location,y=c.setImmediate,b=c.clearImmediate,x=c.process,w=c.MessageChannel,k=c.Dispatch,S=0,_={},C="onreadystatechange";y&&b||(y=function(e){for(var t=[],n=1;n<arguments.length;)t.push(arguments[n++]);return _[++S]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},s(S),S},b=function(e){delete _[e]},"process"==d(x)?s=function(e){x.nextTick(a(e))}:k&&k.now?s=function(e){k.now(a(e))}:w&&!m?(l=(u=new w).port2,u.port1.onmessage=i,s=h(l.postMessage,l,1)):!c.addEventListener||"function"!=typeof postMessage||c.importScripts||f(o)||"file:"===g.protocol?s=C in v("script")?function(e){p.appendChild(v("script"))[C]=function(){p.removeChild(this),r(e)}}:function(e){setTimeout(a(e),0)}:(s=o,c.addEventListener("message",i,!1))),t.exports={set:y,clear:b}},{"../internals/classof-raw":28,"../internals/document-create-element":43,"../internals/engine-is-ios":45,"../internals/fails":50,"../internals/function-bind-context":53,"../internals/global":58,"../internals/html":62}],128:[function(e,t,n){var r=e("../internals/classof-raw");t.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},{"../internals/classof-raw":28}],129:[function(e,t,n){var r=e("../internals/to-integer"),a=Math.max,i=Math.min;t.exports=function(e,t){var n=r(e);return n<0?a(n+t,0):i(n,t)}},{"../internals/to-integer":132}],130:[function(e,t,n){var r=e("../internals/to-integer"),a=e("../internals/to-length");t.exports=function(e){if(void 0===e)return 0;var t=r(e),n=a(t);if(t!==n)throw RangeError("Wrong length or index");return n}},{"../internals/to-integer":132,"../internals/to-length":133}],131:[function(e,t,n){var r=e("../internals/indexed-object"),a=e("../internals/require-object-coercible");t.exports=function(e){return r(a(e))}},{"../internals/indexed-object":65,"../internals/require-object-coercible":112}],132:[function(e,t,n){var r=Math.ceil,a=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(0<e?a:r)(e)}},{}],133:[function(e,t,n){var r=e("../internals/to-integer"),a=Math.min;t.exports=function(e){return 0<e?a(r(e),9007199254740991):0}},{"../internals/to-integer":132}],134:[function(e,t,n){var r=e("../internals/require-object-coercible");t.exports=function(e){return Object(r(e))}},{"../internals/require-object-coercible":112}],135:[function(e,t,n){var r=e("../internals/to-positive-integer");t.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},{"../internals/to-positive-integer":136}],136:[function(e,t,n){var r=e("../internals/to-integer");t.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},{"../internals/to-integer":132}],137:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":73}],138:[function(e,t,n){var r={};r[e("../internals/well-known-symbol")("toStringTag")]="z",t.exports="[object z]"===String(r)},{"../internals/well-known-symbol":145}],139:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=t.length,a=new(X(e))(r);n<r;)a[n]=t[n++];return a}function a(e,t){P(e,t,{get:function(){return L(this)[t]}})}function i(e){var t;return e instanceof U||"ArrayBuffer"==(t=S(e))||"SharedArrayBuffer"==t}function o(e,t){return Y(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)}function s(e,t){return o(e,t=w(t,!0))?m(2,e[t]):F(e,t)}function u(e,t,n){return!(o(e,t=w(t,!0))&&_(n)&&k(n,"value"))||k(n,"get")||k(n,"set")||n.configurable||k(n,"writable")&&!n.writable||k(n,"enumerable")&&!n.enumerable?P(e,t,n):(e[t]=n.value,e)}var l=e("../internals/export"),c=e("../internals/global"),f=e("../internals/descriptors"),d=e("../internals/typed-array-constructors-require-wrappers"),h=e("../internals/array-buffer-view-core"),p=e("../internals/array-buffer"),v=e("../internals/an-instance"),m=e("../internals/create-property-descriptor"),g=e("../internals/create-non-enumerable-property"),y=e("../internals/to-length"),b=e("../internals/to-index"),x=e("../internals/to-offset"),w=e("../internals/to-primitive"),k=e("../internals/has"),S=e("../internals/classof"),_=e("../internals/is-object"),C=e("../internals/object-create"),E=e("../internals/object-set-prototype-of"),T=e("../internals/object-get-own-property-names").f,I=e("../internals/typed-array-from"),A=e("../internals/array-iteration").forEach,N=e("../internals/set-species"),R=e("../internals/object-define-property"),M=e("../internals/object-get-own-property-descriptor"),O=e("../internals/internal-state"),D=e("../internals/inherit-if-required"),L=O.get,j=O.set,P=R.f,F=M.f,B=Math.round,z=c.RangeError,U=p.ArrayBuffer,W=p.DataView,G=h.NATIVE_ARRAY_BUFFER_VIEWS,V=h.TYPED_ARRAY_TAG,H=h.TypedArray,q=h.TypedArrayPrototype,X=h.aTypedArrayConstructor,Y=h.isTypedArray,K="BYTES_PER_ELEMENT",Z="Wrong length";f?(G||(M.f=s,R.f=u,a(q,"buffer"),a(q,"byteOffset"),a(q,"byteLength"),a(q,"length")),l({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:s,defineProperty:u}),t.exports=function(e,t,n){function a(e,t){P(e,t,{get:function(){return e=t,(n=L(this)).view[u](e*o+n.byteOffset,!0);var e,n},set:function(e){return r=t,a=e,i=L(this),n&&(a=(a=B(a))<0?0:255<a?255:255&a),void i.view[f](r*o+i.byteOffset,a,!0);var r,a,i},enumerable:!0})}var o=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",u="get"+e,f="set"+e,h=c[s],p=h,m=p&&p.prototype,w={};G?d&&(p=t((function(e,t,n,a){return v(e,p,s),D(_(t)?i(t)?void 0!==a?new h(t,x(n,o),a):void 0!==n?new h(t,x(n,o)):new h(t):Y(t)?r(p,t):I.call(p,t):new h(b(t)),e,p)})),E&&E(p,H),A(T(h),(function(e){e in p||g(p,e,h[e])})),p.prototype=m):(p=t((function(e,t,n,u){v(e,p,s);var l,c,f,d=0,h=0;if(_(t)){if(!i(t))return Y(t)?r(p,t):I.call(p,t);l=t,h=x(n,o);var m=t.byteLength;if(void 0===u){if(m%o)throw z(Z);if((c=m-h)<0)throw z(Z)}else if(m<(c=y(u)*o)+h)throw z(Z);f=c/o}else f=b(t),l=new U(c=f*o);for(j(e,{buffer:l,byteOffset:h,byteLength:c,length:f,view:new W(l)});d<f;)a(e,d++)})),E&&E(p,H),m=p.prototype=C(q)),m.constructor!==p&&g(m,"constructor",p),V&&g(m,V,s),w[s]=p,l({global:!0,forced:p!=h,sham:!G},w),K in p||g(p,K,o),K in m||g(m,K,o),N(s)}):t.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/export":49,"../internals/global":58,"../internals/has":59,"../internals/inherit-if-required":66,"../internals/internal-state":69,"../internals/is-object":73,"../internals/object-create":89,"../internals/object-define-property":91,"../internals/object-get-own-property-descriptor":92,"../internals/object-get-own-property-names":94,"../internals/object-set-prototype-of":100,"../internals/set-species":115,"../internals/to-index":130,"../internals/to-length":133,"../internals/to-offset":135,"../internals/to-primitive":137,"../internals/typed-array-constructors-require-wrappers":140,"../internals/typed-array-from":141}],140:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/fails"),i=e("../internals/check-correctness-of-iteration"),o=e("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;t.exports=!o||!a((function(){u(1)}))||!a((function(){new u(-1)}))||!i((function(e){new u,new u(null),new u(1.5),new u(e)}),!0)||a((function(){return 1!==new u(new s(2),1,void 0).length}))},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":50,"../internals/global":58}],141:[function(e,t,n){var r=e("../internals/to-object"),a=e("../internals/to-length"),i=e("../internals/get-iterator-method"),o=e("../internals/is-array-iterator-method"),s=e("../internals/function-bind-context"),u=e("../internals/array-buffer-view-core").aTypedArrayConstructor;t.exports=function(e,t,n){var l,c,f,d,h,p,v=r(e),m=arguments.length,g=1<m?t:void 0,y=void 0!==g,b=i(v);if(null!=b&&!o(b))for(p=(h=b.call(v)).next,v=[];!(d=p.call(h)).done;)v.push(d.value);for(y&&2<m&&(g=s(g,n,2)),c=a(v.length),f=new(u(this))(c),l=0;l<c;l++)f[l]=y?g(v[l],l):v[l];return f}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":53,"../internals/get-iterator-method":56,"../internals/is-array-iterator-method":70,"../internals/to-length":133,"../internals/to-object":134}],142:[function(e,t,n){var r=0,a=Math.random();t.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+a).toString(36)}},{}],143:[function(e,t,n){var r=e("../internals/native-symbol");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":82}],144:[function(e,t,n){var r=e("../internals/well-known-symbol");n.f=r},{"../internals/well-known-symbol":145}],145:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/shared"),i=e("../internals/has"),o=e("../internals/uid"),s=e("../internals/native-symbol"),u=e("../internals/use-symbol-as-uid"),l=a("wks"),c=r.Symbol,f=u?c:c&&c.withoutSetter||o;t.exports=function(e){return i(l,e)||(s&&i(c,e)?l[e]=c[e]:l[e]=f("Symbol."+e)),l[e]}},{"../internals/global":58,"../internals/has":59,"../internals/native-symbol":82,"../internals/shared":119,"../internals/uid":142,"../internals/use-symbol-as-uid":143}],146:[function(e,t,n){t.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},{}],147:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/global"),i=e("../internals/array-buffer"),o=e("../internals/set-species"),s="ArrayBuffer",u=i[s];r({global:!0,forced:a[s]!==u},{ArrayBuffer:u}),o(s)},{"../internals/array-buffer":13,"../internals/export":49,"../internals/global":58,"../internals/set-species":115}],148:[function(e,t,n){"use strict";function r(e){if(!s(e))return!1;var t=e[v];return void 0!==t?!!t:o(e)}var a=e("../internals/export"),i=e("../internals/fails"),o=e("../internals/is-array"),s=e("../internals/is-object"),u=e("../internals/to-object"),l=e("../internals/to-length"),c=e("../internals/create-property"),f=e("../internals/array-species-create"),d=e("../internals/array-method-has-species-support"),h=e("../internals/well-known-symbol"),p=e("../internals/engine-v8-version"),v=h("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",y=51<=p||!i((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),b=d("concat");a({target:"Array",proto:!0,forced:!y||!b},{concat:function(e){var t,n,a,i,o,s=u(this),d=f(s,0),h=0;for(t=-1,a=arguments.length;t<a;t++)if(r(o=-1===t?s:arguments[t])){if(i=l(o.length),m<h+i)throw TypeError(g);for(n=0;n<i;n++,h++)n in o&&c(d,h,o[n])}else{if(m<=h)throw TypeError(g);c(d,h++,o)}return d.length=h,d}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/fails":50,"../internals/is-array":71,"../internals/is-object":73,"../internals/to-length":133,"../internals/to-object":134,"../internals/well-known-symbol":145}],149:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/array-iteration").every,i=e("../internals/array-method-is-strict"),o=e("../internals/array-method-uses-to-length"),s=i("every"),u=o("every");r({target:"Array",proto:!0,forced:!s||!u},{every:function(e,t){return a(this,e,1<arguments.length?t:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],150:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/array-fill"),i=e("../internals/add-to-unscopables");r({target:"Array",proto:!0},{fill:a}),i("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":49}],151:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/array-iteration").filter,i=e("../internals/array-method-has-species-support"),o=e("../internals/array-method-uses-to-length"),s=i("filter"),u=o("filter");r({target:"Array",proto:!0,forced:!s||!u},{filter:function(e,t){return a(this,e,1<arguments.length?t:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],152:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/array-for-each");r({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},{"../internals/array-for-each":16,"../internals/export":49}],153:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/array-from");r({target:"Array",stat:!0,forced:!e("../internals/check-correctness-of-iteration")((function(e){Array.from(e)}))},{from:a})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":49}],154:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/array-includes").includes,i=e("../internals/add-to-unscopables");r({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e,t){return a(this,e,1<arguments.length?t:void 0)}}),i("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":49}],155:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/array-includes").indexOf,i=e("../internals/array-method-is-strict"),o=e("../internals/array-method-uses-to-length"),s=[].indexOf,u=!!s&&1/[1].indexOf(1,-0)<0,l=i("indexOf"),c=o("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:u||!l||!c},{indexOf:function(e,t){return u?s.apply(this,arguments)||0:a(this,e,1<arguments.length?t:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],156:[function(e,t,n){"use strict";var r=e("../internals/to-indexed-object"),a=e("../internals/add-to-unscopables"),i=e("../internals/iterators"),o=e("../internals/internal-state"),s=e("../internals/define-iterator"),u="Array Iterator",l=o.set,c=o.getterFor(u);t.exports=s(Array,"Array",(function(e,t){l(this,{type:u,target:r(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),i.Arguments=i.Array,a("keys"),a("values"),a("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":40,"../internals/internal-state":69,"../internals/iterators":78,"../internals/to-indexed-object":131}],157:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/indexed-object"),i=e("../internals/to-indexed-object"),o=e("../internals/array-method-is-strict"),s=[].join,u=a!=Object,l=o("join",",");r({target:"Array",proto:!0,forced:u||!l},{join:function(e){return s.call(i(this),void 0===e?",":e)}})},{"../internals/array-method-is-strict":22,"../internals/export":49,"../internals/indexed-object":65,"../internals/to-indexed-object":131}],158:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/array-last-index-of");r({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},{"../internals/array-last-index-of":20,"../internals/export":49}],159:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/array-iteration").map,i=e("../internals/array-method-has-species-support"),o=e("../internals/array-method-uses-to-length"),s=i("map"),u=o("map");r({target:"Array",proto:!0,forced:!s||!u},{map:function(e,t){return a(this,e,1<arguments.length?t:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],160:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/is-object"),i=e("../internals/is-array"),o=e("../internals/to-absolute-index"),s=e("../internals/to-length"),u=e("../internals/to-indexed-object"),l=e("../internals/create-property"),c=e("../internals/well-known-symbol"),f=e("../internals/array-method-has-species-support"),d=e("../internals/array-method-uses-to-length"),h=f("slice"),p=d("slice",{ACCESSORS:!0,0:0,1:2}),v=c("species"),m=[].slice,g=Math.max;r({target:"Array",proto:!0,forced:!h||!p},{slice:function(e,t){var n,r,c,f=u(this),d=s(f.length),h=o(e,d),p=o(void 0===t?d:t,d);if(i(f)&&("function"!=typeof(n=f.constructor)||n!==Array&&!i(n.prototype)?a(n)&&null===(n=n[v])&&(n=void 0):n=void 0,n===Array||void 0===n))return m.call(f,h,p);for(r=new(void 0===n?Array:n)(g(p-h,0)),c=0;h<p;h++,c++)h in f&&l(r,c,f[h]);return r.length=c,r}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":39,"../internals/export":49,"../internals/is-array":71,"../internals/is-object":73,"../internals/to-absolute-index":129,"../internals/to-indexed-object":131,"../internals/to-length":133,"../internals/well-known-symbol":145}],161:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/array-iteration").some,i=e("../internals/array-method-is-strict"),o=e("../internals/array-method-uses-to-length"),s=i("some"),u=o("some");r({target:"Array",proto:!0,forced:!s||!u},{some:function(e,t){return a(this,e,1<arguments.length?t:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],162:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/to-absolute-index"),i=e("../internals/to-integer"),o=e("../internals/to-length"),s=e("../internals/to-object"),u=e("../internals/array-species-create"),l=e("../internals/create-property"),c=e("../internals/array-method-has-species-support"),f=e("../internals/array-method-uses-to-length"),d=c("splice"),h=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,v=Math.min;r({target:"Array",proto:!0,forced:!d||!h},{splice:function(e,t){var n,r,c,f,d,h,m=s(this),g=o(m.length),y=a(e,g),b=arguments.length;if(0===b?n=r=0:r=1===b?(n=0,g-y):(n=b-2,v(p(i(t),0),g-y)),9007199254740991<g+n-r)throw TypeError("Maximum allowed length exceeded");for(c=u(m,r),f=0;f<r;f++)(d=y+f)in m&&l(c,f,m[d]);if(n<(c.length=r)){for(f=y;f<g-r;f++)h=f+n,(d=f+r)in m?m[h]=m[d]:delete m[h];for(f=g;g-r+n<f;f--)delete m[f-1]}else if(r<n)for(f=g-r;y<f;f--)h=f+n-1,(d=f+r-1)in m?m[h]=m[d]:delete m[h];for(f=0;f<n;f++)m[f+y]=arguments[f+2];return m.length=g-r+n,c}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/export":49,"../internals/to-absolute-index":129,"../internals/to-integer":132,"../internals/to-length":133,"../internals/to-object":134}],163:[function(e,t,n){var r=e("../internals/descriptors"),a=e("../internals/object-define-property").f,i=Function.prototype,o=i.toString,s=/^\s*function ([^ (]*)/;!r||"name"in i||a(i,"name",{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(e){return""}}})},{"../internals/descriptors":42,"../internals/object-define-property":91}],164:[function(e,t,n){"use strict";var r=e("../internals/collection"),a=e("../internals/collection-strong");t.exports=r("Map",(function(e){return function(t){return e(this,arguments.length?t:void 0)}}),a)},{"../internals/collection":31,"../internals/collection-strong":30}],165:[function(e,t,n){var r=e("../internals/export"),a=Math.hypot,i=Math.abs,o=Math.sqrt;r({target:"Math",stat:!0,forced:!!a&&a(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,a=0,s=0,u=arguments.length,l=0;s<u;)l<(n=i(arguments[s++]))?(a=a*(r=l/n)*r+1,l=n):a+=0<n?(r=n/l)*r:n;return l===1/0?1/0:l*o(a)}})},{"../internals/export":49}],166:[function(e,t,n){e("../internals/export")({target:"Math",stat:!0},{sign:e("../internals/math-sign")})},{"../internals/export":49,"../internals/math-sign":79}],167:[function(e,t,n){"use strict";function r(e){var t,n,r,a,i,o,s,u,l=f(e,!1);if("string"==typeof l&&2<l.length)if(43===(t=(l=g(l)).charCodeAt(0))||45===t){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(o=(i=l.slice(2)).length,s=0;s<o;s++)if((u=i.charCodeAt(s))<48||a<u)return NaN;return parseInt(i,r)}return+l}var a=e("../internals/descriptors"),i=e("../internals/global"),o=e("../internals/is-forced"),s=e("../internals/redefine"),u=e("../internals/has"),l=e("../internals/classof-raw"),c=e("../internals/inherit-if-required"),f=e("../internals/to-primitive"),d=e("../internals/fails"),h=e("../internals/object-create"),p=e("../internals/object-get-own-property-names").f,v=e("../internals/object-get-own-property-descriptor").f,m=e("../internals/object-define-property").f,g=e("../internals/string-trim").trim,y="Number",b=i[y],x=b.prototype,w=l(h(x))==y;if(o(y,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var k,S=function e(t){var n=arguments.length<1?0:t,a=this;return a instanceof e&&(w?d((function(){x.valueOf.call(a)})):l(a)!=y)?c(new b(r(n)),a,e):r(n)},_=a?p(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;_.length>C;C++)u(b,k=_[C])&&!u(S,k)&&m(S,k,v(b,k));(S.prototype=x).constructor=S,s(i,y,S)}},{"../internals/classof-raw":28,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":58,"../internals/has":59,"../internals/inherit-if-required":66,"../internals/is-forced":72,"../internals/object-create":89,"../internals/object-define-property":91,"../internals/object-get-own-property-descriptor":92,"../internals/object-get-own-property-names":94,"../internals/redefine":107,"../internals/string-trim":126,"../internals/to-primitive":137}],168:[function(e,t,n){e("../internals/export")({target:"Number",stat:!0},{isFinite:e("../internals/number-is-finite")})},{"../internals/export":49,"../internals/number-is-finite":87}],169:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/to-integer"),i=e("../internals/this-number-value"),o=e("../internals/string-repeat"),s=e("../internals/fails"),u=1..toFixed,l=Math.floor,c=function e(t,n,r){return 0===n?r:n%2==1?e(t,n-1,r*t):e(t*t,n/2,r)};r({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}))},{toFixed:function(e){function t(e,t){for(var n=-1,r=t;++n<6;)r+=e*v[n],v[n]=r%1e7,r=l(r/1e7)}function n(e){for(var t=6,n=0;0<=--t;)n+=v[t],v[t]=l(n/e),n=n%e*1e7}function r(){for(var e=6,t="";0<=--e;)if(""!==t||0===e||0!==v[e]){var n=String(v[e]);t=""===t?n:t+o.call("0",7-n.length)+n}return t}var s,u,f,d,h=i(this),p=a(e),v=[0,0,0,0,0,0],m="",g="0";if(p<0||20<p)throw RangeError("Incorrect fraction digits");if(h!=h)return"NaN";if(h<=-1e21||1e21<=h)return String(h);if(h<0&&(m="-",h=-h),1e-21<h)if(u=(s=function(e){for(var t=0,n=e;4096<=n;)t+=12,n/=4096;for(;2<=n;)t+=1,n/=2;return t}(h*c(2,69,1))-69)<0?h*c(2,-s,1):h/c(2,s,1),u*=4503599627370496,0<(s=52-s)){for(t(0,u),f=p;7<=f;)t(1e7,0),f-=7;for(t(c(10,f,1),0),f=s-1;23<=f;)n(1<<23),f-=23;n(1<<f),t(1,1),n(2),g=r()}else t(0,u),t(1<<-s,0),g=r()+o.call("0",p);return 0<p?m+((d=g.length)<=p?"0."+o.call("0",p-d)+g:g.slice(0,d-p)+"."+g.slice(d-p)):m+g}})},{"../internals/export":49,"../internals/fails":50,"../internals/string-repeat":124,"../internals/this-number-value":128,"../internals/to-integer":132}],170:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/object-assign");r({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},{"../internals/export":49,"../internals/object-assign":88}],171:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/fails"),i=e("../internals/object-get-own-property-names-external").f;r({target:"Object",stat:!0,forced:a((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:i})},{"../internals/export":49,"../internals/fails":50,"../internals/object-get-own-property-names-external":93}],172:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/fails"),i=e("../internals/to-object"),o=e("../internals/object-get-prototype-of"),s=e("../internals/correct-prototype-getter");r({target:"Object",stat:!0,forced:a((function(){o(1)})),sham:!s},{getPrototypeOf:function(e){return o(i(e))}})},{"../internals/correct-prototype-getter":34,"../internals/export":49,"../internals/fails":50,"../internals/object-get-prototype-of":96,"../internals/to-object":134}],173:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/to-object"),i=e("../internals/object-keys");r({target:"Object",stat:!0,forced:e("../internals/fails")((function(){i(1)}))},{keys:function(e){return i(a(e))}})},{"../internals/export":49,"../internals/fails":50,"../internals/object-keys":98,"../internals/to-object":134}],174:[function(e,t,n){var r=e("../internals/to-string-tag-support"),a=e("../internals/redefine"),i=e("../internals/object-to-string");r||a(Object.prototype,"toString",i,{unsafe:!0})},{"../internals/object-to-string":101,"../internals/redefine":107,"../internals/to-string-tag-support":138}],175:[function(e,t,n){"use strict";function r(e){var t;return!(!w(e)||"function"!=typeof(t=e.then))&&t}function a(e,t,n){if(!t.notified){t.notified=!0;var a=t.reactions;N((function(){for(var i=t.value,o=1==t.state,s=0;a.length>s;){var u,l,c,f=a[s++],d=o?f.ok:f.fail,h=f.resolve,p=f.reject,v=f.domain;try{d?(o||(2===t.rejection&&ae(e,t),t.rejection=1),!0===d?u=i:(v&&v.enter(),u=d(i),v&&(v.exit(),c=!0)),u===f.promise?p(H("Promise-chain cycle")):(l=r(u))?l.call(u,h,p):h(u)):p(i)}catch(i){v&&!c&&v.exit(),p(i)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&ne(e,t)}))}}function i(e,t,n){var r,a;$?((r=q.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),p.dispatchEvent(r)):r={promise:t,reason:n},(a=p["on"+e])?a(r):e===J&&M("Unhandled promise rejection",n)}function o(e,t,n,r){return function(a){e(t,n,a,r)}}function s(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,a(e,t,!0))}var u,l,c,f,d=e("../internals/export"),h=e("../internals/is-pure"),p=e("../internals/global"),v=e("../internals/get-built-in"),m=e("../internals/native-promise-constructor"),g=e("../internals/redefine"),y=e("../internals/redefine-all"),b=e("../internals/set-to-string-tag"),x=e("../internals/set-species"),w=e("../internals/is-object"),k=e("../internals/a-function"),S=e("../internals/an-instance"),_=e("../internals/classof-raw"),C=e("../internals/inspect-source"),E=e("../internals/iterate"),T=e("../internals/check-correctness-of-iteration"),I=e("../internals/species-constructor"),A=e("../internals/task").set,N=e("../internals/microtask"),R=e("../internals/promise-resolve"),M=e("../internals/host-report-errors"),O=e("../internals/new-promise-capability"),D=e("../internals/perform"),L=e("../internals/internal-state"),j=e("../internals/is-forced"),P=e("../internals/well-known-symbol"),F=e("../internals/engine-v8-version"),B=P("species"),z="Promise",U=L.get,W=L.set,G=L.getterFor(z),V=m,H=p.TypeError,q=p.document,X=p.process,Y=v("fetch"),K=O.f,Z=K,Q="process"==_(X),$=!!(q&&q.createEvent&&p.dispatchEvent),J="unhandledrejection",ee=j(z,(function(){if(C(V)===String(V)){if(66===F)return!0;if(!Q&&"function"!=typeof PromiseRejectionEvent)return!0}if(h&&!V.prototype.finally)return!0;if(51<=F&&/native code/.test(V))return!1;function e(e){e((function(){}),(function(){}))}var t=V.resolve(1);return(t.constructor={})[B]=e,!(t.then((function(){}))instanceof e)})),te=ee||!T((function(e){V.all(e).catch((function(){}))})),ne=function(e,t){A.call(p,(function(){var n,r=t.value;if(re(t)&&(n=D((function(){Q?X.emit("unhandledRejection",r,e):i(J,e,r)})),t.rejection=Q||re(t)?2:1,n.error))throw n.value}))},re=function(e){return 1!==e.rejection&&!e.parent},ae=function(e,t){A.call(p,(function(){Q?X.emit("rejectionHandled",e):i("rejectionhandled",e,t.value)}))},ie=function e(t,n,i,u){if(!n.done){n.done=!0,u&&(n=u);try{if(t===i)throw H("Promise can't be resolved itself");var l=r(i);l?N((function(){var r={done:!1};try{l.call(i,o(e,t,r,n),o(s,t,r,n))}catch(i){s(t,r,i,n)}})):(n.value=i,n.state=1,a(t,n,!1))}catch(i){s(t,{done:!1},i,n)}}};ee&&(V=function(e){S(this,V,z),k(e),u.call(this);var t=U(this);try{e(o(ie,this,t),o(s,this,t))}catch(e){s(this,t,e)}},(u=function(){W(this,{type:z,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=y(V.prototype,{then:function(e,t){var n=G(this),r=K(I(this,V));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Q?X.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&a(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),l=function(){var e=new u,t=U(e);this.promise=e,this.resolve=o(ie,e,t),this.reject=o(s,e,t)},O.f=K=function(e){return e===V||e===c?new l(e):Z(e)},h||"function"!=typeof m||(f=m.prototype.then,g(m.prototype,"then",(function(e,t){var n=this;return new V((function(e,t){f.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof Y&&d({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return R(V,Y.apply(p,arguments))}}))),d({global:!0,wrap:!0,forced:ee},{Promise:V}),b(V,z,!1,!0),x(z),c=v(z),d({target:z,stat:!0,forced:ee},{reject:function(e){var t=K(this);return t.reject.call(void 0,e),t.promise}}),d({target:z,stat:!0,forced:h||ee},{resolve:function(e){return R(h&&this===c?V:this,e)}}),d({target:z,stat:!0,forced:te},{all:function(e){var t=this,n=K(t),r=n.resolve,a=n.reject,i=D((function(){var n=k(t.resolve),i=[],o=0,s=1;E(e,(function(e){var u=o++,l=!1;i.push(void 0),s++,n.call(t,e).then((function(e){l||(l=!0,i[u]=e,--s||r(i))}),a)})),--s||r(i)}));return i.error&&a(i.value),n.promise},race:function(e){var t=this,n=K(t),r=n.reject,a=D((function(){var a=k(t.resolve);E(e,(function(e){a.call(t,e).then(n.resolve,r)}))}));return a.error&&r(a.value),n.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/get-built-in":55,"../internals/global":58,"../internals/host-report-errors":61,"../internals/inspect-source":67,"../internals/internal-state":69,"../internals/is-forced":72,"../internals/is-object":73,"../internals/is-pure":74,"../internals/iterate":76,"../internals/microtask":80,"../internals/native-promise-constructor":81,"../internals/new-promise-capability":85,"../internals/perform":104,"../internals/promise-resolve":105,"../internals/redefine":107,"../internals/redefine-all":106,"../internals/set-species":115,"../internals/set-to-string-tag":116,"../internals/species-constructor":120,"../internals/task":127,"../internals/well-known-symbol":145}],176:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/get-built-in"),i=e("../internals/a-function"),o=e("../internals/an-object"),s=e("../internals/is-object"),u=e("../internals/object-create"),l=e("../internals/function-bind"),c=e("../internals/fails"),f=a("Reflect","construct"),d=c((function(){function e(){}return!(f((function(){}),[],e)instanceof e)})),h=!c((function(){f((function(){}))})),p=d||h;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t,n){i(e),o(t);var r=arguments.length<3?e:i(n);if(h&&!d)return f(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var a=[null];return a.push.apply(a,t),new(l.apply(e,a))}var c=r.prototype,p=u(s(c)?c:Object.prototype),v=Function.apply.call(e,p,t);return s(v)?v:p}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":49,"../internals/fails":50,"../internals/function-bind":54,"../internals/get-built-in":55,"../internals/is-object":73,"../internals/object-create":89}],177:[function(e,t,n){var r=e("../internals/descriptors"),a=e("../internals/global"),i=e("../internals/is-forced"),o=e("../internals/inherit-if-required"),s=e("../internals/object-define-property").f,u=e("../internals/object-get-own-property-names").f,l=e("../internals/is-regexp"),c=e("../internals/regexp-flags"),f=e("../internals/regexp-sticky-helpers"),d=e("../internals/redefine"),h=e("../internals/fails"),p=e("../internals/internal-state").set,v=e("../internals/set-species"),m=e("../internals/well-known-symbol")("match"),g=a.RegExp,y=g.prototype,b=/a/g,x=/a/g,w=new g(b)!==b,k=f.UNSUPPORTED_Y;if(r&&i("RegExp",!w||k||h((function(){return x[m]=!1,g(b)!=b||g(x)==x||"/a/i"!=g(b,"i")})))){for(var S=function(e){e in _||s(_,e,{configurable:!0,get:function(){return g[e]},set:function(t){g[e]=t}})},_=function e(t,n){var r,a=this instanceof e,i=l(t),s=void 0===n;if(!a&&i&&t.constructor===e&&s)return t;w?i&&!s&&(t=t.source):t instanceof e&&(s&&(n=c.call(t)),t=t.source),k&&(r=!!n&&-1<n.indexOf("y"))&&(n=n.replace(/y/g,""));var u=o(w?new g(t,n):g(t,n),a?this:y,e);return k&&r&&p(u,{sticky:r}),u},C=u(g),E=0;C.length>E;)S(C[E++]);(y.constructor=_).prototype=y,d(a,"RegExp",_)}v("RegExp")},{"../internals/descriptors":42,"../internals/fails":50,"../internals/global":58,"../internals/inherit-if-required":66,"../internals/internal-state":69,"../internals/is-forced":72,"../internals/is-regexp":75,"../internals/object-define-property":91,"../internals/object-get-own-property-names":94,"../internals/redefine":107,"../internals/regexp-flags":110,"../internals/regexp-sticky-helpers":111,"../internals/set-species":115,"../internals/well-known-symbol":145}],178:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/regexp-exec");r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},{"../internals/export":49,"../internals/regexp-exec":109}],179:[function(e,t,n){"use strict";var r=e("../internals/redefine"),a=e("../internals/an-object"),i=e("../internals/fails"),o=e("../internals/regexp-flags"),s="toString",u=RegExp.prototype,l=u[s],c=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=s;(c||f)&&r(RegExp.prototype,s,(function(){var e=a(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in u)?o.call(e):n)}),{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":50,"../internals/redefine":107,"../internals/regexp-flags":110}],180:[function(e,t,n){"use strict";var r=e("../internals/collection"),a=e("../internals/collection-strong");t.exports=r("Set",(function(e){return function(t){return e(this,arguments.length?t:void 0)}}),a)},{"../internals/collection":31,"../internals/collection-strong":30}],181:[function(e,t,n){"use strict";var r,a=e("../internals/export"),i=e("../internals/object-get-own-property-descriptor").f,o=e("../internals/to-length"),s=e("../internals/not-a-regexp"),u=e("../internals/require-object-coercible"),l=e("../internals/correct-is-regexp-logic"),c=e("../internals/is-pure"),f="".endsWith,d=Math.min,h=l("endsWith");a({target:"String",proto:!0,forced:!(!c&&!h&&(r=i(String.prototype,"endsWith"))&&!r.writable||h)},{endsWith:function(e,t){var n=String(u(this));s(e);var r=1<arguments.length?t:void 0,a=o(n.length),i=void 0===r?a:d(o(r),a),l=String(e);return f?f.call(n,l,i):n.slice(i-l.length,i)===l}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/is-pure":74,"../internals/not-a-regexp":86,"../internals/object-get-own-property-descriptor":92,"../internals/require-object-coercible":112,"../internals/to-length":133}],182:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/not-a-regexp"),i=e("../internals/require-object-coercible");r({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(e,t){return!!~String(i(this)).indexOf(a(e),1<arguments.length?t:void 0)}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/not-a-regexp":86,"../internals/require-object-coercible":112}],183:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt,a=e("../internals/internal-state"),i=e("../internals/define-iterator"),o="String Iterator",s=a.set,u=a.getterFor(o);i(String,"String",(function(e){s(this,{type:o,string:String(e),index:0})}),(function(){var e,t=u(this),n=t.string,a=t.index;return a>=n.length?{value:void 0,done:!0}:(e=r(n,a),t.index+=e.length,{value:e,done:!1})}))},{"../internals/define-iterator":40,"../internals/internal-state":69,"../internals/string-multibyte":122}],184:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),a=e("../internals/an-object"),i=e("../internals/to-length"),o=e("../internals/require-object-coercible"),s=e("../internals/advance-string-index"),u=e("../internals/regexp-exec-abstract");r("match",1,(function(e,t,n){return[function(t){var n=o(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=a(e),l=String(this);if(!o.global)return u(o,l);for(var c,f=o.unicode,d=[],h=o.lastIndex=0;null!==(c=u(o,l));){var p=String(c[0]);""===(d[h]=p)&&(o.lastIndex=s(l,i(o.lastIndex),f)),h++}return 0===h?null:d}]}))},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":108,"../internals/require-object-coercible":112,"../internals/to-length":133}],185:[function(e,t,n){e("../internals/export")({target:"String",proto:!0},{repeat:e("../internals/string-repeat")})},{"../internals/export":49,"../internals/string-repeat":124}],186:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),a=e("../internals/an-object"),i=e("../internals/to-object"),o=e("../internals/to-length"),s=e("../internals/to-integer"),u=e("../internals/require-object-coercible"),l=e("../internals/advance-string-index"),c=e("../internals/regexp-exec-abstract"),f=Math.max,d=Math.min,h=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n,r){var m=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=r.REPLACE_KEEPS_$0,y=m?"$":"$0";return[function(n,r){var a=u(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!m&&g||"string"==typeof r&&-1===r.indexOf(y)){var i=n(t,e,this,r);if(i.done)return i.value}var u=a(e),h=String(this),p="function"==typeof r;p||(r=String(r));var v=u.global;if(v){var x=u.unicode;u.lastIndex=0}for(var w=[];;){var k=c(u,h);if(null===k)break;if(w.push(k),!v)break;""===String(k[0])&&(u.lastIndex=l(h,o(u.lastIndex),x))}for(var S,_="",C=0,E=0;E<w.length;E++){k=w[E];for(var T=String(k[0]),I=f(d(s(k.index),h.length),0),A=[],N=1;N<k.length;N++)A.push(void 0===(S=k[N])?S:String(S));var R=k.groups;if(p){var M=[T].concat(A,I,h);void 0!==R&&M.push(R);var O=String(r.apply(void 0,M))}else O=b(T,h,I,A,R,r);C<=I&&(_+=h.slice(C,I)+O,C=I+T.length)}return _+h.slice(C)}];function b(e,n,r,a,o,s){var u=r+e.length,l=a.length,c=v;return void 0!==o&&(o=i(o),c=p),t.call(s,c,(function(t,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":s=o[i.slice(1,-1)];break;default:var c=+i;if(0==c)return t;if(l<c){var f=h(c/10);return 0===f?t:f<=l?void 0===a[f-1]?i.charAt(1):a[f-1]+i.charAt(1):t}s=a[c-1]}return void 0===s?"":s}))}}))},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":108,"../internals/require-object-coercible":112,"../internals/to-integer":132,"../internals/to-length":133,"../internals/to-object":134}],187:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),a=e("../internals/an-object"),i=e("../internals/require-object-coercible"),o=e("../internals/same-value"),s=e("../internals/regexp-exec-abstract");r("search",1,(function(e,t,n){return[function(t){var n=i(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var i=a(e),u=String(this),l=i.lastIndex;o(l,0)||(i.lastIndex=0);var c=s(i,u);return o(i.lastIndex,l)||(i.lastIndex=l),null===c?-1:c.index}]}))},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":108,"../internals/require-object-coercible":112,"../internals/same-value":113}],188:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),a=e("../internals/is-regexp"),i=e("../internals/an-object"),o=e("../internals/require-object-coercible"),s=e("../internals/species-constructor"),u=e("../internals/advance-string-index"),l=e("../internals/to-length"),c=e("../internals/regexp-exec-abstract"),f=e("../internals/regexp-exec"),d=e("../internals/fails"),h=[].push,p=Math.min,v=4294967295,m=!d((function(){return!RegExp(v,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,n){var r=String(o(this)),i=void 0===n?v:n>>>0;if(0==i)return[];if(void 0===e)return[r];if(!a(e))return t.call(r,e,i);for(var s,u,l,c=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,m=new RegExp(e.source,d+"g");(s=f.call(m,r))&&!(p<(u=m.lastIndex)&&(c.push(r.slice(p,s.index)),1<s.length&&s.index<r.length&&h.apply(c,s.slice(1)),l=s[0].length,p=u,c.length>=i));)m.lastIndex===s.index&&m.lastIndex++;return p===r.length?!l&&m.test("")||c.push(""):c.push(r.slice(p)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=o(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,a,n):r.call(String(a),t,n)},function(e,a){var o=n(r,e,this,a,r!==t);if(o.done)return o.value;var f=i(e),d=String(this),h=s(f,RegExp),g=f.unicode,y=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(m?"y":"g"),b=new h(m?f:"^(?:"+f.source+")",y),x=void 0===a?v:a>>>0;if(0==x)return[];if(0===d.length)return null===c(b,d)?[d]:[];for(var w=0,k=0,S=[];k<d.length;){b.lastIndex=m?k:0;var _,C=c(b,m?d:d.slice(k));if(null===C||(_=p(l(b.lastIndex+(m?0:k)),d.length))===w)k=u(d,k,g);else{if(S.push(d.slice(w,k)),S.length===x)return S;for(var E=1;E<=C.length-1;E++)if(S.push(C[E]),S.length===x)return S;k=w=_}}return S.push(d.slice(w)),S}]}),!m)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":50,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/is-regexp":75,"../internals/regexp-exec":109,"../internals/regexp-exec-abstract":108,"../internals/require-object-coercible":112,"../internals/species-constructor":120,"../internals/to-length":133}],189:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/create-html");r({target:"String",proto:!0,forced:e("../internals/string-html-forced")("sub")},{sub:function(){return a(this,"sub","","")}})},{"../internals/create-html":35,"../internals/export":49,"../internals/string-html-forced":121}],190:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/string-trim").trim;r({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return a(this)}})},{"../internals/export":49,"../internals/string-trim":126,"../internals/string-trim-forced":125}],191:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/descriptors"),i=e("../internals/global"),o=e("../internals/has"),s=e("../internals/is-object"),u=e("../internals/object-define-property").f,l=e("../internals/copy-constructor-properties"),c=i.Symbol;if(a&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var f={},d=function e(t){var n=arguments.length<1||void 0===t?void 0:String(t),r=this instanceof e?new c(n):void 0===n?c():c(n);return""===n&&(f[r]=!0),r};l(d,c);var h=d.prototype=c.prototype;h.constructor=d;var p=h.toString,v="Symbol(test)"==String(c("test")),m=/^Symbol\((.*)\)[^)]+$/;u(h,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=p.call(e);if(o(f,e))return"";var n=v?t.slice(7,-1):t.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:d})}},{"../internals/copy-constructor-properties":32,"../internals/descriptors":42,"../internals/export":49,"../internals/global":58,"../internals/has":59,"../internals/is-object":73,"../internals/object-define-property":91}],192:[function(e,t,n){e("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":41}],193:[function(e,t,n){"use strict";function r(e,t){var n=ne[e]=S(Z[H]);return X(n,{type:V,tag:e,description:t}),f||(n.description=t),n}function a(e,t){y(e);var n=x(t),r=_(n).concat(he(n));return W(r,(function(t){f&&!de.call(n,t)||fe(e,t,n[t])})),e}function i(e,t){var n=x(e),r=w(t,!0);if(n!==K||!v(ne,r)||v(re,r)){var a=$(n,r);return!a||!v(ne,r)||v(n,G)&&n[G][r]||(a.enumerable=!0),a}}function o(e){var t=ee(x(e)),n=[];return W(t,(function(e){v(ne,e)||v(L,e)||n.push(e)})),n}var s=e("../internals/export"),u=e("../internals/global"),l=e("../internals/get-built-in"),c=e("../internals/is-pure"),f=e("../internals/descriptors"),d=e("../internals/native-symbol"),h=e("../internals/use-symbol-as-uid"),p=e("../internals/fails"),v=e("../internals/has"),m=e("../internals/is-array"),g=e("../internals/is-object"),y=e("../internals/an-object"),b=e("../internals/to-object"),x=e("../internals/to-indexed-object"),w=e("../internals/to-primitive"),k=e("../internals/create-property-descriptor"),S=e("../internals/object-create"),_=e("../internals/object-keys"),C=e("../internals/object-get-own-property-names"),E=e("../internals/object-get-own-property-names-external"),T=e("../internals/object-get-own-property-symbols"),I=e("../internals/object-get-own-property-descriptor"),A=e("../internals/object-define-property"),N=e("../internals/object-property-is-enumerable"),R=e("../internals/create-non-enumerable-property"),M=e("../internals/redefine"),O=e("../internals/shared"),D=e("../internals/shared-key"),L=e("../internals/hidden-keys"),j=e("../internals/uid"),P=e("../internals/well-known-symbol"),F=e("../internals/well-known-symbol-wrapped"),B=e("../internals/define-well-known-symbol"),z=e("../internals/set-to-string-tag"),U=e("../internals/internal-state"),W=e("../internals/array-iteration").forEach,G=D("hidden"),V="Symbol",H="prototype",q=P("toPrimitive"),X=U.set,Y=U.getterFor(V),K=Object[H],Z=u.Symbol,Q=l("JSON","stringify"),$=I.f,J=A.f,ee=E.f,te=N.f,ne=O("symbols"),re=O("op-symbols"),ae=O("string-to-symbol-registry"),ie=O("symbol-to-string-registry"),oe=O("wks"),se=u.QObject,ue=!se||!se[H]||!se[H].findChild,le=f&&p((function(){return 7!=S(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=$(K,t);r&&delete K[t],J(e,t,n),r&&e!==K&&J(K,t,r)}:J,ce=h?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Z},fe=function e(t,n,r){t===K&&e(re,n,r),y(t);var a=w(n,!0);return y(r),v(ne,a)?(r.enumerable?(v(t,G)&&t[G][a]&&(t[G][a]=!1),r=S(r,{enumerable:k(0,!1)})):(v(t,G)||J(t,G,k(1,{})),t[G][a]=!0),le(t,a,r)):J(t,a,r)},de=function(e){var t=w(e,!0),n=te.call(this,t);return!(this===K&&v(ne,t)&&!v(re,t))&&(!(n||!v(this,t)||!v(ne,t)||v(this,G)&&this[G][t])||n)},he=function(e){var t=e===K,n=ee(t?re:x(e)),r=[];return W(n,(function(e){!v(ne,e)||t&&!v(K,e)||r.push(ne[e])})),r};d||(M((Z=function(e){if(this instanceof Z)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==e?String(e):void 0,n=j(t),a=function e(t){this===K&&e.call(re,t),v(this,G)&&v(this[G],n)&&(this[G][n]=!1),le(this,n,k(1,t))};return f&&ue&&le(K,n,{configurable:!0,set:a}),r(n,t)})[H],"toString",(function(){return Y(this).tag})),M(Z,"withoutSetter",(function(e){return r(j(e),e)})),N.f=de,A.f=fe,I.f=i,C.f=E.f=o,T.f=he,F.f=function(e){return r(P(e),e)},f&&(J(Z[H],"description",{configurable:!0,get:function(){return Y(this).description}}),c||M(K,"propertyIsEnumerable",de,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:Z}),W(_(oe),(function(e){B(e)})),s({target:V,stat:!0,forced:!d},{for:function(e){var t=String(e);if(v(ae,t))return ae[t];var n=Z(t);return ae[t]=n,ie[n]=t,n},keyFor:function(e){if(!ce(e))throw TypeError(e+" is not a symbol");if(v(ie,e))return ie[e]},useSetter:function(){ue=!0},useSimple:function(){ue=!1}}),s({target:"Object",stat:!0,forced:!d,sham:!f},{create:function(e,t){return void 0===t?S(e):a(S(e),t)},defineProperty:fe,defineProperties:a,getOwnPropertyDescriptor:i}),s({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:o,getOwnPropertySymbols:he}),s({target:"Object",stat:!0,forced:p((function(){T.f(1)}))},{getOwnPropertySymbols:function(e){return T.f(b(e))}}),Q&&s({target:"JSON",stat:!0,forced:!d||p((function(){var e=Z();return"[null]"!=Q([e])||"{}"!=Q({a:e})||"{}"!=Q(Object(e))}))},{stringify:function(e,t,n){for(var r,a=[e],i=1;i<arguments.length;)a.push(arguments[i++]);if((g(r=t)||void 0!==e)&&!ce(e))return m(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!ce(t))return t}),a[1]=t,Q.apply(null,a)}}),Z[H][q]||R(Z[H],q,Z[H].valueOf),z(Z,V),L[G]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/define-well-known-symbol":41,"../internals/descriptors":42,"../internals/export":49,"../internals/fails":50,"../internals/get-built-in":55,"../internals/global":58,"../internals/has":59,"../internals/hidden-keys":60,"../internals/internal-state":69,"../internals/is-array":71,"../internals/is-object":73,"../internals/is-pure":74,"../internals/native-symbol":82,"../internals/object-create":89,"../internals/object-define-property":91,"../internals/object-get-own-property-descriptor":92,"../internals/object-get-own-property-names":94,"../internals/object-get-own-property-names-external":93,"../internals/object-get-own-property-symbols":95,"../internals/object-keys":98,"../internals/object-property-is-enumerable":99,"../internals/redefine":107,"../internals/set-to-string-tag":116,"../internals/shared":119,"../internals/shared-key":117,"../internals/to-indexed-object":131,"../internals/to-object":134,"../internals/to-primitive":137,"../internals/uid":142,"../internals/use-symbol-as-uid":143,"../internals/well-known-symbol":145,"../internals/well-known-symbol-wrapped":144}],194:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-copy-within"),i=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t,n){return a.call(i(this),e,t,2<arguments.length?n:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],195:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").every,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e,t){return a(i(this),e,1<arguments.length?t:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],196:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-fill"),i=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return a.apply(i(this),arguments)}))},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],197:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").filter,i=e("../internals/species-constructor"),o=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filter",(function(e,t){for(var n=a(o(this),e,1<arguments.length?t:void 0),r=i(this,this.constructor),u=0,l=n.length,c=new(s(r))(l);u<l;)c[u]=n[u++];return c}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":120}],198:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").findIndex,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e,t){return a(i(this),e,1<arguments.length?t:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").find,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e,t){return a(i(this),e,1<arguments.length?t:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],200:[function(e,t,n){e("../internals/typed-array-constructor")("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":139}],201:[function(e,t,n){e("../internals/typed-array-constructor")("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":139}],202:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").forEach,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e,t){a(i(this),e,1<arguments.length?t:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-includes").includes,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e,t){return a(i(this),e,1<arguments.length?t:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],204:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-includes").indexOf,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e,t){return a(i(this),e,1<arguments.length?t:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],205:[function(e,t,n){e("../internals/typed-array-constructor")("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":139}],206:[function(e,t,n){e("../internals/typed-array-constructor")("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":139}],207:[function(e,t,n){"use strict";function r(){return l.call(d(this))}var a=e("../internals/global"),i=e("../internals/array-buffer-view-core"),o=e("../modules/es.array.iterator"),s=e("../internals/well-known-symbol")("iterator"),u=a.Uint8Array,l=o.values,c=o.keys,f=o.entries,d=i.aTypedArray,h=i.exportTypedArrayMethod,p=u&&u.prototype[s],v=!!p&&("values"==p.name||null==p.name);h("entries",(function(){return f.call(d(this))})),h("keys",(function(){return c.call(d(this))})),h("values",r,!v),h(s,r,!v)},{"../internals/array-buffer-view-core":12,"../internals/global":58,"../internals/well-known-symbol":145,"../modules/es.array.iterator":156}],208:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=r.aTypedArray,i=r.exportTypedArrayMethod,o=[].join;i("join",(function(e){return o.apply(a(this),arguments)}))},{"../internals/array-buffer-view-core":12}],209:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-last-index-of"),i=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return a.apply(i(this),arguments)}))},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],210:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").map,i=e("../internals/species-constructor"),o=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(e,t){return a(o(this),e,1<arguments.length?t:void 0,(function(e,t){return new(s(i(e,e.constructor)))(t)}))}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":120}],211:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-reduce").right,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e,t){return a(i(this),e,arguments.length,1<arguments.length?t:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],212:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-reduce").left,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e,t){return a(i(this),e,arguments.length,1<arguments.length?t:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],213:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=r.aTypedArray,i=r.exportTypedArrayMethod,o=Math.floor;i("reverse",(function(){for(var e,t=a(this).length,n=o(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}))},{"../internals/array-buffer-view-core":12}],214:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/to-length"),i=e("../internals/to-offset"),o=e("../internals/to-object"),s=e("../internals/fails"),u=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(e,t){u(this);var n=i(1<arguments.length?t:void 0,1),r=this.length,s=o(e),l=a(s.length),c=0;if(r<l+n)throw RangeError("Wrong length");for(;c<l;)this[n+c]=s[c++]}),s((function(){new Int8Array(1).set({})})))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/to-length":133,"../internals/to-object":134,"../internals/to-offset":135}],215:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/species-constructor"),i=e("../internals/fails"),o=r.aTypedArray,s=r.aTypedArrayConstructor,u=r.exportTypedArrayMethod,l=[].slice;u("slice",(function(e,t){for(var n=l.call(o(this),e,t),r=a(this,this.constructor),i=0,u=n.length,c=new(s(r))(u);i<u;)c[i]=n[i++];return c}),i((function(){new Int8Array(1).slice()})))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/species-constructor":120}],216:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").some,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e,t){return a(i(this),e,1<arguments.length?t:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],217:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=r.aTypedArray,i=r.exportTypedArrayMethod,o=[].sort;i("sort",(function(e){return o.call(a(this),e)}))},{"../internals/array-buffer-view-core":12}],218:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/to-length"),i=e("../internals/to-absolute-index"),o=e("../internals/species-constructor"),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length,u=i(e,r);return new(o(n,n.constructor))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,a((void 0===t?r:i(t,r))-u))}))},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":120,"../internals/to-absolute-index":129,"../internals/to-length":133}],219:[function(e,t,n){"use strict";var r=e("../internals/global"),a=e("../internals/array-buffer-view-core"),i=e("../internals/fails"),o=r.Int8Array,s=a.aTypedArray,u=a.exportTypedArrayMethod,l=[].toLocaleString,c=[].slice,f=!!o&&i((function(){l.call(new o(1))}));u("toLocaleString",(function(){return l.apply(f?c.call(s(this)):s(this),arguments)}),i((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!i((function(){o.prototype.toLocaleString.call([1,2])})))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":58}],220:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core").exportTypedArrayMethod,a=e("../internals/fails"),i=e("../internals/global").Uint8Array,o=i&&i.prototype||{},s=[].toString,u=[].join;a((function(){s.call({})}))&&(s=function(){return u.call(this)}),r("toString",s,o.toString!=s)},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":58}],221:[function(e,t,n){e("../internals/typed-array-constructor")("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":139}],222:[function(e,t,n){e("../internals/typed-array-constructor")("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":139}],223:[function(e,t,n){e("../internals/typed-array-constructor")("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":139}],224:[function(e,t,n){e("../internals/typed-array-constructor")("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},{"../internals/typed-array-constructor":139}],225:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/dom-iterables"),i=e("../internals/array-for-each"),o=e("../internals/create-non-enumerable-property");for(var s in a){var u=r[s],l=u&&u.prototype;if(l&&l.forEach!==i)try{o(l,"forEach",i)}catch(e){l.forEach=i}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":58}],226:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/dom-iterables"),i=e("../modules/es.array.iterator"),o=e("../internals/create-non-enumerable-property"),s=e("../internals/well-known-symbol"),u=s("iterator"),l=s("toStringTag"),c=i.values;for(var f in a){var d=r[f],h=d&&d.prototype;if(h){if(h[u]!==c)try{o(h,u,c)}catch(e){h[u]=c}if(h[l]||o(h,l,f),a[f])for(var p in i)if(h[p]!==i[p])try{o(h,p,i[p])}catch(e){h[p]=i[p]}}}},{"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":58,"../internals/well-known-symbol":145,"../modules/es.array.iterator":156}],227:[function(e,t,n){"use strict";function r(e){try{return decodeURIComponent(e)}catch(t){return e}}function a(e){var t,n=e.replace(P," "),a=4;try{return decodeURIComponent(n)}catch(e){for(;a;)n=n.replace((t=a--,F[t-1]||(F[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))),r);return n}}function i(e){return z[e]}function o(e){return encodeURIComponent(e).replace(B,i)}function s(e,t){if(t)for(var n,r,i=t.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),e.push({key:a(r.shift()),value:a(r.join("="))}))}function u(e){this.entries.length=0,s(this.entries,e)}function l(e,t){if(e<t)throw TypeError("Not enough arguments")}e("../modules/es.array.iterator");var c=e("../internals/export"),f=e("../internals/get-built-in"),d=e("../internals/native-url"),h=e("../internals/redefine"),p=e("../internals/redefine-all"),v=e("../internals/set-to-string-tag"),m=e("../internals/create-iterator-constructor"),g=e("../internals/internal-state"),y=e("../internals/an-instance"),b=e("../internals/has"),x=e("../internals/function-bind-context"),w=e("../internals/classof"),k=e("../internals/an-object"),S=e("../internals/is-object"),_=e("../internals/object-create"),C=e("../internals/create-property-descriptor"),E=e("../internals/get-iterator"),T=e("../internals/get-iterator-method"),I=e("../internals/well-known-symbol"),A=f("fetch"),N=f("Headers"),R=I("iterator"),M="URLSearchParams",O=M+"Iterator",D=g.set,L=g.getterFor(M),j=g.getterFor(O),P=/\+/g,F=Array(4),B=/[!'()~]|%20/g,z={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},U=m((function(e,t){D(this,{type:O,iterator:E(L(e).entries),kind:t})}),"Iterator",(function(){var e=j(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),W=function e(t){y(this,e,M);var n,r,a,i,o,l,c,f,d,h=0<arguments.length?t:void 0,p=[];if(D(this,{type:M,entries:p,updateURL:function(){},updateSearchParams:u}),void 0!==h)if(S(h))if("function"==typeof(n=T(h)))for(a=(r=n.call(h)).next;!(i=a.call(r)).done;){if((c=(l=(o=E(k(i.value))).next).call(o)).done||(f=l.call(o)).done||!l.call(o).done)throw TypeError("Expected sequence with length 2");p.push({key:c.value+"",value:f.value+""})}else for(d in h)b(h,d)&&p.push({key:d,value:h[d]+""});else s(p,"string"==typeof h?"?"===h.charAt(0)?h.slice(1):h:h+"")},G=W.prototype;p(G,{append:function(e,t){l(arguments.length,2);var n=L(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){l(arguments.length,1);for(var t=L(this),n=t.entries,r=e+"",a=0;a<n.length;)n[a].key===r?n.splice(a,1):a++;t.updateURL()},get:function(e){l(arguments.length,1);for(var t=L(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){l(arguments.length,1);for(var t=L(this).entries,n=e+"",r=[],a=0;a<t.length;a++)t[a].key===n&&r.push(t[a].value);return r},has:function(e){l(arguments.length,1);for(var t=L(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){l(arguments.length,1);for(var n,r=L(this),a=r.entries,i=!1,o=e+"",s=t+"",u=0;u<a.length;u++)(n=a[u]).key===o&&(i?a.splice(u--,1):(i=!0,n.value=s));i||a.push({key:o,value:s}),r.updateURL()},sort:function(){var e,t,n,r=L(this),a=r.entries,i=a.slice();for(n=a.length=0;n<i.length;n++){for(e=i[n],t=0;t<n;t++)if(a[t].key>e.key){a.splice(t,0,e);break}t===n&&a.push(e)}r.updateURL()},forEach:function(e,t){for(var n,r=L(this).entries,a=x(e,1<arguments.length?t:void 0,3),i=0;i<r.length;)a((n=r[i++]).value,n.key,this)},keys:function(){return new U(this,"keys")},values:function(){return new U(this,"values")},entries:function(){return new U(this,"entries")}},{enumerable:!0}),h(G,R,G.entries),h(G,"toString",(function(){for(var e,t=L(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(o(e.key)+"="+o(e.value));return n.join("&")}),{enumerable:!0}),v(W,M),c({global:!0,forced:!d},{URLSearchParams:W}),d||"function"!=typeof A||"function"!=typeof N||c({global:!0,enumerable:!0,forced:!0},{fetch:function(e,t){var n,r,a,i=[e];return 1<arguments.length&&(S(n=t)&&(r=n.body,w(r)===M&&((a=n.headers?new N(n.headers):new N).has("content-type")||a.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),n=_(n,{body:C(0,String(r)),headers:C(0,a)}))),i.push(n)),A.apply(this,i)}}),t.exports={URLSearchParams:W,getState:L}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":36,"../internals/create-property-descriptor":38,"../internals/export":49,"../internals/function-bind-context":53,"../internals/get-built-in":55,"../internals/get-iterator":57,"../internals/get-iterator-method":56,"../internals/has":59,"../internals/internal-state":69,"../internals/is-object":73,"../internals/native-url":83,"../internals/object-create":89,"../internals/redefine":107,"../internals/redefine-all":106,"../internals/set-to-string-tag":116,"../internals/well-known-symbol":145,"../modules/es.array.iterator":156}],228:[function(e,t,n){"use strict";function r(e,t){var n,r,a;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return j;if(!(n=Z(t.slice(1,-1))))return j;e.host=n}else if(re(e)){if(t=_(t),H.test(t))return j;if(null===(n=K(t)))return j;e.host=n}else{if(q.test(t))return j;for(n="",r=k(t),a=0;a<r.length;a++)n+=te(r[a],Q);e.host=n}}function a(e){var t,n,r,a;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=O(e/256);return t.join(".")}if("object"!=typeof e)return e;for(t="",r=function(e){for(var t=null,n=1,r=null,a=0,i=0;i<8;i++)0!==e[i]?(n<a&&(t=r,n=a),r=null,a=0):(null===r&&(r=i),++a);return n<a&&(t=r,n=a),t}(e),n=0;n<8;n++)a&&0===e[n]||(a=a&&!1,r===n?(t+=n?":":"::",a=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}function i(e){return""!=e.username||""!=e.password}function o(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme}function s(e,t){var n;return 2==e.length&&F.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)}function u(e){var t;return 1<e.length&&s(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)}function l(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&s(t[0],!0)||t.pop()}function c(e,t,n,a){var o,c,f,h,p,v,m=n||ae,g=0,y="",b=!1,w=!1,S=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(X,"")),t=t.replace(Y,""),o=k(t);g<=o.length;){switch(c=o[g],m){case ae:if(!c||!F.test(c)){if(n)return L;m=oe;continue}y+=c.toLowerCase(),m=ie;break;case ie:if(c&&(B.test(c)||"+"==c||"-"==c||"."==c))y+=c.toLowerCase();else{if(":"!=c){if(n)return L;y="",m=oe,g=0;continue}if(n&&(re(e)!=x(ne,y)||"file"==y&&(i(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=y,n)return void(re(e)&&ne[e.scheme]==e.port&&(e.port=null));y="","file"==e.scheme?m=ge:re(e)&&a&&a.scheme==e.scheme?m=se:re(e)?m=fe:"/"==o[g+1]?(m=ue,g++):(e.cannotBeABaseURL=!0,e.path.push(""),m=ke)}break;case oe:if(!a||a.cannotBeABaseURL&&"#"!=c)return L;if(a.cannotBeABaseURL&&"#"==c){e.scheme=a.scheme,e.path=a.path.slice(),e.query=a.query,e.fragment="",e.cannotBeABaseURL=!0,m=_e;break}m="file"==a.scheme?ge:le;continue;case se:if("/"!=c||"/"!=o[g+1]){m=le;continue}m=de,g++;break;case ue:if("/"==c){m=he;break}m=we;continue;case le:if(e.scheme=a.scheme,c==d)e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,e.path=a.path.slice(),e.query=a.query;else if("/"==c||"\\"==c&&re(e))m=ce;else if("?"==c)e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,e.path=a.path.slice(),e.query="",m=Se;else{if("#"!=c){e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,e.path=a.path.slice(),e.path.pop(),m=we;continue}e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,e.path=a.path.slice(),e.query=a.query,e.fragment="",m=_e}break;case ce:if(!re(e)||"/"!=c&&"\\"!=c){if("/"!=c){e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,m=we;continue}m=he}else m=de;break;case fe:if(m=de,"/"!=c||"/"!=y.charAt(g+1))continue;g++;break;case de:if("/"==c||"\\"==c)break;m=he;continue;case he:if("@"==c){b&&(y="%40"+y),b=!0,f=k(y);for(var _=0;_<f.length;_++){var C=f[_];if(":"!=C||S){var E=te(C,ee);S?e.password+=E:e.username+=E}else S=!0}y=""}else if(c==d||"/"==c||"?"==c||"#"==c||"\\"==c&&re(e)){if(b&&""==y)return"Invalid authority";g-=k(y).length+1,y="",m=pe}else y+=c;break;case pe:case ve:if(n&&"file"==e.scheme){m=be;continue}if(":"!=c||w){if(c==d||"/"==c||"?"==c||"#"==c||"\\"==c&&re(e)){if(re(e)&&""==y)return j;if(n&&""==y&&(i(e)||null!==e.port))return;if(h=r(e,y))return h;if(y="",m=xe,n)return;continue}"["==c?w=!0:"]"==c&&(w=!1),y+=c}else{if(""==y)return j;if(h=r(e,y))return h;if(y="",m=me,n==ve)return}break;case me:if(!z.test(c)){if(c==d||"/"==c||"?"==c||"#"==c||"\\"==c&&re(e)||n){if(""!=y){var T=parseInt(y,10);if(65535<T)return P;e.port=re(e)&&T===ne[e.scheme]?null:T,y=""}if(n)return;m=xe;continue}return P}y+=c;break;case ge:if(e.scheme="file","/"==c||"\\"==c)m=ye;else{if(!a||"file"!=a.scheme){m=we;continue}if(c==d)e.host=a.host,e.path=a.path.slice(),e.query=a.query;else if("?"==c)e.host=a.host,e.path=a.path.slice(),e.query="",m=Se;else{if("#"!=c){u(o.slice(g).join(""))||(e.host=a.host,e.path=a.path.slice(),l(e)),m=we;continue}e.host=a.host,e.path=a.path.slice(),e.query=a.query,e.fragment="",m=_e}}break;case ye:if("/"==c||"\\"==c){m=be;break}a&&"file"==a.scheme&&!u(o.slice(g).join(""))&&(s(a.path[0],!0)?e.path.push(a.path[0]):e.host=a.host),m=we;continue;case be:if(c==d||"/"==c||"\\"==c||"?"==c||"#"==c){if(!n&&s(y))m=we;else if(""==y){if(e.host="",n)return;m=xe}else{if(h=r(e,y))return h;if("localhost"==e.host&&(e.host=""),n)return;y="",m=xe}continue}y+=c;break;case xe:if(re(e)){if(m=we,"/"!=c&&"\\"!=c)continue}else if(n||"?"!=c)if(n||"#"!=c){if(c!=d&&(m=we,"/"!=c))continue}else e.fragment="",m=_e;else e.query="",m=Se;break;case we:if(c==d||"/"==c||"\\"==c&&re(e)||!n&&("?"==c||"#"==c)){if(".."===(v=(v=y).toLowerCase())||"%2e."===v||".%2e"===v||"%2e%2e"===v?(l(e),"/"==c||"\\"==c&&re(e)||e.path.push("")):"."===(p=y)||"%2e"===p.toLowerCase()?"/"==c||"\\"==c&&re(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&s(y)&&(e.host&&(e.host=""),y=y.charAt(0)+":"),e.path.push(y)),y="","file"==e.scheme&&(c==d||"?"==c||"#"==c))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==c?(e.query="",m=Se):"#"==c&&(e.fragment="",m=_e)}else y+=te(c,J);break;case ke:"?"==c?(e.query="",m=Se):"#"==c?(e.fragment="",m=_e):c!=d&&(e.path[0]+=te(c,Q));break;case Se:n||"#"!=c?c!=d&&("'"==c&&re(e)?e.query+="%27":e.query+="#"==c?"%23":te(c,Q)):(e.fragment="",m=_e);break;case _e:c!=d&&(e.fragment+=te(c,$))}g++}}function f(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}}e("../modules/es.string.iterator");var d,h=e("../internals/export"),p=e("../internals/descriptors"),v=e("../internals/native-url"),m=e("../internals/global"),g=e("../internals/object-define-properties"),y=e("../internals/redefine"),b=e("../internals/an-instance"),x=e("../internals/has"),w=e("../internals/object-assign"),k=e("../internals/array-from"),S=e("../internals/string-multibyte").codeAt,_=e("../internals/string-punycode-to-ascii"),C=e("../internals/set-to-string-tag"),E=e("../modules/web.url-search-params"),T=e("../internals/internal-state"),I=m.URL,A=E.URLSearchParams,N=E.getState,R=T.set,M=T.getterFor("URL"),O=Math.floor,D=Math.pow,L="Invalid scheme",j="Invalid host",P="Invalid port",F=/[A-Za-z]/,B=/[\d+-.A-Za-z]/,z=/\d/,U=/^(0x|0X)/,W=/^[0-7]+$/,G=/^\d+$/,V=/^[\dA-Fa-f]+$/,H=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,q=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,X=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Y=/[\u0009\u000A\u000D]/g,K=function(e){var t,n,r,a,i,o,s,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),4<(t=u.length))return e;for(n=[],r=0;r<t;r++){if(""==(a=u[r]))return e;if(i=10,1<a.length&&"0"==a.charAt(0)&&(i=U.test(a)?16:8,a=a.slice(8==i?1:2)),""===a)o=0;else{if(!(10==i?G:8==i?W:V).test(a))return e;o=parseInt(a,i)}n.push(o)}for(r=0;r<t;r++)if(o=n[r],r==t-1){if(o>=D(256,5-t))return null}else if(255<o)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*D(256,3-r);return s},Z=function(e){function t(){return e.charAt(d)}var n,r,a,i,o,s,u,l=[0,0,0,0,0,0,0,0],c=0,f=null,d=0;if(":"==t()){if(":"!=e.charAt(1))return;d+=2,f=++c}for(;t();){if(8==c)return;if(":"!=t()){for(n=r=0;r<4&&V.test(t());)n=16*n+parseInt(t(),16),d++,r++;if("."==t()){if(0==r)return;if(d-=r,6<c)return;for(a=0;t();){if(i=null,0<a){if(!("."==t()&&a<4))return;d++}if(!z.test(t()))return;for(;z.test(t());){if(o=parseInt(t(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(255<i)return;d++}l[c]=256*l[c]+i,2!=++a&&4!=a||c++}if(4!=a)return;break}if(":"==t()){if(d++,!t())return}else if(t())return;l[c++]=n}else{if(null!==f)return;d++,f=++c}}if(null!==f)for(s=c-f,c=7;0!=c&&0<s;)u=l[c],l[c--]=l[f+s-1],l[f+--s]=u;else if(8!=c)return;return l},Q={},$=w({},Q,{" ":1,'"':1,"<":1,">":1,"`":1}),J=w({},$,{"#":1,"?":1,"{":1,"}":1}),ee=w({},J,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),te=function(e,t){var n=S(e,0);return 32<n&&n<127&&!x(t,e)?e:encodeURIComponent(e)},ne={ftp:21,file:null,http:80,https:443,ws:80,wss:443},re=function(e){return x(ne,e.scheme)},ae={},ie={},oe={},se={},ue={},le={},ce={},fe={},de={},he={},pe={},ve={},me={},ge={},ye={},be={},xe={},we={},ke={},Se={},_e={},Ce=function e(t,n){var r,a,i=b(this,e,"URL"),o=1<arguments.length?n:void 0,s=String(t),u=R(i,{type:"URL"});if(void 0!==o)if(o instanceof e)r=M(o);else if(a=c(r={},String(o)))throw TypeError(a);if(a=c(u,s,null,r))throw TypeError(a);var l=u.searchParams=new A,f=N(l);f.updateSearchParams(u.query),f.updateURL=function(){u.query=String(l)||null},p||(i.href=Te.call(i),i.origin=Ie.call(i),i.protocol=Ae.call(i),i.username=Ne.call(i),i.password=Re.call(i),i.host=Me.call(i),i.hostname=Oe.call(i),i.port=De.call(i),i.pathname=Le.call(i),i.search=je.call(i),i.searchParams=Pe.call(i),i.hash=Fe.call(i))},Ee=Ce.prototype,Te=function(){var e=M(this),t=e.scheme,n=e.username,r=e.password,o=e.host,s=e.port,u=e.path,l=e.query,c=e.fragment,f=t+":";return null!==o?(f+="//",i(e)&&(f+=n+(r?":"+r:"")+"@"),f+=a(o),null!==s&&(f+=":"+s)):"file"==t&&(f+="//"),f+=e.cannotBeABaseURL?u[0]:u.length?"/"+u.join("/"):"",null!==l&&(f+="?"+l),null!==c&&(f+="#"+c),f},Ie=function(){var e=M(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&re(e)?t+"://"+a(e.host)+(null!==n?":"+n:""):"null"},Ae=function(){return M(this).scheme+":"},Ne=function(){return M(this).username},Re=function(){return M(this).password},Me=function(){var e=M(this),t=e.host,n=e.port;return null===t?"":null===n?a(t):a(t)+":"+n},Oe=function(){var e=M(this).host;return null===e?"":a(e)},De=function(){var e=M(this).port;return null===e?"":String(e)},Le=function(){var e=M(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},je=function(){var e=M(this).query;return e?"?"+e:""},Pe=function(){return M(this).searchParams},Fe=function(){var e=M(this).fragment;return e?"#"+e:""};if(p&&g(Ee,{href:f(Te,(function(e){var t=M(this),n=c(t,String(e));if(n)throw TypeError(n);N(t.searchParams).updateSearchParams(t.query)})),origin:f(Ie),protocol:f(Ae,(function(e){c(M(this),String(e)+":",ae)})),username:f(Ne,(function(e){var t=M(this),n=k(String(e));if(!o(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=te(n[r],ee)}})),password:f(Re,(function(e){var t=M(this),n=k(String(e));if(!o(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=te(n[r],ee)}})),host:f(Me,(function(e){var t=M(this);t.cannotBeABaseURL||c(t,String(e),pe)})),hostname:f(Oe,(function(e){var t=M(this);t.cannotBeABaseURL||c(t,String(e),ve)})),port:f(De,(function(e){var t=M(this);o(t)||(""==(e=String(e))?t.port=null:c(t,e,me))})),pathname:f(Le,(function(e){var t=M(this);t.cannotBeABaseURL||(t.path=[],c(t,e+"",xe))})),search:f(je,(function(e){var t=M(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",c(t,e,Se)),N(t.searchParams).updateSearchParams(t.query)})),searchParams:f(Pe),hash:f(Fe,(function(e){var t=M(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",c(t,e,_e)):t.fragment=null}))}),y(Ee,"toJSON",(function(){return Te.call(this)}),{enumerable:!0}),y(Ee,"toString",(function(){return Te.call(this)}),{enumerable:!0}),I){var Be=I.createObjectURL,ze=I.revokeObjectURL;Be&&y(Ce,"createObjectURL",(function(e){return Be.apply(I,arguments)})),ze&&y(Ce,"revokeObjectURL",(function(e){return ze.apply(I,arguments)}))}C(Ce,"URL"),h({global:!0,forced:!v,sham:!p},{URL:Ce})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":42,"../internals/export":49,"../internals/global":58,"../internals/has":59,"../internals/internal-state":69,"../internals/native-url":83,"../internals/object-assign":88,"../internals/object-define-properties":90,"../internals/redefine":107,"../internals/set-to-string-tag":116,"../internals/string-multibyte":122,"../internals/string-punycode-to-ascii":123,"../modules/es.string.iterator":183,"../modules/web.url-search-params":227}],229:[function(e,t,n){"use strict";t.exports=e("./").polyfill()},{"./":230}],230:[function(e,n,r){(function(t,a){var i;i=function(){"use strict";function n(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,o=void 0,s=void 0,u=function(e,t){v[i]=e,v[i+1]=t,2===(i+=2)&&(s?s(m):w())},l="undefined"!=typeof window?window:void 0,c=l||{},f=c.MutationObserver||c.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(m,1)}}var v=new Array(1e3);function m(){for(var e=0;e<i;e+=2)(0,v[e])(v[e+1]),v[e]=void 0,v[e+1]=void 0;i=0}var g,y,b,x,w=void 0;function k(e,t){var n=this,r=new this.constructor(C);void 0===r[_]&&j(r);var a=n._state;if(a){var i=arguments[a-1];u((function(){return D(a,r,i,n._result)}))}else M(n,r,e,t);return r}function S(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(C);return I(t,e),t}w=d?function(){return t.nextTick(m)}:f?(y=0,b=new f(m),x=document.createTextNode(""),b.observe(x,{characterData:!0}),function(){x.data=y=++y%2}):h?((g=new MessageChannel).port1.onmessage=m,function(){return g.port2.postMessage(0)}):void 0===l&&"function"==typeof e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(o=e.runOnLoop||e.runOnContext)?function(){o(m)}:p()}catch(e){return p()}}():p();var _=Math.random().toString(36).substring(2);function C(){}var E=void 0;function T(e,t,r){var a,i;t.constructor===e.constructor&&r===k&&t.constructor.resolve===S?(a=e,1===(i=t)._state?N(a,i._result):2===i._state?R(a,i._result):M(i,void 0,(function(e){return I(a,e)}),(function(e){return R(a,e)}))):void 0===r?N(e,t):n(r)?function(e,t,n){u((function(e){var r=!1,a=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?I(e,n):N(e,n))}),(function(t){r||(r=!0,R(e,t))}),e._label);!r&&a&&(r=!0,R(e,a))}),e)}(e,t,r):N(e,t)}function I(e,t){if(e===t)R(e,new TypeError("You cannot resolve a promise with itself"));else if(a=typeof(r=t),null===r||"object"!=a&&"function"!=a)N(e,t);else{var n=void 0;try{n=t.then}catch(t){return void R(e,t)}T(e,t,n)}var r,a}function A(e){e._onerror&&e._onerror(e._result),O(e)}function N(e,t){e._state===E&&(e._result=t,e._state=1,0!==e._subscribers.length&&u(O,e))}function R(e,t){e._state===E&&(e._state=2,e._result=t,u(A,e))}function M(e,t,n,r){var a=e._subscribers,i=a.length;e._onerror=null,a[i]=t,a[i+1]=n,a[i+2]=r,0===i&&e._state&&u(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,a=void 0,i=e._result,o=0;o<t.length;o+=3)r=t[o],a=t[o+n],r?D(n,r,a,i):a(i);e._subscribers.length=0}}function D(e,t,r,a){var i=n(r),o=void 0,s=void 0,u=!0;if(i){try{o=r(a)}catch(e){u=!1,s=e}if(t===o)return void R(t,new TypeError("A promises callback cannot return that same promise."))}else o=a;t._state!==E||(i&&u?I(t,o):!1===u?R(t,s):1===e?N(t,o):2===e&&R(t,o))}var L=0;function j(e){e[_]=L++,e._state=void 0,e._result=void 0,e._subscribers=[]}var P=(F.prototype._enumerate=function(e){for(var t=0;this._state===E&&t<e.length;t++)this._eachEntry(e[t],t)},F.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===S){var a=void 0,i=void 0,o=!1;try{a=e.then}catch(t){o=!0,i=t}if(a===k&&e._state!==E)this._settledAt(e._state,t,e._result);else if("function"!=typeof a)this._remaining--,this._result[t]=e;else if(n===B){var s=new n(C);o?R(s,i):T(s,e,a),this._willSettleAt(s,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},F.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===E&&(this._remaining--,2===e?R(r,n):this._result[t]=n),0===this._remaining&&N(r,this._result)},F.prototype._willSettleAt=function(e,t){var n=this;M(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))},F);function F(e,t){this._instanceConstructor=e,this.promise=new e(C),this.promise[_]||j(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?N(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&N(this.promise,this._result))):R(this.promise,new Error("Array Methods must be provided an Array"))}var B=(z.prototype.catch=function(e){return this.then(null,e)},z.prototype.finally=function(e){var t=this.constructor;return n(e)?this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))})):this.then(e,e)},z);function z(e){this[_]=L++,this._result=this._state=void 0,this._subscribers=[],C!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof z?function(e,t){try{t((function(t){I(e,t)}),(function(t){R(e,t)}))}catch(t){R(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return B.prototype.then=k,B.all=function(e){return new P(this,e).promise},B.race=function(e){var t=this;return r(e)?new t((function(n,r){for(var a=e.length,i=0;i<a;i++)t.resolve(e[i]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},B.resolve=S,B.reject=function(e){var t=new this(C);return R(t,e),t},B._setScheduler=function(e){s=e},B._setAsap=function(e){u=e},B._asap=u,B.polyfill=function(){var e=void 0;if(void 0!==a)e=a;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=B},B.Promise=B},"object"==typeof r&&void 0!==n?n.exports=i():this.ES6Promise=i()}).call(this,e("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:238}],231:[function(e,t,n){!function(e,r){if(void 0!==n&&void 0!==t)r(0,t);else{var a={exports:{}};r(0,a),e.fetchJsonp=a.exports}}(this,(function(e,t){"use strict";var n="callback";function r(e){try{delete window[e]}catch(t){window[e]=void 0}}function a(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e,o=t.timeout||5e3,s=t.jsonpCallback||n,u=void 0;return new Promise((function(n,l){var c=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(e){n({ok:!0,json:function(){return Promise.resolve(e)}}),u&&clearTimeout(u),a(f),r(c)},i+=-1===i.indexOf("?")?"?":"&";var d=document.createElement("script");d.setAttribute("src",""+i+s+"="+c),t.charset&&d.setAttribute("charset",t.charset),d.id=f,document.getElementsByTagName("head")[0].appendChild(d),u=setTimeout((function(){l(new Error("JSONP request to "+e+" timed out")),r(c),a(f),window[c]=function(){r(c)}}),o),d.onerror=function(){l(new Error("JSONP request to "+e+" failed")),r(c),a(f),u&&clearTimeout(u)}}))}}))},{}],232:[function(e,t,n){var r=r||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in r,i=/constructor/i.test(e.HTMLElement)||e.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},u=function(e){setTimeout((function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()}),4e4)},l=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},c=function(t,c,f){function d(){!function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var a=e["on"+t[r]];if("function"==typeof a)try{a.call(e,e)}catch(e){s(e)}}}(p,"writestart progress write writeend".split(" "))}f||(t=l(t));var h,p=this,v="application/octet-stream"===t.type;if(p.readyState=p.INIT,a)return h=n().createObjectURL(t),void setTimeout((function(){var e,t;r.href=h,r.download=c,e=r,t=new MouseEvent("click"),e.dispatchEvent(t),d(),u(h),p.readyState=p.DONE}));!function(){if((o||v&&i)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=o?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,d()},r.readAsDataURL(t),p.readyState=p.INIT}h=h||n().createObjectURL(t),v?e.location.href=h:e.open(h,"_blank")||(e.location.href=h),p.readyState=p.DONE,d(),u(h)}()},f=c.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=l(e)),navigator.msSaveOrOpenBlob(e,t)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,function(e,t,n){return new c(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports&&(t.exports.saveAs=r)},{}],233:[function(e,t,n){n.read=function(e,t,n,r,a){var i,o,s=8*a-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?a-1:0,d=n?-1:1,h=e[t+f];for(f+=d,i=h&(1<<-c)-1,h>>=-c,c+=s;0<c;i=256*i+e[t+f],f+=d,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=r;0<c;o=256*o+e[t+f],f+=d,c-=8);if(0===i)i=1-l;else{if(i===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),i-=l}return(h?-1:1)*o*Math.pow(2,i-r)},n.write=function(e,t,n,r,a,i){var o,s,u,l=8*i-a-1,c=(1<<l)-1,f=c>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),2<=(t+=1<=o+f?d/u:d*Math.pow(2,1-f))*u&&(o++,u/=2),c<=o+f?(s=0,o=c):1<=o+f?(s=(t*u-1)*Math.pow(2,a),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));8<=a;e[n+h]=255&s,h+=p,s/=256,a-=8);for(o=o<<a|s,l+=a;0<l;e[n+h]=255&o,h+=p,o/=256,l-=8);e[n+h-p]|=128*v}},{}],234:[function(e,t,n){"use strict";var r;function a(e,t){return e.b===t.b&&e.a===t.a}function i(e,t){return e.b<t.b||e.b===t.b&&e.a<=t.a}function o(e,t,n){var r=t.b-e.b,a=n.b-t.b;return 0<r+a?r<a?t.a-e.a+r/(r+a)*(e.a-n.a):t.a-n.a+a/(r+a)*(n.a-e.a):0}function s(e,t,n){var r=t.b-e.b,a=n.b-t.b;return 0<r+a?(t.a-n.a)*r+(t.a-e.a)*a:0}function u(e,t){return e.a<t.a||e.a===t.a&&e.b<=t.b}function l(e,t,n){var r=t.a-e.a,a=n.a-t.a;return 0<r+a?r<a?t.b-e.b+r/(r+a)*(e.b-n.b):t.b-n.b+a/(r+a)*(n.b-e.b):0}function c(e,t,n){var r=t.a-e.a,a=n.a-t.a;return 0<r+a?(t.b-n.b)*r+(t.b-e.b)*a:0}function f(e,t,n,r){return(e=e<0?0:e)<=(n=n<0?0:n)?0===n?(t+r)/2:t+e/(e+n)*(r-t):r+n/(e+n)*(t-r)}function d(e){var t=g(e.b);return b(t,e.c),b(t.b,e.c),x(t,e.a),t}function h(e,t){var n=!1,r=!1;e!==t&&(t.a!==e.a&&(r=!0,k(t.a,e.a)),t.d!==e.d&&(n=!0,S(t.d,e.d)),y(t,e),r||(b(t,e.a),e.a.c=e),n||(x(t,e.d),e.d.a=e))}function p(e){var t=e.b,n=!1;e.d!==e.b.d&&(n=!0,S(e.d,e.b.d)),e.c===e?k(e.a,null):(e.b.d.a=Q(e),e.a.c=e.c,y(e,Q(e)),n||x(e,e.d)),t.c===t?(k(t.a,null),S(t.d,null)):(e.d.a=Q(t),t.a.c=t.c,y(t,Q(t))),w(e)}function v(e){var t=g(e),n=t.b;return y(t,e.e),t.a=e.b.a,b(n,t.a),t.d=n.d=e.d,t=t.b,y(e.b,Q(e.b)),y(e.b,t),e.b.a=t.a,t.b.a.c=t.b,t.b.d=e.b.d,t.f=e.f,t.b.f=e.b.f,t}function m(e,t){var n=!1,r=g(e),a=r.b;return t.d!==e.d&&(n=!0,S(t.d,e.d)),y(r,e.e),y(a,t),r.a=e.b.a,a.a=t.a,r.d=a.d=e.d,e.d.a=a,n||x(r,e.d),r}function g(e){var t=new Z,n=new Z,r=e.b.h;return(((n.h=r).b.h=t).h=e).b.h=n,t.b=n,((t.c=t).e=n).b=t,(n.c=n).e=t}function y(e,t){var n=e.c,r=t.c;n.b.e=t,(r.b.e=e).c=r,t.c=n}function b(e,t){var n=t.f,r=new J(t,n);for(n.e=r,n=(t.f=r).c=e;n.a=r,(n=n.c)!==e;);}function x(e,t){var n=t.d,r=new K(t,n);for(n.b=r,(t.d=r).a=e,r.c=t.c,n=e;n.d=r,(n=n.e)!==e;);}function w(e){var t=e.h;e=e.b.h,(t.b.h=e).b.h=t}function k(e,t){for(var n=e.c,r=n;r.a=t,(r=r.c)!==n;);n=e.f,((r=e.e).f=n).e=r}function S(e,t){for(var n=e.a,r=n;r.d=t,(r=r.e)!==n;);n=e.d,((r=e.b).d=n).b=r}function _(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t}function C(e,t){e.f+=t.f,e.b.f+=t.b.f}function E(e,t,n){return e=e.a,t=t.a,n=n.a,t.b.a===e?n.b.a===e?i(t.a,n.a)?s(n.b.a,t.a,n.a)<=0:0<=s(t.b.a,n.a,t.a):s(n.b.a,e,n.a)<=0:n.b.a===e?0<=s(t.b.a,e,t.a):(t=o(t.b.a,e,t.a),(e=o(n.b.a,e,n.a))<=t)}function T(e){e.a.i=null;var t=e.e;t.a.c=t.c,t.c.a=t.a,e.e=null}function I(e,t){p(e.a),e.c=!1,(e.a=t).i=e}function A(e){for(var t=e.a.a;(e=fe(e)).a.a===t;);return e.c&&(I(e,t=m(ce(e).a.b,e.a.e)),e=fe(e)),e}function N(e,t,n){var r=new le;return r.a=n,r.e=V(e.f,t.e,r),n.i=r}function R(e,t){switch(e.s){case 100130:return 0!=(1&t);case 100131:return 0!==t;case 100132:return 0<t;case 100133:return t<0;case 100134:return 2<=t||t<=-2}return!1}function M(e){var t=e.a,n=t.d;n.c=e.d,n.a=t,T(e)}function O(e,t,n){for(t=(e=t).a;e!==n;){e.c=!1;var r=ce(e),a=r.a;if(a.a!==t.a){if(!r.c){M(e);break}I(r,a=m(t.c.b,a.b))}t.c!==a&&(h(Q(a),a),h(t,a)),M(e),t=r.a,e=r}return t}function D(e,t,n,r,a,i){for(var o=!0;N(e,t,n.b),(n=n.c)!==r;);for(null===a&&(a=ce(t).a.b.c);(n=(r=ce(t)).a.b).a===a.a;)n.c!==a&&(h(Q(n),n),h(Q(a),n)),r.f=t.f-n.f,r.d=R(e,r.f),t.b=!0,!o&&F(e,t)&&(C(n,a),T(t),p(a)),o=!1,t=r,a=n;t.b=!0,i&&z(e,t)}function L(e,t,n,r,a){var i=[t.g[0],t.g[1],t.g[2]];t.d=null,t.d=e.o&&e.o(i,n,r,e.c)||null,null===t.d&&(a?e.n||(Y(e,100156),e.n=!0):t.d=n[0])}function j(e,t,n){var r=[null,null,null,null];r[0]=t.a.d,r[1]=n.a.d,L(e,t.a,r,[.5,.5,0,0],!1),h(t,n)}function P(e,t,n,r,a){var i=Math.abs(t.b-e.b)+Math.abs(t.a-e.a),o=Math.abs(n.b-e.b)+Math.abs(n.a-e.a),s=a+1;r[a]=.5*o/(i+o),r[s]=.5*i/(i+o),e.g[0]+=r[a]*t.g[0]+r[s]*n.g[0],e.g[1]+=r[a]*t.g[1]+r[s]*n.g[1],e.g[2]+=r[a]*t.g[2]+r[s]*n.g[2]}function F(e,t){var n=ce(t),r=t.a,o=n.a;if(i(r.a,o.a)){if(0<s(o.b.a,r.a,o.a))return!1;if(a(r.a,o.a)){if(r.a!==o.a){n=e.e;var u=r.a.h;if(0<=u){var l=(n=n.b).d,c=n.e,f=n.c,d=f[u];l[d]=l[n.a],(f[l[d]]=d)<=--n.a&&(d<=1||i(c[l[d>>1]],c[l[d]])?se(n,d):ue(n,d)),c[u]=null,f[u]=n.b,n.b=u}else for(n.c[-(u+1)]=null;0<n.a&&null===n.c[n.d[n.a-1]];)--n.a;j(e,Q(o),r)}}else v(o.b),h(r,Q(o)),t.b=n.b=!0}else{if(s(r.b.a,o.a,r.a)<0)return!1;fe(t).b=t.b=!0,v(r.b),h(Q(o),r)}return!0}function B(e,t){var n=ce(t),r=t.a,d=n.a,p=r.a,m=d.a,g=r.b.a,y=d.b.a,b=new J;if(s(g,e.a,p),s(y,e.a,m),p===m||Math.min(p.a,g.a)>Math.max(m.a,y.a))return!1;if(i(p,m)){if(0<s(y,p,m))return!1}else if(s(g,m,p)<0)return!1;var x,w,k=g,S=p,_=y,C=m;if(i(k,S)||(x=k,k=S,S=x),i(_,C)||(x=_,_=C,C=x),i(k,_)||(x=k,k=_,_=x,x=S,S=C,C=x),i(_,S)?i(S,C)?((x=o(k,_,S))+(w=o(_,S,C))<0&&(x=-x,w=-w),b.b=f(x,_.b,w,S.b)):((x=s(k,_,S))+(w=-s(k,C,S))<0&&(x=-x,w=-w),b.b=f(x,_.b,w,C.b)):b.b=(_.b+S.b)/2,u(k,S)||(x=k,k=S,S=x),u(_,C)||(x=_,_=C,C=x),u(k,_)||(x=k,k=_,_=x,x=S,S=C,C=x),u(_,S)?u(S,C)?((x=l(k,_,S))+(w=l(_,S,C))<0&&(x=-x,w=-w),b.a=f(x,_.a,w,S.a)):((x=c(k,_,S))+(w=-c(k,C,S))<0&&(x=-x,w=-w),b.a=f(x,_.a,w,C.a)):b.a=(_.a+S.a)/2,i(b,e.a)&&(b.b=e.a.b,b.a=e.a.a),k=i(p,m)?p:m,i(k,b)&&(b.b=k.b,b.a=k.a),a(b,p)||a(b,m))return F(e,t),!1;if(!a(g,e.a)&&0<=s(g,e.a,b)||!a(y,e.a)&&s(y,e.a,b)<=0){if(y===e.a)return v(r.b),h(d.b,r),r=ce(t=A(t)).a,O(e,ce(t),n),D(e,t,Q(r),r,r,!0),!0;if(g!==e.a)return 0<=s(g,e.a,b)&&(fe(t).b=t.b=!0,v(r.b),r.a.b=e.a.b,r.a.a=e.a.a),s(y,e.a,b)<=0&&(t.b=n.b=!0,v(d.b),d.a.b=e.a.b,d.a.a=e.a.a),!1;for(v(d.b),h(r.e,Q(d)),m=(p=n=t).a.b.a;(p=fe(p)).a.b.a===m;);return p=ce(t=p).a.b.c,n.a=Q(d),D(e,t,(d=O(e,n,null)).c,r.b.c,p,!0),!0}return v(r.b),v(d.b),h(Q(d),r),r.a.b=b.b,r.a.a=b.a,r.a.h=te(e.e,r.a),r=r.a,d=[0,0,0,0],b=[p.d,g.d,m.d,y.d],r.g[0]=r.g[1]=r.g[2]=0,P(r,p,g,d,0),P(r,m,y,d,2),L(e,r,b,d,!0),fe(t).b=t.b=n.b=!0,!1}function z(e,t){for(var n=ce(t);;){for(;n.b;)n=ce(t=n);if(!(t.b||null!==(t=fe(n=t))&&t.b))break;t.b=!1;var r,a=t.a,o=n.a;if(r=a.b.a!==o.b.a)e:{var u=ce(r=t),l=r.a,c=u.a,f=void 0;if(i(l.b.a,c.b.a)){if(s(l.b.a,c.b.a,l.a)<0){r=!1;break e}fe(r).b=r.b=!0,f=v(l),h(c.b,f),f.d.c=r.d}else{if(0<s(c.b.a,l.b.a,c.a)){r=!1;break e}r.b=u.b=!0,f=v(c),h(l.e,c.b),f.b.d.c=r.d}r=!0}if(r&&(n.c?(T(n),p(o),o=(n=ce(t)).a):t.c&&(T(t),p(a),a=(t=fe(n)).a)),a.a!==o.a)if(a.b.a===o.b.a||t.c||n.c||a.b.a!==e.a&&o.b.a!==e.a)F(e,t);else if(B(e,t))break;a.a===o.a&&a.b.a===o.b.a&&(C(o,a),T(t),p(a),t=fe(n))}}function U(e,t){for(var n=(e.a=t).c;null===n.i;)if((n=n.c)===t.c){n=e;var r=t;(l=new le).a=r.c.b;for(var o=(f=n.f).a;null!==(o=o.a).b&&!f.c(f.b,l,o.b););var u=ce(f=o.b),l=f.a;if(o=u.a,0===s(l.b.a,r,l.a))a((l=f.a).a,r)||a(l.b.a,r)||(v(l.b),f.c&&(p(l.c),f.c=!1),h(r.c,l),U(n,r));else{var c=i(o.b.a,l.b.a)?f:u;u=void 0,f.d||c.c?(u=c===f?m(r.c.b,l.e):m(o.b.c.b,r.c).b,c.c?I(c,u):((f=N(l=n,f,u)).f=fe(f).f+f.a.f,f.d=R(l,f.f)),U(n,r)):D(n,f,r.c,r.c,null,!0)}return}if(f=(l=ce(n=A(n.i))).a,(l=O(e,l,null)).c===f){l=(f=l).c,o=ce(n),u=n.a,c=o.a;var f,d=!1;u.b.a!==c.b.a&&B(e,n),a(u.a,e.a)&&(h(Q(l),u),l=ce(n=A(n)).a,O(e,ce(n),o),d=!0),a(c.a,e.a)&&(h(f,Q(c)),f=O(e,o,null),d=!0),d?D(e,n,f.c,l,l,!0):(r=i(c.a,u.a)?Q(c):u,D(e,n,r=m(f.c.b,r),r.c,r.c,!1),r.b.i.c=!0,z(e,n))}else D(e,n,l.c,f,f,!0)}function W(e,t){var n=new le,r=d(e.b);r.a.b=4e150,r.a.a=t,r.b.a.b=-4e150,r.b.a.a=t,e.a=r.b.a,n.a=r,n.f=0,n.d=!1,n.c=!1,n.h=!0,n.b=!1,r=V(r=e.f,r.a,n),n.e=r}function G(e){this.a=new H,this.b=e,this.c=E}function V(e,t,n){for(;null!==(t=t.c).b&&!e.c(e.b,t.b,n););return e=new H(n,t.a,t),t.a.c=e,t.a=e}function H(e,t,n){this.b=e||null,this.a=t||this,this.c=n||this}function q(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function X(e,t){if(e.d!==t)for(;e.d!==t;)if(e.d<t)switch(e.d){case 0:Y(e,100151),e.u(null);break;case 1:Y(e,100152),e.t()}else switch(e.d){case 2:Y(e,100154),e.v();break;case 1:Y(e,100153),e.w()}}function Y(e,t){e.p&&e.p(t,e.c)}function K(e,t){this.b=e||this,this.d=t||this,this.a=null,this.c=!1}function Z(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Q(e){return e.b.e}function $(){this.c=new J,this.a=new K,this.b=new Z,this.d=new Z,this.b.b=this.d,this.d.b=this.b}function J(e,t){this.e=e||this,this.f=t||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function ee(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new re}function te(e,t){if(e.e){var n,r=e.b,a=++r.a;return 2*a>r.f&&(r.f*=2,r.c=ae(r.c,r.f+1)),0===r.b?n=a:(n=r.b,r.b=r.c[r.b]),r.e[n]=t,r.c[n]=a,r.d[a]=n,r.h&&ue(r,a),n}return r=e.a++,e.c[r]=t,-(r+1)}function ne(e){if(0===e.a)return oe(e.b);var t=e.c[e.d[e.a-1]];if(0!==e.b.a&&i(ie(e.b),t))return oe(e.b);for(;--e.a,0<e.a&&null===e.c[e.d[e.a-1]];);return t}function re(){this.d=ae([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function ae(e,t){for(var n=Array(t),r=0;r<e.length;r++)n[r]=e[r];for(;r<t;r++)n[r]=0;return n}function ie(e){return e.e[e.d[1]]}function oe(e){var t=e.d,n=e.e,r=e.c,a=t[1],i=n[a];return 0<e.a&&(t[1]=t[e.a],r[t[1]]=1,n[a]=null,r[a]=e.b,e.b=a,0<--e.a&&se(e,1)),i}function se(e,t){for(var n=e.d,r=e.e,a=e.c,o=t,s=n[o];;){var u=o<<1;u<e.a&&i(r[n[u+1]],r[n[u]])&&(u+=1);var l=n[u];if(u>e.a||i(r[s],r[l])){a[n[o]=s]=o;break}a[n[o]=l]=o,o=u}}function ue(e,t){for(var n=e.d,r=e.e,a=e.c,o=t,s=n[o];;){var u=o>>1,l=n[u];if(0==u||i(r[l],r[s])){a[n[o]=s]=o;break}a[n[o]=l]=o,o=u}}function le(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ce(e){return e.e.c.b}function fe(e){return e.e.a.b}(r=q.prototype).x=function(){X(this,0)},r.B=function(e,t){switch(e){case 100142:return;case 100140:switch(t){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=t)}break;case 100141:return void(this.m=!!t);default:return void Y(this,100900)}Y(this,100901)},r.y=function(e){switch(e){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Y(this,100900)}return!1},r.A=function(e,t,n){this.j[0]=e,this.j[1]=t,this.j[2]=n},r.z=function(e,t){var n=t||null;switch(e){case 100100:case 100106:this.h=n;break;case 100104:case 100110:this.l=n;break;case 100101:case 100107:this.k=n;break;case 100102:case 100108:this.i=n;break;case 100103:case 100109:this.p=n;break;case 100105:case 100111:this.o=n;break;case 100112:this.r=n;break;default:Y(this,100900)}},r.C=function(e,t){var n=!1,r=[0,0,0];X(this,2);for(var a=0;a<3;++a){var i=e[a];i<-1e150&&(i=-1e150,n=!0),1e150<i&&(i=1e150,n=!0),r[a]=i}n&&Y(this,100155),null===(n=this.q)?h(n=d(this.b),n.b):(v(n),n=n.e),n.a.d=t,n.a.g[0]=r[0],n.a.g[1]=r[1],n.a.g[2]=r[2],n.f=1,n.b.f=-1,this.q=n},r.u=function(e){X(this,0),this.d=1,this.b=new $,this.c=e},r.t=function(){X(this,1),this.d=2,this.q=null},r.v=function(){X(this,2),this.d=1},r.w=function(){X(this,1),this.d=0;var e,t,n=!1,r=[f=this.j[0],o=this.j[1],l=this.j[2]];if(0===f&&0===o&&0===l){for(var o=[-2e150,-2e150,-2e150],u=[2e150,2e150,2e150],l=[],c=[],f=(n=this.b.c).e;f!==n;f=f.e)for(var d=0;d<3;++d){var h=f.g[d];h<u[d]&&(u[d]=h,c[d]=f),h>o[d]&&(o[d]=h,l[d]=f)}if(f=0,o[1]-u[1]>o[0]-u[0]&&(f=1),o[2]-u[2]>o[f]-u[f]&&(f=2),u[f]>=o[f])r[0]=0,r[1]=0,r[2]=1;else{for(o=0,u=c[f],l=l[f],c=[0,0,0],u=[u.g[0]-l.g[0],u.g[1]-l.g[1],u.g[2]-l.g[2]],d=[0,0,0],f=n.e;f!==n;f=f.e)d[0]=f.g[0]-l.g[0],d[1]=f.g[1]-l.g[1],d[2]=f.g[2]-l.g[2],c[0]=u[1]*d[2]-u[2]*d[1],c[1]=u[2]*d[0]-u[0]*d[2],c[2]=u[0]*d[1]-u[1]*d[0],o<(h=c[0]*c[0]+c[1]*c[1]+c[2]*c[2])&&(o=h,r[0]=c[0],r[1]=c[1],r[2]=c[2]);o<=0&&(r[0]=r[1]=r[2]=0,r[_(u)]=1)}n=!0}for(c=_(r),f=this.b.c,o=(c+1)%3,l=(c+2)%3,c=0<r[c]?1:-1,r=f.e;r!==f;r=r.e)r.b=r.g[o],r.a=c*r.g[l];if(n){for(r=0,f=(n=this.b.a).b;f!==n;f=f.b)if(!((o=f.a).f<=0))for(;r+=(o.a.b-o.b.a.b)*(o.a.a+o.b.a.a),(o=o.e)!==f.a;);if(r<0)for(n=(r=this.b.c).e;n!==r;n=n.e)n.a=-n.a}for(this.n=!1,f=(r=this.b.b).h;f!==r;f=n)n=f.h,o=f.e,a(f.a,f.b.a)&&f.e.e!==f&&(j(this,o,f),p(f),o=(f=o).e),o.e===f&&(o!==f&&(o!==n&&o!==n.b||(n=n.h),p(o)),f!==n&&f!==n.b||(n=n.h),p(f));for(this.e=r=new ee,f=(n=this.b.c).e;f!==n;f=f.e)f.h=te(r,f);for(function(e){e.d=[];for(var t=0;t<e.a;t++)e.d[t]=t;e.d.sort(function(e){return function(t,n){return i(e[t],e[n])?1:-1}}(e.c)),e.e=!0,function(e){for(var t=e.a;1<=t;--t)se(e,t);e.h=!0}(e.b)}(r),this.f=new G(this),W(this,-4e150),W(this,4e150);null!==(r=ne(this.e));){for(;;){e:if(f=this.e,0===f.a)n=ie(f.b);else if(n=f.c[f.d[f.a-1]],0!==f.b.a&&(f=ie(f.b),i(f,n))){n=f;break e}if(null===n||!a(n,r))break;n=ne(this.e),j(this,r.c,n.c)}U(this,r)}for(this.a=this.f.a.a.b.a.a,r=0;null!==(n=this.f.a.a.b);)n.h||++r,T(n);for(this.f=null,(r=this.e).b=null,r.d=null,this.e=r.c=null,f=(r=this.b).a.b;f!==r.a;f=n)n=f.b,(f=f.a).e.e===f&&(C(f.c,f),p(f));if(!this.n){if(r=this.b,this.m)for(f=r.b.h;f!==r.b;f=n)n=f.h,f.b.d.c!==f.d.c?f.f=f.d.c?1:-1:p(f);else for(f=r.a.b;f!==r.a;f=n)if(n=f.b,f.c){for(f=f.a;i(f.b.a,f.a);f=f.c.b);for(;i(f.a,f.b.a);f=f.e);for(o=f.c.b,l=void 0;f.e!==o;)if(i(f.b.a,o.a)){for(;o.e!==f&&(i((t=o.e).b.a,t.a)||s(o.a,o.b.a,o.e.b.a)<=0);)o=(l=m(o.e,o)).b;o=o.c.b}else{for(;o.e!==f&&(i((e=f.c.b).a,e.b.a)||0<=s(f.b.a,f.a,f.c.b.a));)f=(l=m(f,f.c.b)).b;f=f.e}for(;o.e.e!==f;)o=(l=m(o.e,o)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(n=(r=this.b).a.b;n!==r.a;n=n.b)if(n.c){for(this.h&&this.h(2,this.c),f=n.a;this.k&&this.k(f.a.d,this.c),(f=f.e)!==n.a;);this.i&&this.i(this.c)}}else{for(r=this.b,n=!!this.l,f=!1,o=-1,l=r.a.d;l!==r.a;l=l.d)if(l.c)for(f||(this.h&&this.h(4,this.c),f=!0),c=l.a;n&&o!==(u=c.b.d.c?0:1)&&(o=u,this.l&&this.l(!!o,this.c)),this.k&&this.k(c.a.d,this.c),(c=c.e)!==l.a;);f&&this.i&&this.i(this.c)}if(this.r){for(f=(r=this.b).a.b;f!==r.a;f=n)if(n=f.b,!f.c){for(l=(o=f.a).e,c=void 0;l=(c=l).e,(c.d=null)===c.b.d&&(c.c===c?k(c.a,null):(c.a.c=c.c,y(c,Q(c))),(u=c.b).c===u?k(u.a,null):(u.a.c=u.c,y(u,Q(u))),w(c)),c!==o;);o=f.d,((f=f.b).d=o).b=f}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:q,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},q.prototype.gluDeleteTess=q.prototype.x,q.prototype.gluTessProperty=q.prototype.B,q.prototype.gluGetTessProperty=q.prototype.y,q.prototype.gluTessNormal=q.prototype.A,q.prototype.gluTessCallback=q.prototype.z,q.prototype.gluTessVertex=q.prototype.C,q.prototype.gluTessBeginPolygon=q.prototype.u,q.prototype.gluTessBeginContour=q.prototype.t,q.prototype.gluTessEndContour=q.prototype.v,q.prototype.gluTessEndPolygon=q.prototype.w,void 0!==t&&(t.exports=this.libtess)},{}],235:[function(e,t,n){"use strict";function r(e,t,n,r){for(var a=e[t++],i=1<<a,o=1+i,s=1+o,u=a+1,l=(1<<u)-1,c=0,f=0,d=0,h=e[t++],p=new Int32Array(4096),v=null;;){for(;c<16&&0!==h;)f|=e[t++]<<c,c+=8,1===h?h=e[t++]:--h;if(c<u)break;var m=f&l;if(f>>=u,c-=u,m!=i){if(m==o)break;for(var g=m<s?m:v,y=0,b=g;i<b;)b=p[b]>>8,++y;var x=b;if(r<d+y+(g!==m?1:0))return void console.log("Warning, gif stream longer than expected.");n[d++]=x;var w=d+=y;for(g!==m&&(n[d++]=x),b=g;y--;)b=p[b],n[--w]=255&b,b>>=8;null!==v&&s<4096&&(p[s++]=v<<8|x,l+1<=s&&u<12&&(++u,l=l<<1|1)),v=m}else s=1+o,l=(1<<(u=a+1))-1,v=null}return d!==r&&console.log("Warning, gif stream shorter than expected."),n}try{n.GifWriter=function(e,t,n,r){var a=0,i=void 0===(r=void 0===r?{}:r).loop?null:r.loop,o=void 0===r.palette?null:r.palette;if(t<=0||n<=0||65535<t||65535<n)throw new Error("Width/Height invalid.");function s(e){var t=e.length;if(t<2||256<t||t&t-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return t}e[a++]=71,e[a++]=73,e[a++]=70,e[a++]=56,e[a++]=57,e[a++]=97;var u=0,l=0;if(null!==o){for(var c=s(o);c>>=1;)++u;if(c=1<<u,--u,void 0!==r.background){if(c<=(l=r.background))throw new Error("Background index out of range.");if(0===l)throw new Error("Background index explicitly passed as 0.")}}if(e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&n,e[a++]=n>>8&255,e[a++]=(null!==o?128:0)|u,e[a++]=l,e[a++]=0,null!==o)for(var f=0,d=o.length;f<d;++f){var h=o[f];e[a++]=h>>16&255,e[a++]=h>>8&255,e[a++]=255&h}if(null!==i){if(i<0||65535<i)throw new Error("Loop count invalid.");e[a++]=33,e[a++]=255,e[a++]=11,e[a++]=78,e[a++]=69,e[a++]=84,e[a++]=83,e[a++]=67,e[a++]=65,e[a++]=80,e[a++]=69,e[a++]=50,e[a++]=46,e[a++]=48,e[a++]=3,e[a++]=1,e[a++]=255&i,e[a++]=i>>8&255,e[a++]=0}var p=!1;this.addFrame=function(t,n,r,i,u,l){if(!0===p&&(--a,p=!1),l=void 0===l?{}:l,t<0||n<0||65535<t||65535<n)throw new Error("x/y invalid.");if(r<=0||i<=0||65535<r||65535<i)throw new Error("Width/Height invalid.");if(u.length<r*i)throw new Error("Not enough pixels for the frame size.");var c=!0,f=l.palette;if(null==f&&(c=!1,f=o),null==f)throw new Error("Must supply either a local or global palette.");for(var d=s(f),h=0;d>>=1;)++h;d=1<<h;var v=void 0===l.delay?0:l.delay,m=void 0===l.disposal?0:l.disposal;if(m<0||3<m)throw new Error("Disposal out of range.");var g=!1,y=0;if(void 0!==l.transparent&&null!==l.transparent&&(g=!0,(y=l.transparent)<0||d<=y))throw new Error("Transparent color index.");if(0===m&&!g&&0===v||(e[a++]=33,e[a++]=249,e[a++]=4,e[a++]=m<<2|(!0===g?1:0),e[a++]=255&v,e[a++]=v>>8&255,e[a++]=y,e[a++]=0),e[a++]=44,e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&n,e[a++]=n>>8&255,e[a++]=255&r,e[a++]=r>>8&255,e[a++]=255&i,e[a++]=i>>8&255,e[a++]=!0===c?128|h-1:0,!0===c)for(var b=0,x=f.length;b<x;++b){var w=f[b];e[a++]=w>>16&255,e[a++]=w>>8&255,e[a++]=255&w}return a=function(e,t,n,r){e[t++]=n;var a=t++,i=1<<n,o=i-1,s=1+i,u=1+s,l=n+1,c=0,f=0;function d(n){for(;n<=c;)e[t++]=255&f,f>>=8,c-=8,t===a+256&&(e[a]=255,a=t++)}function h(e){f|=e<<c,c+=l,d(8)}var p=r[0]&o,v={};h(i);for(var m=1,g=r.length;m<g;++m){var y=r[m]&o,b=p<<8|y,x=v[b];if(void 0===x){for(f|=p<<c,c+=l;8<=c;)e[t++]=255&f,f>>=8,c-=8,t===a+256&&(e[a]=255,a=t++);4096===u?(h(i),u=1+s,l=n+1,v={}):(1<<l<=u&&++l,v[b]=u++),p=y}else p=x}return h(p),h(s),d(1),a+1===t?e[a]=0:(e[a]=t-a-1,e[t++]=0),t}(e,a,h<2?2:h,u)},this.end=function(){return!1===p&&(e[a++]=59,p=!0),a},this.getOutputBuffer=function(){return e},this.setOutputBuffer=function(t){e=t},this.getOutputBufferPosition=function(){return a},this.setOutputBufferPosition=function(e){a=e}},n.GifReader=function(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,s=1<<1+(7&i);e[t++],e[t++];var u=null,l=null;o&&(u=t,t+=3*(l=s));var c=!0,f=[],d=0,h=null,p=0,v=null;for(this.width=n,this.height=a;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!(0<=(T=e[t++])))throw Error("Invalid block size");if(0===T)break;t+=T}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var m=e[t++];d=e[t++]|e[t++]<<8,h=e[t++],0==(1&m)&&(h=null),p=m>>2&7,t++;break;case 254:for(;;){if(!(0<=(T=e[t++])))throw Error("Invalid block size");if(0===T)break;t+=T}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,w=e[t++],k=w>>6&1,S=u,_=l,C=!1;w>>7&&(C=!0,S=t,t+=3*(_=1<<1+(7&w)));var E=t;for(t++;;){var T;if(!(0<=(T=e[t++])))throw Error("Invalid block size");if(0===T)break;t+=T}f.push({x:g,y:y,width:b,height:x,has_local_palette:C,palette_offset:S,palette_size:_,data_offset:E,data_length:t-E,transparent_index:h,interlaced:!!k,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return v},this.frameInfo=function(e){if(e<0||e>=f.length)throw new Error("Frame index out of range.");return f[e]},this.decodeAndBlitFrameBGRA=function(t,a){var i=this.frameInfo(t),o=i.width*i.height,s=new Uint8Array(o);r(e,i.data_offset,s,o);var u=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,f=n-c,d=c,h=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),v=h,m=4*f;!0===i.interlaced&&(m+=4*n*7);for(var g=8,y=0,b=s.length;y<b;++y){var x=s[y];if(0===d&&(d=c,p<=(v+=m)&&(m=4*f+4*n*(g-1),v=h+(c+f)*(g<<1),g>>=1)),x===l)v+=4;else{var w=e[u+3*x],k=e[u+3*x+1],S=e[u+3*x+2];a[v++]=S,a[v++]=k,a[v++]=w,a[v++]=255}--d}},this.decodeAndBlitFrameRGBA=function(t,a){var i=this.frameInfo(t),o=i.width*i.height,s=new Uint8Array(o);r(e,i.data_offset,s,o);var u=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,f=n-c,d=c,h=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),v=h,m=4*f;!0===i.interlaced&&(m+=4*n*7);for(var g=8,y=0,b=s.length;y<b;++y){var x=s[y];if(0===d&&(d=c,p<=(v+=m)&&(m=4*f+4*n*(g-1),v=h+(c+f)*(g<<1),g>>=1)),x===l)v+=4;else{var w=e[u+3*x],k=e[u+3*x+1],S=e[u+3*x+2];a[v++]=w,a[v++]=k,a[v++]=S,a[v++]=255}--d}}}}catch(e){}},{}],236:[function(e,t,n){(function(r){!function(t){"use strict";function n(e){if(null==this)throw TypeError();var t=String(this),n=t.length,r=e?Number(e):0;if(r!=r&&(r=0),!(r<0||n<=r)){var a,i=t.charCodeAt(r);return 55296<=i&&i<=56319&&r+1<n&&56320<=(a=t.charCodeAt(r+1))&&a<=57343?1024*(i-55296)+a-56320+65536:i}}var a;function i(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function o(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new i,this.dtree=new i}String.prototype.codePointAt||((a=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}())?a(String.prototype,"codePointAt",{value:n,configurable:!0,writable:!0}):String.prototype.codePointAt=n);var s=new i,u=new i,l=new Uint8Array(30),c=new Uint16Array(30),f=new Uint8Array(30),d=new Uint16Array(30),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),p=new i,v=new Uint8Array(320);function m(e,t,n,r){var a,i;for(a=0;a<n;++a)e[a]=0;for(a=0;a<30-n;++a)e[a+n]=a/n|0;for(i=r,a=0;a<30;++a)t[a]=i,i+=1<<e[a]}var g=new Uint16Array(16);function y(e,t,n,r){var a,i;for(a=0;a<16;++a)e.table[a]=0;for(a=0;a<r;++a)e.table[t[n+a]]++;for(a=i=e.table[0]=0;a<16;++a)g[a]=i,i+=e.table[a];for(a=0;a<r;++a)t[n+a]&&(e.trans[g[t[n+a]]++]=a)}function b(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function x(e,t,n){if(!t)return n;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,r+n}function w(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;for(var n=0,r=0,a=0,i=e.tag;r=2*r+(1&i),i>>>=1,++a,n+=t.table[a],0<=(r-=t.table[a]););return e.tag=i,e.bitcount-=a,t.trans[n+r]}function k(e,t,n){var r,a,i,o,s,u;for(r=x(e,5,257),a=x(e,5,1),i=x(e,4,4),o=0;o<19;++o)v[o]=0;for(o=0;o<i;++o){var l=x(e,3,0);v[h[o]]=l}for(y(p,v,0,19),s=0;s<r+a;){var c=w(e,p);switch(c){case 16:var f=v[s-1];for(u=x(e,2,3);u;--u)v[s++]=f;break;case 17:for(u=x(e,3,3);u;--u)v[s++]=0;break;case 18:for(u=x(e,7,11);u;--u)v[s++]=0;break;default:v[s++]=c}}y(t,v,0,r),y(n,v,r,a)}function S(e,t,n){for(;;){var r,a,i,o,s=w(e,t);if(256===s)return 0;if(s<256)e.dest[e.destLen++]=s;else for(r=x(e,l[s-=257],c[s]),a=w(e,n),o=i=e.destLen-x(e,f[a],d[a]);o<i+r;++o)e.dest[e.destLen++]=e.dest[o]}}function _(e){for(var t,n;8<e.bitcount;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}function C(e,t,n,r,a){return Math.pow(1-a,3)*e+3*Math.pow(1-a,2)*a*t+3*(1-a)*Math.pow(a,2)*n+Math.pow(a,3)*r}function E(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function T(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function I(e){throw new Error(e)}function A(e,t){e||I(t)}!function(e,t){var n;for(n=0;n<7;++n)e.table[n]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,n=0;n<24;++n)e.trans[n]=256+n;for(n=0;n<144;++n)e.trans[24+n]=n;for(n=0;n<8;++n)e.trans[168+n]=280+n;for(n=0;n<112;++n)e.trans[176+n]=144+n;for(n=0;n<5;++n)t.table[n]=0;for(t.table[5]=32,n=0;n<32;++n)t.trans[n]=n}(s,u),m(l,c,4,3),m(f,d,2,1),l[28]=0,c[28]=258,E.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},E.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},E.prototype.addX=function(e){this.addPoint(e,null)},E.prototype.addY=function(e){this.addPoint(null,e)},E.prototype.addBezier=function(e,t,n,r,a,i,o,s){var u=[e,t],l=[n,r],c=[a,i],f=[o,s];this.addPoint(e,t),this.addPoint(o,s);for(var d=0;d<=1;d++){var h=6*u[d]-12*l[d]+6*c[d],p=-3*u[d]+9*l[d]-9*c[d]+3*f[d],v=3*l[d]-3*u[d];if(0!=p){var m=Math.pow(h,2)-4*v*p;if(!(m<0)){var g=(-h+Math.sqrt(m))/(2*p);0<g&&g<1&&(0===d&&this.addX(C(u[d],l[d],c[d],f[d],g)),1===d&&this.addY(C(u[d],l[d],c[d],f[d],g)));var y=(-h-Math.sqrt(m))/(2*p);0<y&&y<1&&(0===d&&this.addX(C(u[d],l[d],c[d],f[d],y)),1===d&&this.addY(C(u[d],l[d],c[d],f[d],y)))}}else{if(0==h)continue;var b=-v/h;0<b&&b<1&&(0===d&&this.addX(C(u[d],l[d],c[d],f[d],b)),1===d&&this.addY(C(u[d],l[d],c[d],f[d],b)))}}},E.prototype.addQuad=function(e,t,n,r,a,i){var o=e+2/3*(n-e),s=t+2/3*(r-t),u=o+1/3*(a-e),l=s+1/3*(i-t);this.addBezier(e,t,o,s,u,l,a,i)},T.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},T.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},T.prototype.curveTo=T.prototype.bezierCurveTo=function(e,t,n,r,a,i){this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:r,x:a,y:i})},T.prototype.quadTo=T.prototype.quadraticCurveTo=function(e,t,n,r){this.commands.push({type:"Q",x1:e,y1:t,x:n,y:r})},T.prototype.close=T.prototype.closePath=function(){this.commands.push({type:"Z"})},T.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof E){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},T.prototype.getBoundingBox=function(){for(var e=new E,t=0,n=0,r=0,a=0,i=0;i<this.commands.length;i++){var o=this.commands[i];switch(o.type){case"M":e.addPoint(o.x,o.y),t=r=o.x,n=a=o.y;break;case"L":e.addPoint(o.x,o.y),r=o.x,a=o.y;break;case"Q":e.addQuad(r,a,o.x1,o.y1,o.x,o.y),r=o.x,a=o.y;break;case"C":e.addBezier(r,a,o.x1,o.y1,o.x2,o.y2,o.x,o.y),r=o.x,a=o.y;break;case"Z":r=t,a=n;break;default:throw new Error("Unexpected path command "+o.type)}}return e.isEmpty()&&e.addPoint(0,0),e},T.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var n=this.commands[t];"M"===n.type?e.moveTo(n.x,n.y):"L"===n.type?e.lineTo(n.x,n.y):"C"===n.type?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):"Z"===n.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},T.prototype.toPathData=function(e){function t(){for(var t,n=arguments,r="",a=0;a<arguments.length;a+=1){var i=n[a];0<=i&&0<a&&(r+=" "),r+=(t=i,Math.round(t)===t?""+Math.round(t):t.toFixed(e))}return r}e=void 0!==e?e:2;for(var n="",r=0;r<this.commands.length;r+=1){var a=this.commands[r];"M"===a.type?n+="M"+t(a.x,a.y):"L"===a.type?n+="L"+t(a.x,a.y):"C"===a.type?n+="C"+t(a.x1,a.y1,a.x2,a.y2,a.x,a.y):"Q"===a.type?n+="Q"+t(a.x1,a.y1,a.x,a.y):"Z"===a.type&&(n+="Z")}return n},T.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+"/>"},T.prototype.toDOMElement=function(e){var t=this.toPathData(e),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",t),n};var N={fail:I,argument:A,assert:A},R={},M={},O={};function D(e){return function(){return e}}M.BYTE=function(e){return N.argument(0<=e&&e<=255,"Byte value should be between 0 and 255."),[e]},O.BYTE=D(1),M.CHAR=function(e){return[e.charCodeAt(0)]},O.CHAR=D(1),M.CHARARRAY=function(e){for(var t=[],n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t},O.CHARARRAY=function(e){return e.length},M.USHORT=function(e){return[e>>8&255,255&e]},O.USHORT=D(2),M.SHORT=function(e){return 32768<=e&&(e=-(65536-e)),[e>>8&255,255&e]},O.SHORT=D(2),M.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},O.UINT24=D(3),M.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},O.ULONG=D(4),M.LONG=function(e){return 2147483648<=e&&(e=-(4294967296-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},O.LONG=D(4),M.FIXED=M.ULONG,O.FIXED=O.ULONG,M.FWORD=M.SHORT,O.FWORD=O.SHORT,M.UFWORD=M.USHORT,O.UFWORD=O.USHORT,M.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},O.LONGDATETIME=D(8),M.TAG=function(e){return N.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},O.TAG=D(4),M.Card8=M.BYTE,O.Card8=O.BYTE,M.Card16=M.USHORT,O.Card16=O.USHORT,M.OffSize=M.BYTE,O.OffSize=O.BYTE,M.SID=M.USHORT,O.SID=O.USHORT,M.NUMBER=function(e){return-107<=e&&e<=107?[e+139]:108<=e&&e<=1131?[247+((e-=108)>>8),255&e]:-1131<=e&&e<=-108?[251+((e=-e-108)>>8),255&e]:-32768<=e&&e<=32767?M.NUMBER16(e):M.NUMBER32(e)},O.NUMBER=function(e){return M.NUMBER(e).length},M.NUMBER16=function(e){return[28,e>>8&255,255&e]},O.NUMBER16=D(3),M.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},O.NUMBER32=D(5),M.REAL=function(e){var t=e.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(n){var r=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));t=(Math.round(e*r)/r).toString()}for(var a="",i=0,o=t.length;i<o;i+=1){var s=t[i];a+="e"===s?"-"===t[++i]?"c":"b":"."===s?"a":"-"===s?"e":s}for(var u=[30],l=0,c=(a+=1&a.length?"f":"ff").length;l<c;l+=2)u.push(parseInt(a.substr(l,2),16));return u},O.REAL=function(e){return M.REAL(e).length},M.NAME=M.CHARARRAY,O.NAME=O.CHARARRAY,M.STRING=M.CHARARRAY,O.STRING=O.CHARARRAY,R.UTF8=function(e,t,n){for(var r=[],a=n,i=0;i<a;i++,t+=1)r[i]=e.getUint8(t);return String.fromCharCode.apply(null,r)},R.UTF16=function(e,t,n){for(var r=[],a=n/2,i=0;i<a;i++,t+=2)r[i]=e.getUint16(t);return String.fromCharCode.apply(null,r)},M.UTF16=function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t[t.length]=r>>8&255,t[t.length]=255&r}return t},O.UTF16=function(e){return 2*e.length};var L={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"};R.MACSTRING=function(e,t,n,r){var a=L[r];if(void 0!==a){for(var i="",o=0;o<n;o++){var s=e.getUint8(t+o);i+=s<=127?String.fromCharCode(s):a[127&s]}return i}};var j,P="function"==typeof WeakMap&&new WeakMap;function F(e){return-128<=e&&e<=127}function B(e,t,n){for(var r=0,a=e.length;t<a&&r<64&&0===e[t];)++t,++r;return n.push(128|r-1),t}function z(e,t,n){for(var r=0,a=e.length,i=t;i<a&&r<64;){var o=e[i];if(!F(o))break;if(0===o&&i+1<a&&0===e[i+1])break;++i,++r}n.push(r-1);for(var s=t;s<i;++s)n.push(e[s]+256&255);return i}function U(e,t,n){for(var r=0,a=e.length,i=t;i<a&&r<64;){var o=e[i];if(0===o)break;if(F(o)&&i+1<a&&F(e[i+1]))break;++i,++r}n.push(64|r-1);for(var s=t;s<i;++s){var u=e[s];n.push(u+65536>>8&255,u+256&255)}return i}M.MACSTRING=function(e,t){var n=function(e){if(!j)for(var t in j={},L)j[t]=new String(t);var n=j[e];if(void 0!==n){if(P){var r=P.get(n);if(void 0!==r)return r}var a=L[e];if(void 0!==a){for(var i={},o=0;o<a.length;o++)i[a.charCodeAt(o)]=o+128;return P&&P.set(n,i),i}}}(t);if(void 0!==n){for(var r=[],a=0;a<e.length;a++){var i=e.charCodeAt(a);if(128<=i&&void 0===(i=n[i]))return;r[a]=i}return r}},O.MACSTRING=function(e,t){var n=M.MACSTRING(e,t);return void 0!==n?n.length:0},M.VARDELTAS=function(e){for(var t=0,n=[];t<e.length;){var r=e[t];t=0===r?B(e,t,n):-128<=r&&r<=127?z(e,t,n):U(e,t,n)}return n},M.INDEX=function(e){for(var t=1,n=[t],r=[],a=0;a<e.length;a+=1){var i=M.OBJECT(e[a]);Array.prototype.push.apply(r,i),t+=i.length,n.push(t)}if(0===r.length)return[0,0];for(var o=[],s=1+Math.floor(Math.log(t)/Math.log(2))/8|0,u=[void 0,M.BYTE,M.USHORT,M.UINT24,M.ULONG][s],l=0;l<n.length;l+=1){var c=u(n[l]);Array.prototype.push.apply(o,c)}return Array.prototype.concat(M.Card16(e.length),M.OffSize(s),o,r)},O.INDEX=function(e){return M.INDEX(e).length},M.DICT=function(e){for(var t=[],n=Object.keys(e),r=n.length,a=0;a<r;a+=1){var i=parseInt(n[a],0),o=e[i];t=(t=t.concat(M.OPERAND(o.value,o.type))).concat(M.OPERATOR(i))}return t},O.DICT=function(e){return M.DICT(e).length},M.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},M.OPERAND=function(e,t){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r+=1)N.argument(e.length===t.length,"Not enough arguments given for type"+t),n=n.concat(M.OPERAND(e[r],t[r]));else if("SID"===t)n=n.concat(M.NUMBER(e));else if("offset"===t)n=n.concat(M.NUMBER32(e));else if("number"===t)n=n.concat(M.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);n=n.concat(M.REAL(e))}return n},M.OP=M.BYTE,O.OP=O.BYTE;var W="function"==typeof WeakMap&&new WeakMap;function G(e,t,n){for(var r=0;r<t.length;r+=1){var a=t[r];this[a.name]=a.value}if(this.tableName=e,this.fields=t,n)for(var i=Object.keys(n),o=0;o<i.length;o+=1){var s=i[o],u=n[s];void 0!==this[s]&&(this[s]=u)}}function V(e,t,n){void 0===n&&(n=t.length);var r=new Array(t.length+1);r[0]={name:e+"Count",type:"USHORT",value:n};for(var a=0;a<t.length;a++)r[a+1]={name:e+a,type:"USHORT",value:t[a]};return r}function H(e,t,n){var r=t.length,a=new Array(r+1);a[0]={name:e+"Count",type:"USHORT",value:r};for(var i=0;i<r;i++)a[i+1]={name:e+i,type:"TABLE",value:n(t[i],i)};return a}function q(e,t,n){var r=t.length,a=[];a[0]={name:e+"Count",type:"USHORT",value:r};for(var i=0;i<r;i++)a=a.concat(n(t[i],i));return a}function X(e){1===e.format?G.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(V("glyph",e.glyphs))):N.assert(!1,"Can't create coverage table format 2 yet.")}function Y(e){G.call(this,"scriptListTable",q("scriptRecord",e,(function(e,t){var n=e.script,r=n.defaultLangSys;return N.assert(!!r,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new G("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new G("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(V("featureIndex",r.featureIndexes)))}].concat(q("langSys",n.langSysRecords,(function(e,t){var n=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new G("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(V("featureIndex",n.featureIndexes)))}]}))))}]})))}function K(e){G.call(this,"featureListTable",q("featureRecord",e,(function(e,t){var n=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new G("featureTable",[{name:"featureParams",type:"USHORT",value:n.featureParams}].concat(V("lookupListIndex",n.lookupListIndexes)))}]})))}function Z(e,t){G.call(this,"lookupListTable",H("lookup",e,(function(e){var n=t[e.lookupType];return N.assert(!!n,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new G("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(H("subtable",e.subtables,n)))})))}M.CHARSTRING=function(e){if(W){var t=W.get(e);if(void 0!==t)return t}for(var n=[],r=e.length,a=0;a<r;a+=1){var i=e[a];n=n.concat(M[i.type](i.value))}return W&&W.set(e,n),n},O.CHARSTRING=function(e){return M.CHARSTRING(e).length},M.OBJECT=function(e){var t=M[e.type];return N.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},O.OBJECT=function(e){var t=O[e.type];return N.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},M.TABLE=function(e){for(var t=[],n=e.fields.length,r=[],a=[],i=0;i<n;i+=1){var o=e.fields[i],s=M[o.type];N.argument(void 0!==s,"No encoding function for field type "+o.type+" ("+o.name+")");var u=e[o.name];void 0===u&&(u=o.value);var l=s(u);"TABLE"===o.type?(a.push(t.length),t=t.concat([0,0]),r.push(l)):t=t.concat(l)}for(var c=0;c<r.length;c+=1){var f=a[c],d=t.length;N.argument(d<65536,"Table "+e.tableName+" too big."),t[f]=d>>8,t[f+1]=255&d,t=t.concat(r[c])}return t},O.TABLE=function(e){for(var t=0,n=e.fields.length,r=0;r<n;r+=1){var a=e.fields[r],i=O[a.type];N.argument(void 0!==i,"No sizeOf function for field type "+a.type+" ("+a.name+")");var o=e[a.name];void 0===o&&(o=a.value),t+=i(o),"TABLE"===a.type&&(t+=2)}return t},M.RECORD=M.TABLE,O.RECORD=O.TABLE,M.LITERAL=function(e){return e},O.LITERAL=function(e){return e.length},G.prototype.encode=function(){return M.TABLE(this)},G.prototype.sizeOf=function(){return O.TABLE(this)};var Q={Table:G,Record:G,Coverage:(X.prototype=Object.create(G.prototype)).constructor=X,ScriptList:(Y.prototype=Object.create(G.prototype)).constructor=Y,FeatureList:(K.prototype=Object.create(G.prototype)).constructor=K,LookupList:(Z.prototype=Object.create(G.prototype)).constructor=Z,ushortList:V,tableList:H,recordList:q};function $(e,t){return e.getUint8(t)}function J(e,t){return e.getUint16(t,!1)}function ee(e,t){return e.getUint32(t,!1)}function te(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var ne={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function re(e,t){this.data=e,this.offset=t,this.relativeOffset=0}re.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},re.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},re.prototype.parseCard8=re.prototype.parseByte,re.prototype.parseCard16=re.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},re.prototype.parseSID=re.prototype.parseUShort,re.prototype.parseOffset16=re.prototype.parseUShort,re.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},re.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},re.prototype.parseOffset32=re.prototype.parseULong=function(){var e=ee(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},re.prototype.parseFixed=function(){var e=te(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},re.prototype.parseString=function(e){var t=this.data,n=this.offset+this.relativeOffset,r="";this.relativeOffset+=e;for(var a=0;a<e;a++)r+=String.fromCharCode(t.getUint8(n+a));return r},re.prototype.parseTag=function(){return this.parseString(4)},re.prototype.parseLongDateTime=function(){var e=ee(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},re.prototype.parseVersion=function(e){var t=J(this.data,this.offset+this.relativeOffset),n=J(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+n/e/10},re.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=ne[e]*t},re.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=n.getUint32(r),r+=4;return this.relativeOffset+=4*e,t},re.prototype.parseOffset16List=re.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=n.getUint16(r),r+=2;return this.relativeOffset+=2*e,t},re.prototype.parseShortList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=n.getInt16(r),r+=2;return this.relativeOffset+=2*e,t},re.prototype.parseByteList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=n.getUint8(r++);return this.relativeOffset+=e,t},re.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},re.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},re.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=Object.keys(t),a=0;a<e;a++){for(var i={},o=0;o<r.length;o++){var s=r[o],u=t[s];i[s]=u.call(this)}n[a]=i}return n},re.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=Object.keys(t),a=0;a<e;a++){for(var i={},o=0;o<r.length;o++){var s=r[o],u=t[s];i[s]=u.call(this)}n[a]=i}return n},re.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r],i=e[a];n[a]=i.call(this)}return n},re.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},re.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),n=new Array(t),r=0;r<t;r++)n[r]=this.parseValueRecord(e);return n},re.prototype.parsePointer=function(e){var t=this.parseOffset16();if(0<t)return new re(this.data,this.offset+t).parseStruct(e)},re.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(0<t)return new re(this.data,this.offset+t).parseStruct(e)},re.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),n=t.length,r=this.relativeOffset,a=new Array(n),i=0;i<n;i++){var o=t[i];if(0!==o)if(this.relativeOffset=o,e){for(var s=this.parseOffset16List(),u=new Array(s.length),l=0;l<s.length;l++)this.relativeOffset=o+s[l],u[l]=e.call(this);a[i]=u}else a[i]=this.parseUShortList();else a[i]=void 0}return this.relativeOffset=r,a},re.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),n=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(n)};if(2!==t)throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.");for(var r=new Array(n),a=0;a<n;a++)r[a]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}},re.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:re.uShort,end:re.uShort,classId:re.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},re.list=function(e,t){return function(){return this.parseList(e,t)}},re.list32=function(e,t){return function(){return this.parseList32(e,t)}},re.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},re.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},re.pointer=function(e){return function(){return this.parsePointer(e)}},re.pointer32=function(e){return function(){return this.parsePointer32(e)}},re.tag=re.prototype.parseTag,re.byte=re.prototype.parseByte,re.uShort=re.offset16=re.prototype.parseUShort,re.uShortList=re.prototype.parseUShortList,re.uLong=re.offset32=re.prototype.parseULong,re.uLongList=re.prototype.parseULongList,re.struct=re.prototype.parseStruct,re.coverage=re.prototype.parseCoverage,re.classDef=re.prototype.parseClassDef;var ae={reserved:re.uShort,reqFeatureIndex:re.uShort,featureIndexes:re.uShortList};re.prototype.parseScriptList=function(){return this.parsePointer(re.recordList({tag:re.tag,script:re.pointer({defaultLangSys:re.pointer(ae),langSysRecords:re.recordList({tag:re.tag,langSys:re.pointer(ae)})})}))||[]},re.prototype.parseFeatureList=function(){return this.parsePointer(re.recordList({tag:re.tag,feature:re.pointer({featureParams:re.offset16,lookupListIndexes:re.uShortList})}))||[]},re.prototype.parseLookupList=function(e){return this.parsePointer(re.list(re.pointer((function(){var t=this.parseUShort();N.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var n=this.parseUShort(),r=16&n;return{lookupType:t,lookupFlag:n,subtables:this.parseList(re.pointer(e[t])),markFilteringSet:r?this.parseUShort():void 0}}))))||[]},re.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return N.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:re.offset32,featureTableSubstitutionOffset:re.offset32})}))||[]};var ie={getByte:$,getCard8:$,getUShort:J,getCard16:J,getShort:function(e,t){return e.getInt16(t,!1)},getULong:ee,getFixed:te,getTag:function(e,t){for(var n="",r=t;r<t+4;r+=1)n+=String.fromCharCode(e.getInt8(r));return n},getOffset:function(e,t,n){for(var r=0,a=0;a<n;a+=1)r<<=8,r+=e.getUint8(t+a);return r},getBytes:function(e,t,n){for(var r=[],a=t;a<n;a+=1)r.push(e.getUint8(a));return r},bytesToString:function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t},Parser:re},oe=function(e,t){var n={};n.version=ie.getUShort(e,t),N.argument(0===n.version,"cmap table version should be 0."),n.numTables=ie.getUShort(e,t+2);for(var r=-1,a=n.numTables-1;0<=a;--a){var i=ie.getUShort(e,t+4+8*a),o=ie.getUShort(e,t+4+8*a+2);if(3===i&&(0===o||1===o||10===o)||0===i&&(0===o||1===o||2===o||3===o||4===o)){r=ie.getULong(e,t+4+8*a+4);break}}if(-1===r)throw new Error("No valid cmap sub-tables found.");var s=new ie.Parser(e,t+r);if(n.format=s.parseUShort(),12===n.format)!function(e,t){var n;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=n=t.parseULong(),e.glyphIndexMap={};for(var r=0;r<n;r+=1)for(var a=t.parseULong(),i=t.parseULong(),o=t.parseULong(),s=a;s<=i;s+=1)e.glyphIndexMap[s]=o,o++}(n,s);else{if(4!==n.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");!function(e,t,n,r,a){var i;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=i=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var o=new ie.Parser(n,r+a+14),s=new ie.Parser(n,r+a+16+2*i),u=new ie.Parser(n,r+a+16+4*i),l=new ie.Parser(n,r+a+16+6*i),c=r+a+16+8*i,f=0;f<i-1;f+=1)for(var d=void 0,h=o.parseUShort(),p=s.parseUShort(),v=u.parseShort(),m=l.parseUShort(),g=p;g<=h;g+=1)0!==m?(c=l.offset+l.relativeOffset-2,c+=m,c+=2*(g-p),0!==(d=ie.getUShort(n,c))&&(d=d+v&65535)):d=g+v&65535,e.glyphIndexMap[g]=d}(n,s,e,t,r)}return n},se=function(e){var t,n=!0;for(t=e.length-1;0<t;--t)if(65535<e.get(t).unicode){console.log("Adding CMAP format 12 (needed!)"),n=!1;break}var r=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:n?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:n?12:20}];n||(r=r.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),r=r.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var a,i,o,s=new Q.Table("cmap",r);for(s.segments=[],t=0;t<e.length;t+=1){for(var u=e.get(t),l=0;l<u.unicodes.length;l+=1)a=s,i=u.unicodes[l],o=t,a.segments.push({end:i,start:i,delta:-(i-o),offset:0,glyphIndex:o});s.segments=s.segments.sort((function(e,t){return e.start-t.start}))}s.segments.push({end:65535,start:65535,delta:1,offset:0});var c=s.segments.length,f=0,d=[],h=[],p=[],v=[],m=[],g=[];for(t=0;t<c;t+=1){var y=s.segments[t];y.end<=65535&&y.start<=65535?(d=d.concat({name:"end_"+t,type:"USHORT",value:y.end}),h=h.concat({name:"start_"+t,type:"USHORT",value:y.start}),p=p.concat({name:"idDelta_"+t,type:"SHORT",value:y.delta}),v=v.concat({name:"idRangeOffset_"+t,type:"USHORT",value:y.offset}),void 0!==y.glyphId&&(m=m.concat({name:"glyph_"+t,type:"USHORT",value:y.glyphId}))):f+=1,n||void 0===y.glyphIndex||(g=(g=(g=g.concat({name:"cmap12Start_"+t,type:"ULONG",value:y.start})).concat({name:"cmap12End_"+t,type:"ULONG",value:y.end})).concat({name:"cmap12Glyph_"+t,type:"ULONG",value:y.glyphIndex}))}if(s.segCountX2=2*(c-f),s.searchRange=2*Math.pow(2,Math.floor(Math.log(c-f)/Math.log(2))),s.entrySelector=Math.log(s.searchRange/2)/Math.log(2),s.rangeShift=s.segCountX2-s.searchRange,s.fields=s.fields.concat(d),s.fields.push({name:"reservedPad",type:"USHORT",value:0}),s.fields=s.fields.concat(h),s.fields=s.fields.concat(p),s.fields=s.fields.concat(v),s.fields=s.fields.concat(m),s.cmap4Length=14+2*d.length+2+2*h.length+2*p.length+2*v.length+2*m.length,!n){var b=16+4*g.length;s.cmap12Offset=20+s.cmap4Length,s.fields=s.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:b},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:g.length/3}]),s.fields=s.fields.concat(g)}return s},ue=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],le=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ce=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],fe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function de(e){this.font=e}function he(e){this.cmap=e}function pe(e,t){this.encoding=e,this.charset=t}function ve(e){switch(e.version){case 1:this.names=fe.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<fe.length?this.names[t]=fe[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-fe.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var n=0;n<e.numberOfGlyphs;n++)this.names[n]=fe[n+e.glyphNameIndex[n]];break;default:this.names=[]}}de.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.font.glyphs;if(n)for(var r=0;r<n.length;r+=1)for(var a=n.get(r),i=0;i<a.unicodes.length;i+=1)if(a.unicodes[i]===t)return r;return null},he.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},pe.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.encoding[t];return this.charset.indexOf(n)},ve.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},ve.prototype.glyphIndexToName=function(e){return this.names[e]};var me=function(e,t,n,r,a){e.beginPath(),e.moveTo(t,n),e.lineTo(r,a),e.stroke()};function ge(e){this.bindConstructorValues(e)}function ye(e,t,n){Object.defineProperty(e,t,{get:function(){return e.path,e[n]},set:function(t){e[n]=t},enumerable:!0,configurable:!0})}function be(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var n=0;n<t.length;n++)this.glyphs[n]=t[n];this.length=t&&t.length||0}ge.prototype.bindConstructorValues=function(e){var t,n;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(t=e.path,n=t||new T,{configurable:!0,get:function(){return"function"==typeof n&&(n=n()),n},set:function(e){n=e}}))},ge.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},ge.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},ge.prototype.getPath=function(e,t,n,r,a){var i,o;e=void 0!==e?e:0,t=void 0!==t?t:0,n=void 0!==n?n:72;var s=(r=r||{}).xScale,u=r.yScale;if(r.hinting&&a&&a.hinting&&(o=this.path&&a.hinting.exec(this,n)),o)i=a.hinting.getCommands(o),e=Math.round(e),t=Math.round(t),s=u=1;else{i=this.path.commands;var l=1/this.path.unitsPerEm*n;void 0===s&&(s=l),void 0===u&&(u=l)}for(var c=new T,f=0;f<i.length;f+=1){var d=i[f];"M"===d.type?c.moveTo(e+d.x*s,t+-d.y*u):"L"===d.type?c.lineTo(e+d.x*s,t+-d.y*u):"Q"===d.type?c.quadraticCurveTo(e+d.x1*s,t+-d.y1*u,e+d.x*s,t+-d.y*u):"C"===d.type?c.curveTo(e+d.x1*s,t+-d.y1*u,e+d.x2*s,t+-d.y2*u,e+d.x*s,t+-d.y*u):"Z"===d.type&&c.closePath()}return c},ge.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],n=0;n<this.points.length;n+=1){var r=this.points[n];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return N.argument(0===t.length,"There are still points left in the current contour."),e},ge.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],n=[],r=0;r<e.length;r+=1){var a=e[r];"Z"!==a.type&&(t.push(a.x),n.push(a.y)),"Q"!==a.type&&"C"!==a.type||(t.push(a.x1),n.push(a.y1)),"C"===a.type&&(t.push(a.x2),n.push(a.y2))}var i={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(i.xMin)||(i.xMin=0),isFinite(i.xMax)||(i.xMax=this.advanceWidth),isFinite(i.yMin)||(i.yMin=0),isFinite(i.yMax)||(i.yMax=0),i.rightSideBearing=this.advanceWidth-i.leftSideBearing-(i.xMax-i.xMin),i},ge.prototype.draw=function(e,t,n,r,a){this.getPath(t,n,r,a).draw(e)},ge.prototype.drawPoints=function(e,t,n,r){function a(t,n,r,a){var i=2*Math.PI;e.beginPath();for(var o=0;o<t.length;o+=1)e.moveTo(n+t[o].x*a,r+t[o].y*a),e.arc(n+t[o].x*a,r+t[o].y*a,2,0,i,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:24;for(var i=1/this.path.unitsPerEm*r,o=[],s=[],u=this.path,l=0;l<u.commands.length;l+=1){var c=u.commands[l];void 0!==c.x&&o.push({x:c.x,y:-c.y}),void 0!==c.x1&&s.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&s.push({x:c.x2,y:-c.y2})}e.fillStyle="blue",a(o,t,n,i),e.fillStyle="red",a(s,t,n,i)},ge.prototype.drawMetrics=function(e,t,n,r){var a;t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:24,a=1/this.path.unitsPerEm*r,e.lineWidth=1,e.strokeStyle="black",me(e,t,-1e4,t,1e4),me(e,-1e4,n,1e4,n);var i=this.xMin||0,o=this.yMin||0,s=this.xMax||0,u=this.yMax||0,l=this.advanceWidth||0;e.strokeStyle="blue",me(e,t+i*a,-1e4,t+i*a,1e4),me(e,t+s*a,-1e4,t+s*a,1e4),me(e,-1e4,n+-o*a,1e4,n+-o*a),me(e,-1e4,n+-u*a,1e4,n+-u*a),e.strokeStyle="green",me(e,t+l*a,-1e4,t+l*a,1e4)},be.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},be.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var xe={GlyphSet:be,glyphLoader:function(e,t){return new ge({index:t,font:e})},ttfGlyphLoader:function(e,t,n,r,a,i){return function(){var o=new ge({index:t,font:e});return o.path=function(){n(o,r,a);var t=i(e.glyphs,o);return t.unitsPerEm=e.unitsPerEm,t},ye(o,"xMin","_xMin"),ye(o,"xMax","_xMax"),ye(o,"yMin","_yMin"),ye(o,"yMax","_yMax"),o}},cffGlyphLoader:function(e,t,n,r){return function(){var a=new ge({index:t,font:e});return a.path=function(){var t=n(e,a,r);return t.unitsPerEm=e.unitsPerEm,t},a}}};function we(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(!we(e[n],t[n]))return!1;return!0}return!1}function ke(e){return e.length<1240?107:e.length<33900?1131:32768}function Se(e,t,n){var r,a,i=[],o=[],s=ie.getCard16(e,t);if(0!==s){var u=ie.getByte(e,t+2);r=t+(s+1)*u+2;for(var l=t+3,c=0;c<s+1;c+=1)i.push(ie.getOffset(e,l,u)),l+=u;a=r+i[s]}else a=t+2;for(var f=0;f<i.length-1;f+=1){var d=ie.getBytes(e,r+i[f],r+i[f+1]);n&&(d=n(d)),o.push(d)}return{objects:o,startOffset:t,endOffset:a}}function _e(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var r=e.parseByte(),a=r>>4,i=15&r;if(15==a)break;if(t+=n[a],15==i)break;t+=n[i]}return parseFloat(t)}(e);if(32<=t&&t<=246)return t-139;if(247<=t&&t<=250)return 256*(t-247)+e.parseByte()+108;if(251<=t&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function Ce(e,t,n){t=void 0!==t?t:0;var r=new ie.Parser(e,t),a=[],i=[];for(n=void 0!==n?n:e.length;r.relativeOffset<n;){var o=r.parseByte();o<=21?(12===o&&(o=1200+r.parseByte()),a.push([o,i]),i=[]):i.push(_e(r,o))}return function(e){for(var t={},n=0;n<e.length;n+=1){var r,a=e[n][0],i=e[n][1];if(r=1===i.length?i[0]:i,t.hasOwnProperty(a)&&!isNaN(t[a]))throw new Error("Object "+t+" already has key "+a);t[a]=r}return t}(a)}function Ee(e,t){return t<=390?ue[t]:e[t-391]}function Te(e,t,n){for(var r,a={},i=0;i<t.length;i+=1){var o=t[i];if(Array.isArray(o.type)){var s=[];s.length=o.type.length;for(var u=0;u<o.type.length;u++)void 0===(r=void 0!==e[o.op]?e[o.op][u]:void 0)&&(r=void 0!==o.value&&void 0!==o.value[u]?o.value[u]:null),"SID"===o.type[u]&&(r=Ee(n,r)),s[u]=r;a[o.name]=s}else void 0===(r=e[o.op])&&(r=void 0!==o.value?o.value:null),"SID"===o.type&&(r=Ee(n,r)),a[o.name]=r}return a}var Ie=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Ae=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Ne(e,t,n,r){return Te(Ce(e,t,n),Ae,r)}function Re(e,t,n,r){for(var a,i,o=[],s=0;s<n.length;s+=1){var u=(i=r,Te(Ce(a=new DataView(new Uint8Array(n[s]).buffer),0,a.byteLength),Ie,i));u._subrs=[],u._subrsBias=0;var l=u.private[0],c=u.private[1];if(0!==l&&0!==c){var f=Ne(e,c+t,l,r);if(u._defaultWidthX=f.defaultWidthX,u._nominalWidthX=f.nominalWidthX,0!==f.subrs){var d=Se(e,c+f.subrs+t);u._subrs=d.objects,u._subrsBias=ke(u._subrs)}u._privateDict=f}o.push(u)}return o}function Me(e,t,n){var r,a,i,o,s,u,l,c,f=new T,d=[],h=0,p=!1,v=!1,m=0,g=0;if(e.isCIDFont){var y=e.tables.cff.topDict._fdSelect[t.index],b=e.tables.cff.topDict._fdArray[y];s=b._subrs,u=b._subrsBias,l=b._defaultWidthX,c=b._nominalWidthX}else s=e.tables.cff.topDict._subrs,u=e.tables.cff.topDict._subrsBias,l=e.tables.cff.topDict._defaultWidthX,c=e.tables.cff.topDict._nominalWidthX;var x=l;function w(e,t){v&&f.closePath(),f.moveTo(e,t),v=!0}function k(){d.length%2==0||p||(x=d.shift()+c),h+=d.length>>1,d.length=0,p=!0}return function n(l){for(var y,b,S,_,C,E,T,I,A,N,R,M,O=0;O<l.length;){var D=l[O];switch(O+=1,D){case 1:case 3:case 18:case 23:k();break;case 4:1<d.length&&!p&&(x=d.shift()+c,p=!0),g+=d.pop(),w(m,g);break;case 5:for(;0<d.length;)m+=d.shift(),g+=d.shift(),f.lineTo(m,g);break;case 6:for(;0<d.length&&(m+=d.shift(),f.lineTo(m,g),0!==d.length);)g+=d.shift(),f.lineTo(m,g);break;case 7:for(;0<d.length&&(g+=d.shift(),f.lineTo(m,g),0!==d.length);)m+=d.shift(),f.lineTo(m,g);break;case 8:for(;0<d.length;)r=m+d.shift(),a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),m=i+d.shift(),g=o+d.shift(),f.curveTo(r,a,i,o,m,g);break;case 10:C=d.pop()+u,(E=s[C])&&n(E);break;case 11:return;case 12:switch(D=l[O],O+=1,D){case 35:r=m+d.shift(),a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),T=i+d.shift(),I=o+d.shift(),A=T+d.shift(),N=I+d.shift(),R=A+d.shift(),M=N+d.shift(),m=R+d.shift(),g=M+d.shift(),d.shift(),f.curveTo(r,a,i,o,T,I),f.curveTo(A,N,R,M,m,g);break;case 34:r=m+d.shift(),a=g,i=r+d.shift(),o=a+d.shift(),T=i+d.shift(),I=o,A=T+d.shift(),N=o,R=A+d.shift(),M=g,m=R+d.shift(),f.curveTo(r,a,i,o,T,I),f.curveTo(A,N,R,M,m,g);break;case 36:r=m+d.shift(),a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),T=i+d.shift(),I=o,A=T+d.shift(),N=o,R=A+d.shift(),M=N+d.shift(),m=R+d.shift(),f.curveTo(r,a,i,o,T,I),f.curveTo(A,N,R,M,m,g);break;case 37:r=m+d.shift(),a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),T=i+d.shift(),I=o+d.shift(),A=T+d.shift(),N=I+d.shift(),R=A+d.shift(),M=N+d.shift(),Math.abs(R-m)>Math.abs(M-g)?m=R+d.shift():g=M+d.shift(),f.curveTo(r,a,i,o,T,I),f.curveTo(A,N,R,M,m,g);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+D),d.length=0}break;case 14:0<d.length&&!p&&(x=d.shift()+c,p=!0),v&&(f.closePath(),v=!1);break;case 19:case 20:k(),O+=h+7>>3;break;case 21:2<d.length&&!p&&(x=d.shift()+c,p=!0),g+=d.pop(),w(m+=d.pop(),g);break;case 22:1<d.length&&!p&&(x=d.shift()+c,p=!0),w(m+=d.pop(),g);break;case 24:for(;2<d.length;)r=m+d.shift(),a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),m=i+d.shift(),g=o+d.shift(),f.curveTo(r,a,i,o,m,g);m+=d.shift(),g+=d.shift(),f.lineTo(m,g);break;case 25:for(;6<d.length;)m+=d.shift(),g+=d.shift(),f.lineTo(m,g);r=m+d.shift(),a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),m=i+d.shift(),g=o+d.shift(),f.curveTo(r,a,i,o,m,g);break;case 26:for(d.length%2&&(m+=d.shift());0<d.length;)r=m,a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),m=i,g=o+d.shift(),f.curveTo(r,a,i,o,m,g);break;case 27:for(d.length%2&&(g+=d.shift());0<d.length;)r=m+d.shift(),a=g,i=r+d.shift(),o=a+d.shift(),m=i+d.shift(),g=o,f.curveTo(r,a,i,o,m,g);break;case 28:y=l[O],b=l[O+1],d.push((y<<24|b<<16)>>16),O+=2;break;case 29:C=d.pop()+e.gsubrsBias,(E=e.gsubrs[C])&&n(E);break;case 30:for(;0<d.length&&(r=m,a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),m=i+d.shift(),g=o+(1===d.length?d.shift():0),f.curveTo(r,a,i,o,m,g),0!==d.length);)r=m+d.shift(),a=g,i=r+d.shift(),o=a+d.shift(),g=o+d.shift(),m=i+(1===d.length?d.shift():0),f.curveTo(r,a,i,o,m,g);break;case 31:for(;0<d.length&&(r=m+d.shift(),a=g,i=r+d.shift(),o=a+d.shift(),g=o+d.shift(),m=i+(1===d.length?d.shift():0),f.curveTo(r,a,i,o,m,g),0!==d.length);)r=m,a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),m=i+d.shift(),g=o+(1===d.length?d.shift():0),f.curveTo(r,a,i,o,m,g);break;default:D<32?console.log("Glyph "+t.index+": unknown operator "+D):D<247?d.push(D-139):D<251?(y=l[O],O+=1,d.push(256*(D-247)+y+108)):D<255?(y=l[O],O+=1,d.push(256*-(D-251)-y-108)):(y=l[O],b=l[O+1],S=l[O+2],_=l[O+3],O+=4,d.push((y<<24|b<<16|S<<8|_)/65536))}}}(n),t.advanceWidth=x,f}function Oe(e,t){var n,r=ue.indexOf(e);return 0<=r&&(n=r),0<=(r=t.indexOf(e))?n=r+ue.length:(n=ue.length+t.length,t.push(e)),n}function De(e,t,n){for(var r={},a=0;a<e.length;a+=1){var i=e[a],o=t[i.name];void 0===o||we(o,i.value)||("SID"===i.type&&(o=Oe(o,n)),r[i.op]={name:i.name,type:i.type,value:o})}return r}function Le(e,t){var n=new Q.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=De(Ie,e,t),n}function je(e){var t=new Q.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function Pe(e){var t=[],n=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var r=0,a=0,i=0;i<n.commands.length;i+=1){var o=void 0,s=void 0,u=n.commands[i];if("Q"===u.type&&(u={type:"C",x:u.x,y:u.y,x1:1/3*r+2/3*u.x1,y1:1/3*a+2/3*u.y1,x2:1/3*u.x+2/3*u.x1,y2:1/3*u.y+2/3*u.y1}),"M"===u.type)o=Math.round(u.x-r),s=Math.round(u.y-a),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(u.x),a=Math.round(u.y);else if("L"===u.type)o=Math.round(u.x-r),s=Math.round(u.y-a),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(u.x),a=Math.round(u.y);else if("C"===u.type){var l=Math.round(u.x1-r),c=Math.round(u.y1-a),f=Math.round(u.x2-u.x1),d=Math.round(u.y2-u.y1);o=Math.round(u.x-u.x2),s=Math.round(u.y-u.y2),t.push({name:"dx1",type:"NUMBER",value:l}),t.push({name:"dy1",type:"NUMBER",value:c}),t.push({name:"dx2",type:"NUMBER",value:f}),t.push({name:"dy2",type:"NUMBER",value:d}),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(u.x),a=Math.round(u.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}var Fe=function(e,t,n){n.tables.cff={};var r,a,i,o=Se(e,(r=e,a=t,(i={}).formatMajor=ie.getCard8(r,a),i.formatMinor=ie.getCard8(r,a+1),i.size=ie.getCard8(r,a+2),i.offsetSize=ie.getCard8(r,a+3),i.startOffset=a,i.endOffset=a+4,i).endOffset,ie.bytesToString),s=Se(e,o.endOffset),u=Se(e,s.endOffset,ie.bytesToString),l=Se(e,u.endOffset);n.gsubrs=l.objects,n.gsubrsBias=ke(n.gsubrs);var c=Re(e,t,s.objects,u.objects);if(1!==c.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+c.length);var f=c[0];if((n.tables.cff.topDict=f)._privateDict&&(n.defaultWidthX=f._privateDict.defaultWidthX,n.nominalWidthX=f._privateDict.nominalWidthX),void 0!==f.ros[0]&&void 0!==f.ros[1]&&(n.isCIDFont=!0),n.isCIDFont){var d=f.fdArray,h=f.fdSelect;if(0===d||0===h)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var p=Re(e,t,Se(e,d+=t).objects,u.objects);f._fdArray=p,h+=t,f._fdSelect=function(e,t,n,r){var a,i=[],o=new ie.Parser(e,t),s=o.parseCard8();if(0===s)for(var u=0;u<n;u++){if(r<=(a=o.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+a+" (FD count "+r+")");i.push(a)}else{if(3!==s)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+s);var l,c=o.parseCard16(),f=o.parseCard16();if(0!==f)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+f);for(var d=0;d<c;d++){if(a=o.parseCard8(),l=o.parseCard16(),r<=a)throw new Error("CFF table CID Font FDSelect has bad FD index value "+a+" (FD count "+r+")");if(n<l)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+l);for(;f<l;f++)i.push(a);f=l}if(l!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+l)}return i}(e,h,n.numGlyphs,p.length)}var v=t+f.private[1],m=Ne(e,v,f.private[0],u.objects);if(n.defaultWidthX=m.defaultWidthX,n.nominalWidthX=m.nominalWidthX,0!==m.subrs){var g=Se(e,v+m.subrs);n.subrs=g.objects,n.subrsBias=ke(n.subrs)}else n.subrs=[],n.subrsBias=0;var y=Se(e,t+f.charStrings);n.nGlyphs=y.objects.length;var b=function(e,t,n,r){var a,i,o=new ie.Parser(e,t);--n;var s=[".notdef"],u=o.parseCard8();if(0===u)for(var l=0;l<n;l+=1)a=o.parseSID(),s.push(Ee(r,a));else if(1===u)for(;s.length<=n;){a=o.parseSID(),i=o.parseCard8();for(var c=0;c<=i;c+=1)s.push(Ee(r,a)),a+=1}else{if(2!==u)throw new Error("Unknown charset format "+u);for(;s.length<=n;){a=o.parseSID(),i=o.parseCard16();for(var f=0;f<=i;f+=1)s.push(Ee(r,a)),a+=1}}return s}(e,t+f.charset,n.nGlyphs,u.objects);0===f.encoding?n.cffEncoding=new pe(le,b):1===f.encoding?n.cffEncoding=new pe(ce,b):n.cffEncoding=function(e,t,n){var r,a={},i=new ie.Parser(e,t),o=i.parseCard8();if(0===o)for(var s=i.parseCard8(),u=0;u<s;u+=1)a[r=i.parseCard8()]=u;else{if(1!==o)throw new Error("Unknown encoding format "+o);var l=i.parseCard8();r=1;for(var c=0;c<l;c+=1)for(var f=i.parseCard8(),d=i.parseCard8(),h=f;h<=f+d;h+=1)a[h]=r,r+=1}return new pe(a,n)}(e,t+f.encoding,b),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new xe.GlyphSet(n);for(var x=0;x<n.nGlyphs;x+=1){var w=y.objects[x];n.glyphs.push(x,xe.cffGlyphLoader(n,x,Me,w))}},Be=function(e,t){for(var n,r=new Q.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),a=1/t.unitsPerEm,i={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[a,0,0,a,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},o=[],s=1;s<e.length;s+=1)n=e.get(s),o.push(n.name);var u=[];r.header=new Q.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),r.nameIndex=function(e){var t=new Q.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var n=0;n<e.length;n+=1)t.names.push({name:"name_"+n,type:"NAME",value:e[n]});return t}([t.postScriptName]);var l,c,f,d=Le(i,u);r.topDictIndex=je(d),r.globalSubrIndex=new Q.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),r.charsets=function(e,t){for(var n=new Q.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<e.length;r+=1){var a=Oe(e[r],t);n.fields.push({name:"glyph_"+r,type:"SID",value:a})}return n}(o,u),r.charStringsIndex=function(e){for(var t=new Q.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<e.length;n+=1){var r=e.get(n),a=Pe(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:a})}return t}(e),r.privateDict=(l={},c=u,(f=new Q.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=De(Ae,l,c),f),r.stringIndex=function(e){var t=new Q.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,type:"STRING",value:e[n]});return t}(u);var h=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return i.charset=h,i.encoding=0,i.charStrings=i.charset+r.charsets.sizeOf(),i.private[1]=i.charStrings+r.charStringsIndex.sizeOf(),d=Le(i,u),r.topDictIndex=je(d),r},ze=function(e,t){var n={},r=new ie.Parser(e,t);return n.version=r.parseVersion(),n.fontRevision=Math.round(1e3*r.parseFixed())/1e3,n.checkSumAdjustment=r.parseULong(),n.magicNumber=r.parseULong(),N.argument(1594834165===n.magicNumber,"Font header has wrong magic number."),n.flags=r.parseUShort(),n.unitsPerEm=r.parseUShort(),n.created=r.parseLongDateTime(),n.modified=r.parseLongDateTime(),n.xMin=r.parseShort(),n.yMin=r.parseShort(),n.xMax=r.parseShort(),n.yMax=r.parseShort(),n.macStyle=r.parseUShort(),n.lowestRecPPEM=r.parseUShort(),n.fontDirectionHint=r.parseShort(),n.indexToLocFormat=r.parseShort(),n.glyphDataFormat=r.parseShort(),n},Ue=function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,n=t;return e.createdTimestamp&&(n=e.createdTimestamp+2082844800),new Q.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)},We=function(e,t){var n={},r=new ie.Parser(e,t);return n.version=r.parseVersion(),n.ascender=r.parseShort(),n.descender=r.parseShort(),n.lineGap=r.parseShort(),n.advanceWidthMax=r.parseUShort(),n.minLeftSideBearing=r.parseShort(),n.minRightSideBearing=r.parseShort(),n.xMaxExtent=r.parseShort(),n.caretSlopeRise=r.parseShort(),n.caretSlopeRun=r.parseShort(),n.caretOffset=r.parseShort(),r.relativeOffset+=8,n.metricDataFormat=r.parseShort(),n.numberOfHMetrics=r.parseUShort(),n},Ge=function(e){return new Q.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)},Ve=function(e,t,n,r,a){for(var i,o,s=new ie.Parser(e,t),u=0;u<r;u+=1){u<n&&(i=s.parseUShort(),o=s.parseShort());var l=a.get(u);l.advanceWidth=i,l.leftSideBearing=o}},He=function(e){for(var t=new Q.Table("hmtx",[]),n=0;n<e.length;n+=1){var r=e.get(n),a=r.advanceWidth||0,i=r.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:a}),t.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:i})}return t},qe=function(e){for(var t=new Q.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),n="",r=12+4*e.length,a=0;a<e.length;++a){var i=n.indexOf(e[a]);i<0&&(i=n.length,n+=e[a]),t.fields.push({name:"offset "+a,type:"USHORT",value:r+i}),t.fields.push({name:"length "+a,type:"USHORT",value:e[a].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),t},Xe=function(e,t){var n=new ie.Parser(e,t),r=n.parseULong();N.argument(1===r,"Unsupported ltag table version."),n.skip("uLong",1);for(var a=n.parseULong(),i=[],o=0;o<a;o++){for(var s="",u=t+n.parseUShort(),l=n.parseUShort(),c=u;c<u+l;++c)s+=String.fromCharCode(e.getInt8(c));i.push(s)}return i},Ye=function(e,t){var n={},r=new ie.Parser(e,t);return n.version=r.parseVersion(),n.numGlyphs=r.parseUShort(),1===n.version&&(n.maxPoints=r.parseUShort(),n.maxContours=r.parseUShort(),n.maxCompositePoints=r.parseUShort(),n.maxCompositeContours=r.parseUShort(),n.maxZones=r.parseUShort(),n.maxTwilightPoints=r.parseUShort(),n.maxStorage=r.parseUShort(),n.maxFunctionDefs=r.parseUShort(),n.maxInstructionDefs=r.parseUShort(),n.maxStackElements=r.parseUShort(),n.maxSizeOfInstructions=r.parseUShort(),n.maxComponentElements=r.parseUShort(),n.maxComponentDepth=r.parseUShort()),n},Ke=function(e){return new Q.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])},Ze=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Qe={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},$e={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Je={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function et(e,t,n){switch(e){case 0:if(65535===t)return"und";if(n)return n[t];break;case 1:return Qe[t];case 3:return Je[t]}}var tt="utf-16",nt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},rt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function at(e,t,n){switch(e){case 0:return tt;case 1:return rt[n]||nt[t];case 3:if(1===t||10===t)return tt}}function it(e){var t={};for(var n in e)t[e[n]]=parseInt(n);return t}function ot(e,t,n,r,a,i){return new Q.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:a},{name:"offset",type:"USHORT",value:i}])}function st(e,t){var n=function(e,t){var n=e.length,r=t.length-n+1;e:for(var a=0;a<r;a++)for(;a<r;a++){for(var i=0;i<n;i++)if(t[a+i]!==e[i])continue e;return a}return-1}(e,t);if(n<0){n=t.length;for(var r=0,a=e.length;r<a;++r)t.push(e[r])}return n}var ut=function(e,t,n){for(var r={},a=new ie.Parser(e,t),i=a.parseUShort(),o=a.parseUShort(),s=a.offset+a.parseUShort(),u=0;u<o;u++){var l,c=a.parseUShort(),f=a.parseUShort(),d=a.parseUShort(),h=a.parseUShort(),p=Ze[h]||h,v=a.parseUShort(),m=a.parseUShort(),g=et(c,d,n),y=at(c,f,d);if(void 0!==y&&void 0!==g&&(l=y===tt?R.UTF16(e,s+m,v):R.MACSTRING(e,s+m,v,y))){var b=r[p];void 0===b&&(b=r[p]={}),b[g]=l}}return 1===i&&a.parseUShort(),r},lt=function(e,t){var n,r=[],a={},i=it(Ze);for(var o in e){var s=i[o];if(void 0===s&&(s=o),n=parseInt(s),isNaN(n))throw new Error('Name table entry "'+o+'" does not exist, see nameTableNames for complete list.');a[n]=e[o],r.push(n)}for(var u=it(Qe),l=it(Je),c=[],f=[],d=0;d<r.length;d++){var h=a[n=r[d]];for(var p in h){var v=h[p],m=1,g=u[p],y=$e[g],b=at(m,y,g),x=M.MACSTRING(v,b);void 0===x&&(m=0,(g=t.indexOf(p))<0&&(g=t.length,t.push(p)),y=4,x=M.UTF16(v));var w=st(x,f);c.push(ot(m,y,g,n,x.length,w));var k=l[p];if(void 0!==k){var S=M.UTF16(v),_=st(S,f);c.push(ot(3,1,k,n,S.length,_))}}}c.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var C=new Q.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:c.length},{name:"stringOffset",type:"USHORT",value:6+12*c.length}]),E=0;E<c.length;E++)C.fields.push({name:"record_"+E,type:"RECORD",value:c[E]});return C.fields.push({name:"strings",type:"LITERAL",value:f}),C},ct=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],ft=function(e,t){var n={},r=new ie.Parser(e,t);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(var a=0;a<10;a++)n.panose[a]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),1<=n.version&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),2<=n.version&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n},dt=function(e){return new Q.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},ht=function(e){for(var t=0;t<ct.length;t+=1){var n=ct[t];if(e>=n.begin&&e<n.end)return t}return-1},pt=function(e,t){var n={},r=new ie.Parser(e,t);switch(n.version=r.parseVersion(),n.italicAngle=r.parseFixed(),n.underlinePosition=r.parseShort(),n.underlineThickness=r.parseShort(),n.isFixedPitch=r.parseULong(),n.minMemType42=r.parseULong(),n.maxMemType42=r.parseULong(),n.minMemType1=r.parseULong(),n.maxMemType1=r.parseULong(),n.version){case 1:n.names=fe.slice();break;case 2:n.numberOfGlyphs=r.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(var a=0;a<n.numberOfGlyphs;a++)n.glyphNameIndex[a]=r.parseUShort();n.names=[];for(var i=0;i<n.numberOfGlyphs;i++)if(n.glyphNameIndex[i]>=fe.length){var o=r.parseChar();n.names.push(r.parseString(o))}break;case 2.5:n.numberOfGlyphs=r.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(var s=0;s<n.numberOfGlyphs;s++)n.offset[s]=r.parseChar()}return n},vt=function(){return new Q.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},mt=new Array(9);mt[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(re.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(re.coverage),substitute:this.parseOffset16List()}:void N.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},mt[2]=function(){var e=this.parseUShort();return N.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(re.coverage),sequences:this.parseListOfLists()}},mt[3]=function(){var e=this.parseUShort();return N.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(re.coverage),alternateSets:this.parseListOfLists()}},mt[4]=function(){var e=this.parseUShort();return N.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(re.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var gt={sequenceIndex:re.uShort,lookupListIndex:re.uShort};mt[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(re.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,gt)}}))};if(2===t)return{substFormat:t,coverage:this.parsePointer(re.coverage),classDef:this.parsePointer(re.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,gt)}}))};if(3===t){var n=this.parseUShort(),r=this.parseUShort();return{substFormat:t,coverages:this.parseList(n,re.pointer(re.coverage)),lookupRecords:this.parseRecordList(r,gt)}}N.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},mt[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(re.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(gt)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(re.coverage),backtrackClassDef:this.parsePointer(re.classDef),inputClassDef:this.parsePointer(re.classDef),lookaheadClassDef:this.parsePointer(re.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(gt)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(re.pointer(re.coverage)),inputCoverage:this.parseList(re.pointer(re.coverage)),lookaheadCoverage:this.parseList(re.pointer(re.coverage)),lookupRecords:this.parseRecordList(gt)}:void N.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},mt[7]=function(){var e=this.parseUShort();N.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),n=new re(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:mt[t].call(n)}},mt[8]=function(){var e=this.parseUShort();return N.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(re.coverage),backtrackCoverage:this.parseList(re.pointer(re.coverage)),lookaheadCoverage:this.parseList(re.pointer(re.coverage)),substitutes:this.parseUShortList()}};var yt=new Array(9);yt[1]=function(e){return 1===e.substFormat?new Q.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Q.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new Q.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Q.Coverage(e.coverage)}].concat(Q.ushortList("substitute",e.substitute)))},yt[3]=function(e){return N.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new Q.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Q.Coverage(e.coverage)}].concat(Q.tableList("altSet",e.alternateSets,(function(e){return new Q.Table("alternateSetTable",Q.ushortList("alternate",e))}))))},yt[4]=function(e){return N.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new Q.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Q.Coverage(e.coverage)}].concat(Q.tableList("ligSet",e.ligatureSets,(function(e){return new Q.Table("ligatureSetTable",Q.tableList("ligature",e,(function(e){return new Q.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(Q.ushortList("component",e.components,e.components.length+1)))})))}))))};var bt=function(e,t){var n=new re(e,t=t||0),r=n.parseVersion(1);return N.argument(1===r||1.1===r,"Unsupported GSUB table version."),1===r?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(mt)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(mt),variations:n.parseFeatureVariationsList()}},xt=function(e){return new Q.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Q.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new Q.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new Q.LookupList(e.lookups,yt)}])},wt=function(e,t){var n=new ie.Parser(e,t),r=n.parseULong();N.argument(1===r,"Unsupported META table version."),n.parseULong(),n.parseULong();for(var a=n.parseULong(),i={},o=0;o<a;o++){var s=n.parseTag(),u=n.parseULong(),l=n.parseULong(),c=R.UTF8(e,t+u,l);i[s]=c}return i},kt=function(e){var t=Object.keys(e).length,n="",r=16+12*t,a=new Q.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:t}]);for(var i in e){var o=n.length;n+=e[i],a.fields.push({name:"tag "+i,type:"TAG",value:i}),a.fields.push({name:"offset "+i,type:"ULONG",value:r+o}),a.fields.push({name:"length "+i,type:"ULONG",value:e[i].length})}return a.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),a};function St(e){return Math.log(e)/Math.log(2)|0}function _t(e){for(;e.length%4!=0;)e.push(0);for(var t=0,n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return t%Math.pow(2,32)}function Ct(e,t,n,r){return new Q.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==n?n:0},{name:"length",type:"ULONG",value:void 0!==r?r:0}])}function Et(e){var t=new Q.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var n=Math.pow(2,St(t.numTables));t.searchRange=16*n,t.entrySelector=St(n),t.rangeShift=16*t.numTables-t.searchRange;for(var r=[],a=[],i=t.sizeOf()+Ct().sizeOf()*t.numTables;i%4!=0;)i+=1,a.push({name:"padding",type:"BYTE",value:0});for(var o=0;o<e.length;o+=1){var s=e[o];N.argument(4===s.tableName.length,"Table name"+s.tableName+" is invalid.");var u=s.sizeOf(),l=Ct(s.tableName,_t(s.encode()),i,u);for(r.push({name:l.tag+" Table Record",type:"RECORD",value:l}),a.push({name:s.tableName+" table",type:"RECORD",value:s}),i+=u,N.argument(!isNaN(i),"Something went wrong calculating the offset.");i%4!=0;)i+=1,a.push({name:"padding",type:"BYTE",value:0})}return r.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(r),t.fields=t.fields.concat(a),t}function Tt(e,t,n){for(var r=0;r<t.length;r+=1){var a=e.charToGlyphIndex(t[r]);if(0<a)return e.glyphs.get(a).getMetrics()}return n}var It=function(e){for(var t,n=[],r=[],a=[],i=[],o=[],s=[],u=[],l=0,c=0,f=0,d=0,h=0,p=0;p<e.glyphs.length;p+=1){var v=e.glyphs.get(p),m=0|v.unicode;if(isNaN(v.advanceWidth))throw new Error("Glyph "+v.name+" ("+p+"): advanceWidth is not a number.");(m<t||void 0===t)&&0<m&&(t=m),l<m&&(l=m);var g=ht(m);if(g<32)c|=1<<g;else if(g<64)f|=1<<g-32;else if(g<96)d|=1<<g-64;else{if(!(g<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");h|=1<<g-96}if(".notdef"!==v.name){var y=v.getMetrics();n.push(y.xMin),r.push(y.yMin),a.push(y.xMax),i.push(y.yMax),s.push(y.leftSideBearing),u.push(y.rightSideBearing),o.push(v.advanceWidth)}}var b={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,a),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,o),advanceWidthAvg:function(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length}(o),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,u)};b.ascender=e.ascender,b.descender=e.descender;var x=Ue({flags:3,unitsPerEm:e.unitsPerEm,xMin:b.xMin,yMin:b.yMin,xMax:b.xMax,yMax:b.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),w=Ge({ascender:b.ascender,descender:b.descender,advanceWidthMax:b.advanceWidthMax,minLeftSideBearing:b.minLeftSideBearing,minRightSideBearing:b.minRightSideBearing,xMaxExtent:b.maxLeftSideBearing+(b.xMax-b.xMin),numberOfHMetrics:e.glyphs.length}),k=Ke(e.glyphs.length),S=dt({xAvgCharWidth:Math.round(b.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:t,usLastCharIndex:l,ulUnicodeRange1:c,ulUnicodeRange2:f,ulUnicodeRange3:d,ulUnicodeRange4:h,fsSelection:e.tables.os2.fsSelection,sTypoAscender:b.ascender,sTypoDescender:b.descender,sTypoLineGap:0,usWinAscent:b.yMax,usWinDescent:Math.abs(b.yMin),ulCodePageRange1:1,sxHeight:Tt(e,"xyvw",{yMax:Math.round(b.ascender/2)}).yMax,sCapHeight:Tt(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",b).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),_=He(e.glyphs),C=se(e.glyphs),E=e.getEnglishName("fontFamily"),T=e.getEnglishName("fontSubfamily"),I=E+" "+T,A=e.getEnglishName("postScriptName");A=A||E.replace(/\s/g,"")+"-"+T;var N={};for(var R in e.names)N[R]=e.names[R];N.uniqueID||(N.uniqueID={en:e.getEnglishName("manufacturer")+":"+I}),N.postScriptName||(N.postScriptName={en:A}),N.preferredFamily||(N.preferredFamily=e.names.fontFamily),N.preferredSubfamily||(N.preferredSubfamily=e.names.fontSubfamily);var M=[],O=lt(N,M),D=0<M.length?qe(M):void 0,L=vt(),j=Be(e.glyphs,{version:e.getEnglishName("version"),fullName:I,familyName:E,weightName:T,postScriptName:A,unitsPerEm:e.unitsPerEm,fontBBox:[0,b.yMin,b.ascender,b.advanceWidthMax]}),P=e.metas&&0<Object.keys(e.metas).length?kt(e.metas):void 0,F=[x,w,k,S,O,C,L,j,_];D&&F.push(D),e.tables.gsub&&F.push(xt(e.tables.gsub)),P&&F.push(P);for(var B=Et(F),z=_t(B.encode()),U=B.fields,W=!1,G=0;G<U.length;G+=1)if("head table"===U[G].name){U[G].value.checkSumAdjustment=2981146554-z,W=!0;break}if(!W)throw new Error("Could not find head table with checkSum to adjust.");return B};function At(e,t){for(var n=0,r=e.length-1;n<=r;){var a=n+r>>>1,i=e[a].tag;if(i===t)return a;i<t?n=1+a:r=a-1}return-n-1}function Nt(e,t){for(var n=0,r=e.length-1;n<=r;){var a=n+r>>>1,i=e[a];if(i===t)return a;i<t?n=1+a:r=a-1}return-n-1}function Rt(e,t){for(var n,r=0,a=e.length-1;r<=a;){var i=r+a>>>1,o=(n=e[i]).start;if(o===t)return n;o<t?r=1+i:a=i-1}if(0<r)return t>(n=e[r-1]).end?0:n}function Mt(e,t){this.font=e,this.tableName=t}function Ot(e){Mt.call(this,e,"gpos")}function Dt(e){Mt.call(this,e,"gsub")}function Lt(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function jt(e,t,n){for(var r=e.subtables,a=0;a<r.length;a++){var i=r[a];if(i.substFormat===t)return i}if(n)return r.push(n),n}function Pt(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;++r)n[r]=e[r];return t}function Ft(e,t){if(!e)throw t}function Bt(e,t,n,r,a){var i;return 0<(t&r)?(i=e.parseByte(),0==(t&a)&&(i=-i),n+i):0<(t&a)?n:n+e.parseShort()}function zt(e,t,n){var r,a,i=new ie.Parser(t,n);if(e.numberOfContours=i.parseShort(),e._xMin=i.parseShort(),e._yMin=i.parseShort(),e._xMax=i.parseShort(),e._yMax=i.parseShort(),0<e.numberOfContours){for(var o=e.endPointIndices=[],s=0;s<e.numberOfContours;s+=1)o.push(i.parseUShort());e.instructionLength=i.parseUShort(),e.instructions=[];for(var u=0;u<e.instructionLength;u+=1)e.instructions.push(i.parseByte());var l=o[o.length-1]+1;r=[];for(var c=0;c<l;c+=1)if(a=i.parseByte(),r.push(a),0<(8&a))for(var f=i.parseByte(),d=0;d<f;d+=1)r.push(a),c+=1;if(N.argument(r.length===l,"Bad flags."),0<o.length){var h,p=[];if(0<l){for(var v=0;v<l;v+=1)a=r[v],(h={}).onCurve=!!(1&a),h.lastPointOfContour=0<=o.indexOf(v),p.push(h);for(var m=0,g=0;g<l;g+=1)a=r[g],(h=p[g]).x=Bt(i,a,m,2,16),m=h.x;for(var y=0,b=0;b<l;b+=1)a=r[b],(h=p[b]).y=Bt(i,a,y,4,32),y=h.y}e.points=p}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var x=!0;x;){r=i.parseUShort();var w={glyphIndex:i.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&r)?0<(2&r)?(w.dx=i.parseShort(),w.dy=i.parseShort()):w.matchedPoints=[i.parseUShort(),i.parseUShort()]:0<(2&r)?(w.dx=i.parseChar(),w.dy=i.parseChar()):w.matchedPoints=[i.parseByte(),i.parseByte()],0<(8&r)?w.xScale=w.yScale=i.parseF2Dot14():0<(64&r)?(w.xScale=i.parseF2Dot14(),w.yScale=i.parseF2Dot14()):0<(128&r)&&(w.xScale=i.parseF2Dot14(),w.scale01=i.parseF2Dot14(),w.scale10=i.parseF2Dot14(),w.yScale=i.parseF2Dot14()),e.components.push(w),x=!!(32&r)}if(256&r){e.instructionLength=i.parseUShort(),e.instructions=[];for(var k=0;k<e.instructionLength;k+=1)e.instructions.push(i.parseByte())}}}function Ut(e,t){for(var n=[],r=0;r<e.length;r+=1){var a=e[r],i={x:t.xScale*a.x+t.scale01*a.y+t.dx,y:t.scale10*a.x+t.yScale*a.y+t.dy,onCurve:a.onCurve,lastPointOfContour:a.lastPointOfContour};n.push(i)}return n}function Wt(e){var t=new T;if(!e)return t;for(var n=function(e){for(var t=[],n=[],r=0;r<e.length;r+=1){var a=e[r];n.push(a),a.lastPointOfContour&&(t.push(n),n=[])}return N.argument(0===n.length,"There are still points left in the current contour."),t}(e),r=0;r<n.length;++r){var a=n[r],i=null,o=a[a.length-1],s=a[0];if(o.onCurve)t.moveTo(o.x,o.y);else if(s.onCurve)t.moveTo(s.x,s.y);else{var u={x:.5*(o.x+s.x),y:.5*(o.y+s.y)};t.moveTo(u.x,u.y)}for(var l=0;l<a.length;++l)if(i=o,o=s,s=a[(l+1)%a.length],o.onCurve)t.lineTo(o.x,o.y);else{var c=s;i.onCurve||(o.x,i.x,o.y,i.y),s.onCurve||(c={x:.5*(o.x+s.x),y:.5*(o.y+s.y)}),t.quadraticCurveTo(o.x,o.y,c.x,c.y)}t.closePath()}return t}function Gt(e,t){if(t.isComposite)for(var n=0;n<t.components.length;n+=1){var r=t.components[n],a=e.get(r.glyphIndex);if(a.getPath(),a.points){var i=void 0;if(void 0===r.matchedPoints)i=Ut(a.points,r);else{if(r.matchedPoints[0]>t.points.length-1||r.matchedPoints[1]>a.points.length-1)throw Error("Matched points out of range in "+t.name);var o=t.points[r.matchedPoints[0]],s=a.points[r.matchedPoints[1]],u={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};s=Ut([s],u)[0],u.dx=o.x-s.x,u.dy=o.y-s.y,i=Ut(a.points,u)}t.points=t.points.concat(i)}}return Wt(t.points)}(Ot.prototype=Mt.prototype={searchTag:At,binSearch:Nt,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,n=0;n<e.scripts.length;n++){var r=e.scripts[n].tag;if("DFLT"===r)return r;"latn"===r&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var n=this.getTable(t);if(n){e=e||"DFLT";var r=n.scripts,a=At(n.scripts,e);if(0<=a)return r[a].script;if(t){var i={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-a,0,i),i.script}}},getLangSysTable:function(e,t,n){var r=this.getScriptTable(e,n);if(r){if(!t||"dflt"===t||"DFLT"===t)return r.defaultLangSys;var a=At(r.langSysRecords,t);if(0<=a)return r.langSysRecords[a].langSys;if(n){var i={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-a,0,i),i.langSys}}},getFeatureTable:function(e,t,n,r){var a=this.getLangSysTable(e,t,r);if(a){for(var i,o=a.featureIndexes,s=this.font.tables[this.tableName].features,u=0;u<o.length;u++)if((i=s[o[u]]).tag===n)return i.feature;if(r){var l=s.length;return N.assert(0===l||n>=s[l-1].tag,"Features must be added in alphabetical order."),i={tag:n,feature:{params:0,lookupListIndexes:[]}},s.push(i),o.push(l),i.feature}}},getLookupTables:function(e,t,n,r,a){var i=this.getFeatureTable(e,t,n,a),o=[];if(i){for(var s,u=i.lookupListIndexes,l=this.font.tables[this.tableName].lookups,c=0;c<u.length;c++)(s=l[u[c]]).lookupType===r&&o.push(s);if(0===o.length&&a){s={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};var f=l.length;return l.push(s),u.push(f),[s]}}return o},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var n=Rt(e.ranges,t);return n?n.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var n=Nt(e.glyphs,t);return 0<=n?n:-1;case 2:var r=Rt(e.ranges,t);return r?r.index+t-r.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],n=e.ranges,r=0;r<n.length;r++)for(var a=n[r],i=a.start,o=a.end,s=i;s<=o;s++)t.push(s);return t}}).init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},Ot.prototype.getKerningValue=function(e,t,n){for(var r=0;r<e.length;r++)for(var a=e[r].subtables,i=0;i<a.length;i++){var o=a[i],s=this.getCoverageIndex(o.coverage,t);if(!(s<0))switch(o.posFormat){case 1:for(var u=o.pairSets[s],l=0;l<u.length;l++){var c=u[l];if(c.secondGlyph===n)return c.value1&&c.value1.xAdvance||0}break;case 2:var f=this.getGlyphClass(o.classDef1,t),d=this.getGlyphClass(o.classDef2,n),h=o.classRecords[f][d];return h.value1&&h.value1.xAdvance||0}}return 0},Ot.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},(Dt.prototype=Mt.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Dt.prototype.getSingle=function(e,t,n){for(var r=[],a=this.getLookupTables(t,n,e,1),i=0;i<a.length;i++)for(var o=a[i].subtables,s=0;s<o.length;s++){var u=o[s],l=this.expandCoverage(u.coverage),c=void 0;if(1===u.substFormat){var f=u.deltaGlyphId;for(c=0;c<l.length;c++){var d=l[c];r.push({sub:d,by:d+f})}}else{var h=u.substitute;for(c=0;c<l.length;c++)r.push({sub:l[c],by:h[c]})}}return r},Dt.prototype.getAlternates=function(e,t,n){for(var r=[],a=this.getLookupTables(t,n,e,3),i=0;i<a.length;i++)for(var o=a[i].subtables,s=0;s<o.length;s++)for(var u=o[s],l=this.expandCoverage(u.coverage),c=u.alternateSets,f=0;f<l.length;f++)r.push({sub:l[f],by:c[f]});return r},Dt.prototype.getLigatures=function(e,t,n){for(var r=[],a=this.getLookupTables(t,n,e,4),i=0;i<a.length;i++)for(var o=a[i].subtables,s=0;s<o.length;s++)for(var u=o[s],l=this.expandCoverage(u.coverage),c=u.ligatureSets,f=0;f<l.length;f++)for(var d=l[f],h=c[f],p=0;p<h.length;p++){var v=h[p];r.push({sub:[d].concat(v.components),by:v.ligGlyph})}return r},Dt.prototype.addSingle=function(e,t,n,r){var a=jt(this.getLookupTables(n,r,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});N.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);var i=t.sub,o=this.binSearch(a.coverage.glyphs,i);o<0&&(o=-1-o,a.coverage.glyphs.splice(o,0,i),a.substitute.splice(o,0,0)),a.substitute[o]=t.by},Dt.prototype.addAlternate=function(e,t,n,r){var a=jt(this.getLookupTables(n,r,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});N.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);var i=t.sub,o=this.binSearch(a.coverage.glyphs,i);o<0&&(o=-1-o,a.coverage.glyphs.splice(o,0,i),a.alternateSets.splice(o,0,0)),a.alternateSets[o]=t.by},Dt.prototype.addLigature=function(e,t,n,r){var a=this.getLookupTables(n,r,e,4,!0)[0],i=a.subtables[0];i||(i={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},a.subtables[0]=i),N.assert(1===i.coverage.format,"Ligature: unable to modify coverage table format "+i.coverage.format);var o=t.sub[0],s=t.sub.slice(1),u={ligGlyph:t.by,components:s},l=this.binSearch(i.coverage.glyphs,o);if(0<=l){for(var c=i.ligatureSets[l],f=0;f<c.length;f++)if(Lt(c[f].components,s))return;c.push(u)}else l=-1-l,i.coverage.glyphs.splice(l,0,o),i.ligatureSets.splice(l,0,[u])},Dt.prototype.getFeature=function(e,t,n){if(/ss\d\d/.test(e))return this.getSingle(e,t,n);switch(e){case"aalt":case"salt":return this.getSingle(e,t,n).concat(this.getAlternates(e,t,n));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,n)}},Dt.prototype.add=function(e,t,n,r){if(/ss\d\d/.test(e))return this.addSingle(e,t,n,r);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,n,r):this.addAlternate(e,t,n,r);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,n,r)}};var Vt,Ht,qt,Xt,Yt={getPath:Wt,parse:function(e,t,n,r){for(var a=new xe.GlyphSet(r),i=0;i<n.length-1;i+=1){var o=n[i];o!==n[i+1]?a.push(i,xe.ttfGlyphLoader(r,i,zt,e,t+o,Gt)):a.push(i,xe.glyphLoader(r,i))}return a}};function Kt(e){this.font=e,this.getCommands=function(e){return Yt.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Zt(e){return e}function Qt(e){return Math.sign(e)*Math.round(Math.abs(e))}function $t(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Jt(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function en(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function tn(e){return Math.sign(e)*Math.floor(Math.abs(e))}function nn(e){var t=this.srPeriod,n=this.srPhase,r=1;return e<0&&(e=-e,r=-1),e+=this.srThreshold-n,e=Math.trunc(e/t)*t,(e+=n)<0?n*r:e*r}var rn={x:1,y:0,axis:"x",distance:function(e,t,n,r){return(n?e.xo:e.x)-(r?t.xo:t.x)},interpolate:function(e,t,n,r){var a,i,o,s,u,l,c;if(!r||r===this)return a=e.xo-t.xo,i=e.xo-n.xo,u=t.x-t.xo,l=n.x-n.xo,0===(c=(o=Math.abs(a))+(s=Math.abs(i)))?void(e.x=e.xo+(u+l)/2):void(e.x=e.xo+(u*s+l*o)/c);a=r.distance(e,t,!0,!0),i=r.distance(e,n,!0,!0),u=r.distance(t,t,!1,!0),l=r.distance(n,n,!1,!0),0!==(c=(o=Math.abs(a))+(s=Math.abs(i)))?rn.setRelative(e,e,(u*s+l*o)/c,r,!0):rn.setRelative(e,e,(u+l)/2,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,n,r,a){if(r&&r!==this){var i=a?t.xo:t.x,o=a?t.yo:t.y,s=i+n*r.x,u=o+n*r.y;e.x=s+(e.y-u)/r.normalSlope}else e.x=(a?t.xo:t.x)+n},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},an={x:0,y:1,axis:"y",distance:function(e,t,n,r){return(n?e.yo:e.y)-(r?t.yo:t.y)},interpolate:function(e,t,n,r){var a,i,o,s,u,l,c;if(!r||r===this)return a=e.yo-t.yo,i=e.yo-n.yo,u=t.y-t.yo,l=n.y-n.yo,0===(c=(o=Math.abs(a))+(s=Math.abs(i)))?void(e.y=e.yo+(u+l)/2):void(e.y=e.yo+(u*s+l*o)/c);a=r.distance(e,t,!0,!0),i=r.distance(e,n,!0,!0),u=r.distance(t,t,!1,!0),l=r.distance(n,n,!1,!0),0!==(c=(o=Math.abs(a))+(s=Math.abs(i)))?an.setRelative(e,e,(u*s+l*o)/c,r,!0):an.setRelative(e,e,(u+l)/2,r,!0)},normalSlope:0,setRelative:function(e,t,n,r,a){if(r&&r!==this){var i=a?t.xo:t.x,o=a?t.yo:t.y,s=i+n*r.x,u=o+n*r.y;e.y=u+r.normalSlope*(e.x-s)}else e.y=(a?t.yo:t.y)+n},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function on(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function sn(e,t){var n=Math.sqrt(e*e+t*t);return t/=n,1==(e/=n)&&0===t?rn:0===e&&1===t?an:new on(e,t)}function un(e,t,n,r){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=n,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(rn),Object.freeze(an),on.prototype.distance=function(e,t,n,r){return this.x*rn.distance(e,t,n,r)+this.y*an.distance(e,t,n,r)},on.prototype.interpolate=function(e,t,n,r){var a,i,o,s,u,l,c;o=r.distance(e,t,!0,!0),s=r.distance(e,n,!0,!0),a=r.distance(t,t,!1,!0),i=r.distance(n,n,!1,!0),0!==(c=(u=Math.abs(o))+(l=Math.abs(s)))?this.setRelative(e,e,(a*l+i*u)/c,r,!0):this.setRelative(e,e,(a+i)/2,r,!0)},on.prototype.setRelative=function(e,t,n,r,a){r=r||this;var i=a?t.xo:t.x,o=a?t.yo:t.y,s=i+n*r.x,u=o+n*r.y,l=r.normalSlope,c=this.slope,f=e.x,d=e.y;e.x=(c*f-l*s+u-d)/(c-l),e.y=c*(e.x-f)+d},on.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},un.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},un.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var ln=Object.freeze(new un(0,0)),cn={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function fn(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=rn,this.round=Qt}}function dn(e){for(var t=e.tZone=new Array(e.gZone.length),n=0;n<t.length;n++)t[n]=new un(0,0)}function hn(e,t){var n,r=e.prog,a=e.ip,i=1;do{if(88===(n=r[++a]))i++;else if(89===n)i--;else if(64===n)a+=r[a+1]+1;else if(65===n)a+=2*r[a+1]+1;else if(176<=n&&n<=183)a+=n-176+1;else if(184<=n&&n<=191)a+=2*(n-184+1);else if(t&&1===i&&27===n)break}while(0<i);e.ip=a}function pn(e,n){t.DEBUG&&console.log(n.step,"SVTCA["+e.axis+"]"),n.fv=n.pv=n.dpv=e}function vn(e,n){t.DEBUG&&console.log(n.step,"SPVTCA["+e.axis+"]"),n.pv=n.dpv=e}function mn(e,n){t.DEBUG&&console.log(n.step,"SFVTCA["+e.axis+"]"),n.fv=e}function gn(e,n){var r,a,i=n.stack,o=i.pop(),s=i.pop(),u=n.z2[o],l=n.z1[s];t.DEBUG&&console.log("SPVTL["+e+"]",o,s),a=e?(r=u.y-l.y,l.x-u.x):(r=l.x-u.x,l.y-u.y),n.pv=n.dpv=sn(r,a)}function yn(e,n){var r,a,i=n.stack,o=i.pop(),s=i.pop(),u=n.z2[o],l=n.z1[s];t.DEBUG&&console.log("SFVTL["+e+"]",o,s),a=e?(r=u.y-l.y,l.x-u.x):(r=l.x-u.x,l.y-u.y),n.fv=sn(r,a)}function bn(e){t.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function xn(e,n){var r=n.stack.pop(),a=n.z0[r],i=n.fv,o=n.pv;t.DEBUG&&console.log(n.step,"MDAP["+e+"]",r);var s=o.distance(a,ln);e&&(s=n.round(s)),i.setRelative(a,ln,s,o),i.touch(a),n.rp0=n.rp1=r}function wn(e,n){var r,a,i,o=n.z2,s=o.length-2;t.DEBUG&&console.log(n.step,"IUP["+e.axis+"]");for(var u=0;u<s;u++)r=o[u],e.touched(r)||(a=r.prevTouched(e))!==r&&(a===(i=r.nextTouched(e))&&e.setRelative(r,r,e.distance(a,a,!1,!0),e,!0),e.interpolate(r,a,i,e))}function kn(e,n){for(var r=n.stack,a=e?n.rp1:n.rp2,i=(e?n.z0:n.z1)[a],o=n.fv,s=n.pv,u=n.loop,l=n.z2;u--;){var c=r.pop(),f=l[c],d=s.distance(i,i,!1,!0);o.setRelative(f,f,d,s),o.touch(f),t.DEBUG&&console.log(n.step,(1<n.loop?"loop "+(n.loop-u)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",c)}n.loop=1}function Sn(e,n){var r=n.stack,a=e?n.rp1:n.rp2,i=(e?n.z0:n.z1)[a],o=n.fv,s=n.pv,u=r.pop(),l=n.z2[n.contours[u]],c=l;t.DEBUG&&console.log(n.step,"SHC["+e+"]",u);for(var f=s.distance(i,i,!1,!0);c!==i&&o.setRelative(c,c,f,s),(c=c.nextPointOnContour)!==l;);}function _n(e,n){var r,a,i=n.stack,o=e?n.rp1:n.rp2,s=(e?n.z0:n.z1)[o],u=n.fv,l=n.pv,c=i.pop();switch(t.DEBUG&&console.log(n.step,"SHZ["+e+"]",c),c){case 0:r=n.tZone;break;case 1:r=n.gZone;break;default:throw new Error("Invalid zone")}for(var f=l.distance(s,s,!1,!0),d=r.length-2,h=0;h<d;h++)a=r[h],u.setRelative(a,a,f,l)}function Cn(e,n){var r=n.stack,a=r.pop()/64,i=r.pop(),o=n.z1[i],s=n.z0[n.rp0],u=n.fv,l=n.pv;u.setRelative(o,s,a,l),u.touch(o),t.DEBUG&&console.log(n.step,"MSIRP["+e+"]",a,i),n.rp1=n.rp0,n.rp2=i,e&&(n.rp0=i)}function En(e,n){var r=n.stack,a=r.pop(),i=r.pop(),o=n.z0[i],s=n.fv,u=n.pv,l=n.cvt[a];t.DEBUG&&console.log(n.step,"MIAP["+e+"]",a,"(",l,")",i);var c=u.distance(o,ln);e&&(Math.abs(c-l)<n.cvCutIn&&(c=l),c=n.round(c)),s.setRelative(o,ln,c,u),0===n.zp0&&(o.xo=o.x,o.yo=o.y),s.touch(o),n.rp0=n.rp1=i}function Tn(e,n){var r=n.stack,a=r.pop(),i=n.z2[a];t.DEBUG&&console.log(n.step,"GC["+e+"]",a),r.push(64*n.dpv.distance(i,ln,e,!1))}function In(e,n){var r=n.stack,a=r.pop(),i=r.pop(),o=n.z1[a],s=n.z0[i],u=n.dpv.distance(s,o,e,e);t.DEBUG&&console.log(n.step,"MD["+e+"]",a,i,"->",u),n.stack.push(Math.round(64*u))}function An(e,n){var r=n.stack,a=r.pop(),i=n.fv,o=n.pv,s=n.ppem,u=n.deltaBase+16*(e-1),l=n.deltaShift,c=n.z0;t.DEBUG&&console.log(n.step,"DELTAP["+e+"]",a,r);for(var f=0;f<a;f++){var d=r.pop(),h=r.pop();if(u+((240&h)>>4)===s){var p=(15&h)-8;0<=p&&p++,t.DEBUG&&console.log(n.step,"DELTAPFIX",d,"by",p*l);var v=c[d];i.setRelative(v,v,p*l,o)}}}function Nn(e,n){var r=n.stack,a=r.pop();t.DEBUG&&console.log(n.step,"ROUND[]"),r.push(64*n.round(a/64))}function Rn(e,n){var r=n.stack,a=r.pop(),i=n.ppem,o=n.deltaBase+16*(e-1),s=n.deltaShift;t.DEBUG&&console.log(n.step,"DELTAC["+e+"]",a,r);for(var u=0;u<a;u++){var l=r.pop(),c=r.pop();if(o+((240&c)>>4)===i){var f=(15&c)-8;0<=f&&f++;var d=f*s;t.DEBUG&&console.log(n.step,"DELTACFIX",l,"by",d),n.cvt[l]+=d}}}function Mn(e,n){var r,a,i=n.stack,o=i.pop(),s=i.pop(),u=n.z2[o],l=n.z1[s];t.DEBUG&&console.log(n.step,"SDPVTL["+e+"]",o,s),a=e?(r=u.y-l.y,l.x-u.x):(r=l.x-u.x,l.y-u.y),n.dpv=sn(r,a)}function On(e,n){var r=n.stack,a=n.prog,i=n.ip;t.DEBUG&&console.log(n.step,"PUSHB["+e+"]");for(var o=0;o<e;o++)r.push(a[++i]);n.ip=i}function Dn(e,n){var r=n.ip,a=n.prog,i=n.stack;t.DEBUG&&console.log(n.ip,"PUSHW["+e+"]");for(var o=0;o<e;o++){var s=a[++r]<<8|a[++r];32768&s&&(s=-(1+(65535^s))),i.push(s)}n.ip=r}function Ln(e,n,r,a,i,o){var s,u,l,c,f=o.stack,d=e&&f.pop(),h=f.pop(),p=o.rp0,v=o.z0[p],m=o.z1[h],g=o.minDis,y=o.fv,b=o.dpv;l=0<=(u=s=b.distance(m,v,!0,!0))?1:-1,u=Math.abs(u),e&&(c=o.cvt[d],a&&Math.abs(u-c)<o.cvCutIn&&(u=c)),r&&u<g&&(u=g),a&&(u=o.round(u)),y.setRelative(m,v,l*u,b),y.touch(m),t.DEBUG&&console.log(o.step,(e?"MIRP[":"MDRP[")+(n?"M":"m")+(r?">":"_")+(a?"R":"_")+(0===i?"Gr":1===i?"Bl":2===i?"Wh":"")+"]",e?d+"("+o.cvt[d]+","+c+")":"",h,"(d =",s,"->",l*u,")"),o.rp1=o.rp0,o.rp2=h,n&&(o.rp0=h)}Kt.prototype.exec=function(e,n){if("number"!=typeof n)throw new Error("Point size is not a number!");if(!(2<this._errorState)){var r=this.font,a=this._prepState;if(!a||a.ppem!==n){var i=this._fpgmState;if(!i){fn.prototype=cn,(i=this._fpgmState=new fn("fpgm",r.tables.fpgm)).funcs=[],i.font=r,t.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{Ht(i)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}fn.prototype=i,(a=this._prepState=new fn("prep",r.tables.prep)).ppem=n;var o=r.tables.cvt;if(o)for(var s=a.cvt=new Array(o.length),u=n/r.unitsPerEm,l=0;l<o.length;l++)s[l]=o[l]*u;else a.cvt=[];t.DEBUG&&(console.log("---EXEC PREP---"),a.step=-1);try{Ht(a)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(1<this._errorState))try{return qt(e,a)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},qt=function(e,n){var r,a,i,o=n.ppem/n.font.unitsPerEm,s=o,u=e.components;if(fn.prototype=n,u){var l=n.font;a=[],r=[];for(var c=0;c<u.length;c++){var f=u[c],d=l.glyphs.get(f.glyphIndex);i=new fn("glyf",d.instructions),t.DEBUG&&(console.log("---EXEC COMP "+c+"---"),i.step=-1),Xt(d,i,o,s);for(var h=Math.round(f.dx*o),p=Math.round(f.dy*s),v=i.gZone,m=i.contours,g=0;g<v.length;g++){var y=v[g];y.xTouched=y.yTouched=!1,y.xo=y.x=y.x+h,y.yo=y.y=y.y+p}var b=a.length;a.push.apply(a,v);for(var x=0;x<m.length;x++)r.push(m[x]+b)}e.instructions&&!i.inhibitGridFit&&((i=new fn("glyf",e.instructions)).gZone=i.z0=i.z1=i.z2=a,i.contours=r,a.push(new un(0,0),new un(Math.round(e.advanceWidth*o),0)),t.DEBUG&&(console.log("---EXEC COMPOSITE---"),i.step=-1),Ht(i),a.length-=2)}else i=new fn("glyf",e.instructions),t.DEBUG&&(console.log("---EXEC GLYPH---"),i.step=-1),Xt(e,i,o,s),a=i.gZone;return a},Xt=function(e,n,r,a){for(var i,o,s,u=e.points||[],l=u.length,c=n.gZone=n.z0=n.z1=n.z2=[],f=n.contours=[],d=0;d<l;d++)i=u[d],c[d]=new un(i.x*r,i.y*a,i.lastPointOfContour,i.onCurve);for(var h=0;h<l;h++)i=c[h],o||(o=i,f.push(h)),i.lastPointOfContour?((i.nextPointOnContour=o).prevPointOnContour=i,o=void 0):(s=c[h+1],(i.nextPointOnContour=s).prevPointOnContour=i);if(!n.inhibitGridFit){if(t.DEBUG){console.log("PROCESSING GLYPH",n.stack);for(var p=0;p<l;p++)console.log(p,c[p].x,c[p].y)}if(c.push(new un(0,0),new un(Math.round(e.advanceWidth*r),0)),Ht(n),c.length-=2,t.DEBUG){console.log("FINISHED GLYPH",n.stack);for(var v=0;v<l;v++)console.log(v,c[v].x,c[v].y)}}},Ht=function(e){var n=e.prog;if(n){var r,a=n.length;for(e.ip=0;e.ip<a;e.ip++){if(t.DEBUG&&e.step++,!(r=Vt[n[e.ip]]))throw new Error("unknown instruction: 0x"+Number(n[e.ip]).toString(16));r(e)}}},Vt=[pn.bind(void 0,an),pn.bind(void 0,rn),vn.bind(void 0,an),vn.bind(void 0,rn),mn.bind(void 0,an),mn.bind(void 0,rn),gn.bind(void 0,0),gn.bind(void 0,1),yn.bind(void 0,0),yn.bind(void 0,1),function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",r,a),e.pv=e.dpv=sn(a,r)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",r,a),e.fv=sn(a,r)},function(e){var n=e.stack,r=e.pv;t.DEBUG&&console.log(e.step,"GPV[]"),n.push(16384*r.x),n.push(16384*r.y)},function(e){var n=e.stack,r=e.fv;t.DEBUG&&console.log(e.step,"GFV[]"),n.push(16384*r.x),n.push(16384*r.y)},function(e){e.fv=e.pv,t.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var n=e.stack,r=n.pop(),a=n.pop(),i=n.pop(),o=n.pop(),s=n.pop(),u=e.z0,l=e.z1,c=u[r],f=u[a],d=l[i],h=l[o],p=e.z2[s];t.DEBUG&&console.log("ISECT[], ",r,a,i,o,s);var v=c.x,m=c.y,g=f.x,y=f.y,b=d.x,x=d.y,w=h.x,k=h.y,S=(v-g)*(x-k)-(m-y)*(b-w),_=v*y-m*g,C=b*k-x*w;p.x=(_*(b-w)-C*(v-g))/S,p.y=(_*(x-k)-C*(m-y))/S},function(e){e.rp0=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP0[]",n),e.zp0=n){case 0:e.tZone||dn(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP1[]",n),e.zp1=n){case 0:e.tZone||dn(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP2[]",n),e.zp2=n){case 0:e.tZone||dn(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZPS[]",n),e.zp0=e.zp1=e.zp2=n,n){case 0:e.tZone||dn(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),t.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){t.DEBUG&&console.log(e.step,"RTG[]"),e.round=Qt},function(e){t.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Jt},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SMD[]",n),e.minDis=n/64},function(e){t.DEBUG&&console.log(e.step,"ELSE[]"),hn(e,!1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"JMPR[]",n),e.ip+=n-1},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCVTCI[]",n),e.cvCutIn=n/64},void 0,void 0,function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DUP[]"),n.push(n[n.length-1])},bn,function(e){t.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"SWAP[]"),n.push(r),n.push(a)},function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DEPTH[]"),n.push(n.length)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"CINDEX[]",r),n.push(n[n.length-r])},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"MINDEX[]",r),n.push(n.splice(n.length-r,1)[0])},void 0,void 0,void 0,function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"LOOPCALL[]",r,a);var i=e.ip,o=e.prog;e.prog=e.funcs[r];for(var s=0;s<a;s++)Ht(e),t.DEBUG&&console.log(++e.step,s+1<a?"next loopcall":"done loopcall",s);e.ip=i,e.prog=o},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"CALL[]",n);var r=e.ip,a=e.prog;e.prog=e.funcs[n],Ht(e),e.ip=r,e.prog=a,t.DEBUG&&console.log(++e.step,"returning from",n)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var n=e.stack,r=e.prog,a=e.ip,i=n.pop(),o=a;for(t.DEBUG&&console.log(e.step,"FDEF[]",i);45!==r[++a];);e.ip=a,e.funcs[i]=r.slice(o+1,a)},void 0,xn.bind(void 0,0),xn.bind(void 0,1),wn.bind(void 0,an),wn.bind(void 0,rn),kn.bind(void 0,0),kn.bind(void 0,1),Sn.bind(void 0,0),Sn.bind(void 0,1),_n.bind(void 0,0),_n.bind(void 0,1),function(e){for(var n=e.stack,r=e.loop,a=e.fv,i=n.pop()/64,o=e.z2;r--;){var s=n.pop(),u=o[s];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-r)+": ":"")+"SHPIX[]",s,i),a.setRelative(u,u,i),a.touch(u)}e.loop=1},function(e){for(var n=e.stack,r=e.rp1,a=e.rp2,i=e.loop,o=e.z0[r],s=e.z1[a],u=e.fv,l=e.dpv,c=e.z2;i--;){var f=n.pop(),d=c[f];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-i)+": ":"")+"IP[]",f,r,"<->",a),u.interpolate(d,o,s,l),u.touch(d)}e.loop=1},Cn.bind(void 0,0),Cn.bind(void 0,1),function(e){for(var n=e.stack,r=e.rp0,a=e.z0[r],i=e.loop,o=e.fv,s=e.pv,u=e.z1;i--;){var l=n.pop(),c=u[l];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-i)+": ":"")+"ALIGNRP[]",l),o.setRelative(c,a,0,s),o.touch(c)}e.loop=1},function(e){t.DEBUG&&console.log(e.step,"RTDG[]"),e.round=$t},En.bind(void 0,0),En.bind(void 0,1),function(e){var n=e.prog,r=e.ip,a=e.stack,i=n[++r];t.DEBUG&&console.log(e.step,"NPUSHB[]",i);for(var o=0;o<i;o++)a.push(n[++r]);e.ip=r},function(e){var n=e.ip,r=e.prog,a=e.stack,i=r[++n];t.DEBUG&&console.log(e.step,"NPUSHW[]",i);for(var o=0;o<i;o++){var s=r[++n]<<8|r[++n];32768&s&&(s=-(1+(65535^s))),a.push(s)}e.ip=n},function(e){var n=e.stack,r=e.store;r=r||(e.store=[]);var a=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"WS",a,i),r[i]=a},function(e){var n=e.stack,r=e.store,a=n.pop();t.DEBUG&&console.log(e.step,"RS",a);var i=r&&r[a]||0;n.push(i)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"WCVTP",r,a),e.cvt[a]=r/64},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"RCVT",r),n.push(64*e.cvt[r])},Tn.bind(void 0,0),Tn.bind(void 0,1),void 0,In.bind(void 0,0),In.bind(void 0,1),function(e){t.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){t.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"LT[]",r,a),n.push(a<r?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"LTEQ[]",r,a),n.push(a<=r?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"GT[]",r,a),n.push(r<a?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"GTEQ[]",r,a),n.push(r<=a?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"EQ[]",r,a),n.push(r===a?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"NEQ[]",r,a),n.push(r!==a?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"ODD[]",r),n.push(Math.trunc(r)%2?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"EVEN[]",r),n.push(Math.trunc(r)%2?0:1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"IF[]",n),n||(hn(e,!0),t.DEBUG&&console.log(e.step,"EIF[]"))},function(e){t.DEBUG&&console.log(e.step,"EIF[]")},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"AND[]",r,a),n.push(r&&a?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"OR[]",r,a),n.push(r||a?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"NOT[]",r),n.push(r?0:1)},An.bind(void 0,1),function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDB[]",n),e.deltaBase=n},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDS[]",n),e.deltaShift=Math.pow(.5,n)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"ADD[]",r,a),n.push(a+r)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"SUB[]",r,a),n.push(a-r)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"DIV[]",r,a),n.push(64*a/r)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"MUL[]",r,a),n.push(a*r/64)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"ABS[]",r),n.push(Math.abs(r))},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"NEG[]",r),n.push(-r)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"FLOOR[]",r),n.push(64*Math.floor(r/64))},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"CEILING[]",r),n.push(64*Math.ceil(r/64))},Nn.bind(void 0,0),Nn.bind(void 0,1),Nn.bind(void 0,2),Nn.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"WCVTF[]",r,a),e.cvt[a]=r*e.ppem/e.font.unitsPerEm},An.bind(void 0,2),An.bind(void 0,3),Rn.bind(void 0,1),Rn.bind(void 0,2),Rn.bind(void 0,3),function(e){var n,r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SROUND[]",r),e.round=nn,192&r){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*n},function(e){var n,r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"S45ROUND[]",r),e.round=nn,192&r){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*n},void 0,void 0,function(e){t.DEBUG&&console.log(e.step,"ROFF[]"),e.round=Zt},void 0,function(e){t.DEBUG&&console.log(e.step,"RUTG[]"),e.round=en},function(e){t.DEBUG&&console.log(e.step,"RDTG[]"),e.round=tn},bn,bn,void 0,void 0,void 0,void 0,void 0,function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANCTRL[]",n)},Mn.bind(void 0,0),Mn.bind(void 0,1),function(e){var n=e.stack,r=n.pop(),a=0;t.DEBUG&&console.log(e.step,"GETINFO[]",r),1&r&&(a=35),32&r&&(a|=4096),n.push(a)},void 0,function(e){var n=e.stack,r=n.pop(),a=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"ROLL[]"),n.push(a),n.push(r),n.push(i)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"MAX[]",r,a),n.push(Math.max(a,r))},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"MIN[]",r,a),n.push(Math.min(a,r))},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANTYPE[]",n)},function(e){var n=e.stack.pop(),r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"INSTCTRL[]",n,r),n){case 1:return void(e.inhibitGridFit=!!r);case 2:return void(e.ignoreCvt=!!r);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,On.bind(void 0,1),On.bind(void 0,2),On.bind(void 0,3),On.bind(void 0,4),On.bind(void 0,5),On.bind(void 0,6),On.bind(void 0,7),On.bind(void 0,8),Dn.bind(void 0,1),Dn.bind(void 0,2),Dn.bind(void 0,3),Dn.bind(void 0,4),Dn.bind(void 0,5),Dn.bind(void 0,6),Dn.bind(void 0,7),Dn.bind(void 0,8),Ln.bind(void 0,0,0,0,0,0),Ln.bind(void 0,0,0,0,0,1),Ln.bind(void 0,0,0,0,0,2),Ln.bind(void 0,0,0,0,0,3),Ln.bind(void 0,0,0,0,1,0),Ln.bind(void 0,0,0,0,1,1),Ln.bind(void 0,0,0,0,1,2),Ln.bind(void 0,0,0,0,1,3),Ln.bind(void 0,0,0,1,0,0),Ln.bind(void 0,0,0,1,0,1),Ln.bind(void 0,0,0,1,0,2),Ln.bind(void 0,0,0,1,0,3),Ln.bind(void 0,0,0,1,1,0),Ln.bind(void 0,0,0,1,1,1),Ln.bind(void 0,0,0,1,1,2),Ln.bind(void 0,0,0,1,1,3),Ln.bind(void 0,0,1,0,0,0),Ln.bind(void 0,0,1,0,0,1),Ln.bind(void 0,0,1,0,0,2),Ln.bind(void 0,0,1,0,0,3),Ln.bind(void 0,0,1,0,1,0),Ln.bind(void 0,0,1,0,1,1),Ln.bind(void 0,0,1,0,1,2),Ln.bind(void 0,0,1,0,1,3),Ln.bind(void 0,0,1,1,0,0),Ln.bind(void 0,0,1,1,0,1),Ln.bind(void 0,0,1,1,0,2),Ln.bind(void 0,0,1,1,0,3),Ln.bind(void 0,0,1,1,1,0),Ln.bind(void 0,0,1,1,1,1),Ln.bind(void 0,0,1,1,1,2),Ln.bind(void 0,0,1,1,1,3),Ln.bind(void 0,1,0,0,0,0),Ln.bind(void 0,1,0,0,0,1),Ln.bind(void 0,1,0,0,0,2),Ln.bind(void 0,1,0,0,0,3),Ln.bind(void 0,1,0,0,1,0),Ln.bind(void 0,1,0,0,1,1),Ln.bind(void 0,1,0,0,1,2),Ln.bind(void 0,1,0,0,1,3),Ln.bind(void 0,1,0,1,0,0),Ln.bind(void 0,1,0,1,0,1),Ln.bind(void 0,1,0,1,0,2),Ln.bind(void 0,1,0,1,0,3),Ln.bind(void 0,1,0,1,1,0),Ln.bind(void 0,1,0,1,1,1),Ln.bind(void 0,1,0,1,1,2),Ln.bind(void 0,1,0,1,1,3),Ln.bind(void 0,1,1,0,0,0),Ln.bind(void 0,1,1,0,0,1),Ln.bind(void 0,1,1,0,0,2),Ln.bind(void 0,1,1,0,0,3),Ln.bind(void 0,1,1,0,1,0),Ln.bind(void 0,1,1,0,1,1),Ln.bind(void 0,1,1,0,1,2),Ln.bind(void 0,1,1,0,1,3),Ln.bind(void 0,1,1,1,0,0),Ln.bind(void 0,1,1,1,0,1),Ln.bind(void 0,1,1,1,0,2),Ln.bind(void 0,1,1,1,0,3),Ln.bind(void 0,1,1,1,1,0),Ln.bind(void 0,1,1,1,1,1),Ln.bind(void 0,1,1,1,1,2),Ln.bind(void 0,1,1,1,1,3)];var jn=Array.from||function(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Pn(e){(e=e||{}).empty||(Ft(e.familyName,"When creating a new Font object, familyName is required."),Ft(e.styleName,"When creating a new Font object, styleName is required."),Ft(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Ft(e.ascender,"When creating a new Font object, ascender is required."),Ft(e.descender,"When creating a new Font object, descender is required."),Ft(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new xe.GlyphSet(this,e.glyphs||[]),this.encoding=new de(this),this.position=new Ot(this),this.substitution=new Dt(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new Kt(this):void 0}})}function Fn(e,t,n,r){var a={},i=new ie.Parser(e,t);a.name=r[i.parseUShort()]||{},i.skip("uShort",1),a.coordinates={};for(var o=0;o<n.length;++o)a.coordinates[n[o].tag]=i.parseFixed();return a}Pn.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},Pn.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},Pn.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e);return this.glyphs.get(t)||this.glyphs.get(0)},Pn.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;for(var n=jn(e),r=[],a=0;a<n.length;a+=1){var i=n[a];r.push(this.charToGlyphIndex(i))}var o=r.length;if(t.features){var s=t.script||this.substitution.getDefaultScriptName(),u=[];t.features.liga&&(u=u.concat(this.substitution.getFeature("liga",s,t.language))),t.features.rlig&&(u=u.concat(this.substitution.getFeature("rlig",s,t.language)));for(var l=0;l<o;l+=1)for(var c=0;c<u.length;c++){for(var f=u[c],d=f.sub,h=d.length,p=0;p<h&&d[p]===r[l+p];)p++;p===h&&(r.splice(l,h,f.by),o=o-h+1)}}for(var v=new Array(o),m=this.glyphs.get(0),g=0;g<o;g+=1)v[g]=this.glyphs.get(r[g])||m;return v},Pn.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},Pn.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e);return this.glyphs.get(t)||this.glyphs.get(0)},Pn.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},Pn.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,e,t):this.kerningPairs[e+","+t]||0},Pn.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Pn.prototype.forEachGlyph=function(e,t,n,r,a,i){t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:72,a=a||this.defaultRenderOptions;var o,s=1/this.unitsPerEm*r,u=this.stringToGlyphs(e,a);if(a.kerning){var l=a.script||this.position.getDefaultScriptName();o=this.position.getKerningTables(l,a.language)}for(var c=0;c<u.length;c+=1){var f=u[c];i.call(this,f,t,n,r,a),f.advanceWidth&&(t+=f.advanceWidth*s),a.kerning&&c<u.length-1&&(t+=(o?this.position.getKerningValue(o,f.index,u[c+1].index):this.getKerningValue(f,u[c+1]))*s),a.letterSpacing?t+=a.letterSpacing*r:a.tracking&&(t+=a.tracking/1e3*r)}return t},Pn.prototype.getPath=function(e,t,n,r,a){var i=new T;return this.forEachGlyph(e,t,n,r,a,(function(e,t,n,r){var o=e.getPath(t,n,r,a,this);i.extend(o)})),i},Pn.prototype.getPaths=function(e,t,n,r,a){var i=[];return this.forEachGlyph(e,t,n,r,a,(function(e,t,n,r){var o=e.getPath(t,n,r,a,this);i.push(o)})),i},Pn.prototype.getAdvanceWidth=function(e,t,n){return this.forEachGlyph(e,0,0,t,n,(function(){}))},Pn.prototype.draw=function(e,t,n,r,a,i){this.getPath(t,n,r,a,i).draw(e)},Pn.prototype.drawPoints=function(e,t,n,r,a,i){this.forEachGlyph(t,n,r,a,i,(function(t,n,r,a){t.drawPoints(e,n,r,a)}))},Pn.prototype.drawMetrics=function(e,t,n,r,a,i){this.forEachGlyph(t,n,r,a,i,(function(t,n,r,a){t.drawMetrics(e,n,r,a)}))},Pn.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},Pn.prototype.validate=function(){var e=this;function t(t){var n=e.getEnglishName(t);n&&n.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},Pn.prototype.toTables=function(){return It(this)},Pn.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Pn.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e[r];return t},Pn.prototype.download=function(t){var n=this.getEnglishName("fontFamily"),a=this.getEnglishName("fontSubfamily");t=t||n.replace(/\s/g,"")+"-"+a+".otf";var i=this.toArrayBuffer();if("undefined"!=typeof window)window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,i.byteLength,(function(e){e.root.getFile(t,{create:!0},(function(e){e.createWriter((function(t){var n=new DataView(i),r=new Blob([n],{type:"font/opentype"});t.write(r),t.addEventListener("writeend",(function(){location.href=e.toURL()}),!1)}))}))}),(function(e){throw new Error(e.name+": "+e.message)}));else{var o=e("fs"),s=function(e){for(var t=new r(e.byteLength),n=new Uint8Array(e),a=0;a<t.length;++a)t[a]=n[a];return t}(i);o.writeFileSync(t,s)}},Pn.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Pn.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Pn.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Bn=function(e,t,n){var r=new ie.Parser(e,t),a=r.parseULong();N.argument(65536===a,"Unsupported fvar table version.");var i=r.parseOffset16();r.skip("uShort",1);for(var o,s,u,l,c,f=r.parseUShort(),d=r.parseUShort(),h=r.parseUShort(),p=r.parseUShort(),v=[],m=0;m<f;m++)v.push((o=e,s=t+i+m*d,u=n,c=l=void 0,l={},c=new ie.Parser(o,s),l.tag=c.parseTag(),l.minValue=c.parseFixed(),l.defaultValue=c.parseFixed(),l.maxValue=c.parseFixed(),c.skip("uShort",1),l.name=u[c.parseUShort()]||{},l));for(var g=[],y=t+i+f*d,b=0;b<h;b++)g.push(Fn(e,y+b*p,v,n));return{axes:v,instances:g}},zn=new Array(10);zn[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(re.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(re.coverage),values:this.parseValueRecordList()}:void N.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},zn[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();N.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var n=this.parsePointer(re.coverage),r=this.parseUShort(),a=this.parseUShort();if(1===t)return{posFormat:t,coverage:n,valueFormat1:r,valueFormat2:a,pairSets:this.parseList(re.pointer(re.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(r),value2:this.parseValueRecord(a)}}))))};if(2===t){var i=this.parsePointer(re.classDef),o=this.parsePointer(re.classDef),s=this.parseUShort(),u=this.parseUShort();return{posFormat:t,coverage:n,valueFormat1:r,valueFormat2:a,classDef1:i,classDef2:o,class1Count:s,class2Count:u,classRecords:this.parseList(s,re.list(u,(function(){return{value1:this.parseValueRecord(r),value2:this.parseValueRecord(a)}})))}}},zn[3]=function(){return{error:"GPOS Lookup 3 not supported"}},zn[4]=function(){return{error:"GPOS Lookup 4 not supported"}},zn[5]=function(){return{error:"GPOS Lookup 5 not supported"}},zn[6]=function(){return{error:"GPOS Lookup 6 not supported"}},zn[7]=function(){return{error:"GPOS Lookup 7 not supported"}},zn[8]=function(){return{error:"GPOS Lookup 8 not supported"}},zn[9]=function(){return{error:"GPOS Lookup 9 not supported"}},new Array(10);var Un=function(e,t){var n=new re(e,t=t||0),r=n.parseVersion(1);return N.argument(1===r||1.1===r,"Unsupported GPOS table version "+r),1===r?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(zn)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(zn),variations:n.parseFeatureVariationsList()}},Wn=function(e,t){var n=new ie.Parser(e,t),r=n.parseUShort();if(0===r)return function(e){var t={};e.skip("uShort");var n=e.parseUShort();N.argument(0===n,"Unsupported kern sub-table version."),e.skip("uShort",2);var r=e.parseUShort();e.skip("uShort",3);for(var a=0;a<r;a+=1){var i=e.parseUShort(),o=e.parseUShort(),s=e.parseShort();t[i+","+o]=s}return t}(n);if(1===r)return function(e){var t={};e.skip("uShort"),1<e.parseULong()&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var n=255&e.parseUShort();if(e.skip("uShort"),0==n){var r=e.parseUShort();e.skip("uShort",3);for(var a=0;a<r;a+=1){var i=e.parseUShort(),o=e.parseUShort(),s=e.parseShort();t[i+","+o]=s}}return t}(n);throw new Error("Unsupported kern table version ("+r+").")},Gn=function(e,t,n,r){for(var a=new ie.Parser(e,t),i=r?a.parseUShort:a.parseULong,o=[],s=0;s<n+1;s+=1){var u=i.call(a);r&&(u*=2),o.push(u)}return o};function Vn(t,n){e("fs").readFile(t,(function(e,t){if(e)return n(e.message);n(null,Pt(t))}))}function Hn(e,t){var n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="arraybuffer",n.onload=function(){return n.response?t(null,n.response):t("Font could not be loaded: "+n.statusText)},n.onerror=function(){t("Font could not be loaded")},n.send()}function qn(e,t){for(var n=[],r=12,a=0;a<t;a+=1){var i=ie.getTag(e,r),o=ie.getULong(e,r+4),s=ie.getULong(e,r+8),u=ie.getULong(e,r+12);n.push({tag:i,checksum:o,offset:s,length:u,compression:!1}),r+=16}return n}function Xn(e,t){if("WOFF"!==t.compression)return{data:e,offset:t.offset};var n=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),r=new Uint8Array(t.length);if(function(e,t){var n,r,a=new o(e,t);do{switch(n=b(a),x(a,2,0)){case 0:r=_(a);break;case 1:r=S(a,s,u);break;case 2:k(a,a.ltree,a.dtree),r=S(a,a.ltree,a.dtree);break;default:r=-3}if(0!==r)throw new Error("Data error")}while(!n);a.destLen<a.dest.length?"function"==typeof a.dest.slice?a.dest.slice(0,a.destLen):a.dest.subarray(0,a.destLen):a.dest}(n,r),r.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(r.buffer,0),offset:0}}function Yn(e){var t,n,r,a,i,o,s,u,l,c,f,d,h,p,v=new Pn({empty:!0}),m=new DataView(e,0),g=[],y=ie.getTag(m,0);if(y===String.fromCharCode(0,1,0,0)||"true"===y||"typ1"===y)v.outlinesFormat="truetype",g=qn(m,r=ie.getUShort(m,4));else if("OTTO"===y)v.outlinesFormat="cff",g=qn(m,r=ie.getUShort(m,4));else{if("wOFF"!==y)throw new Error("Unsupported OpenType signature "+y);var b=ie.getTag(m,4);if(b===String.fromCharCode(0,1,0,0))v.outlinesFormat="truetype";else{if("OTTO"!==b)throw new Error("Unsupported OpenType flavor "+y);v.outlinesFormat="cff"}g=function(e,t){for(var n=[],r=44,a=0;a<t;a+=1){var i,o=ie.getTag(e,r),s=ie.getULong(e,r+4),u=ie.getULong(e,r+8),l=ie.getULong(e,r+12);i=u<l&&"WOFF",n.push({tag:o,offset:s,compression:i,compressedLength:u,length:l}),r+=20}return n}(m,r=ie.getUShort(m,12))}for(var x=0;x<r;x+=1){var w=g[x],k=void 0;switch(w.tag){case"cmap":k=Xn(m,w),v.tables.cmap=oe(k.data,k.offset),v.encoding=new he(v.tables.cmap);break;case"cvt ":k=Xn(m,w),p=new ie.Parser(k.data,k.offset),v.tables.cvt=p.parseShortList(w.length/2);break;case"fvar":i=w;break;case"fpgm":k=Xn(m,w),p=new ie.Parser(k.data,k.offset),v.tables.fpgm=p.parseByteList(w.length);break;case"head":k=Xn(m,w),v.tables.head=ze(k.data,k.offset),v.unitsPerEm=v.tables.head.unitsPerEm,t=v.tables.head.indexToLocFormat;break;case"hhea":k=Xn(m,w),v.tables.hhea=We(k.data,k.offset),v.ascender=v.tables.hhea.ascender,v.descender=v.tables.hhea.descender,v.numberOfHMetrics=v.tables.hhea.numberOfHMetrics;break;case"hmtx":l=w;break;case"ltag":k=Xn(m,w),n=Xe(k.data,k.offset);break;case"maxp":k=Xn(m,w),v.tables.maxp=Ye(k.data,k.offset),v.numGlyphs=v.tables.maxp.numGlyphs;break;case"name":d=w;break;case"OS/2":k=Xn(m,w),v.tables.os2=ft(k.data,k.offset);break;case"post":k=Xn(m,w),v.tables.post=pt(k.data,k.offset),v.glyphNames=new ve(v.tables.post);break;case"prep":k=Xn(m,w),p=new ie.Parser(k.data,k.offset),v.tables.prep=p.parseByteList(w.length);break;case"glyf":o=w;break;case"loca":f=w;break;case"CFF ":a=w;break;case"kern":c=w;break;case"GPOS":s=w;break;case"GSUB":u=w;break;case"meta":h=w}}var S=Xn(m,d);if(v.tables.name=ut(S.data,S.offset,n),v.names=v.tables.name,o&&f){var _=0===t,C=Xn(m,f),E=Gn(C.data,C.offset,v.numGlyphs,_),T=Xn(m,o);v.glyphs=Yt.parse(T.data,T.offset,E,v)}else{if(!a)throw new Error("Font doesn't contain TrueType or CFF outlines.");var I=Xn(m,a);Fe(I.data,I.offset,v)}var A=Xn(m,l);if(Ve(A.data,A.offset,v.numberOfHMetrics,v.numGlyphs,v.glyphs),function(e){for(var t,n=e.tables.cmap.glyphIndexMap,r=Object.keys(n),a=0;a<r.length;a+=1){var i=r[a],o=n[i];(t=e.glyphs.get(o)).addUnicode(parseInt(i))}for(var s=0;s<e.glyphs.length;s+=1)t=e.glyphs.get(s),e.cffEncoding?e.isCIDFont?t.name="gid"+s:t.name=e.cffEncoding.charset[s]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(s))}(v),c){var N=Xn(m,c);v.kerningPairs=Wn(N.data,N.offset)}else v.kerningPairs={};if(s){var R=Xn(m,s);v.tables.gpos=Un(R.data,R.offset),v.position.init()}if(u){var M=Xn(m,u);v.tables.gsub=bt(M.data,M.offset)}if(i){var O=Xn(m,i);v.tables.fvar=Bn(O.data,O.offset,v.names)}if(h){var D=Xn(m,h);v.tables.meta=wt(D.data,D.offset),v.metas=v.tables.meta}return v}t.Font=Pn,t.Glyph=ge,t.Path=T,t.BoundingBox=E,t._parse=ie,t.parse=Yn,t.load=function(e,t){("undefined"==typeof window?Vn:Hn)(e,(function(e,n){if(e)return t(e);var r;try{r=Yn(n)}catch(e){return t(e,null)}return t(null,r)}))},t.loadSync=function(t){return Yn(Pt(e("fs").readFileSync(t)))},Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==t?n:this.opentype={})}).call(this,e("buffer").Buffer)},{buffer:4,fs:2}],237:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;0<=r;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}n.resolve=function(){for(var n="",a=!1,i=arguments.length-1;-1<=i&&!a;i--){var o=0<=i?arguments[i]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(n=o+"/"+n,a="/"===o.charAt(0))}return(a?"/":"")+(n=t(r(n.split("/"),(function(e){return!!e})),!a).join("/"))||"."},n.normalize=function(e){var i=n.isAbsolute(e),o="/"===a(e,-1);return(e=t(r(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return n<t?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var a=r(e.split("/")),i=r(t.split("/")),o=Math.min(a.length,i.length),s=o,u=0;u<o;u++)if(a[u]!==i[u]){s=u;break}var l=[];for(u=s;u<a.length;u++)l.push("..");return(l=l.concat(i.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,a=!0,i=e.length-1;1<=i;--i)if(47===(t=e.charCodeAt(i))){if(!a){r=i;break}}else a=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},n.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,a=!0;for(t=e.length-1;0<=t;--t)if(47===e.charCodeAt(t)){if(!a){n=t+1;break}}else-1===r&&(a=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,a=!0,i=0,o=e.length-1;0<=o;--o){var s=e.charCodeAt(o);if(47===s){if(a)continue;n=o+1;break}-1===r&&(a=!1,r=o+1),46===s?-1===t?t=o:1!==i&&(i=1):-1!==t&&(i=-1)}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===n+1?"":e.slice(t,r)};var a=function(e,t,n){return e.substr(t,n)}}).call(this,e("_process"))},{_process:238}],238:[function(e,t,n){var r,a,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(e){a=s}}();var l,c=[],f=!1,d=-1;function h(){f&&l&&(f=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!f){var e=u(h);f=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,f=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new v(e,t)),1!==c.length||f||u(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],239:[function(e,t,n){!function(e){"use strict";if(!e.fetch){var t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in e,i="ArrayBuffer"in e;if(i)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},u=ArrayBuffer.isView||function(e){return e&&-1<o.indexOf(Object.prototype.toString.call(e))};p.prototype.append=function(e,t){e=f(e),t=d(t);var n=this.map[e];this.map[e]=n?n+","+t:t},p.prototype.delete=function(e){delete this.map[f(e)]},p.prototype.get=function(e){return e=f(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(f(e))},p.prototype.set=function(e,t){this.map[f(e)]=d(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var l=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];x.prototype.clone=function(){return new x(this,{body:this._bodyInit})},b.call(x.prototype),b.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},k.error=function(){var e=new k(null,{status:0,statusText:""});return e.type="error",e};var c=[301,302,303,307,308];k.redirect=function(e,t){if(-1===c.indexOf(t))throw new RangeError("Invalid status code");return new k(null,{status:t,headers:{location:e}})},e.Headers=p,e.Request=x,e.Response=k,e.fetch=function(e,t){return new Promise((function(n,a){var i=new x(e,t),o=new XMLHttpRequest;o.onload=function(){var e,t,r={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var a=n.join(":").trim();t.append(r,a)}})),t)};r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var a="response"in o?o.response:o.responseText;n(new k(a,r))},o.onerror=function(){a(new TypeError("Network request failed"))},o.ontimeout=function(){a(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&r&&(o.responseType="blob"),i.headers.forEach((function(e,t){o.setRequestHeader(t,e)})),o.send(void 0===i._bodyInit?null:i._bodyInit)}))},e.fetch.polyfill=!0}function f(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function v(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(a&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(i&&r&&s(e))this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(e)&&!u(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=y(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=v(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,n,r=v(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=m(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function x(e,t){var n,r,a=(t=t||{}).body;if(e instanceof x){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,a||null==e._bodyInit||(a=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),-1<l.indexOf(r)?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(a)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),a=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}})),t}function k(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},{}],240:[function(e,t,n){"use strict";e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=o(e("../core/main")),i=o(e("../color/color_conversion"));function o(e){return e&&e.__esModule?e:{default:e}}var s=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],u=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];a.default.prototype._rgbColorName=function(e){var t=i.default._rgbaToHSBA(e);return function(e){var t;if(0!==e[0]){e[0]=Math.round(100*e[0]);var n=e[0].toString().split(""),a=n.length-1;n[a]=parseInt(n[a]),n[a]<2.5?n[a]=0:2.5<=n[a]&&n[a]<7.5&&(n[a]=5),2===n.length?(n[0]=parseInt(n[0]),7.5<=n[a]&&(n[a]=0,n[0]=n[0]+1),e[0]=10*n[0]+n[1]):7.5<=n[a]?e[0]=10:e[0]=n[a]}e[2]=e[2]/255;for(var i=e.length-1;1<=i;i--)e[i]<=.25?e[i]=0:.25<e[i]&&e[i]<.75?e[i]=.5:e[i]=1;if(0===e[0]&&0===e[1]&&1===e[2]){for(var o=2;0<=o;o--)r[o]=Math.round(1e4*r[o])/1e4;for(var l=0;l<s.length;l++){if(s[l].h===r[0]&&s[l].s===r[1]&&s[l].b===r[2]){t=s[l].name;break}t="white"}}else for(var c=0;c<u.length;c++)if(u[c].h===e[0]&&u[c].s===e[1]&&u[c].b===e[2]){t=u[c].name;break}return t}([(r=t)[0],t[1],t[2]])};var l=a.default;n.default=l},{"../color/color_conversion":246,"../core/main":260,"core-js/modules/es.function.name":163,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.split":188}],241:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},i="_Description",o="_fallbackDesc",s="_fallbackTable",u="_Label",l="_labelDesc",c="_labelTable";function f(e){if("label"===e||"fallback"===e)throw new Error("description should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")||e.endsWith("?")||e.endsWith("!")||(e+="."),e}a.default.prototype.describe=function(e,t){if(a.default._validateParameters("describe",arguments),"string"==typeof e){var n=this.canvas.id;e=f(e),this.dummyDOM||(this.dummyDOM=document.getElementById(n).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==e&&(this.descriptions.fallback.innerHTML=e):this._describeHTML("fallback",e),t===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==e&&(this.descriptions.label.innerHTML=e):this._describeHTML("label",e))}},a.default.prototype.describeElement=function(e,t,n){if(a.default._validateParameters("describeElement",arguments),"string"==typeof t&&"string"==typeof e){var r=this.canvas.id;t=f(t);var i=function(e){if("label"===e||"fallback"===e)throw new Error("element name should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")?e=e.replace(/.$/,":"):e.endsWith(":")||(e+=":"),e}(e);e=e.replace(/[^a-zA-Z0-9 ]/g,"");var o='<th scope="row">'.concat(i,"</th><td>").concat(t,"</td>");this.dummyDOM||(this.dummyDOM=document.getElementById(r).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[e]?this.descriptions.fallbackElements[e].innerHTML!==o&&(this.descriptions.fallbackElements[e].innerHTML=o):this._describeElementHTML("fallback",e,o),n===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[e]?this.descriptions.labelElements[e].innerHTML!==o&&(this.descriptions.labelElements[e].innerHTML=o):this._describeElementHTML("label",e,o))}},a.default.prototype._describeHTML=function(e,t){var n=this.canvas.id;if("fallback"===e){if(this.dummyDOM.querySelector("#".concat(n+i)))this.dummyDOM.querySelector("#"+n+s).insertAdjacentHTML("beforebegin",'<p id="'.concat(n+o,'"></p>'));else{var r='<div id="'.concat(n).concat(i,'" role="region" aria-label="Canvas Description"><p id="').concat(n).concat(o,'"></p></div>');this.dummyDOM.querySelector("#".concat(n,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(n,"accessibleOutput")).insertAdjacentHTML("beforebegin",r):this.dummyDOM.querySelector("#".concat(n)).innerHTML=r}return this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(n).concat(o)),void(this.descriptions.fallback.innerHTML=t)}if("label"===e){if(this.dummyDOM.querySelector("#".concat(n+u)))this.dummyDOM.querySelector("#".concat(n+c))&&this.dummyDOM.querySelector("#".concat(n+c)).insertAdjacentHTML("beforebegin",'<p id="'.concat(n).concat(l,'"></p>'));else{var a='<div id="'.concat(n).concat(u,'" class="p5Label"><p id="').concat(n).concat(l,'"></p></div>');this.dummyDOM.querySelector("#".concat(n,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(n,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",a):this.dummyDOM.querySelector("#"+n).insertAdjacentHTML("afterend",a)}return this.descriptions.label=this.dummyDOM.querySelector("#"+n+l),void(this.descriptions.label.innerHTML=t)}},a.default.prototype._describeElementHTML=function(e,t,n){var r=this.canvas.id;if("fallback"===e){if(this.dummyDOM.querySelector("#".concat(r+i)))this.dummyDOM.querySelector("#"+r+s)||this.dummyDOM.querySelector("#"+r+o).insertAdjacentHTML("afterend",'<table id="'.concat(r).concat(s,'"><caption>Canvas elements and their descriptions</caption></table>'));else{var a='<div id="'.concat(r).concat(i,'" role="region" aria-label="Canvas Description"><table id="').concat(r).concat(s,'"><caption>Canvas elements and their descriptions</caption></table></div>');this.dummyDOM.querySelector("#".concat(r,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutput")).insertAdjacentHTML("beforebegin",a):this.dummyDOM.querySelector("#"+r).innerHTML=a}var f=document.createElement("tr");return f.id=r+"_fte_"+t,this.dummyDOM.querySelector("#"+r+s).appendChild(f),this.descriptions.fallbackElements[t]=this.dummyDOM.querySelector("#".concat(r).concat("_fte_").concat(t)),void(this.descriptions.fallbackElements[t].innerHTML=n)}if("label"===e){if(this.dummyDOM.querySelector("#".concat(r+u)))this.dummyDOM.querySelector("#".concat(r+c))||this.dummyDOM.querySelector("#"+r+l).insertAdjacentHTML("afterend",'<table id="'.concat(r+c,'"></table>'));else{var d='<div id="'.concat(r).concat(u,'" class="p5Label"><table id="').concat(r).concat(c,'"></table></div>');this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",d):this.dummyDOM.querySelector("#"+r).insertAdjacentHTML("afterend",d)}var h=document.createElement("tr");h.id=r+"_lte_"+t,this.dummyDOM.querySelector("#"+r+c).appendChild(h),this.descriptions.labelElements[t]=this.dummyDOM.querySelector("#".concat(r).concat("_lte_").concat(t)),this.descriptions.labelElements[t].innerHTML=n}};var d=a.default;n.default=d},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.ends-with":181,"core-js/modules/es.string.replace":186}],242:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype._updateGridOutput=function(e){if(this.dummyDOM.querySelector("#".concat(e,"_summary"))){var t=this._accessibleOutputs[e],n=function(e,t){var n="",r="",a=0;for(var i in t){var o=0;for(var s in t[i]){var u='<li id="'.concat(e,"shape").concat(a,'">').concat(t[i][s].color," ").concat(i,",");"line"===i?u+=" location = ".concat(t[i][s].pos,", length = ").concat(t[i][s].length," pixels"):(u+=" location = ".concat(t[i][s].pos),"point"!==i&&(u+=", area = ".concat(t[i][s].area," %")),u+="</li>"),n+=u,o++,a++}r=1<o?"".concat(r," ").concat(o," ").concat(i,"s"):"".concat(r," ").concat(o," ").concat(i)}return{numShapes:[a,r],details:n}}(e,this.ingredients.shapes),r=function(e,t,n,r){var a="".concat(t," canvas, ").concat(n," by ").concat(r," pixels, contains ").concat(e[0]);return 1===e[0]?"".concat(a," shape: ").concat(e[1]):"".concat(a," shapes: ").concat(e[1])}(n.numShapes,this.ingredients.colors.background,this.width,this.height),a=function(e,t){var n=0,r="",a=Array.apply(null,Array(10)).map((function(){}));for(var i in a)a[i]=Array.apply(null,Array(10)).map((function(){}));for(var o in t)for(var s in t[o]){var u;u="line"!==o?'<a href="#'.concat(e,"shape").concat(n,'">').concat(t[o][s].color," ").concat(o,"</a>"):'<a href="#'.concat(e,"shape").concat(n,'">').concat(t[o][s].color," ").concat(o," midpoint</a>"),a[t[o][s].loc.locY][t[o][s].loc.locX]?a[t[o][s].loc.locY][t[o][s].loc.locX]=a[t[o][s].loc.locY][t[o][s].loc.locX]+"  "+u:a[t[o][s].loc.locY][t[o][s].loc.locX]=u,n++}for(var l in a){var c="<tr>";for(var f in a[l])c+="<td>",void 0!==a[l][f]&&(c+=a[l][f]),c+="</td>";r=r+c+"</tr>"}return r}(e,this.ingredients.shapes);r!==t.summary.innerHTML&&(t.summary.innerHTML=r),a!==t.map.innerHTML&&(t.map.innerHTML=a),n.details!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=n.details),this._accessibleOutputs[e]=t}};var i=a.default;n.default=i},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.map":159}],243:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e,t,n){return e[0]<.4*t?e[1]<.4*n?"top left":e[1]>.6*n?"bottom left":"mid left":e[0]>.6*t?e[1]<.4*n?"top right":e[1]>.6*n?"bottom right":"mid right":e[1]<.4*n?"top middle":e[1]>.6*n?"bottom middle":"middle"}function o(e,t,n){var r=Math.floor(e[0]/t*10),a=Math.floor(e[1]/n*10);return 10===r&&--r,10===a&&--a,{locX:r,locY:a}}a.default.prototype.textOutput=function(e){a.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},a.default.prototype.gridOutput=function(e){a.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},a.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},a.default.prototype._createOutput=function(e,t){var n,r,a,i=this.canvas.id;this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(i).parentNode);var o="";"Fallback"===t?(n=i+e,r=i+"accessibleOutput",this.dummyDOM.querySelector("#".concat(r))||(this.dummyDOM.querySelector("#".concat(i,"_Description"))?this.dummyDOM.querySelector("#".concat(i,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(r,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(i)).innerHTML='<div id="'.concat(r,'" role="region" aria-label="Canvas Outputs"></div>'))):"Label"===t&&(n=i+e+(o=t),r=i+"accessibleOutput"+t,this.dummyDOM.querySelector("#".concat(r))||(this.dummyDOM.querySelector("#".concat(i,"_Label"))?this.dummyDOM.querySelector("#".concat(i,"_Label")).insertAdjacentHTML("afterend",'<div id="'.concat(r,'"></div>')):this.dummyDOM.querySelector("#".concat(i)).insertAdjacentHTML("afterend",'<div id="'.concat(r,'"></div>')))),this._accessibleOutputs[n]={},"textOutput"===e?(o="#".concat(i,"gridOutput").concat(o),a='<div id="'.concat(n,'">Text Output<div id="').concat(n,'Summary" aria-label="text output summary"><p id="').concat(n,'_summary"></p><ul id="').concat(n,'_list"></ul></div><table id="').concat(n,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(o)?this.dummyDOM.querySelector(o).insertAdjacentHTML("beforebegin",a):this.dummyDOM.querySelector("#".concat(r)).innerHTML=a,this._accessibleOutputs[n].list=this.dummyDOM.querySelector("#".concat(n,"_list"))):"gridOutput"===e&&(o="#".concat(i,"textOutput").concat(o),a='<div id="'.concat(n,'">Grid Output<p id="').concat(n,'_summary" aria-label="grid output summary"><table id="').concat(n,'_map" summary="grid output content"></table><ul id="').concat(n,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(o)?this.dummyDOM.querySelector(o).insertAdjacentHTML("afterend",a):this.dummyDOM.querySelector("#".concat(r)).innerHTML=a,this._accessibleOutputs[n].map=this.dummyDOM.querySelector("#".concat(n,"_map"))),this._accessibleOutputs[n].shapeDetails=this.dummyDOM.querySelector("#".concat(n,"_shapeDetails")),this._accessibleOutputs[n].summary=this.dummyDOM.querySelector("#".concat(n,"_summary"))},a.default.prototype._updateAccsOutput=function(){var e=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(e+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(e+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(e+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(e+"gridOutputLabel"))},a.default.prototype._accsBackground=function(e){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==e&&(this.ingredients.colors.backgroundRGBA=e,this.ingredients.colors.background=this._rgbColorName(e))},a.default.prototype._accsCanvasColors=function(e,t){"fill"===e?this.ingredients.colors.fillRGBA!==t&&(this.ingredients.colors.fillRGBA=t,this.ingredients.colors.fill=this._rgbColorName(t)):"stroke"===e&&this.ingredients.colors.strokeRGBA!==t&&(this.ingredients.colors.strokeRGBA=t,this.ingredients.colors.stroke=this._rgbColorName(t))},a.default.prototype._accsOutput=function(e,t){"ellipse"===e&&t[2]===t[3]?e="circle":"rectangle"===e&&t[2]===t[3]&&(e="square");var n={},r=!0,a=function(e,t){var n,r;return r="rectangle"===e||"ellipse"===e||"arc"===e||"circle"===e||"square"===e?(n=Math.round(t[0]+t[2]/2),Math.round(t[1]+t[3]/2)):"triangle"===e?(n=(t[0]+t[2]+t[4])/3,(t[1]+t[3]+t[5])/3):"quadrilateral"===e?(n=(t[0]+t[2]+t[4]+t[6])/4,(t[1]+t[3]+t[5]+t[7])/4):"line"===e?(n=(t[0]+t[2])/2,(t[1]+t[3])/2):(n=t[0],t[1]),[n,r]}(e,t);if("line"===e){n.color=this.ingredients.colors.stroke,n.length=Math.round(this.dist(t[0],t[1],t[2],t[3]));var s=i([t[0],[1]],this.width,this.height),u=i([t[2],[3]],this.width,this.height);n.loc=o(a,this.width,this.height),n.pos=s===u?"at ".concat(s):"from ".concat(s," to ").concat(u)}else"point"===e?n.color=this.ingredients.colors.stroke:(n.color=this.ingredients.colors.fill,n.area=function(e,t,n,r){var a=0;if("arc"===e){var i=((t[5]-t[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(a=i*t[2]*t[3]/8,"open"===t[6]||"chord"===t[6]){var o=t[0],s=t[1],u=t[0]+t[2]/2*Math.cos(t[4]).toFixed(2),l=t[1]+t[3]/2*Math.sin(t[4]).toFixed(2),c=t[0]+t[2]/2*Math.cos(t[5]).toFixed(2),f=t[1]+t[3]/2*Math.sin(t[5]).toFixed(2),d=Math.abs(o*(l-f)+u*(f-s)+c*(s-l))/2;i>Math.PI?a+=d:a-=d}}else"ellipse"===e||"circle"===e?a=3.14*t[2]/2*t[3]/2:"line"===e||"point"===e?a=0:"quadrilateral"===e?a=Math.abs((t[6]+t[0])*(t[7]-t[1])+(t[0]+t[2])*(t[1]-t[3])+(t[2]+t[4])*(t[3]-t[5])+(t[4]+t[6])*(t[5]-t[7]))/2:"rectangle"===e||"square"===e?a=t[2]*t[3]:"triangle"===e&&(a=Math.abs(t[0]*(t[3]-t[5])+t[2]*(t[5]-t[1])+t[4]*(t[1]-t[3]))/2);return Math.round(100*a/(n*r))}(e,t,this.width,this.height)),n.pos=i(a,this.width,this.height),n.loc=o(a,this.width,this.height);if(this.ingredients.shapes[e]){if(this.ingredients.shapes[e]!==[n]){for(var l in this.ingredients.shapes[e])JSON.stringify(this.ingredients.shapes[e][l])===JSON.stringify(n)&&(r=!1);!0===r&&this.ingredients.shapes[e].push(n)}}else this.ingredients.shapes[e]=[n]};var s=a.default;n.default=s},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.map":159,"core-js/modules/es.number.to-fixed":169}],244:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype._updateTextOutput=function(e){if(this.dummyDOM.querySelector("#".concat(e,"_summary"))){var t=this._accessibleOutputs[e],n=function(e,t){var n="",r=0;for(var a in t)for(var i in t[a]){var o='<li><a href="#'.concat(e,"shape").concat(r,'">').concat(t[a][i].color," ").concat(a,"</a>");"line"===a?o+=", ".concat(t[a][i].pos,", ").concat(t[a][i].length," pixels long.</li>"):(o+=", at ".concat(t[a][i].pos),"point"!==a&&(o+=", covering ".concat(t[a][i].area,"% of the canvas")),o+=".</li>"),n+=o,r++}return{numShapes:r,listShapes:n}}(e,this.ingredients.shapes),r=function(e,t,n,r){var a="Your output is a, ".concat(n," by ").concat(r," pixels, ").concat(t," canvas containing the following");return 1===e?"".concat(a," shape:"):"".concat(a," ").concat(e," shapes:")}(n.numShapes,this.ingredients.colors.background,this.width,this.height),a=function(e,t){var n="",r=0;for(var a in t)for(var i in t[a]){var o='<tr id="'.concat(e,"shape").concat(r,'"><th>').concat(t[a][i].color," ").concat(a,"</th>");"line"===a?o+="<td>location = ".concat(t[a][i].pos,"</td><td>length = ").concat(t[a][i].length," pixels</td></tr>"):(o+="<td>location = ".concat(t[a][i].pos,"</td>"),"point"!==a&&(o+="<td> area = ".concat(t[a][i].area,"%</td>")),o+="</tr>"),n+=o,r++}return n}(e,this.ingredients.shapes);r!==t.summary.innerHTML&&(t.summary.innerHTML=r),n.listShapes!==t.list.innerHTML&&(t.list.innerHTML=n.listShapes),a!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=a),this._accessibleOutputs[e]=t}};var i=a.default;n.default=i},{"../core/main":260,"core-js/modules/es.array.concat":148}],245:[function(e,t,n){"use strict";var r,a=(r=e("./core/main"))&&r.__esModule?r:{default:r};e("./core/constants"),e("./core/environment"),e("./core/friendly_errors/stacktrace"),e("./core/friendly_errors/validate_params"),e("./core/friendly_errors/file_errors"),e("./core/friendly_errors/fes_core"),e("./core/helpers"),e("./core/legacy"),e("./core/preload"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./accessibility/outputs"),e("./accessibility/textOutput"),e("./accessibility/gridOutput"),e("./accessibility/color_namer"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./data/local_storage.js"),e("./dom/dom"),e("./accessibility/describe"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Shader"),e("./webgl/p5.RenderBuffer"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),t.exports=a.default},{"./accessibility/color_namer":240,"./accessibility/describe":241,"./accessibility/gridOutput":242,"./accessibility/outputs":243,"./accessibility/textOutput":244,"./color/color_conversion":246,"./color/creating_reading":247,"./color/p5.Color":248,"./color/setting":249,"./core/constants":250,"./core/environment":251,"./core/friendly_errors/fes_core":252,"./core/friendly_errors/file_errors":253,"./core/friendly_errors/stacktrace":254,"./core/friendly_errors/validate_params":255,"./core/helpers":256,"./core/init":257,"./core/legacy":259,"./core/main":260,"./core/p5.Element":261,"./core/p5.Graphics":262,"./core/p5.Renderer":263,"./core/p5.Renderer2D":264,"./core/preload":265,"./core/rendering":266,"./core/shape/2d_primitives":267,"./core/shape/attributes":268,"./core/shape/curves":269,"./core/shape/vertex":270,"./core/shim":271,"./core/structure":272,"./core/transform":273,"./data/local_storage.js":274,"./data/p5.TypedDict":275,"./dom/dom":276,"./events/acceleration":277,"./events/keyboard":278,"./events/mouse":279,"./events/touch":280,"./image/filters":281,"./image/image":282,"./image/loading_displaying":283,"./image/p5.Image":284,"./image/pixels":285,"./io/files":286,"./io/p5.Table":287,"./io/p5.TableRow":288,"./io/p5.XML":289,"./math/calculation":290,"./math/math":291,"./math/noise":292,"./math/p5.Vector":293,"./math/random":294,"./math/trigonometry":295,"./typography/attributes":296,"./typography/loading_displaying":297,"./typography/p5.Font":298,"./utilities/array_functions":299,"./utilities/conversion":300,"./utilities/string_functions":301,"./utilities/time_date":302,"./webgl/3d_primitives":303,"./webgl/interaction":304,"./webgl/light":305,"./webgl/loading":306,"./webgl/material":307,"./webgl/p5.Camera":308,"./webgl/p5.Geometry":309,"./webgl/p5.Matrix":310,"./webgl/p5.RenderBuffer":311,"./webgl/p5.RendererGL":314,"./webgl/p5.RendererGL.Immediate":312,"./webgl/p5.RendererGL.Retained":313,"./webgl/p5.Shader":315,"./webgl/p5.Texture":316,"./webgl/text":317}],246:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.ColorConversion={},a.default.ColorConversion._hsbaToHSLA=function(e){var t=e[0],n=e[1],r=e[2],a=(2-n)*r/2;return 0!=a&&(1==a?n=0:a<.5?n/=2-n:n=n*r/(2-2*a)),[t,n,a,e[3]]},a.default.ColorConversion._hsbaToRGBA=function(e){var t=6*e[0],n=e[1],r=e[2],a=[];if(0===n)a=[r,r,r,e[3]];else{var i,o,s,u=Math.floor(t),l=r*(1-n),c=r*(1-n*(t-u)),f=r*(1-n*(1+u-t));s=1===u?(i=c,o=r,l):2===u?(i=l,o=r,f):3===u?(i=l,o=c,r):4===u?(i=f,o=l,r):5===u?(i=r,o=l,c):(i=r,o=f,l),a=[i,o,s,e[3]]}return a},a.default.ColorConversion._hslaToHSBA=function(e){var t,n=e[0],r=e[1],a=e[2];return[n,r=2*((t=a<.5?(1+r)*a:a+r-a*r)-a)/t,t,e[3]]},a.default.ColorConversion._hslaToRGBA=function(e){var t=6*e[0],n=e[1],r=e[2],a=[];if(0===n)a=[r,r,r,e[3]];else{var i,o=2*r-(i=r<.5?(1+n)*r:r+n-r*n),s=function(e,t,n){return e<0?e+=6:6<=e&&(e-=6),e<1?t+(n-t)*e:e<3?n:e<4?t+(n-t)*(4-e):t};a=[s(2+t,o,i),s(t,o,i),s(t-2,o,i),e[3]]}return a},a.default.ColorConversion._rgbaToHSBA=function(e){var t,n,r=e[0],a=e[1],i=e[2],o=Math.max(r,a,i),s=o-Math.min(r,a,i);return 0==s?n=t=0:(n=s/o,r===o?t=(a-i)/s:a===o?t=2+(i-r)/s:i===o&&(t=4+(r-a)/s),t<0?t+=6:6<=t&&(t-=6)),[t/6,n,o,e[3]]},a.default.ColorConversion._rgbaToHSLA=function(e){var t,n,r=e[0],a=e[1],i=e[2],o=Math.max(r,a,i),s=Math.min(r,a,i),u=o+s,l=o-s;return 0==l?n=t=0:(n=u<1?l/u:l/(2-u),r===o?t=(a-i)/l:a===o?t=2+(i-r)/l:i===o&&(t=4+(r-a)/l),t<0?t+=6:6<=t&&(t-=6)),[t/6,n,u/2,e[3]]};var i=a.default.ColorConversion;n.default=i},{"../core/main":260}],247:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.map"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));e("./p5.Color"),e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),i.default.prototype.alpha=function(e){return i.default._validateParameters("alpha",arguments),this.color(e)._getAlpha()},i.default.prototype.blue=function(e){return i.default._validateParameters("blue",arguments),this.color(e)._getBlue()},i.default.prototype.brightness=function(e){return i.default._validateParameters("brightness",arguments),this.color(e)._getBrightness()},i.default.prototype.color=function(){if(i.default._validateParameters("color",arguments),arguments[0]instanceof i.default.Color)return arguments[0];var e=arguments[0]instanceof Array?arguments[0]:arguments;return new i.default.Color(this,e)},i.default.prototype.green=function(e){return i.default._validateParameters("green",arguments),this.color(e)._getGreen()},i.default.prototype.hue=function(e){return i.default._validateParameters("hue",arguments),this.color(e)._getHue()},i.default.prototype.lerpColor=function(e,t,n){i.default._validateParameters("lerpColor",arguments);var r,a,s,u,l,c,f=this._colorMode,d=this._colorMaxes;if(f===o.RGB)l=e.levels.map((function(e){return e/255})),c=t.levels.map((function(e){return e/255}));else if(f===o.HSB)e._getBrightness(),t._getBrightness(),l=e.hsba,c=t.hsba;else{if(f!==o.HSL)throw new Error("".concat(f,"cannot be used for interpolation."));e._getLightness(),t._getLightness(),l=e.hsla,c=t.hsla}return n=Math.max(Math.min(n,1),0),void 0===this.lerp&&(this.lerp=function(e,t,n){return n*(t-e)+e}),r=this.lerp(l[0],c[0],n),a=this.lerp(l[1],c[1],n),s=this.lerp(l[2],c[2],n),u=this.lerp(l[3],c[3],n),r*=d[f][0],a*=d[f][1],s*=d[f][2],u*=d[f][3],this.color(r,a,s,u)},i.default.prototype.lightness=function(e){return i.default._validateParameters("lightness",arguments),this.color(e)._getLightness()},i.default.prototype.red=function(e){return i.default._validateParameters("red",arguments),this.color(e)._getRed()},i.default.prototype.saturation=function(e){return i.default._validateParameters("saturation",arguments),this.color(e)._getSaturation()};var s=i.default;n.default=s},{"../core/constants":250,"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/main":260,"./p5.Color":248,"core-js/modules/es.array.map":159}],248:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.trim"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=s(e("../core/main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants")),o=s(e("./color_conversion"));function s(e){return e&&e.__esModule?e:{default:e}}a.default.Color=function(e,t){if(this._storeModeAndMaxes(e._colorMode,e._colorMaxes),this.mode!==i.RGB&&this.mode!==i.HSL&&this.mode!==i.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=a.default.Color._parseInputs.apply(this,t),this._calculateLevels(),this},a.default.Color.prototype.toString=function(e){var t=this.levels,n=this._array,r=n[3];switch(e){case"#rrggbb":return"#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16));case"#rrggbbaa":return"#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16),t[3]<16?"0".concat(t[3].toString(16)):t[3].toString(16));case"#rgb":return"#".concat(Math.round(15*n[0]).toString(16),Math.round(15*n[1]).toString(16),Math.round(15*n[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*n[0]).toString(16),Math.round(15*n[1]).toString(16),Math.round(15*n[2]).toString(16),Math.round(15*n[3]).toString(16));case"rgb":return"rgb(".concat(t[0],", ",t[1],", ",t[2],")");case"rgb%":return"rgb(".concat((100*n[0]).toPrecision(3),"%, ",(100*n[1]).toPrecision(3),"%, ",(100*n[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*n[0]).toPrecision(3),"%, ",(100*n[1]).toPrecision(3),"%, ",(100*n[2]).toPrecision(3),"%, ",(100*n[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=o.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[i.HSB][0],", ",this.hsba[1]*this.maxes[i.HSB][1],", ",this.hsba[2]*this.maxes[i.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=o.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=o.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[i.HSB][0],", ",this.hsba[1]*this.maxes[i.HSB][1],", ",this.hsba[2]*this.maxes[i.HSB][2],", ",r,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=o.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*r).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=o.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[i.HSL][0],", ",this.hsla[1]*this.maxes[i.HSL][1],", ",this.hsla[2]*this.maxes[i.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=o.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=o.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[i.HSL][0],", ",this.hsla[1]*this.maxes[i.HSL][1],", ",this.hsla[2]*this.maxes[i.HSL][2],", ",r,")");case"hsla%":return this.hsla||(this.hsla=o.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*r).toPrecision(3),"%)");default:return"rgba(".concat(t[0],",",t[1],",",t[2],",",r,")")}},a.default.Color.prototype.setRed=function(e){this._array[0]=e/this.maxes[i.RGB][0],this._calculateLevels()},a.default.Color.prototype.setGreen=function(e){this._array[1]=e/this.maxes[i.RGB][1],this._calculateLevels()},a.default.Color.prototype.setBlue=function(e){this._array[2]=e/this.maxes[i.RGB][2],this._calculateLevels()},a.default.Color.prototype.setAlpha=function(e){this._array[3]=e/this.maxes[this.mode][3],this._calculateLevels()},a.default.Color.prototype._calculateLevels=function(){for(var e=this._array,t=this.levels=new Array(e.length),n=e.length-1;0<=n;--n)t[n]=Math.round(255*e[n])},a.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},a.default.Color.prototype._storeModeAndMaxes=function(e,t){this.mode=e,this.maxes=t},a.default.Color.prototype._getMode=function(){return this.mode},a.default.Color.prototype._getMaxes=function(){return this.maxes},a.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[i.RGB][2]},a.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=o.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[i.HSB][2]},a.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[i.RGB][1]},a.default.Color.prototype._getHue=function(){return this.mode===i.HSB?(this.hsba||(this.hsba=o.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[i.HSB][0]):(this.hsla||(this.hsla=o.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[i.HSL][0])},a.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=o.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[i.HSL][2]},a.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[i.RGB][0]},a.default.Color.prototype._getSaturation=function(){return this.mode===i.HSB?(this.hsba||(this.hsba=o.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[i.HSB][1]):(this.hsla||(this.hsla=o.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[i.HSL][1])};var u={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},l=/\s*/,c=/(\d{1,3})/,f=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,d=new RegExp("".concat(f.source,"%")),h={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",c.source,",",c.source,",",c.source,"\\)$"].join(l.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",d.source,",",d.source,",",d.source,"\\)$"].join(l.source),"i"),RGBA:new RegExp(["^rgba\\(",c.source,",",c.source,",",c.source,",",f.source,"\\)$"].join(l.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",d.source,",",d.source,",",d.source,",",f.source,"\\)$"].join(l.source),"i"),HSL:new RegExp(["^hsl\\(",c.source,",",d.source,",",d.source,"\\)$"].join(l.source),"i"),HSLA:new RegExp(["^hsla\\(",c.source,",",d.source,",",d.source,",",f.source,"\\)$"].join(l.source),"i"),HSB:new RegExp(["^hsb\\(",c.source,",",d.source,",",d.source,"\\)$"].join(l.source),"i"),HSBA:new RegExp(["^hsba\\(",c.source,",",d.source,",",d.source,",",f.source,"\\)$"].join(l.source),"i")};a.default.Color._parseInputs=function(e,t,n,r){var s,l=arguments.length,c=this.mode,f=this.maxes[c],d=[];if(3<=l){for(d[0]=e/f[0],d[1]=t/f[1],d[2]=n/f[2],d[3]="number"==typeof r?r/f[3]:1,s=d.length-1;0<=s;--s){var p=d[s];p<0?d[s]=0:1<p&&(d[s]=1)}return c===i.HSL?o.default._hslaToRGBA(d):c===i.HSB?o.default._hsbaToRGBA(d):d}if(1===l&&"string"==typeof e){var v=e.trim().toLowerCase();if(u[v])return a.default.Color._parseInputs.call(this,u[v]);if(h.HEX3.test(v))return(d=h.HEX3.exec(v).slice(1).map((function(e){return parseInt(e+e,16)/255})))[3]=1,d;if(h.HEX6.test(v))return(d=h.HEX6.exec(v).slice(1).map((function(e){return parseInt(e,16)/255})))[3]=1,d;if(h.HEX4.test(v))return h.HEX4.exec(v).slice(1).map((function(e){return parseInt(e+e,16)/255}));if(h.HEX8.test(v))return h.HEX8.exec(v).slice(1).map((function(e){return parseInt(e,16)/255}));if(h.RGB.test(v))return(d=h.RGB.exec(v).slice(1).map((function(e){return e/255})))[3]=1,d;if(h.RGB_PERCENT.test(v))return(d=h.RGB_PERCENT.exec(v).slice(1).map((function(e){return parseFloat(e)/100})))[3]=1,d;if(h.RGBA.test(v))return h.RGBA.exec(v).slice(1).map((function(e,t){return 3===t?parseFloat(e):e/255}));if(h.RGBA_PERCENT.test(v))return h.RGBA_PERCENT.exec(v).slice(1).map((function(e,t){return 3===t?parseFloat(e):parseFloat(e)/100}));if(h.HSL.test(v)?(d=h.HSL.exec(v).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100})))[3]=1:h.HSLA.test(v)&&(d=h.HSLA.exec(v).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100}))),(d=d.map((function(e){return Math.max(Math.min(e,1),0)}))).length)return o.default._hslaToRGBA(d);if(h.HSB.test(v)?(d=h.HSB.exec(v).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100})))[3]=1:h.HSBA.test(v)&&(d=h.HSBA.exec(v).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100}))),d.length){for(s=d.length-1;0<=s;--s)d[s]=Math.max(Math.min(d[s],1),0);return o.default._hsbaToRGBA(d)}d=[1,1,1,1]}else{if(1!==l&&2!==l||"number"!=typeof e)throw new Error("".concat(arguments,"is not a valid color representation."));d[0]=e/f[2],d[1]=e/f[2],d[2]=e/f[2],d[3]="number"==typeof t?t/f[3]:1,d=d.map((function(e){return Math.max(Math.min(e,1),0)}))}return d};var p=a.default.Color;n.default=p},{"../core/constants":250,"../core/main":260,"./color_conversion":246,"core-js/modules/es.array.join":157,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.constructor":177,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.trim":190}],249:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.fill"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));e("./p5.Color"),i.default.prototype.background=function(){var e;return(e=this._renderer).background.apply(e,arguments),this},i.default.prototype.clear=function(){return this._renderer.clear(),this},i.default.prototype.colorMode=function(e,t,n,r,a){if(i.default._validateParameters("colorMode",arguments),e===o.RGB||e===o.HSB||e===o.HSL){this._colorMode=e;var s=this._colorMaxes[e];2===arguments.length?(s[0]=t,s[1]=t,s[2]=t,s[3]=t):4===arguments.length?(s[0]=t,s[1]=n,s[2]=r):5===arguments.length&&(s[0]=t,s[1]=n,s[2]=r,s[3]=a)}return this},i.default.prototype.fill=function(){var e;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(e=this._renderer).fill.apply(e,arguments),this},i.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},i.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},i.default.prototype.stroke=function(){var e;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(e=this._renderer).stroke.apply(e,arguments),this},i.default.prototype.erase=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255;return this._renderer.erase(e,t),this},i.default.prototype.noErase=function(){return this._renderer.noErase(),this};var s=i.default;n.default=s},{"../core/constants":250,"../core/main":260,"./p5.Color":248,"core-js/modules/es.array.fill":150}],250:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.STROKE=n.CURVE=n.BEZIER=n.QUADRATIC=n.LINEAR=n._CTX_MIDDLE=n._DEFAULT_LEADMULT=n._DEFAULT_TEXT_FILL=n.BOLDITALIC=n.BOLD=n.ITALIC=n.NORMAL=n.BLUR=n.ERODE=n.DILATE=n.POSTERIZE=n.INVERT=n.OPAQUE=n.GRAY=n.THRESHOLD=n.BURN=n.DODGE=n.SOFT_LIGHT=n.HARD_LIGHT=n.OVERLAY=n.REPLACE=n.SCREEN=n.MULTIPLY=n.EXCLUSION=n.SUBTRACT=n.DIFFERENCE=n.LIGHTEST=n.DARKEST=n.ADD=n.REMOVE=n.BLEND=n.UP_ARROW=n.TAB=n.SHIFT=n.RIGHT_ARROW=n.RETURN=n.OPTION=n.LEFT_ARROW=n.ESCAPE=n.ENTER=n.DOWN_ARROW=n.DELETE=n.CONTROL=n.BACKSPACE=n.ALT=n.AUTO=n.HSL=n.HSB=n.RGB=n.MITER=n.BEVEL=n.ROUND=n.SQUARE=n.PROJECT=n.PIE=n.CHORD=n.OPEN=n.CLOSE=n.TESS=n.QUAD_STRIP=n.QUADS=n.TRIANGLE_STRIP=n.TRIANGLE_FAN=n.TRIANGLES=n.LINE_LOOP=n.LINE_STRIP=n.LINES=n.POINTS=n.BASELINE=n.BOTTOM=n.TOP=n.CENTER=n.LEFT=n.RIGHT=n.RADIUS=n.CORNERS=n.CORNER=n.RAD_TO_DEG=n.DEG_TO_RAD=n.RADIANS=n.DEGREES=n.TWO_PI=n.TAU=n.QUARTER_PI=n.PI=n.HALF_PI=n.WAIT=n.TEXT=n.MOVE=n.HAND=n.CROSS=n.ARROW=n.WEBGL=n.P2D=n.VERSION=void 0,n.FALLBACK=n.LABEL=n.AXES=n.GRID=n._DEFAULT_FILL=n._DEFAULT_STROKE=n.PORTRAIT=n.LANDSCAPE=n.MIRROR=n.CLAMP=n.REPEAT=n.NEAREST=n.IMAGE=n.IMMEDIATE=n.TEXTURE=n.FILL=void 0;var r=Math.PI;n.VERSION="1.3.1",n.P2D="p2d",n.WEBGL="webgl",n.ARROW="default",n.CROSS="crosshair",n.HAND="pointer",n.MOVE="move",n.TEXT="text",n.WAIT="wait";var a=r/2;n.HALF_PI=a;var i=r;n.PI=i;var o=r/4;n.QUARTER_PI=o;var s=2*r;n.TAU=s;var u=2*r;n.TWO_PI=u,n.DEGREES="degrees",n.RADIANS="radians";var l=r/180;n.DEG_TO_RAD=l;var c=180/r;n.RAD_TO_DEG=c,n.CORNER="corner",n.CORNERS="corners",n.RADIUS="radius",n.RIGHT="right",n.LEFT="left",n.CENTER="center",n.TOP="top",n.BOTTOM="bottom",n.BASELINE="alphabetic",n.POINTS=0,n.LINES=1,n.LINE_STRIP=3,n.LINE_LOOP=2,n.TRIANGLES=4,n.TRIANGLE_FAN=6,n.TRIANGLE_STRIP=5,n.QUADS="quads",n.QUAD_STRIP="quad_strip",n.TESS="tess",n.CLOSE="close",n.OPEN="open",n.CHORD="chord",n.PIE="pie",n.PROJECT="square",n.SQUARE="butt",n.ROUND="round",n.BEVEL="bevel",n.MITER="miter",n.RGB="rgb",n.HSB="hsb",n.HSL="hsl",n.AUTO="auto",n.ALT=18,n.BACKSPACE=8,n.CONTROL=17,n.DELETE=46,n.DOWN_ARROW=40,n.ENTER=13,n.ESCAPE=27,n.LEFT_ARROW=37,n.OPTION=18,n.RETURN=13,n.RIGHT_ARROW=39,n.SHIFT=16,n.TAB=9,n.UP_ARROW=38,n.BLEND="source-over",n.REMOVE="destination-out",n.ADD="lighter",n.DARKEST="darken",n.LIGHTEST="lighten",n.DIFFERENCE="difference",n.SUBTRACT="subtract",n.EXCLUSION="exclusion",n.MULTIPLY="multiply",n.SCREEN="screen",n.REPLACE="copy",n.OVERLAY="overlay",n.HARD_LIGHT="hard-light",n.SOFT_LIGHT="soft-light",n.DODGE="color-dodge",n.BURN="color-burn",n.THRESHOLD="threshold",n.GRAY="gray",n.OPAQUE="opaque",n.INVERT="invert",n.POSTERIZE="posterize",n.DILATE="dilate",n.ERODE="erode",n.BLUR="blur",n.NORMAL="normal",n.ITALIC="italic",n.BOLD="bold",n.BOLDITALIC="bold italic",n._DEFAULT_TEXT_FILL="#000000",n._DEFAULT_LEADMULT=1.25,n._CTX_MIDDLE="middle",n.LINEAR="linear",n.QUADRATIC="quadratic",n.BEZIER="bezier",n.CURVE="curve",n.STROKE="stroke",n.FILL="fill",n.TEXTURE="texture",n.IMMEDIATE="immediate",n.IMAGE="image",n.NEAREST="nearest",n.REPEAT="repeat",n.CLAMP="clamp",n.MIRROR="mirror",n.LANDSCAPE="landscape",n.PORTRAIT="portrait",n._DEFAULT_STROKE="#000000",n._DEFAULT_FILL="#FFFFFF",n.GRID="grid",n.AXES="axes",n.LABEL="label",n.FALLBACK="fallback"},{}],251:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("./main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("./constants")),s=[o.ARROW,o.CROSS,o.HAND,o.MOVE,o.TEXT,o.WAIT];i.default.prototype._frameRate=0,i.default.prototype._lastFrameTime=window.performance.now(),i.default.prototype._targetFrameRate=60;var u=window.print;function l(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function c(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}i.default.prototype.print=function(){var e;arguments.length?(e=console).log.apply(e,arguments):u()},i.default.prototype.frameCount=0,i.default.prototype.deltaTime=0,i.default.prototype.focused=document.hasFocus(),i.default.prototype.cursor=function(e,t,n){var r="auto",a=this._curElement.elt;if(s.includes(e))r=e;else if("string"==typeof e){var i="";t&&n&&"number"==typeof t&&"number"==typeof n&&(i="".concat(t," ").concat(n)),r="http://"===e.substring(0,7)||"https://"===e.substring(0,8)||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(e)?"url(".concat(e,") ").concat(i,", auto"):e}a.style.cursor=r},i.default.prototype.frameRate=function(e){return i.default._validateParameters("frameRate",arguments),"number"!=typeof e||e<0?this._frameRate:(this._setProperty("_targetFrameRate",e),0===e&&this._setProperty("_frameRate",e),this)},i.default.prototype.getFrameRate=function(){return this.frameRate()},i.default.prototype.setFrameRate=function(e){return this.frameRate(e)},i.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},i.default.prototype.displayWidth=screen.width,i.default.prototype.displayHeight=screen.height,i.default.prototype.windowWidth=l(),i.default.prototype.windowHeight=c(),i.default.prototype._onresize=function(e){this._setProperty("windowWidth",l()),this._setProperty("windowHeight",c());var t,n=this._isGlobal?window:this;"function"==typeof n.windowResized&&(void 0===(t=n.windowResized(e))||t||e.preventDefault())},i.default.prototype.width=0,i.default.prototype.height=0,i.default.prototype.fullscreen=function(e){if(i.default._validateParameters("fullscreen",arguments),void 0===e)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;e?function(e){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}(document.documentElement):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},i.default.prototype.pixelDensity=function(e){var t;return i.default._validateParameters("pixelDensity",arguments),"number"==typeof e?(e!==this._pixelDensity&&(this._pixelDensity=e),(t=this).resizeCanvas(this.width,this.height,!0)):t=this._pixelDensity,t},i.default.prototype.displayDensity=function(){return window.devicePixelRatio},i.default.prototype.getURL=function(){return location.href},i.default.prototype.getURLPath=function(){return location.pathname.split("/").filter((function(e){return""!==e}))},i.default.prototype.getURLParams=function(){for(var e,t=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,n={};null!=(e=t.exec(location.search));)e.index===t.lastIndex&&t.lastIndex++,n[e[1]]=e[2];return n};var f=i.default;n.default=f},{"./constants":250,"./main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.includes":154,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.search":187,"core-js/modules/es.string.split":188}],252:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../main"))&&r.__esModule?r:{default:r};e("../internationalization");var i,o=null;function s(e,t){t=t||console.log.bind(console),o||i(),o.some((function(n){if(e.message&&null!==e.message.match("\\W?".concat(n.name,"\\W"))){var r="function"===n.type?"".concat(n.name,"()"):n.name;return t("Did you just try to use p5.js's ".concat(r," ").concat(n.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat("https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup")),!0}}))}a.default._friendlyError=a.default._checkForUserDefinedFunctions=a.default._fesErrorMonitor=function(){},o=null,i=function(){function t(e){return Object.getOwnPropertyNames(e).filter((function(e){return"_"!==e[0]&&!(e in n)&&(n[e]=!0)})).map((function(t){var n;return n="function"==typeof e[t]?"function":t===t.toUpperCase()?"constant":"variable",{name:t,type:n}}))}var n={};(o=[].concat(t(a.default.prototype),t(e("../constants")))).sort((function(e,t){return t.name.length-e.name.length}))},a.default.prototype._helpForMisusedAtTopLevelCode=s,"complete"!==document.readyState&&(window.addEventListener("error",s,!1),window.addEventListener("load",(function(){window.removeEventListener("error",s,!1)})));var u=a.default;n.default=u},{"../constants":250,"../internationalization":258,"../main":260,"./browser_errors":void 0,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.join":157,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.some":161,"core-js/modules/es.function.name":163,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.get-own-property-names":171,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.constructor":177,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.match":184,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.search":187,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.for-each":225,"core-js/modules/web.dom-collections.iterator":226}],253:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../main"))&&r.__esModule?r:{default:r};e("../internationalization"),a.default._friendlyFileLoadError=function(){};var i=a.default;n.default=i},{"../internationalization":258,"../main":260}],254:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../main"))&&r.__esModule?r:{default:r};function i(){var e=/(^|@)\S+:\d+/,t=/^\s*at .*(\S+:\d+|\(native\))/m,n=/^(eval@)?(\[native code])?$/;return{parse:function(e){return void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(t)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):void 0},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(t)}),this).map((function(e){-1<e.indexOf("(eval ")&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),n=t.match(/ (\((.+):(\d+):(\d+)\)$)/),r=(t=n?t.replace(n[0],""):t).split(/\s+/).slice(1),a=this.extractLocation(n?n[1]:r.pop());return{functionName:r.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(a[0])?void 0:a[0],lineNumber:a[1],columnNumber:a[2],source:e}}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(n)}),this).map((function(e){if(-1<e.indexOf(" > eval")&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return{functionName:e};var t=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(t),r=n&&n[1]?n[1]:void 0,a=this.extractLocation(e.replace(t,""));return{functionName:r,fileName:a[0],lineNumber:a[1],columnNumber:a[2],source:e}}),this)},parseOpera:function(e){return!e.stacktrace||-1<e.message.indexOf("\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[],a=2,i=n.length;a<i;a+=2){var o=t.exec(n[a]);o&&r.push({fileName:o[2],lineNumber:o[1],source:n[a]})}return r},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[],a=0,i=n.length;a<i;a+=2){var o=t.exec(n[a]);o&&r.push({functionName:o[3]||void 0,fileName:o[2],lineNumber:o[1],source:n[a]})}return r},parseOpera11:function(t){return t.stack.split("\n").filter((function(t){return!!t.match(e)&&!t.match(/^Error created at/)}),this).map((function(e){var t,n=e.split("@"),r=this.extractLocation(n.pop()),a=n.shift()||"",i=a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return a.match(/\(([^)]*)\)/)&&(t=a.replace(/^[^(]+\(([^)]*)\)$/,"$1")),{functionName:i,args:void 0===t||"[arguments not available]"===t?void 0:t.split(","),fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:e}}),this)}}}a.default._getErrorStackParser=function(){return new i};var o=a.default;n.default=o},{"../main":260,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.join":157,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.match":184,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188}],255:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../main"))&&r.__esModule?r:{default:r};(function(e){if(!(e&&e.__esModule||null===e||"object"!==function(e){return("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(e)&&"function"!=typeof e)){var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n)}})(e("../constants")),e("../internationalization"),a.default._validateParameters=a.default._clearValidateParamsCache=function(){};var i=a.default;n.default=i},{"../../../docs/parameterData.json":void 0,"../constants":250,"../internationalization":258,"../main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.join":157,"core-js/modules/es.array.last-index-of":158,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.function.name":163,"core-js/modules/es.map":164,"core-js/modules/es.number.constructor":167,"core-js/modules/es.object.get-prototype-of":172,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.reflect.construct":176,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.set":180,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.for-each":225,"core-js/modules/web.dom-collections.iterator":226}],256:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("./constants")),i={modeAdjust:function(e,t,n,r,i){return i===a.CORNER?{x:e,y:t,w:n,h:r}:i===a.CORNERS?{x:e,y:t,w:n-e,h:r-t}:i===a.RADIUS?{x:e-n,y:t-r,w:2*n,h:2*r}:i===a.CENTER?{x:e-.5*n,y:t-.5*r,w:n,h:r}:void 0}};n.default=i},{"./constants":250}],257:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};e("./internationalization");var i=Promise.resolve();Promise.all([new Promise((function(e,t){"complete"===document.readyState?e():window.addEventListener("load",e,!1)})),i]).then((function(){void 0===window._setupDone?window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!a.default.instance&&new a.default:console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import")}))},{"../core/main":260,"./internationalization":258,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.string.iterator":183,"core-js/modules/web.dom-collections.iterator":226}],258:[function(e,t,n){"use strict";e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.initialize=n.translator=void 0;var r,a=o(e("i18next")),i=o(e("i18next-browser-languagedetector"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init(t,n)}var t;return(t=[{key:"fetchWithTimeout",value:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:2e3;return Promise.race([fetch(e,t),new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout"))}),r)}))])}},{key:"init",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};this.services=e,this.options=n}},{key:"read",value:function(e,t,n){var a=this.options.loadPath;if(e===this.options.fallback)n(null,r[e][t]);else if((void 0).includes(e)){var i=this.services.interpolator.interpolate(a,{lng:e,ns:t});this.loadUrl(i,n)}else n("Not found",!1)}},{key:"loadUrl",value:function(e,t){this.fetchWithTimeout(e).then((function(t){if(!t.ok)throw new Error("failed loading ".concat(e));return t.json()}),(function(){throw new Error("failed loading ".concat(e))})).then((function(e){return t(null,e)})).catch(t)}}])&&s(e.prototype,t),e}();u.type="backend";var l=function(e,t){console.debug("p5.js translator called before translations were loaded"),a.default.t(e,t)};n.translator=l,n.initialize=function(){return a.default.use(i.default).use(u).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:r}).then((function(e){n.translator=l=e}),(function(e){return console.debug("Translations failed to load (".concat(e,")"))}))}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.join":157,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.split":188,"core-js/modules/web.dom-collections.iterator":226,i18next:3,"i18next-browser-languagedetector":3}],259:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("./main"))&&r.__esModule?r:{default:r};a.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},a.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},a.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},a.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")};var i=a.default;n.default=i},{"./main":260}],260:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("./shim");var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("./constants"));function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=n,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var i=Object.getOwnPropertyNames(e.prototype._registeredMethods),o=!0,s=!1,u=void 0;try{for(var l,c=i[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value;this._registeredMethods[f]=e.prototype._registeredMethods[f].slice()}}catch(t){s=!0,u=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){a._userNode&&"string"==typeof a._userNode&&(a._userNode=document.getElementById(a._userNode));var t=a._isGlobal?window:a;if(t.preload){var n=document.getElementById(a._loadingScreenId);n||((n=document.createElement("div")).innerHTML="Loading...",n.style.position="absolute",n.id=a._loadingScreenId,(a._userNode||document.body).appendChild(n));var r=a._preloadMethods;for(var i in r){r[i]=r[i]||e;var o=r[i];o!==e.prototype&&o!==e||(a._isGlobal&&(window[i]=a._wrapPreload(a,i)),o=a),a._registeredPreloadMethods[i]=o[i],o[i]=a._wrapPreload(o,i)}t.preload(),a._runIfPreloadsAreDone()}else a._setup(),a._draw()},this._runIfPreloadsAreDone=function(){var e=this._isGlobal?window:this;if(0===e._preloadCount){var t=document.getElementById(e._loadingScreenId);t&&t.parentNode.removeChild(t),this._setupDone||(this._lastFrameTime=window.performance.now(),e._setup(),e._draw())}},this._decrementPreload=function(){var e=this._isGlobal?window:this;"function"==typeof e.preload&&(e._setProperty("_preloadCount",e._preloadCount-1),e._runIfPreloadsAreDone())},this._wrapPreload=function(e,t){var n=this;return function(){n._incrementPreload();for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n._registeredPreloadMethods[t].apply(e,a)}},this._incrementPreload=function(){var e=this._isGlobal?window:this;e._setProperty("_preloadCount",e._preloadCount+1)},this._setup=function(){a.createCanvas(a._defaultCanvasSize.width,a._defaultCanvasSize.height,"p2d");var e=a._isGlobal?window:a;if("function"==typeof e.preload)for(var t in a._preloadMethods)e[t]=a._preloadMethods[t][t],e[t]&&a&&(e[t]=e[t].bind(a));a._millisStart=window.performance.now(),"function"==typeof e.setup&&e.setup();var n=document.getElementsByTagName("canvas"),r=!0,i=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value;"true"===l.dataset.hidden&&(l.style.visibility="",delete l.dataset.hidden)}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}a._lastFrameTime=window.performance.now(),a._setupDone=!0,(a._accessibleOutputs.grid||a._accessibleOutputs.text)&&a._updateAccsOutput()},this._draw=function(){var e=window.performance.now(),t=e-a._lastFrameTime,n=1e3/a._targetFrameRate;(!a._loop||n-5<=t)&&(a.redraw(),a._frameRate=1e3/(e-a._lastFrameTime),a.deltaTime=e-a._lastFrameTime,a._setProperty("deltaTime",a.deltaTime),a._lastFrameTime=e,void 0!==a._updateMouseCoords&&(a._updateMouseCoords(),a._setProperty("movedX",0),a._setProperty("movedY",0))),a._loop&&(a._requestAnimId=window.requestAnimationFrame(a._draw))},this._setProperty=function(e,t){a[e]=t,a._isGlobal&&(window[e]=t)},this.remove=function(){var t=document.getElementById(a._loadingScreenId);if(t&&(t.parentNode.removeChild(t),a._incrementPreload()),a._curElement){for(var n in a._loop=!1,a._requestAnimId&&window.cancelAnimationFrame(a._requestAnimId),a._events)window.removeEventListener(n,a._events[n]);var r=!0,i=!1,o=void 0;try{for(var s,u=a._elements[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value;for(var c in l.elt&&l.elt.parentNode&&l.elt.parentNode.removeChild(l.elt),l._events)l.elt.removeEventListener(c,l._events[c])}}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}var f=a;a._registeredMethods.remove.forEach((function(e){void 0!==e&&e.call(f)}))}if(a._isGlobal){for(var d in e.prototype)try{delete window[d]}catch(t){window[d]=void 0}for(var h in a)if(a.hasOwnProperty(h))try{delete window[h]}catch(t){window[h]=void 0}e.instance=null}},this._registeredMethods.init.forEach((function(e){void 0!==e&&e.call(this)}),this),this._setupPromisePreloads();var d=this._createFriendlyGlobalFunctionBinder();if(t)t(this),e._checkForUserDefinedFunctions(this);else{for(var h in this._isGlobal=!0,e.instance=this,e.prototype)if("function"==typeof e.prototype[h]){var p=h.substring(2);this._events.hasOwnProperty(p)||(Math.hasOwnProperty(h)&&Math[h]===e.prototype[h]?d(h,e.prototype[h]):d(h,e.prototype[h].bind(this)))}else d(h,e.prototype[h]);for(var v in this)this.hasOwnProperty(v)&&d(v,this[v])}for(var m in this._events){var g=this["_on".concat(m)];if(g){var y=g.bind(this);window.addEventListener(m,y,{passive:!1}),this._events[m]=y}}function b(){a._setProperty("focused",!0)}function x(){a._setProperty("focused",!1)}window.addEventListener("focus",b),window.addEventListener("blur",x),this.registerMethod("remove",(function(){window.removeEventListener("focus",b),window.removeEventListener("blur",x)})),"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)}var t;return(t=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=a.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(t,n){e.prototype._preloadMethods.hasOwnProperty(t)||(e.prototype._preloadMethods[t]=n)}},{key:"registerMethod",value:function(t,n){var r=this||e.prototype;r._registeredMethods.hasOwnProperty(t)||(r._registeredMethods[t]=[]),r._registeredMethods[t].push(n)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},n=t.globalObject||window;return t.log||console.log.bind(console),function(e,t){n[e]=t}}}])&&i(e.prototype,t),e}();for(var s in o.instance=null,o.disableFriendlyErrors=!1,a)o.prototype[s]=a[s];o.prototype._preloadMethods={loadJSON:o.prototype,loadImage:o.prototype,loadStrings:o.prototype,loadXML:o.prototype,loadBytes:o.prototype,loadTable:o.prototype,loadFont:o.prototype,loadModel:o.prototype,loadShader:o.prototype},o.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},o.prototype._registeredPreloadMethods={};var u=o;n.default=u},{"./constants":250,"./shim":271,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.get-own-property-names":171,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.for-each":225,"core-js/modules/web.dom-collections.iterator":226}],261:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("./main"))&&r.__esModule?r:{default:r};a.default.Element=function(e,t){this.elt=e,this._pInst=this._pixelsState=t,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},a.default.Element.prototype.parent=function(e){return void 0===e?this.elt.parentNode:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof a.default.Element&&(e=e.elt),e.appendChild(this.elt),this)},a.default.Element.prototype.id=function(e){return void 0===e?this.elt.id:(this.elt.id=e,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},a.default.Element.prototype.class=function(e){return void 0===e?this.elt.className:(this.elt.className=e,this)},a.default.Element.prototype.mousePressed=function(e){return a.default.Element._adjustListener("mousedown",(function(t){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(t),e.call(this)}),this),this},a.default.Element.prototype.doubleClicked=function(e){return a.default.Element._adjustListener("dblclick",e,this),this},a.default.Element.prototype.mouseWheel=function(e){return a.default.Element._adjustListener("wheel",e,this),this},a.default.Element.prototype.mouseReleased=function(e){return a.default.Element._adjustListener("mouseup",e,this),this},a.default.Element.prototype.mouseClicked=function(e){return a.default.Element._adjustListener("click",e,this),this},a.default.Element.prototype.mouseMoved=function(e){return a.default.Element._adjustListener("mousemove",e,this),this},a.default.Element.prototype.mouseOver=function(e){return a.default.Element._adjustListener("mouseover",e,this),this},a.default.Element.prototype.mouseOut=function(e){return a.default.Element._adjustListener("mouseout",e,this),this},a.default.Element.prototype.touchStarted=function(e){return a.default.Element._adjustListener("touchstart",e,this),this},a.default.Element.prototype.touchMoved=function(e){return a.default.Element._adjustListener("touchmove",e,this),this},a.default.Element.prototype.touchEnded=function(e){return a.default.Element._adjustListener("touchend",e,this),this},a.default.Element.prototype.dragOver=function(e){return a.default.Element._adjustListener("dragover",e,this),this},a.default.Element.prototype.dragLeave=function(e){return a.default.Element._adjustListener("dragleave",e,this),this},a.default.Element._adjustListener=function(e,t,n){return!1===t?a.default.Element._detachListener(e,n):a.default.Element._attachListener(e,t,n),this},a.default.Element._attachListener=function(e,t,n){n._events[e]&&a.default.Element._detachListener(e,n);var r=t.bind(n);n.elt.addEventListener(e,r,!1),n._events[e]=r},a.default.Element._detachListener=function(e,t){var n=t._events[e];t.elt.removeEventListener(e,n,!1),t._events[e]=null},a.default.Element.prototype._setProperty=function(e,t){this[e]=t};var i=a.default.Element;n.default=i},{"./main":260}],262:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.splice"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("./main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("./constants"));i.default.Graphics=function(e,t,n,r){var a=n||o.P2D;this.canvas=document.createElement("canvas");var s=r._userNode||document.body;for(var u in s.appendChild(this.canvas),i.default.Element.call(this,this.canvas,r),i.default.prototype)this[u]||("function"==typeof i.default.prototype[u]?this[u]=i.default.prototype[u].bind(this):this[u]=i.default.prototype[u]);return i.default.prototype._initializeInstanceVariables.apply(this),this.width=e,this.height=t,this._pixelDensity=r._pixelDensity,a===o.WEBGL?this._renderer=new i.default.RendererGL(this.canvas,this,!1):this._renderer=new i.default.Renderer2D(this.canvas,this,!1),r._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(e,t),this._renderer._applyDefaults(),this},i.default.Graphics.prototype=Object.create(i.default.Element.prototype),i.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},i.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var e=this._pInst._elements.indexOf(this);for(var t in-1!==e&&this._pInst._elements.splice(e,1),this._events)this.elt.removeEventListener(t,this._events[t])};var s=i.default.Graphics;n.default=s},{"./constants":250,"./main":260,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.splice":162}],263:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("./main"))&&r.__esModule?r:{default:r},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){var t=0,n=0;if(e.offsetParent)for(;t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;);else t+=e.offsetLeft,n+=e.offsetTop;return[t,n]}a.default.Renderer=function(e,t,n){a.default.Element.call(this,e,t),this.canvas=e,this._pixelsState=t,n?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=i.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=i.LEFT,this._textBaseline=i.BASELINE,this._rectMode=i.CORNER,this._ellipseMode=i.CENTER,this._curveTightness=0,this._imageMode=i.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1},a.default.Renderer.prototype=Object.create(a.default.Element.prototype),a.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle}}},a.default.Renderer.prototype.pop=function(e){e.properties&&Object.assign(this,e.properties)},a.default.Renderer.prototype.resize=function(e,t){this.width=e,this.height=t,this.elt.width=e*this._pInst._pixelDensity,this.elt.height=t*this._pInst._pixelDensity,this.elt.style.width="".concat(e,"px"),this.elt.style.height="".concat(t,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},a.default.Renderer.prototype.get=function(e,t,n,r){var i=this._pixelsState,o=i._pixelDensity,s=this.canvas;if(void 0===e&&void 0===t)e=t=0,n=i.width,r=i.height;else if(e*=o,t*=o,void 0===n&&void 0===r)return e<0||t<0||e>=s.width||t>=s.height?[0,0,0,0]:this._getPixel(e,t);var u=new a.default.Image(n,r);return u.canvas.getContext("2d").drawImage(s,e,t,n*o,r*o,0,0,n,r),u},a.default.Renderer.prototype.textLeading=function(e){return"number"==typeof e?(this._setProperty("_textLeading",e),this._pInst):this._textLeading},a.default.Renderer.prototype.textSize=function(e){return"number"==typeof e?(this._setProperty("_textSize",e),this._setProperty("_textLeading",e*i._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},a.default.Renderer.prototype.textStyle=function(e){return e?(e!==i.NORMAL&&e!==i.ITALIC&&e!==i.BOLD&&e!==i.BOLDITALIC||this._setProperty("_textStyle",e),this._applyTextProperties()):this._textStyle},a.default.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},a.default.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},a.default.Renderer.prototype.textAlign=function(e,t){return void 0!==e?(this._setProperty("_textAlign",e),void 0!==t&&this._setProperty("_textBaseline",t),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},a.default.Renderer.prototype.text=function(e,t,n,r,a){var o,s,u,l,c,f,d,h,p,v,m=this._pInst,g=Number.MAX_VALUE;if((this._doFill||this._doStroke)&&void 0!==e){if("string"!=typeof e&&(e=e.toString()),o=(e=e.replace(/(\t)/g,"  ")).split("\n"),void 0!==r){for(d=1,u=p=0;u<o.length;u++){for(c="",h=o[u].split(" "),s=0;s<h.length;s++)f="".concat(c+h[s]," "),r<this.textWidth(f)&&1<d?(c="".concat(h[s]," "),p+=m.textLeading(),d=1):(c=f,d+=1);u<o.length-1&&(p+=m.textLeading())}switch(this._rectMode===i.CENTER&&(t-=r/2,n-=a/2),this._textAlign){case i.CENTER:t+=r/2;break;case i.RIGHT:t+=r}var y=!1;if(void 0!==a){switch(this._textBaseline){case i.BOTTOM:v=n+(a-p),n=Math.max(v,n);break;case i.CENTER:v=n+(a-p)/2,n=Math.max(v,n);break;case i.BASELINE:y=!0,this._textBaseline=i.TOP}g=n+a-m.textAscent()}for(u=0;u<o.length;u++){for(c="",h=o[u].split(" "),s=0;s<h.length;s++)f="".concat(c+h[s]," "),r<this.textWidth(f)&&0<c.length?(this._renderText(m,c,t,n,g),c="".concat(h[s]," "),n+=m.textLeading()):c=f;this._renderText(m,c,t,n,g),n+=m.textLeading(),y&&(this._textBaseline=i.BASELINE)}}else{var b=0,x=m.textAlign().vertical;for(x===i.CENTER?b=(o.length-1)*m.textLeading()/2:x===i.BOTTOM&&(b=(o.length-1)*m.textLeading()),l=0;l<o.length;l++)this._renderText(m,o[l],t,n-b,g),n+=m.textLeading()}return m}},a.default.Renderer.prototype._applyDefaults=function(){return this},a.default.Renderer.prototype._isOpenType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return"object"===o(e)&&e.font&&e.font.supported},a.default.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var e=document.createElement("span");e.style.fontFamily=this._textFont,e.style.fontSize="".concat(this._textSize,"px"),e.innerHTML="ABCjgq|";var t=document.createElement("div");t.style.display="inline-block",t.style.width="1px",t.style.height="0px";var n=document.createElement("div");n.appendChild(e),n.appendChild(t),n.style.height="0px",n.style.overflow="hidden",document.body.appendChild(n),t.style.verticalAlign="baseline";var r=s(t),a=s(e),i=r[1]-a[1];t.style.verticalAlign="bottom",r=s(t),a=s(e);var o=r[1]-a[1]-i;return document.body.removeChild(n),this._setProperty("_textAscent",i),this._setProperty("_textDescent",o),this};var u=a.default.Renderer;n.default=u},{"../core/constants":250,"./main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.number.constructor":167,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],264:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=s(e("./main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("./constants")),o=s(e("../image/filters"));function s(e){return e&&e.__esModule?e:{default:e}}e("./p5.Renderer");var u="rgba(0,0,0,0)";a.default.Renderer2D=function(e,t,n){return a.default.Renderer.call(this,e,t,n),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},a.default.Renderer2D.prototype=Object.create(a.default.Renderer.prototype),a.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=i.BLEND,this._setFill(i._DEFAULT_FILL),this._setStroke(i._DEFAULT_STROKE),this.drawingContext.lineCap=i.ROUND,this.drawingContext.font="normal 12px sans-serif"},a.default.Renderer2D.prototype.resize=function(e,t){a.default.Renderer.prototype.resize.call(this,e,t),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},a.default.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof a.default.Image)this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height);else{var e,t=this._getFill(),n=(e=this._pInst).color.apply(e,arguments);this._pInst._addAccsOutput()&&this._pInst._accsBackground(n.levels);var r=n.toString();this._setFill(r),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(t),this._isErasing&&this._pInst.erase()}this.drawingContext.restore()},a.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},a.default.Renderer2D.prototype.fill=function(){var e,t=(e=this._pInst).color.apply(e,arguments);this._setFill(t.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",t.levels)},a.default.Renderer2D.prototype.stroke=function(){var e,t=(e=this._pInst).color.apply(e,arguments);this._setStroke(t.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",t.levels)},a.default.Renderer2D.prototype.erase=function(e,t){if(!this._isErasing){this._cachedFillStyle=this.drawingContext.fillStyle;var n=this._pInst.color(255,e).toString();this.drawingContext.fillStyle=n,this._cachedStrokeStyle=this.drawingContext.strokeStyle;var r=this._pInst.color(255,t).toString();this.drawingContext.strokeStyle=r;var a=this._cachedBlendMode;this.blendMode(i.REMOVE),this._cachedBlendMode=a,this._isErasing=!0}},a.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},a.default.Renderer2D.prototype.image=function(e,t,n,r,i,o,s,u,l){var c;e.gifProperties&&e._animateGif(this._pInst);try{this._tint&&(a.default.MediaElement&&e instanceof a.default.MediaElement&&e.loadPixels(),e.canvas&&(c=this._getTintedImageCanvas(e))),c=c||e.canvas||e.elt;var f=1;e.width&&0<e.width&&(f=c.width/e.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(c,f*t,f*n,f*r,f*i,o,s,u,l),this._isErasing&&this._pInst.erase()}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e}},a.default.Renderer2D.prototype._getTintedImageCanvas=function(e){if(!e.canvas)return e;var t=o.default._toPixels(e.canvas),n=document.createElement("canvas");n.width=e.canvas.width,n.height=e.canvas.height;for(var r=n.getContext("2d"),a=r.createImageData(e.canvas.width,e.canvas.height),i=a.data,s=0;s<t.length;s+=4){var u=t[s],l=t[s+1],c=t[s+2],f=t[s+3];i[s]=u*this._tint[0]/255,i[s+1]=l*this._tint[1]/255,i[s+2]=c*this._tint[2]/255,i[s+3]=f*this._tint[3]/255}return r.putImageData(a,0,0),n},a.default.Renderer2D.prototype.blendMode=function(e){if(e===i.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(e!==i.BLEND&&e!==i.REMOVE&&e!==i.DARKEST&&e!==i.LIGHTEST&&e!==i.DIFFERENCE&&e!==i.MULTIPLY&&e!==i.EXCLUSION&&e!==i.SCREEN&&e!==i.REPLACE&&e!==i.OVERLAY&&e!==i.HARD_LIGHT&&e!==i.SOFT_LIGHT&&e!==i.DODGE&&e!==i.BURN&&e!==i.ADD)throw new Error("Mode ".concat(e," not recognized."));this._cachedBlendMode=e,this.drawingContext.globalCompositeOperation=e}},a.default.Renderer2D.prototype.blend=function(){for(var e=this.drawingContext.globalCompositeOperation,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[n.length-1],o=Array.prototype.slice.call(n,0,n.length-1);this.drawingContext.globalCompositeOperation=i,a.default.prototype.copy.apply(this,o),this.drawingContext.globalCompositeOperation=e},a.default.Renderer2D.prototype._getPixel=function(e,t){var n;return[(n=this.drawingContext.getImageData(e,t,1,1).data)[0],n[1],n[2],n[3]]},a.default.Renderer2D.prototype.loadPixels=function(){var e=this._pixelsState,t=e._pixelDensity,n=this.width*t,r=this.height*t,a=this.drawingContext.getImageData(0,0,n,r);e._setProperty("imageData",a),e._setProperty("pixels",a.data)},a.default.Renderer2D.prototype.set=function(e,t,n){e=Math.floor(e),t=Math.floor(t);var r=this._pixelsState;if(n instanceof a.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(r._pixelDensity,r._pixelDensity),this.drawingContext.clearRect(e,t,n.width,n.height),this.drawingContext.drawImage(n.canvas,e,t),this.drawingContext.restore();else{var i=0,o=0,s=0,u=0,l=4*(t*r._pixelDensity*(this.width*r._pixelDensity)+e*r._pixelDensity);if(r.imageData||r.loadPixels.call(r),"number"==typeof n)l<r.pixels.length&&(s=o=i=n,u=255);else if(n instanceof Array){if(n.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");l<r.pixels.length&&(i=n[0],o=n[1],s=n[2],u=n[3])}else n instanceof a.default.Color&&l<r.pixels.length&&(i=n.levels[0],o=n.levels[1],s=n.levels[2],u=n.levels[3]);for(var c=0;c<r._pixelDensity;c++)for(var f=0;f<r._pixelDensity;f++)l=4*((t*r._pixelDensity+f)*this.width*r._pixelDensity+(e*r._pixelDensity+c)),r.pixels[l]=i,r.pixels[l+1]=o,r.pixels[l+2]=s,r.pixels[l+3]=u}},a.default.Renderer2D.prototype.updatePixels=function(e,t,n,r){var a=this._pixelsState,i=a._pixelDensity;void 0===e&&void 0===t&&void 0===n&&void 0===r&&(t=e=0,n=this.width,r=this.height),e*=i,t*=i,n*=i,r*=i,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=a.imageData),this.drawingContext.putImageData(a.imageData,e,t,0,0,n,r)},a.default.Renderer2D.prototype._acuteArcToBezier=function(e,t){var n=t/2,r=Math.cos(n),a=Math.sin(n),i=1/Math.tan(n),o=e+n,s=Math.cos(o),u=Math.sin(o),l=(4-r)/3,c=a+(r-l)*i;return{ax:Math.cos(e).toFixed(7),ay:Math.sin(e).toFixed(7),bx:(l*s+c*u).toFixed(7),by:(l*u-c*s).toFixed(7),cx:(l*s-c*u).toFixed(7),cy:(l*u+c*s).toFixed(7),dx:Math.cos(e+t).toFixed(7),dy:Math.sin(e+t).toFixed(7)}},a.default.Renderer2D.prototype.arc=function(e,t,n,r,a,o,s){var u=this.drawingContext,l=n/2,c=r/2,f=0,d=[];for(e+=l,t+=c;1e-5<=o-a;)f=Math.min(o-a,i.HALF_PI),d.push(this._acuteArcToBezier(a,f)),a+=f;return this._doFill&&(u.beginPath(),d.forEach((function(n,r){0===r&&u.moveTo(e+n.ax*l,t+n.ay*c),u.bezierCurveTo(e+n.bx*l,t+n.by*c,e+n.cx*l,t+n.cy*c,e+n.dx*l,t+n.dy*c)})),s!==i.PIE&&null!=s||u.lineTo(e,t),u.closePath(),u.fill()),this._doStroke&&(u.beginPath(),d.forEach((function(n,r){0===r&&u.moveTo(e+n.ax*l,t+n.ay*c),u.bezierCurveTo(e+n.bx*l,t+n.by*c,e+n.cx*l,t+n.cy*c,e+n.dx*l,t+n.dy*c)})),s===i.PIE?(u.lineTo(e,t),u.closePath()):s===i.CHORD&&u.closePath(),u.stroke()),this},a.default.Renderer2D.prototype.ellipse=function(e){var t=this.drawingContext,n=this._doFill,r=this._doStroke,a=parseFloat(e[0]),i=parseFloat(e[1]),o=parseFloat(e[2]),s=parseFloat(e[3]);if(n&&!r){if(this._getFill()===u)return this}else if(!n&&r&&this._getStroke()===u)return this;var l=o/2*.5522847498,c=s/2*.5522847498,f=a+o,d=i+s,h=a+o/2,p=i+s/2;t.beginPath(),t.moveTo(a,p),t.bezierCurveTo(a,p-c,h-l,i,h,i),t.bezierCurveTo(h+l,i,f,p-c,f,p),t.bezierCurveTo(f,p+c,h+l,d,h,d),t.bezierCurveTo(h-l,d,a,p+c,a,p),n&&t.fill(),r&&t.stroke()},a.default.Renderer2D.prototype.line=function(e,t,n,r){var a=this.drawingContext;return this._doStroke&&(this._getStroke()===u||(a.beginPath(),a.moveTo(e,t),a.lineTo(n,r),a.stroke())),this},a.default.Renderer2D.prototype.point=function(e,t){var n=this.drawingContext;if(!this._doStroke)return this;if(this._getStroke()===u)return this;var r=this._getStroke(),a=this._getFill();this._setFill(r),n.beginPath(),n.arc(e,t,n.lineWidth/2,0,i.TWO_PI,!1),n.fill(),this._setFill(a)},a.default.Renderer2D.prototype.quad=function(e,t,n,r,a,i,o,s){var l=this.drawingContext,c=this._doFill,f=this._doStroke;if(c&&!f){if(this._getFill()===u)return this}else if(!c&&f&&this._getStroke()===u)return this;return l.beginPath(),l.moveTo(e,t),l.lineTo(n,r),l.lineTo(a,i),l.lineTo(o,s),l.closePath(),c&&l.fill(),f&&l.stroke(),this},a.default.Renderer2D.prototype.rect=function(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],c=this.drawingContext,f=this._doFill,d=this._doStroke;if(f&&!d){if(this._getFill()===u)return this}else if(!f&&d&&this._getStroke()===u)return this;if(c.beginPath(),void 0===i)c.rect(t,n,r,a);else{void 0===o&&(o=i),void 0===s&&(s=o),void 0===l&&(l=s);var h=Math.abs(r),p=Math.abs(a),v=h/2,m=p/2;h<2*i&&(i=v),p<2*i&&(i=m),h<2*o&&(o=v),p<2*o&&(o=m),h<2*s&&(s=v),p<2*s&&(s=m),h<2*l&&(l=v),p<2*l&&(l=m),c.beginPath(),c.moveTo(t+i,n),c.arcTo(t+r,n,t+r,n+a,o),c.arcTo(t+r,n+a,t,n+a,s),c.arcTo(t,n+a,t,n,l),c.arcTo(t,n,t+r,n,i),c.closePath()}return this._doFill&&c.fill(),this._doStroke&&c.stroke(),this},a.default.Renderer2D.prototype.triangle=function(e){var t=this.drawingContext,n=this._doFill,r=this._doStroke,a=e[0],i=e[1],o=e[2],s=e[3],l=e[4],c=e[5];if(n&&!r){if(this._getFill()===u)return this}else if(!n&&r&&this._getStroke()===u)return this;t.beginPath(),t.moveTo(a,i),t.lineTo(o,s),t.lineTo(l,c),t.closePath(),n&&t.fill(),r&&t.stroke()},a.default.Renderer2D.prototype.endShape=function(e,t,n,r,a,o,s){if(0===t.length)return this;if(!this._doStroke&&!this._doFill)return this;var u,l,c,f=e===i.CLOSE;f&&!o&&t.push(t[0]);var d=t.length;if(!n||s!==i.POLYGON&&null!==s)if(!r||s!==i.POLYGON&&null!==s)if(!a||s!==i.POLYGON&&null!==s)if(s===i.POINTS)for(l=0;l<d;l++)u=t[l],this._doStroke&&this._pInst.stroke(u[6]),this._pInst.point(u[0],u[1]);else if(s===i.LINES)for(l=0;l+1<d;l+=2)u=t[l],this._doStroke&&this._pInst.stroke(t[l+1][6]),this._pInst.line(u[0],u[1],t[l+1][0],t[l+1][1]);else if(s===i.TRIANGLES)for(l=0;l+2<d;l+=3)u=t[l],this.drawingContext.beginPath(),this.drawingContext.moveTo(u[0],u[1]),this.drawingContext.lineTo(t[l+1][0],t[l+1][1]),this.drawingContext.lineTo(t[l+2][0],t[l+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(t[l+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(t[l+2][6]),this.drawingContext.stroke());else if(s===i.TRIANGLE_STRIP)for(l=0;l+1<d;l++)u=t[l],this.drawingContext.beginPath(),this.drawingContext.moveTo(t[l+1][0],t[l+1][1]),this.drawingContext.lineTo(u[0],u[1]),this._doStroke&&this._pInst.stroke(t[l+1][6]),this._doFill&&this._pInst.fill(t[l+1][5]),l+2<d&&(this.drawingContext.lineTo(t[l+2][0],t[l+2][1]),this._doStroke&&this._pInst.stroke(t[l+2][6]),this._doFill&&this._pInst.fill(t[l+2][5])),this._doFillStrokeClose(f);else if(s===i.TRIANGLE_FAN){if(2<d){for(this.drawingContext.beginPath(),l=2;l<d;l++)u=t[l],this.drawingContext.moveTo(t[0][0],t[0][1]),this.drawingContext.lineTo(t[l-1][0],t[l-1][1]),this.drawingContext.lineTo(u[0],u[1]),this.drawingContext.lineTo(t[0][0],t[0][1]),l<d-1&&(this._doFill&&u[5]!==t[l+1][5]||this._doStroke&&u[6]!==t[l+1][6])&&(this._doFill&&(this._pInst.fill(u[5]),this.drawingContext.fill(),this._pInst.fill(t[l+1][5])),this._doStroke&&(this._pInst.stroke(u[6]),this.drawingContext.stroke(),this._pInst.stroke(t[l+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(f)}}else if(s===i.QUADS)for(l=0;l+3<d;l+=4){for(u=t[l],this.drawingContext.beginPath(),this.drawingContext.moveTo(u[0],u[1]),c=1;c<4;c++)this.drawingContext.lineTo(t[l+c][0],t[l+c][1]);this.drawingContext.lineTo(u[0],u[1]),this._doFill&&this._pInst.fill(t[l+3][5]),this._doStroke&&this._pInst.stroke(t[l+3][6]),this._doFillStrokeClose(f)}else if(s===i.QUAD_STRIP){if(3<d)for(l=0;l+1<d;l+=2)u=t[l],this.drawingContext.beginPath(),l+3<d?(this.drawingContext.moveTo(t[l+2][0],t[l+2][1]),this.drawingContext.lineTo(u[0],u[1]),this.drawingContext.lineTo(t[l+1][0],t[l+1][1]),this.drawingContext.lineTo(t[l+3][0],t[l+3][1]),this._doFill&&this._pInst.fill(t[l+3][5]),this._doStroke&&this._pInst.stroke(t[l+3][6])):(this.drawingContext.moveTo(u[0],u[1]),this.drawingContext.lineTo(t[l+1][0],t[l+1][1])),this._doFillStrokeClose(f)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),l=1;l<d;l++)(u=t[l]).isVert&&(u.moveTo?this.drawingContext.moveTo(u[0],u[1]):this.drawingContext.lineTo(u[0],u[1]));this._doFillStrokeClose(f)}else{for(this.drawingContext.beginPath(),l=0;l<d;l++)t[l].isVert?t[l].moveTo?this.drawingContext.moveTo(t[l][0],t[l][1]):this.drawingContext.lineTo(t[l][0],t[l][1]):this.drawingContext.quadraticCurveTo(t[l][0],t[l][1],t[l][2],t[l][3]);this._doFillStrokeClose(f)}else{for(this.drawingContext.beginPath(),l=0;l<d;l++)t[l].isVert?t[l].moveTo?this.drawingContext.moveTo(t[l][0],t[l][1]):this.drawingContext.lineTo(t[l][0],t[l][1]):this.drawingContext.bezierCurveTo(t[l][0],t[l][1],t[l][2],t[l][3],t[l][4],t[l][5]);this._doFillStrokeClose(f)}else if(3<d){var h=[],p=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[1][0],t[1][1]),l=1;l+2<d;l++)u=t[l],h[0]=[u[0],u[1]],h[1]=[u[0]+(p*t[l+1][0]-p*t[l-1][0])/6,u[1]+(p*t[l+1][1]-p*t[l-1][1])/6],h[2]=[t[l+1][0]+(p*t[l][0]-p*t[l+2][0])/6,t[l+1][1]+(p*t[l][1]-p*t[l+2][1])/6],h[3]=[t[l+1][0],t[l+1][1]],this.drawingContext.bezierCurveTo(h[1][0],h[1][1],h[2][0],h[2][1],h[3][0],h[3][1]);f&&this.drawingContext.lineTo(t[l+1][0],t[l+1][1]),this._doFillStrokeClose(f)}return o=a=r=n=!1,f&&t.pop(),this},a.default.Renderer2D.prototype.strokeCap=function(e){return e!==i.ROUND&&e!==i.SQUARE&&e!==i.PROJECT||(this.drawingContext.lineCap=e),this},a.default.Renderer2D.prototype.strokeJoin=function(e){return e!==i.ROUND&&e!==i.BEVEL&&e!==i.MITER||(this.drawingContext.lineJoin=e),this},a.default.Renderer2D.prototype.strokeWeight=function(e){return this.drawingContext.lineWidth=void 0===e||0===e?1e-4:e,this},a.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},a.default.Renderer2D.prototype._setFill=function(e){e!==this._cachedFillStyle&&(this.drawingContext.fillStyle=e,this._cachedFillStyle=e)},a.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},a.default.Renderer2D.prototype._setStroke=function(e){e!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=e,this._cachedStrokeStyle=e)},a.default.Renderer2D.prototype.bezier=function(e,t,n,r,a,i,o,s){return this._pInst.beginShape(),this._pInst.vertex(e,t),this._pInst.bezierVertex(n,r,a,i,o,s),this._pInst.endShape(),this},a.default.Renderer2D.prototype.curve=function(e,t,n,r,a,i,o,s){return this._pInst.beginShape(),this._pInst.curveVertex(e,t),this._pInst.curveVertex(n,r),this._pInst.curveVertex(a,i),this._pInst.curveVertex(o,s),this._pInst.endShape(),this},a.default.Renderer2D.prototype._doFillStrokeClose=function(e){e&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},a.default.Renderer2D.prototype.applyMatrix=function(e,t,n,r,a,i){this.drawingContext.transform(e,t,n,r,a,i)},a.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},a.default.Renderer2D.prototype.rotate=function(e){this.drawingContext.rotate(e)},a.default.Renderer2D.prototype.scale=function(e,t){return this.drawingContext.scale(e,t),this},a.default.Renderer2D.prototype.translate=function(e,t){return e instanceof a.default.Vector&&(t=e.y,e=e.x),this.drawingContext.translate(e,t),this},a.default.Renderer2D.prototype.text=function(e,t,n,r,o){var s;void 0!==r&&this.drawingContext.textBaseline===i.BASELINE&&(s=!0,this.drawingContext.textBaseline=i.TOP);var u=a.default.Renderer.prototype.text.apply(this,arguments);return s&&(this.drawingContext.textBaseline=i.BASELINE),u},a.default.Renderer2D.prototype._renderText=function(e,t,n,r,a){if(!(a<=r))return e.push(),this._isOpenType()?this._textFont._renderPath(t,n,r,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(t,n,r),this._doFill&&(this._fillSet||this._setFill(i._DEFAULT_TEXT_FILL),this.drawingContext.fillText(t,n,r))),e.pop(),e},a.default.Renderer2D.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):this.drawingContext.measureText(e).width},a.default.Renderer2D.prototype._applyTextProperties=function(){var e,t=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),e=this._textFont,this._isOpenType()&&(e=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(e||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===i.CENTER?this.drawingContext.textBaseline=i._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,t},a.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),a.default.Renderer.prototype.push.apply(this)},a.default.Renderer2D.prototype.pop=function(e){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,a.default.Renderer.prototype.pop.call(this,e)};var l=a.default.Renderer2D;n.default=l},{"../image/filters":281,"./constants":250,"./main":260,"./p5.Renderer":263,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.slice":160,"core-js/modules/es.function.name":163,"core-js/modules/es.number.to-fixed":169,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179}],265:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var r,a=(r=e("./main"))&&r.__esModule?r:{default:r};a.default.prototype._promisePreloads=[];var i=!(a.default.prototype.registerPromisePreload=function(e){a.default.prototype._promisePreloads.push(e)});function o(){return{}}a.default.prototype._setupPromisePreloads=function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this._promisePreloads[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value,u=this,l=s.method,c=s.addCallbacks,f=s.legacyPreloadSetup,d=s.target||this,h=d[l].bind(d);if(d===a.default.prototype){if(i)continue;u=null,h=d[l]}d[l]=this._wrapPromisePreload(u,h,c),f&&(d[f.method]=this._legacyPreloadGenerator(u,f,d[l]))}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}i=!0},a.default.prototype._wrapPromisePreload=function(e,t,n){var r=function(){var e=this;this._incrementPreload();for(var r=null,a=null,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];if(n)for(var u=o.length-1;0<=u&&!a&&"function"==typeof o[u];u--)a=r,r=o.pop();var l=Promise.resolve(t.apply(this,o));return r&&l.then(r),a&&l.catch(a),l.then((function(){return e._decrementPreload()})),l};return e&&(r=r.bind(e)),r},a.default.prototype._legacyPreloadGenerator=function(e,t,n){var r=t.createBaseObject||o,a=function(){var e=this;this._incrementPreload();var t=r.apply(this,arguments);return n.apply(this,arguments).then((function(n){Object.assign(t,n),e._decrementPreload()})),t};return e&&(a=a.bind(e)),a}},{"./main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],266:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("./main"))&&r.__esModule?r:{default:r},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(e("./constants"));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var s="defaultCanvas0";a.default.prototype.createCanvas=function(e,t,n){a.default._validateParameters("createCanvas",arguments);var r,o=n||i.P2D;if(o===i.WEBGL){if(r=document.getElementById(s)){r.parentNode.removeChild(r);var u=this._renderer;this._elements=this._elements.filter((function(e){return e!==u}))}(r=document.createElement("canvas")).id=s,r.classList.add("p5Canvas")}else if(this._defaultGraphicsCreated)r=this.canvas;else{r=document.createElement("canvas");for(var l=0;document.getElementById("defaultCanvas".concat(l));)l++;s="defaultCanvas".concat(l),r.id=s,r.classList.add("p5Canvas")}if(this._setupDone||(r.dataset.hidden=!0,r.style.visibility="hidden"),this._userNode)this._userNode.appendChild(r);else{if(0===document.getElementsByTagName("main").length){var c=document.createElement("main");document.body.appendChild(c)}document.getElementsByTagName("main")[0].appendChild(r)}return o===i.WEBGL?(this._setProperty("_renderer",new a.default.RendererGL(r,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new a.default.Renderer2D(r,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(e,t),this._renderer._applyDefaults(),this._renderer},a.default.prototype.resizeCanvas=function(e,t,n){if(a.default._validateParameters("resizeCanvas",arguments),this._renderer){var r={};for(var i in this.drawingContext){var s=this.drawingContext[i];"object"!==o(s)&&"function"!=typeof s&&(r[i]=s)}for(var u in this._renderer.resize(e,t),this.width=e,this.height=t,r)try{this.drawingContext[u]=r[u]}catch(e){}n||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},a.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},a.default.prototype.createGraphics=function(e,t,n){return a.default._validateParameters("createGraphics",arguments),new a.default.Graphics(e,t,n,this)},a.default.prototype.blendMode=function(e){a.default._validateParameters("blendMode",arguments),e===i.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),e=i.BLEND),this._renderer.blendMode(e)};var u=a.default;n.default=u},{"../webgl/p5.RendererGL":314,"./constants":250,"./main":260,"./p5.Graphics":262,"./p5.Renderer2D":264,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],267:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.slice"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=s(e("../main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../constants")),o=s(e("../helpers"));function s(e){return e&&e.__esModule?e:{default:e}}e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),a.default.prototype._normalizeArcAngles=function(e,t,n,r,a){var o;return e-=i.TWO_PI*Math.floor(e/i.TWO_PI),t-=i.TWO_PI*Math.floor(t/i.TWO_PI),o=Math.min(Math.abs(e-t),i.TWO_PI-Math.abs(e-t)),a&&(e=e<=i.HALF_PI?Math.atan(n/r*Math.tan(e)):e>i.HALF_PI&&e<=3*i.HALF_PI?Math.atan(n/r*Math.tan(e))+i.PI:Math.atan(n/r*Math.tan(e))+i.TWO_PI,t=t<=i.HALF_PI?Math.atan(n/r*Math.tan(t)):t>i.HALF_PI&&t<=3*i.HALF_PI?Math.atan(n/r*Math.tan(t))+i.PI:Math.atan(n/r*Math.tan(t))+i.TWO_PI),t<e&&(t+=i.TWO_PI),{start:e,stop:t,correspondToSamePoint:o<1e-5}},a.default.prototype.arc=function(e,t,n,r,i,s,u,l){if(a.default._validateParameters("arc",arguments),!this._renderer._doStroke&&!this._renderer._doFill)return this;if(i===s)return this;i=this._toRadians(i),s=this._toRadians(s),n=Math.abs(n),r=Math.abs(r);var c=o.default.modeAdjust(e,t,n,r,this._renderer._ellipseMode),f=this._normalizeArcAngles(i,s,c.w,c.h,!0);return f.correspondToSamePoint?this._renderer.ellipse([c.x,c.y,c.w,c.h,l]):(this._renderer.arc(c.x,c.y,c.w,c.h,f.start,f.stop,u,l),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[c.x,c.y,c.w,c.h,f.start,f.stop,u])),this},a.default.prototype.ellipse=function(e,t,n,r,i){return a.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},a.default.prototype.circle=function(){a.default._validateParameters("circle",arguments);var e=Array.prototype.slice.call(arguments,0,2);return e.push(arguments[2]),e.push(arguments[2]),this._renderEllipse.apply(this,e)},a.default.prototype._renderEllipse=function(e,t,n,r,a){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;n<0&&(n=Math.abs(n)),void 0===r?r=n:r<0&&(r=Math.abs(r));var i=o.default.modeAdjust(e,t,n,r,this._renderer._ellipseMode);return this._renderer.ellipse([i.x,i.y,i.w,i.h,a]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[i.x,i.y,i.w,i.h]),this},a.default.prototype.line=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return a.default._validateParameters("line",t),this._renderer._doStroke&&(r=this._renderer).line.apply(r,t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",t),this},a.default.prototype.point=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return a.default._validateParameters("point",t),this._renderer._doStroke&&(1===t.length&&t[0]instanceof a.default.Vector?this._renderer.point.call(this._renderer,t[0].x,t[0].y,t[0].z):((r=this._renderer).point.apply(r,t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",t))),this},a.default.prototype.quad=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return a.default._validateParameters("quad",t),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&t.length<=12?this._renderer.quad.call(this._renderer,t[0],t[1],0,t[2],t[3],0,t[4],t[5],0,t[6],t[7],0,t[8],t[9]):((r=this._renderer).quad.apply(r,t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",t))),this},a.default.prototype.rect=function(){return a.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},a.default.prototype.square=function(e,t,n,r,i,o,s){return a.default._validateParameters("square",arguments),this._renderRect.call(this,e,t,n,n,r,i,o,s)},a.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){3===arguments.length&&(arguments[3]=arguments[2]);for(var e=o.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),t=[e.x,e.y,e.w,e.h],n=4;n<arguments.length;n++)t[n]=arguments[n];this._renderer.rect(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[e.x,e.y,e.w,e.h])}return this},a.default.prototype.triangle=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.default._validateParameters("triangle",t),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",t),this};var u=a.default;n.default=u},{"../constants":250,"../friendly_errors/fes_core":252,"../friendly_errors/file_errors":253,"../friendly_errors/validate_params":255,"../helpers":256,"../main":260,"core-js/modules/es.array.slice":160}],268:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../constants"));i.default.prototype.ellipseMode=function(e){return i.default._validateParameters("ellipseMode",arguments),e!==o.CORNER&&e!==o.CORNERS&&e!==o.RADIUS&&e!==o.CENTER||(this._renderer._ellipseMode=e),this},i.default.prototype.noSmooth=function(){return this.setAttributes("antialias",!1),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},i.default.prototype.rectMode=function(e){return i.default._validateParameters("rectMode",arguments),e!==o.CORNER&&e!==o.CORNERS&&e!==o.RADIUS&&e!==o.CENTER||(this._renderer._rectMode=e),this},i.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},i.default.prototype.strokeCap=function(e){return i.default._validateParameters("strokeCap",arguments),e!==o.ROUND&&e!==o.SQUARE&&e!==o.PROJECT||this._renderer.strokeCap(e),this},i.default.prototype.strokeJoin=function(e){return i.default._validateParameters("strokeJoin",arguments),e!==o.ROUND&&e!==o.BEVEL&&e!==o.MITER||this._renderer.strokeJoin(e),this},i.default.prototype.strokeWeight=function(e){return i.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(e),this};var s=i.default;n.default=s},{"../constants":250,"../main":260}],269:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../main"))&&r.__esModule?r:{default:r};e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),a.default.prototype.bezier=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.default._validateParameters("bezier",n),(this._renderer._doStroke||this._renderer._doFill)&&(e=this._renderer).bezier.apply(e,n),this},a.default.prototype.bezierDetail=function(e){return a.default._validateParameters("bezierDetail",arguments),this._bezierDetail=e,this},a.default.prototype.bezierPoint=function(e,t,n,r,i){a.default._validateParameters("bezierPoint",arguments);var o=1-i;return Math.pow(o,3)*e+3*Math.pow(o,2)*i*t+3*o*Math.pow(i,2)*n+Math.pow(i,3)*r},a.default.prototype.bezierTangent=function(e,t,n,r,i){a.default._validateParameters("bezierTangent",arguments);var o=1-i;return 3*r*Math.pow(i,2)-3*n*Math.pow(i,2)+6*n*o*i-6*t*o*i+3*t*Math.pow(o,2)-3*e*Math.pow(o,2)},a.default.prototype.curve=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return a.default._validateParameters("curve",t),this._renderer._doStroke&&(r=this._renderer).curve.apply(r,t),this},a.default.prototype.curveDetail=function(e){return a.default._validateParameters("curveDetail",arguments),this._curveDetail=e<3?3:e,this},a.default.prototype.curveTightness=function(e){return a.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=e,this},a.default.prototype.curvePoint=function(e,t,n,r,i){a.default._validateParameters("curvePoint",arguments);var o=i*i*i,s=i*i;return e*(-.5*o+s-.5*i)+t*(1.5*o-2.5*s+1)+n*(-1.5*o+2*s+.5*i)+r*(.5*o-.5*s)},a.default.prototype.curveTangent=function(e,t,n,r,i){a.default._validateParameters("curveTangent",arguments);var o=i*i;return e*(-3*o/2+2*i-.5)+t*(9*o/2-5*i)+n*(-9*o/2+4*i+.5)+r*(3*o/2-i)};var i=a.default;n.default=i},{"../friendly_errors/fes_core":252,"../friendly_errors/file_errors":253,"../friendly_errors/validate_params":255,"../main":260}],270:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.slice"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../constants")),s=null,u=[],l=[],c=!1,f=!1,d=!1,h=!1,p=!0;i.default.prototype.beginContour=function(){return l=[],h=!0,this},i.default.prototype.beginShape=function(e){var t;return i.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(t=this._renderer).beginShape.apply(t,arguments):(s=e===o.POINTS||e===o.LINES||e===o.TRIANGLES||e===o.TRIANGLE_FAN||e===o.TRIANGLE_STRIP||e===o.QUADS||e===o.QUAD_STRIP?e:null,u=[],l=[]),this},i.default.prototype.bezierVertex=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;if(i.default._validateParameters("bezierVertex",t),this._renderer.isP3D)(r=this._renderer).bezierVertex.apply(r,t);else if(0===u.length)i.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{c=!0;for(var a=[],o=0;o<t.length;o++)a[o]=t[o];a.isVert=!1,h?l.push(a):u.push(a)}return this},i.default.prototype.curveVertex=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return i.default._validateParameters("curveVertex",t),this._renderer.isP3D?(r=this._renderer).curveVertex.apply(r,t):(f=!0,this.vertex(t[0],t[1])),this},i.default.prototype.endContour=function(){var e=l[0].slice();e.isVert=l[0].isVert,e.moveTo=!1,l.push(e),p&&(u.push(u[0]),p=!1);for(var t=0;t<l.length;t++)u.push(l[t]);return this},i.default.prototype.endShape=function(e){if(i.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(e,f,c,d,h,s);else{if(0===u.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var t=e===o.CLOSE;t&&!h&&u.push(u[0]),this._renderer.endShape(e,u,f,c,d,h,s),p=!(h=d=c=f=!1),t&&u.pop()}return this},i.default.prototype.quadraticVertex=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(i.default._validateParameters("quadraticVertex",t),this._renderer.isP3D){var r;(r=this._renderer).quadraticVertex.apply(r,t)}else{if(this._contourInited){var a={};return a.x=t[0],a.y=t[1],a.x3=t[2],a.y3=t[3],a.type=o.QUADRATIC,this._contourVertices.push(a),this}if(0<u.length){d=!0;for(var s=[],c=0;c<t.length;c++)s[c]=t[c];s.isVert=!1,h?l.push(s):u.push(s)}else i.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},i.default.prototype.vertex=function(e,t,n,r,a){if(this._renderer.isP3D){var i;(i=this._renderer).vertex.apply(i,arguments)}else{var o=[];o.isVert=!0,o[0]=e,o[1]=t,o[2]=0,o[3]=0,o[4]=0,o[5]=this._renderer._getFill(),o[6]=this._renderer._getStroke(),n&&(o.moveTo=n),h?(0===l.length&&(o.moveTo=!0),l.push(o)):u.push(o)}return this};var v=i.default;n.default=v},{"../constants":250,"../main":260,"core-js/modules/es.array.slice":160}],271:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),function(){if(!Object.assign){var e=Object.keys,t=Object.defineProperty,n="function"==typeof Symbol&&"symbol"===r(Symbol()),a=Object.prototype.propertyIsEnumerable,i=function(e){return function(t){return a.call(e,t)}};t(Object,"assign",{value:function(t,r){if(null==t)throw new TypeError("target must be an object");var a,o,s,u,l=Object(t);for(a=1;a<arguments.length;++a)for(o=Object(arguments[a]),u=e(o),n&&Object.getOwnPropertySymbols&&u.push.apply(u,Object.getOwnPropertySymbols(o).filter(i(o))),s=0;s<u.length;++s)l[u[s]]=o[u[s]];return l},configurable:!0,enumerable:!1,writable:!0})}}()},{"core-js/modules/es.array.filter":151,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-clamped-array":224,"core-js/modules/web.dom-collections.iterator":226}],272:[function(e,t,n){"use strict";e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("./main"))&&r.__esModule?r:{default:r};a.default.prototype.noLoop=function(){this._loop=!1},a.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},a.default.prototype.isLooping=function(){return this._loop},a.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},a.default.prototype.pop=function(){var e=this._styles.pop();e?(this._renderer.pop(e.renderer),Object.assign(this,e.props)):console.warn("pop() was called without matching push()")},a.default.prototype.redraw=function(e){if(!this._inUserDraw&&this._setupDone){var t=parseInt(e);(isNaN(t)||t<1)&&(t=1);var n=this._isGlobal?window:this;if("function"==typeof n.draw){void 0===n.setup&&n.scale(n._pixelDensity,n._pixelDensity);for(var r=function(e){e.call(n)},a=0;a<t;a++){n.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),n._renderer.isP3D&&n._renderer._update(),n._setProperty("frameCount",n.frameCount+1),n._registeredMethods.pre.forEach(r),this._inUserDraw=!0;try{n.draw()}finally{this._inUserDraw=!1}n._registeredMethods.post.forEach(r)}}}};var i=a.default;n.default=i},{"./main":260,"core-js/modules/es.array.for-each":152,"core-js/modules/es.object.assign":170,"core-js/modules/web.dom-collections.for-each":225}],273:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("./main"))&&r.__esModule?r:{default:r};function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.applyMatrix=function(){var e,t,n=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||n?(e=this._renderer).applyMatrix.apply(e,i(arguments[0])):(t=this._renderer).applyMatrix.apply(t,arguments),this},a.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},a.default.prototype.rotate=function(e,t){return a.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(e),t),this},a.default.prototype.rotateX=function(e){return this._assert3d("rotateX"),a.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(e)),this},a.default.prototype.rotateY=function(e){return this._assert3d("rotateY"),a.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(e)),this},a.default.prototype.rotateZ=function(e){return this._assert3d("rotateZ"),a.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(e)),this},a.default.prototype.scale=function(e,t,n){if(a.default._validateParameters("scale",arguments),e instanceof a.default.Vector){var r=e;e=r.x,t=r.y,n=r.z}else if(e instanceof Array){var i=e;e=i[0],t=i[1],n=i[2]||1}return isNaN(t)?t=n=e:isNaN(n)&&(n=1),this._renderer.scale.call(this._renderer,e,t,n),this},a.default.prototype.shearX=function(e){a.default._validateParameters("shearX",arguments);var t=this._toRadians(e);return this._renderer.applyMatrix(1,0,Math.tan(t),1,0,0),this},a.default.prototype.shearY=function(e){a.default._validateParameters("shearY",arguments);var t=this._toRadians(e);return this._renderer.applyMatrix(1,Math.tan(t),0,1,0,0),this},a.default.prototype.translate=function(e,t,n){return a.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(e,t,n):this._renderer.translate(e,t),this};var o=a.default;n.default=o},{"./main":260,"core-js/modules/es.array.from":153,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.get-prototype-of":172,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/web.dom-collections.iterator":226}],274:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a.default.prototype.storeItem=function(e,t){"string"!=typeof e&&console.log("The argument that you passed to storeItem() - ".concat(e," is not a string.")),e.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(e," must not end with 'p5TypeID'.")),void 0===t&&console.log("You cannot store undefined variables using storeItem().");var n=o(t);switch(n){case"number":case"boolean":t=t.toString();break;case"object":t instanceof a.default.Color?n="p5.Color":t instanceof a.default.Vector&&(n="p5.Vector",t=[t.x,t.y,t.z]),t=JSON.stringify(t)}localStorage.setItem(e,t);var r="".concat(e,"p5TypeID");localStorage.setItem(r,n)},a.default.prototype.getItem=function(e){var t=localStorage.getItem(e),n=localStorage.getItem("".concat(e,"p5TypeID"));if(void 0===n)console.log("Unable to determine type of item stored under ".concat(e,"in local storage. Did you save the item with something other than setItem()?"));else if(null!==t)switch(n){case"number":t=parseFloat(t);break;case"boolean":t="true"===t;break;case"object":t=JSON.parse(t);break;case"p5.Color":t=JSON.parse(t),t=this.color.apply(this,i(t.levels));break;case"p5.Vector":t=JSON.parse(t),t=this.createVector.apply(this,i(t))}return t},a.default.prototype.clearStorage=function(){localStorage.clear()},a.default.prototype.removeItem=function(e){"string"!=typeof e&&console.log("The argument that you passed to removeItem() - ".concat(e," is not a string.")),localStorage.removeItem(e),localStorage.removeItem("".concat(e,"p5TypeID"))}},{"../core/main":260,"core-js/modules/es.array.from":153,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.ends-with":181,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],275:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.string.sub"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.createStringDict=function(e,t){return a.default._validateParameters("createStringDict",arguments),new a.default.StringDict(e,t)},a.default.prototype.createNumberDict=function(e,t){return a.default._validateParameters("createNumberDict",arguments),new a.default.NumberDict(e,t)},a.default.TypedDict=function(e,t){return e instanceof Object?this.data=e:(this.data={},this.data[e]=t),this},a.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},a.default.TypedDict.prototype.hasKey=function(e){return this.data.hasOwnProperty(e)},a.default.TypedDict.prototype.get=function(e){if(this.data.hasOwnProperty(e))return this.data[e];console.log("".concat(e," does not exist in this Dictionary"))},a.default.TypedDict.prototype.set=function(e,t){this._validate(t)?this.data[e]=t:console.log("Those values dont work for this dictionary type.")},a.default.TypedDict.prototype._addObj=function(e){for(var t in e)this.set(t,e[t])},a.default.TypedDict.prototype.create=function(e,t){e instanceof Object&&void 0===t?this._addObj(e):void 0!==e?this.set(e,t):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},a.default.TypedDict.prototype.clear=function(){this.data={}},a.default.TypedDict.prototype.remove=function(e){if(!this.data.hasOwnProperty(e))throw new Error("".concat(e," does not exist in this Dictionary"));delete this.data[e]},a.default.TypedDict.prototype.print=function(){for(var e in this.data)console.log("key:".concat(e," value:").concat(this.data[e]))},a.default.TypedDict.prototype.saveTable=function(e){var t="";for(var n in this.data)t+="".concat(n,",").concat(this.data[n],"\n");var r=new Blob([t],{type:"text/csv"});a.default.prototype.downloadFile(r,e||"mycsv","csv")},a.default.TypedDict.prototype.saveJSON=function(e,t){a.default.prototype.saveJSON(this.data,e,t)},a.default.TypedDict.prototype._validate=function(e){return!0},a.default.StringDict=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default.TypedDict.apply(this,t)},a.default.StringDict.prototype=Object.create(a.default.TypedDict.prototype),a.default.StringDict.prototype._validate=function(e){return"string"==typeof e},a.default.NumberDict=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default.TypedDict.apply(this,t)},a.default.NumberDict.prototype=Object.create(a.default.TypedDict.prototype),a.default.NumberDict.prototype._validate=function(e){return"number"==typeof e},a.default.NumberDict.prototype.add=function(e,t){this.data.hasOwnProperty(e)?this.data[e]+=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},a.default.NumberDict.prototype.sub=function(e,t){this.add(e,-t)},a.default.NumberDict.prototype.mult=function(e,t){this.data.hasOwnProperty(e)?this.data[e]*=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},a.default.NumberDict.prototype.div=function(e,t){this.data.hasOwnProperty(e)?this.data[e]/=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},a.default.NumberDict.prototype._valueTest=function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var t=this.data[Object.keys(this.data)[0]];for(var n in this.data)this.data[n]*e<t*e&&(t=this.data[n]);return t},a.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},a.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},a.default.NumberDict.prototype._keyTest=function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var t=Object.keys(this.data)[0],n=1;n<Object.keys(this.data).length;n++)Object.keys(this.data)[n]*e<t*e&&(t=Object.keys(this.data)[n]);return t},a.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},a.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)};var i=a.default.TypedDict;n.default=i},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.object.keys":173,"core-js/modules/es.string.sub":189}],276:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){(t._userNode?t._userNode:document.body).appendChild(e);var r=n?new a.default.MediaElement(e,t):new a.default.Element(e,t);return t._elements.push(r),r}function s(e,t,n,r){var a=document.createElement(t);"string"==typeof(n=n||"")&&(n=[n]);var i=!0,s=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var f=l.value,d=document.createElement("source");d.setAttribute("src",f),a.appendChild(d)}}catch(e){s=!0,u=e}finally{try{i||null==c.return||c.return()}finally{if(s)throw u}}"function"==typeof r&&a.addEventListener("canplaythrough",(function e(){r(),a.removeEventListener("canplaythrough",e)}));var h=o(a,e,!0);return h.loadedmetadata=!1,a.addEventListener("loadedmetadata",(function(){h.width=a.videoWidth,h.height=a.videoHeight,0===h.elt.width&&(h.elt.width=a.videoWidth),0===h.elt.height&&(h.elt.height=a.videoHeight),h.presetPlaybackRate&&(h.elt.playbackRate=h.presetPlaybackRate,delete h.presetPlaybackRate),h.loadedmetadata=!0})),h}function u(e,t,n,r){this.callback=e,this.time=t,this.id=n,this.val=r}a.default.prototype.select=function(e,t){a.default._validateParameters("select",arguments);var n=this._getContainer(t).querySelector(e);return n?this._wrapElement(n):null},a.default.prototype.selectAll=function(e,t){a.default._validateParameters("selectAll",arguments);var n=[],r=this._getContainer(t).querySelectorAll(e);if(r)for(var i=0;i<r.length;i++){var o=this._wrapElement(r[i]);n.push(o)}return n},a.default.prototype._getContainer=function(e){var t=document;return"string"==typeof e?t=document.querySelector(e)||document:e instanceof a.default.Element?t=e.elt:e instanceof HTMLElement&&(t=e),t},a.default.prototype._wrapElement=function(e){var t=Array.prototype.slice.call(e.children);if("INPUT"!==e.tagName||"checkbox"!==e.type)return"VIDEO"===e.tagName||"AUDIO"===e.tagName?new a.default.MediaElement(e,this):"SELECT"===e.tagName?this.createSelect(new a.default.Element(e,this)):0<t.length&&t.every((function(e){return"INPUT"===e.tagName||"LABEL"===e.tagName}))?this.createRadio(new a.default.Element(e,this)):new a.default.Element(e,this);var n=new a.default.Element(e,this);return n.checked=function(){return 0===arguments.length?this.elt.checked:(this.elt.checked=!!arguments[0],this)},n},a.default.prototype.removeElements=function(e){a.default._validateParameters("removeElements",arguments),this._elements.filter((function(e){return!(e.elt instanceof HTMLCanvasElement)})).map((function(e){return e.remove()}))},a.default.Element.prototype.changed=function(e){return a.default.Element._adjustListener("change",e,this),this},a.default.Element.prototype.input=function(e){return a.default.Element._adjustListener("input",e,this),this},a.default.prototype.createDiv=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("div");return t.innerHTML=e,o(t,this)},a.default.prototype.createP=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("p");return t.innerHTML=e,o(t,this)},a.default.prototype.createSpan=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("span");return t.innerHTML=e,o(t,this)},a.default.prototype.createImg=function(){a.default._validateParameters("createImg",arguments);var e,t=document.createElement("img"),n=arguments;return 1<n.length&&"string"==typeof n[1]&&(t.alt=n[1]),2<n.length&&"string"==typeof n[2]&&(t.crossOrigin=n[2]),t.src=n[0],e=o(t,this),t.addEventListener("load",(function(){e.width=t.offsetWidth||t.width,e.height=t.offsetHeight||t.height;var r=n[n.length-1];"function"==typeof r&&r(e)})),e},a.default.prototype.createA=function(e,t,n){a.default._validateParameters("createA",arguments);var r=document.createElement("a");return r.href=e,r.innerHTML=t,n&&(r.target=n),o(r,this)},a.default.prototype.createSlider=function(e,t,n,r){a.default._validateParameters("createSlider",arguments);var i=document.createElement("input");return i.type="range",i.min=e,i.max=t,0===r?i.step=1e-18:r&&(i.step=r),"number"==typeof n&&(i.value=n),o(i,this)},a.default.prototype.createButton=function(e,t){a.default._validateParameters("createButton",arguments);var n=document.createElement("button");return n.innerHTML=e,t&&(n.value=t),o(n,this)},a.default.prototype.createCheckbox=function(){a.default._validateParameters("createCheckbox",arguments);var e=document.createElement("div"),t=document.createElement("input");t.type="checkbox",e.appendChild(t);var n=o(e,this);if(n.checked=function(){var e=n.elt.getElementsByTagName("input")[0];if(e){if(0===arguments.length)return e.checked;e.checked=!!arguments[0]}return n},this.value=function(e){return n.value=e,this},arguments[0]){var r=Math.random().toString(36).slice(2),i=document.createElement("label");t.setAttribute("id",r),i.htmlFor=r,n.value(arguments[0]),i.appendChild(document.createTextNode(arguments[0])),e.appendChild(i)}return arguments[1]&&(t.checked=!0),n},a.default.prototype.createSelect=function(){var e;a.default._validateParameters("createSelect",arguments);var t=arguments[0];if(t instanceof a.default.Element&&t.elt instanceof HTMLSelectElement)e=t,this.elt=t.elt;else if(t instanceof HTMLSelectElement)e=o(t,this),this.elt=t;else{var n=document.createElement("select");t&&"boolean"==typeof t&&n.setAttribute("multiple","true"),e=o(n,this),this.elt=n}return e.option=function(e,t){var n;if(void 0!==e){for(var r=0;r<this.elt.length;r+=1)if(this.elt[r].innerHTML===e){n=r;break}if(void 0!==n)!1===t?this.elt.remove(n):this.elt[n].value=t;else{var a=document.createElement("option");a.innerHTML=e,a.value=void 0===t?e:t,this.elt.appendChild(a),this._pInst._elements.push(a)}}},e.selected=function(e){if(void 0!==e){for(var t=0;t<this.elt.length;t+=1)this.elt[t].value.toString()===e.toString()&&(this.elt.selectedIndex=t);return this}if(this.elt.getAttribute("multiple")){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=this.elt.selectedOptions[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;n.push(u.value)}}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}return this.elt.value},e.disable=function(e){if("string"==typeof e)for(var t=0;t<this.elt.length;t++)this.elt[t].value.toString()===e&&(this.elt[t].disabled=!0,this.elt[t].selected=!1);else this.elt.disabled=!0;return this},e},a.default.prototype.createRadio=function(){var e,t,n=arguments[0];n instanceof HTMLDivElement||n instanceof HTMLSpanElement?(e=n,"string"==typeof arguments[1]&&(t=arguments[1])):("string"==typeof n&&(t=n),e=document.createElement("div"));var r=o(this.elt=e,this);function a(e){return e instanceof HTMLInputElement&&"radio"===e.type}function i(e){return e.nextElementSibling instanceof HTMLLabelElement}return r._name=t||"radioOption",r._getOptionsArray=function(){return Array.from(this.elt.children).filter(a)},r.option=function(e,t){var n,a,o=!0,s=!1,u=void 0;try{for(var l,c=r._getOptionsArray()[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value;if(f.value===e){n=f;break}}}catch(e){s=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}return void 0===n&&((n=document.createElement("input")).setAttribute("type","radio"),n.setAttribute("value",e),this.elt.appendChild(n)),i(n)?a=n.nextElementSibling:(a=document.createElement("label"),n.insertAdjacentElement("afterend",a)),a.innerHTML=void 0===t?e:t,n.setAttribute("name",r._name),n},r.remove=function(e){var t=!0,n=!1,a=void 0;try{for(var o,s=r._getOptionsArray()[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var u=o.value;if(u.value===e)return i(u)&&u.nextElementSibling.remove(),void u.remove()}}catch(e){n=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw a}}},r.value=function(){var e="",t=!0,n=!1,a=void 0;try{for(var i,o=r._getOptionsArray()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;if(s.checked){e=s.value;break}}}catch(e){n=!0,a=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return e},r.selected=function(e){var t=null;if(void 0===e){var n=!0,a=!1,i=void 0;try{for(var o,s=r._getOptionsArray()[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;if(u.checked){t=u;break}}}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}}else{var l=!0,c=!1,f=void 0;try{for(var d,h=r._getOptionsArray()[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;p.value===e&&(p.setAttribute("checked",!0),t=p)}}catch(e){c=!0,f=e}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}}return t},r.disable=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=!0,n=!1,a=void 0;try{for(var i,o=r._getOptionsArray()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)i.value.setAttribute("disabled",e)}catch(e){n=!0,a=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}},r},a.default.prototype.createColorPicker=function(e){a.default._validateParameters("createColorPicker",arguments);var t,n=document.createElement("input");return n.type="color",e?e instanceof a.default.Color?n.value=e.toString("#rrggbb"):(a.default.prototype._colorMode="rgb",a.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},n.value=a.default.prototype.color(e).toString("#rrggbb")):n.value="#000000",(t=o(n,this)).color=function(){return e&&(e.mode&&(a.default.prototype._colorMode=e.mode),e.maxes&&(a.default.prototype._colorMaxes=e.maxes)),a.default.prototype.color(this.elt.value)},t},a.default.prototype.createInput=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text";a.default._validateParameters("createInput",arguments);var n=document.createElement("input");return n.setAttribute("value",e),n.setAttribute("type",t),o(n,this)},a.default.prototype.createFileInput=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(a.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob){var n=document.createElement("input");return n.setAttribute("type","file"),t&&n.setAttribute("multiple",!0),n.addEventListener("change",(function(t){var n=!0,r=!1,i=void 0;try{for(var o,s=t.target.files[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;a.default.File._load(u,e)}}catch(t){r=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}),!1),o(n,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")},a.default.prototype.createVideo=function(e,t){return a.default._validateParameters("createVideo",arguments),s(this,"video",e,t)},a.default.prototype.createAudio=function(e,t){return a.default._validateParameters("createAudio",arguments),s(this,"audio",e,t)},a.default.prototype.VIDEO="video",a.default.prototype.AUDIO="audio",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),a.default.prototype.createCapture=function(){if(a.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var e,t,n=!0,r=!0,s=!0,u=!1,l=void 0;try{for(var c,f=arguments[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var d=c.value;d===a.default.prototype.VIDEO?r=!1:d===a.default.prototype.AUDIO?n=!1:"object"===i(d)?e=d:"function"==typeof d&&(t=d)}}catch(e){u=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}e=e||{video:n,audio:r};var h=document.createElement("video");h.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(e).then((function(e){try{"srcObject"in h?h.srcObject=e:h.src=window.URL.createObjectURL(e)}catch(t){h.src=e}}),console.log);var p=o(h,this,!0);return p.loadedmetadata=!1,h.addEventListener("loadedmetadata",(function(){h.play(),h.width?(p.width=h.width,p.height=h.height):(p.width=p.elt.width=h.videoWidth,p.height=p.elt.height=h.videoHeight),p.loadedmetadata=!0,t&&t(h.srcObject)})),p},a.default.prototype.createElement=function(e,t){a.default._validateParameters("createElement",arguments);var n=document.createElement(e);return void 0!==t&&(n.innerHTML=t),o(n,this)},a.default.Element.prototype.addClass=function(e){return this.elt.className?this.hasClass(e)||(this.elt.className=this.elt.className+" "+e):this.elt.className=e,this},a.default.Element.prototype.removeClass=function(e){return this.elt.classList.remove(e),this},a.default.Element.prototype.hasClass=function(e){return this.elt.classList.contains(e)},a.default.Element.prototype.toggleClass=function(e){return this.elt.classList.contains(e)?this.elt.classList.remove(e):this.elt.classList.add(e),this},a.default.Element.prototype.child=function(e){return void 0===e?this.elt.childNodes:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof a.default.Element&&(e=e.elt),e instanceof HTMLElement&&this.elt.appendChild(e),this)},a.default.Element.prototype.center=function(e){var t=this.elt.style.display,n="none"===this.elt.style.display,r="none"===this.parent().style.display,a={x:this.elt.offsetLeft,y:this.elt.offsetTop};n&&this.show(),r&&this.parent().show(),this.elt.style.display="block",this.position(0,0);var i=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),o=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return"both"===e||void 0===e?this.position(i/2+this.parent().offsetLeft,o/2+this.parent().offsetTop):"horizontal"===e?this.position(i/2+this.parent().offsetLeft,a.y):"vertical"===e&&this.position(a.x,o/2+this.parent().offsetTop),this.style("display",t),n&&this.hide(),r&&this.parent().hide(),this},a.default.Element.prototype.html=function(){return 0===arguments.length?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},a.default.Element.prototype.position=function(){if(0===arguments.length)return{x:this.elt.offsetLeft,y:this.elt.offsetTop};var e="absolute";return"static"!==arguments[2]&&"fixed"!==arguments[2]&&"relative"!==arguments[2]&&"sticky"!==arguments[2]&&"initial"!==arguments[2]&&"inherit"!==arguments[2]||(e=arguments[2]),this.elt.style.position=e,this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this},a.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=3===arguments.length?"1000px":arguments[3]+"px"),this.elt.style.transform+=e,this},a.default.Element.prototype._rotate=function(){var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),1===arguments.length?this.elt.style.transform="rotate("+arguments[0]+"deg)":2===arguments.length?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=e,this},a.default.Element.prototype.style=function(e,t){if(t instanceof a.default.Color&&(t="rgba("+t.levels[0]+","+t.levels[1]+","+t.levels[2]+","+t.levels[3]/255+")"),void 0===t){if(-1===e.indexOf(":"))return window.getComputedStyle(this.elt).getPropertyValue(e);for(var n=e.split(";"),r=0;r<n.length;r++){var i=n[r].split(":");i[0]&&i[1]&&(this.elt.style[i[0].trim()]=i[1].trim())}}else if(this.elt.style[e]=t,"width"===e||"height"===e||"left"===e||"top"===e){var o=window.getComputedStyle(this.elt).getPropertyValue(e).replace(/\D+/g,"");this[e]=parseInt(o,10)}return this},a.default.Element.prototype.attribute=function(e,t){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===t?this.elt.getAttribute(e):(this.elt.setAttribute(e,t),this);if(void 0===t)return this.elt.firstChild.getAttribute(e);for(var n=0;n<this.elt.childNodes.length;n++)this.elt.childNodes[n].setAttribute(e,t)},a.default.Element.prototype.removeAttribute=function(e){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(var t=0;t<this.elt.childNodes.length;t++)this.elt.childNodes[t].removeAttribute(e);return this.elt.removeAttribute(e),this},a.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},a.default.Element.prototype.show=function(){return this.elt.style.display="block",this},a.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},a.default.Element.prototype.size=function(e,t){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var n=e,r=t,i=a.default.prototype.AUTO;if(n!==i||r!==i){if(n===i?n=t*this.width/this.height:r===i&&(r=e*this.height/this.width),this.elt instanceof HTMLCanvasElement){var o,s={},u=this.elt.getContext("2d");for(o in u)s[o]=u[o];for(o in this.elt.setAttribute("width",n*this._pInst._pixelDensity),this.elt.setAttribute("height",r*this._pInst._pixelDensity),this.elt.style.width=n+"px",this.elt.style.height=r+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),s)this.elt.getContext("2d")[o]=s[o]}else this.elt.style.width=n+"px",this.elt.style.height=r+"px",this.elt.width=n,this.elt.height=r;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},a.default.Element.prototype.remove=function(){if(this instanceof a.default.MediaElement){this.stop();var e=this.elt.srcObject;null!==e&&e.getTracks().forEach((function(e){e.stop()}))}var t=this._pInst._elements.indexOf(this);for(var n in-1!==t&&this._pInst._elements.splice(t,1),this._events)this.elt.removeEventListener(n,this._events[n]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},a.default.Element.prototype.drop=function(e,t){if(window.File&&window.FileReader&&window.FileList&&window.Blob){if(!this._dragDisabled){this._dragDisabled=!0;var n=function(e){e.preventDefault()};this.elt.addEventListener("dragover",n),this.elt.addEventListener("dragleave",n)}a.default.Element._attachListener("drop",(function(n){n.preventDefault(),"function"==typeof t&&t.call(this,n);for(var r=n.dataTransfer.files,i=0;i<r.length;i++){var o=r[i];a.default.File._load(o,e)}}),this)}else console.log("The File APIs are not fully supported in this browser.");return this},a.default.MediaElement=function(e,t){a.default.Element.call(this,e,t);var n=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(n,"src",{get:function(){var e=n.elt.children[0].src,t=n.elt.src===window.location.href?"":n.elt.src;return e===window.location.href?t:e},set:function(t){for(var r=0;r<n.elt.children.length;r++)n.elt.removeChild(n.elt.children[r]);var a=document.createElement("source");a.src=t,e.appendChild(a),n.elt.src=t,n.modified=!0}}),n._onended=function(){},n.elt.onended=function(){n._onended(n)}},a.default.MediaElement.prototype=Object.create(a.default.Element.prototype),a.default.MediaElement.prototype.play=function(){var e,t=this;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(e=this.elt.play())&&e.catch&&e.catch((function(e){"NotAllowedError"===e.name?a.default._friendlyAutoplayError(t.src):console.error("Media play method encountered an unexpected error",e)})),this},a.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},a.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},a.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},a.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},a.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var e=this,t=setTimeout((function(){return a.default._friendlyAutoplayError(e.src)}),500);this.elt.addEventListener("play",(function(){return clearTimeout(t)}),{passive:!0,once:!0})},a.default.MediaElement.prototype.autoplay=function(e){var t=this,n=this.elt.getAttribute("autoplay");if(this.elt.setAttribute("autoplay",e),e&&!n){var r=function(){return t._setupAutoplayFailDetection()};4===this.elt.readyState?r():this.elt.addEventListener("canplay",r,{passive:!0,once:!0})}return this},a.default.MediaElement.prototype.volume=function(e){if(void 0===e)return this.elt.volume;this.elt.volume=e},a.default.MediaElement.prototype.speed=function(e){if(void 0===e)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=e:this.presetPlaybackRate=e},a.default.MediaElement.prototype.time=function(e){return void 0===e?this.elt.currentTime:(this.elt.currentTime=e,this)},a.default.MediaElement.prototype.duration=function(){return this.elt.duration},a.default.MediaElement.prototype.pixels=[],a.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},a.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),a.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},a.default.MediaElement.prototype.updatePixels=function(e,t,n,r){return this.loadedmetadata&&(this._ensureCanvas(),a.default.Renderer2D.prototype.updatePixels.call(this,e,t,n,r)),this.setModified(!0),this},a.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),a.default.Renderer2D.prototype.get.apply(this,arguments)},a.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),a.default.Renderer2D.prototype._getPixel.apply(this,arguments)},a.default.MediaElement.prototype.set=function(e,t,n){this.loadedmetadata&&(this._ensureCanvas(),a.default.Renderer2D.prototype.set.call(this,e,t,n),this.setModified(!0))},a.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),a.default.prototype.copy.apply(this,arguments)},a.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),a.default.Image.prototype.mask.apply(this,arguments)},a.default.MediaElement.prototype.isModified=function(){return this._modified},a.default.MediaElement.prototype.setModified=function(e){this._modified=e},a.default.MediaElement.prototype.onended=function(e){return this._onended=e,this},a.default.MediaElement.prototype.connect=function(e){var t,n;if("function"==typeof a.default.prototype.getAudioContext)t=a.default.prototype.getAudioContext(),n=a.default.soundOut.input;else try{n=(t=e.context).destination}catch(e){throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=t.createMediaElementSource(this.elt),this.audioSourceNode.connect(n)),e?e.input?this.audioSourceNode.connect(e.input):this.audioSourceNode.connect(e):this.audioSourceNode.connect(n)},a.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},a.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},a.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1},a.default.MediaElement.prototype.addCue=function(e,t,n){var r=this._cueIDCounter++,a=new u(t,e,r,n);return this._cues.push(a),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),r},a.default.MediaElement.prototype.removeCue=function(e){for(var t=0;t<this._cues.length;t++)this._cues[t].id===e&&(console.log(e),this._cues.splice(t,1));0===this._cues.length&&(this.elt.ontimeupdate=null)},a.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},a.default.MediaElement.prototype._onTimeUpdate=function(){for(var e=this.time(),t=0;t<this._cues.length;t++){var n=this._cues[t].time,r=this._cues[t].val;this._prevTime<n&&n<=e&&this._cues[t].callback(r)}this._prevTime=e},a.default.File=function(e,t){this.file=e,this._pInst=t;var n=e.type.split("/");this.type=n[0],this.subtype=n[1],this.name=e.name,this.size=e.size,this.data=void 0},a.default.File._createLoader=function(e,t){var n=new FileReader;return n.onload=function(n){var r=new a.default.File(e);if("application/json"===r.file.type)r.data=JSON.parse(n.target.result);else if("text/xml"===r.file.type){var i=(new DOMParser).parseFromString(n.target.result,"text/xml");r.data=new a.default.XML(i.documentElement)}else r.data=n.target.result;t(r)},n},a.default.File._load=function(e,t){if(/^text\//.test(e.type)||"application/json"===e.type)a.default.File._createLoader(e,t).readAsText(e);else if(/^(video|audio)\//.test(e.type)){var n=new a.default.File(e);n.data=URL.createObjectURL(e),t(n)}else a.default.File._createLoader(e,t).readAsDataURL(e)};var l=a.default;n.default=l},{"../core/main":260,"core-js/modules/es.array.every":149,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.from":153,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.function.name":163,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.string.trim":190,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.for-each":225,"core-js/modules/web.dom-collections.iterator":226,"core-js/modules/web.url":228}],277:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));i.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",i.default.prototype.accelerationX=0,i.default.prototype.accelerationY=0,i.default.prototype.accelerationZ=0,i.default.prototype.pAccelerationX=0,i.default.prototype.pAccelerationY=0,i.default.prototype.pAccelerationZ=0,i.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},i.default.prototype.rotationX=0,i.default.prototype.rotationY=0,i.default.prototype.rotationZ=0,i.default.prototype.pRotationX=0,i.default.prototype.pRotationY=0;var s=i.default.prototype.pRotationZ=0,u=0,l=0,c="clockwise",f="clockwise",d="clockwise";i.default.prototype.pRotateDirectionX=void 0,i.default.prototype.pRotateDirectionY=void 0,i.default.prototype.pRotateDirectionZ=void 0,i.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},i.default.prototype.turnAxis=void 0;var h=.5,p=30;i.default.prototype.setMoveThreshold=function(e){i.default._validateParameters("setMoveThreshold",arguments),h=e},i.default.prototype.setShakeThreshold=function(e){i.default._validateParameters("setShakeThreshold",arguments),p=e},i.default.prototype._ondeviceorientation=function(e){this._updatePRotations(),this._angleMode===o.radians&&(e.beta=e.beta*(_PI/180),e.gamma=e.gamma*(_PI/180),e.alpha=e.alpha*(_PI/180)),this._setProperty("rotationX",e.beta),this._setProperty("rotationY",e.gamma),this._setProperty("rotationZ",e.alpha),this._handleMotion()},i.default.prototype._ondevicemotion=function(e){this._updatePAccelerations(),this._setProperty("accelerationX",2*e.acceleration.x),this._setProperty("accelerationY",2*e.acceleration.y),this._setProperty("accelerationZ",2*e.acceleration.z),this._handleMotion()},i.default.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var e,t,n=this._isGlobal?window:this;if("function"==typeof n.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>h||Math.abs(this.accelerationY-this.pAccelerationY)>h||Math.abs(this.accelerationZ-this.pAccelerationZ)>h)&&n.deviceMoved(),"function"==typeof n.deviceTurned){var r=this.rotationX+180,a=this.pRotationX+180,i=s+180;0<r-a&&r-a<270||r-a<-270?c="clockwise":(r-a<0||270<r-a)&&(c="counter-clockwise"),c!==this.pRotateDirectionX&&(i=r),90<Math.abs(r-i)&&Math.abs(r-i)<270&&(i=r,this._setProperty("turnAxis","X"),n.deviceTurned()),this.pRotateDirectionX=c,s=i-180;var o=this.rotationY+180,v=this.pRotationY+180,m=u+180;0<o-v&&o-v<270||o-v<-270?f="clockwise":(o-v<0||270<o-this.pRotationY)&&(f="counter-clockwise"),f!==this.pRotateDirectionY&&(m=o),90<Math.abs(o-m)&&Math.abs(o-m)<270&&(m=o,this._setProperty("turnAxis","Y"),n.deviceTurned()),this.pRotateDirectionY=f,u=m-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?d="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(d="counter-clockwise"),d!==this.pRotateDirectionZ&&(l=this.rotationZ),90<Math.abs(this.rotationZ-l)&&Math.abs(this.rotationZ-l)<270&&(l=this.rotationZ,this._setProperty("turnAxis","Z"),n.deviceTurned()),this.pRotateDirectionZ=d,this._setProperty("turnAxis",void 0)}"function"==typeof n.deviceShaken&&(null!==this.pAccelerationX&&(e=Math.abs(this.accelerationX-this.pAccelerationX),t=Math.abs(this.accelerationY-this.pAccelerationY)),p<e+t&&n.deviceShaken())};var v=i.default;n.default=v},{"../core/constants":250,"../core/main":260}],278:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.isKeyPressed=!1,a.default.prototype.keyIsPressed=!1,a.default.prototype.key="",a.default.prototype.keyCode=0,a.default.prototype._onkeydown=function(e){if(!this._downKeys[e.which]){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",e.which),this._downKeys[e.which]=!0,this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which);var t=this._isGlobal?window:this;"function"!=typeof t.keyPressed||e.charCode||!1===t.keyPressed(e)&&e.preventDefault()}},a.default.prototype._onkeyup=function(e){this._downKeys[e.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),this._setProperty("keyCode",e.which);var t=this._isGlobal?window:this;"function"==typeof t.keyReleased&&!1===t.keyReleased(e)&&e.preventDefault()},a.default.prototype._onkeypress=function(e){if(e.which!==this._lastKeyCodeTyped){this._setProperty("_lastKeyCodeTyped",e.which),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which);var t=this._isGlobal?window:this;"function"==typeof t.keyTyped&&!1===t.keyTyped(e)&&e.preventDefault()}},a.default.prototype._onblur=function(e){this._downKeys={}},a.default.prototype.keyIsDown=function(e){return a.default._validateParameters("keyIsDown",arguments),this._downKeys[e]||!1},a.default.prototype._areDownKeys=function(){for(var e in this._downKeys)if(this._downKeys.hasOwnProperty(e)&&!0===this._downKeys[e])return!0;return!1};var i=a.default;n.default=i},{"../core/main":260}],279:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));i.default.prototype.movedX=0,i.default.prototype.movedY=0,i.default.prototype._hasMouseInteracted=!1,i.default.prototype.mouseX=0,i.default.prototype.mouseY=0,i.default.prototype.pmouseX=0,i.default.prototype.pmouseY=0,i.default.prototype.winMouseX=0,i.default.prototype.winMouseY=0,i.default.prototype.pwinMouseX=0,i.default.prototype.pwinMouseY=0,i.default.prototype.mouseButton=0,i.default.prototype.mouseIsPressed=!1,i.default.prototype._updateNextMouseCoords=function(e){if(null!==this._curElement&&(!e.touches||0<e.touches.length)){var t=function(e,t,n,r){r&&!r.clientX&&(r.touches?r=r.touches[0]:r.changedTouches&&(r=r.changedTouches[0]));var a=e.getBoundingClientRect(),i=e.scrollWidth/t||1,o=e.scrollHeight/n||1;return{x:(r.clientX-a.left)/i,y:(r.clientY-a.top)/o,winX:r.clientX,winY:r.clientY,id:r.identifier}}(this._curElement.elt,this.width,this.height,e);this._setProperty("movedX",e.movementX),this._setProperty("movedY",e.movementY),this._setProperty("mouseX",t.x),this._setProperty("mouseY",t.y),this._setProperty("winMouseX",t.winX),this._setProperty("winMouseY",t.winY)}this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},i.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},i.default.prototype._setMouseButton=function(e){1===e.button?this._setProperty("mouseButton",o.CENTER):2===e.button?this._setProperty("mouseButton",o.RIGHT):this._setProperty("mouseButton",o.LEFT)},i.default.prototype._onmousemove=function(e){var t=this._isGlobal?window:this;this._updateNextMouseCoords(e),this.mouseIsPressed?"function"==typeof t.mouseDragged?!1===t.mouseDragged(e)&&e.preventDefault():"function"==typeof t.touchMoved&&!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseMoved&&!1===t.mouseMoved(e)&&e.preventDefault()},i.default.prototype._onmousedown=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(e),this._updateNextMouseCoords(e),"function"==typeof t.mousePressed?!1===t.mousePressed(e)&&e.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof t.touchStarted&&!1===t.touchStarted(e)&&e.preventDefault()},i.default.prototype._onmouseup=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),"function"==typeof t.mouseReleased?!1===t.mouseReleased(e)&&e.preventDefault():"function"==typeof t.touchEnded&&!1===t.touchEnded(e)&&e.preventDefault()},i.default.prototype._ondragend=i.default.prototype._onmouseup,i.default.prototype._ondragover=i.default.prototype._onmousemove,i.default.prototype._onclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.mouseClicked&&!1===t.mouseClicked(e)&&e.preventDefault()},i.default.prototype._ondblclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.doubleClicked&&!1===t.doubleClicked(e)&&e.preventDefault()},i.default.prototype._mouseWheelDeltaY=0,i.default.prototype._pmouseWheelDeltaY=0,i.default.prototype._onwheel=function(e){var t=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",e.deltaY),"function"==typeof t.mouseWheel&&(e.delta=e.deltaY,!1===t.mouseWheel(e)&&e.preventDefault())},i.default.prototype.requestPointerLock=function(){var e=this._curElement.elt;return e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock,e.requestPointerLock?(e.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},i.default.prototype.exitPointerLock=function(){document.exitPointerLock()};var s=i.default;n.default=s},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.includes":154,"core-js/modules/es.string.includes":182}],280:[function(e,t,n){"use strict";e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e,t,n,r,a){var i=4<arguments.length&&void 0!==a?a:0,o=e.getBoundingClientRect(),s=e.scrollWidth/t||1,u=e.scrollHeight/n||1,l=r.touches[i]||r.changedTouches[i];return{x:(l.clientX-o.left)/s,y:(l.clientY-o.top)/u,winX:l.clientX,winY:l.clientY,id:l.identifier}}a.default.prototype.touches=[],a.default.prototype._updateTouchCoords=function(e){if(null!==this._curElement){for(var t=[],n=0;n<e.touches.length;n++)t[n]=i(this._curElement.elt,this.width,this.height,e,n);this._setProperty("touches",t)}},a.default.prototype._ontouchstart=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(e),this._updateNextMouseCoords(e),this._updateMouseCoords(),"function"==typeof t.touchStarted?!1===t.touchStarted(e)&&e.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof t.mousePressed&&!1===t.mousePressed(e)&&e.preventDefault()},a.default.prototype._ontouchmove=function(e){var t=this._isGlobal?window:this;this._updateTouchCoords(e),this._updateNextMouseCoords(e),"function"==typeof t.touchMoved?!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseDragged&&!1===t.mouseDragged(e)&&e.preventDefault()},a.default.prototype._ontouchend=function(e){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(e),this._updateNextMouseCoords(e);var t=this._isGlobal?window:this;"function"==typeof t.touchEnded?!1===t.touchEnded(e)&&e.preventDefault():"function"==typeof t.mouseReleased&&!1===t.mouseReleased(e)&&e.preventDefault()};var o=a.default;n.default=o},{"../core/main":260,"core-js/modules/es.array.includes":154,"core-js/modules/es.string.includes":182}],281:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a,i,o,s={_toPixels:function(e){if(e instanceof ImageData)return e.data;if(e.getContext("2d"))return e.getContext("2d").getImageData(0,0,e.width,e.height).data;if(e.getContext("webgl")){var t=e.getContext("webgl"),n=t.drawingBufferWidth*t.drawingBufferHeight*4,r=new Uint8Array(n);return t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,r),r}},_getARGB:function(e,t){var n=4*t;return e[3+n]<<24&4278190080|e[n]<<16&16711680|e[1+n]<<8&65280|255&e[2+n]},_setPixels:function(e,t){for(var n=0,r=0,a=e.length;r<a;r++)e[0+(n=4*r)]=(16711680&t[r])>>>16,e[n+1]=(65280&t[r])>>>8,e[n+2]=255&t[r],e[n+3]=(4278190080&t[r])>>>24},_toImageData:function(e){return e instanceof ImageData?e:e.getContext("2d").getImageData(0,0,e.width,e.height)},_createImageData:function(e,t){return s._tmpCanvas=document.createElement("canvas"),s._tmpCtx=s._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(e,t)},apply:function(e,t,n){var r=e.getContext("2d"),a=r.getImageData(0,0,e.width,e.height),i=t(a,n);i instanceof ImageData?r.putImageData(i,0,0,0,0,e.width,e.height):r.putImageData(a,0,0,0,0,e.width,e.height)},threshold:function(e,t){var n=s._toPixels(e);void 0===t&&(t=.5);for(var r=Math.floor(255*t),a=0;a<n.length;a+=4){var i;i=r<=.2126*n[a]+.7152*n[a+1]+.0722*n[a+2]?255:0,n[a]=n[a+1]=n[a+2]=i}},gray:function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4){var r=.2126*t[n]+.7152*t[n+1]+.0722*t[n+2];t[n]=t[n+1]=t[n+2]=r}},opaque:function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4)t[n+3]=255;return t},invert:function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2]},posterize:function(e,t){var n=s._toPixels(e);if(t<2||255<t)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var r=t-1,a=0;a<n.length;a+=4){var i=n[a],o=n[a+1],u=n[a+2];n[a]=255*(i*t>>8)/r,n[a+1]=255*(o*t>>8)/r,n[a+2]=255*(u*t>>8)/r}},dilate:function(e){for(var t,n,r,a,i,o,u,l,c,f,d,h,p,v,m,g,y,b=s._toPixels(e),x=0,w=b.length?b.length/4:0,k=new Int32Array(w);x<w;)for(n=(t=x)+e.width;x<n;)r=a=s._getARGB(b,x),(u=x-1)<t&&(u=x),n<=(o=x+1)&&(o=x),(l=x-e.width)<0&&(l=0),w<=(c=x+e.width)&&(c=x),h=s._getARGB(b,l),d=s._getARGB(b,u),p=s._getARGB(b,c),(i=77*(r>>16&255)+151*(r>>8&255)+28*(255&r))<(m=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))&&(a=d,i=m),i<(v=77*((f=s._getARGB(b,o))>>16&255)+151*(f>>8&255)+28*(255&f))&&(a=f,i=v),i<(g=77*(h>>16&255)+151*(h>>8&255)+28*(255&h))&&(a=h,i=g),i<(y=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(a=p,i=y),k[x++]=a;s._setPixels(b,k)},erode:function(e){for(var t,n,r,a,i,o,u,l,c,f,d,h,p,v,m,g,y,b=s._toPixels(e),x=0,w=b.length?b.length/4:0,k=new Int32Array(w);x<w;)for(n=(t=x)+e.width;x<n;)r=a=s._getARGB(b,x),(u=x-1)<t&&(u=x),n<=(o=x+1)&&(o=x),(l=x-e.width)<0&&(l=0),w<=(c=x+e.width)&&(c=x),h=s._getARGB(b,l),d=s._getARGB(b,u),p=s._getARGB(b,c),(m=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))<(i=77*(r>>16&255)+151*(r>>8&255)+28*(255&r))&&(a=d,i=m),(v=77*((f=s._getARGB(b,o))>>16&255)+151*(f>>8&255)+28*(255&f))<i&&(a=f,i=v),(g=77*(h>>16&255)+151*(h>>8&255)+28*(255&h))<i&&(a=h,i=g),(y=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<i&&(a=p,i=y),k[x++]=a;s._setPixels(b,k)},blur:function(e,t){!function(e,t){for(var n,u,l,c,f,d,h,p,v,m,g=s._toPixels(e),y=e.width,b=e.height,x=y*b,w=new Int32Array(x),k=0;k<x;k++)w[k]=s._getARGB(g,k);var S,_,C,E,T=new Int32Array(x),I=new Int32Array(x),A=new Int32Array(x),N=new Int32Array(x),R=0;for(function(e){var t=3.5*e|0;if(r!==(t=t<1?1:t<248?t:248)){a=1+(r=t)<<1,i=new Int32Array(a),o=new Array(a);for(var n=0;n<a;n++)o[n]=new Int32Array(256);for(var s,u,l,c,f=1,d=t-1;f<t;f++){i[t+f]=i[d]=u=d*d,l=o[t+f],c=o[d--];for(var h=0;h<256;h++)l[h]=c[h]=u*h}s=i[t]=t*t,l=o[t];for(var p=0;p<256;p++)l[p]=s*p}}(t),_=0;_<b;_++){for(S=0;S<y;S++){if(c=l=u=f=n=0,(d=S-r)<0)m=-d,d=0;else{if(y<=d)break;m=0}for(C=m;C<a&&!(y<=d);C++){var M=w[d+R];f+=(E=o[C])[(-16777216&M)>>>24],u+=E[(16711680&M)>>16],l+=E[(65280&M)>>8],c+=E[255&M],n+=i[C],d++}T[h=R+S]=f/n,I[h]=u/n,A[h]=l/n,N[h]=c/n}R+=y}for(v=(p=-r)*y,_=R=0;_<b;_++){for(S=0;S<y;S++){if(c=l=u=f=n=0,p<0)m=h=-p,d=S;else{if(b<=p)break;m=0,h=p,d=S+v}for(C=m;C<a&&!(b<=h);C++)f+=(E=o[C])[T[d]],u+=E[I[d]],l+=E[A[d]],c+=E[N[d]],n+=i[C],h++,d+=y;w[S+R]=f/n<<24|u/n<<16|l/n<<8|c/n}R+=y,v+=y,p++}s._setPixels(g,w)}(e,t)}},u=s;n.default=u},{"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.int32-array":206,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223}],282:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("../core/main")),a=i(e("omggif"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.default.prototype.createImage=function(e,t){return r.default._validateParameters("createImage",arguments),new r.default.Image(e,t)},r.default.prototype.saveCanvas=function(){r.default._validateParameters("saveCanvas",arguments);var e,t,n,a,i=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(e=arguments[0],i.shift()):arguments[0]instanceof r.default.Element?(e=arguments[0].elt,i.shift()):e=this._curElement&&this._curElement.elt,1<=i.length&&(t=i[0]),2<=i.length&&(n=i[1]),n=n||r.default.prototype._checkFileExtension(t,n)[1]||"png"){default:a="image/png";break;case"jpeg":case"jpg":a="image/jpeg"}e.toBlob((function(e){r.default.prototype.downloadFile(e,t,n)}),a)},r.default.prototype.saveGif=function(e,t){var n=e.gifProperties,i=n.loopLimit;1===i?i=null:null===i&&(i=0);for(var s=new Uint8Array(e.width*e.height*n.numFrames),u=[],l={},c=0;c<n.numFrames;c++){for(var f=new Set,d=n.frames[c].image.data,h=d.length,p=new Uint32Array(e.width*e.height),v=0,m=0;v<h;v+=4,m++){var g=d[v+0]<<16|d[v+1]<<8|d[v+2]<<0;f.add(g),p[m]=g}var y=o(f).sort().toString();void 0===l[y]?l[y]={freq:1,frames:[c]}:(l[y].freq+=1,l[y].frames.push(c)),u.push(p)}var b=[],x=Object.keys(l).sort((function(e,t){return l[t].freq-l[e].freq})),w=x[0].split(",").map((function(e){return parseInt(e)}));b=b.concat(l[w].frames);for(var k=new Set(w),S=1;S<x.length;S++){var _=x[S].split(",").map((function(e){return parseInt(e)})).filter((function(e){return!k.has(e)}));if(w.length+_.length<=256){for(var C=0;C<_.length;C++)w.push(_[C]),k.add(_[C]);b=b.concat(l[x[S]].frames)}}b=new Set(b);for(var E={},T=0;T<w.length;T++)E[w[T]]||(E[w[T]]=T);for(var I=1;I<w.length;)I<<=1;w.length=I;for(var A={loop:i,palette:new Uint32Array(w)},N=new a.default.GifWriter(s,e.width,e.height,A),R={},M=function(t){for(var r=!b.has(t),a=r?[]:w,i=new Uint8Array(e.width*e.height),o={},s=new Set,l=0;l<u[t].length;l++){var c=u[t][l];r?(void 0===o[c]&&(o[c]=a.length,a.push(c)),i[l]=o[c]):i[l]=E[c],0<t&&u[t-1][l]!==c&&s.add(c)}var f={},d=a.filter((function(e){return!s.has(e)}));if(0<d.length){var h=d[0],p=r?o[h]:E[h];if(0<t){for(var v=0;v<u[t].length;v++)u[t-1][v]===u[t][v]&&(i[v]=p);f.transparent=p,R.frameOpts.disposal=1}}if(f.delay=n.frames[t].delay/10,r){for(var m=1;m<a.length;)m<<=1;a.length=m,f.palette=new Uint32Array(a)}0<t&&N.addFrame(0,0,e.width,e.height,R.pixelPaletteIndex,R.frameOpts),R={pixelPaletteIndex:i,frameOpts:f}},O=0;O<n.numFrames;O++)M(O);R.frameOpts.disposal=1,N.addFrame(0,0,e.width,e.height,R.pixelPaletteIndex,R.frameOpts);var D=new Blob([s.slice(0,N.end())],{type:"image/gif"});r.default.prototype.downloadFile(D,t,"gif")},r.default.prototype.saveFrames=function(e,t,n,a,i){r.default._validateParameters("saveFrames",arguments);var o=n||3;o=r.default.prototype.constrain(o,0,15),o*=1e3;var s=a||15;s=r.default.prototype.constrain(s,0,22);var u=0,l=r.default.prototype._makeFrame,c=this._curElement.elt,f=[],d=setInterval((function(){f.push(l(e+u,t,c)),u++}),1e3/s);setTimeout((function(){if(clearInterval(d),i)i(f);else{var e=!0,t=!1,n=void 0;try{for(var a,o=f[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var s=a.value;r.default.prototype.downloadFile(s.imageData,s.filename,s.ext)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}f=[]}),o+.01)},r.default.prototype._makeFrame=function(e,t,n){var r,a;if(r=this?this._curElement.elt:n,t)switch(t.toLowerCase()){case"png":default:a="image/png";break;case"jpeg":case"jpg":a="image/jpeg"}else t="png",a="image/png";var i=r.toDataURL(a);i=i.replace(a,"image/octet-stream");var o={};return o.imageData=i,o.filename=e,o.ext=t,o};var s=r.default;n.default=s},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.from":153,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.set":180,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint32-array":222,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/web.dom-collections.iterator":226,omggif:235}],283:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=l(e("../core/main")),i=l(e("./filters")),o=l(e("../core/helpers")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants")),u=l(e("omggif"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return 0<e&&e<t?e:t}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),a.default.prototype.loadImage=function(e,t,n){a.default._validateParameters("loadImage",arguments);var r=new a.default.Image(1,1,this),i=this,o=new Request(e,{method:"GET",mode:"cors"});return fetch(e,o).then((function(o){var s=o.headers.get("content-type");if(null===s&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),s&&s.includes("image/gif"))o.arrayBuffer().then((function(e){e&&function(e,t,n,r,i){var o=new u.default.GifReader(e);t.width=t.canvas.width=o.width,t.height=t.canvas.height=o.height;var s=[],l=o.numFrames(),c=new Uint8ClampedArray(t.width*t.height*4);if(1<l){for(var f=function(e,n){try{n.decodeAndBlitFrameRGBA(e,c)}catch(e){a.default._friendlyFileLoadError(8,t.src),"function"==typeof r?r(e):console.error(e)}},d=0;d<l;d++){var h=o.frameInfo(d);1===o.frameInfo(d).disposal&&0<d?t.drawingContext.putImageData(s[d-1].image,0,0):(t.drawingContext.clearRect(0,0,t.width,t.height),c=new Uint8ClampedArray(t.width*t.height*4)),f(d,o);var p=new ImageData(c,t.width,t.height);t.drawingContext.putImageData(p,0,0);var v=h.delay;0===v&&(v=10),s.push({image:t.drawingContext.getImageData(0,0,t.width,t.height),delay:10*v})}var m=o.loopCount();null===m?m=1:0===m&&(m=null),t.drawingContext.putImageData(s[0].image,0,0),t.gifProperties={displayIndex:0,loopLimit:m,loopCount:0,frames:s,numFrames:l,playing:!0,timeDisplayed:0,lastChangeTime:0}}"function"==typeof n&&n(t),i()}(new Uint8Array(e),r,t,n,function(e){i._decrementPreload()}.bind(i))}),(function(e){"function"==typeof n?n(e):console.error(e)}));else{var l=new Image;l.onload=function(){r.width=r.canvas.width=l.width,r.height=r.canvas.height=l.height,r.drawingContext.drawImage(l,0,0),r.modified=!0,"function"==typeof t&&t(r),i._decrementPreload()},l.onerror=function(e){a.default._friendlyFileLoadError(0,l.src),"function"==typeof n?n(e):console.error(e)},0!==e.indexOf("data:image/")&&(l.crossOrigin="Anonymous"),l.src=e}r.modified=!0})).catch((function(t){a.default._friendlyFileLoadError(0,e),"function"==typeof n?n(t):console.error(t)})),r},a.default.prototype.image=function(e,t,n,r,i,s,u,l,f){a.default._validateParameters("image",arguments);var d=e.width,h=e.height;e.elt&&e.elt.videoWidth&&!e.canvas&&(d=e.elt.videoWidth,h=e.elt.videoHeight);var p=t,v=n,m=r||d,g=i||h,y=s||0,b=u||0,x=l||d,w=f||h;x=c(x,d),w=c(w,h);var k=1;e.elt&&!e.canvas&&e.elt.style.width&&(k=e.elt.videoWidth&&!r?e.elt.videoWidth:e.elt.width,k/=parseInt(e.elt.style.width,10)),y*=k,b*=k,w*=k,x*=k;var S=o.default.modeAdjust(p,v,m,g,this._renderer._imageMode);this._renderer.image(e,y,b,x,w,S.x,S.y,S.w,S.h)},a.default.prototype.tint=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default._validateParameters("tint",t);var r=this.color.apply(this,t);this._renderer._tint=r.levels},a.default.prototype.noTint=function(){this._renderer._tint=null},a.default.prototype._getTintedImageCanvas=function(e){if(!e.canvas)return e;var t=i.default._toPixels(e.canvas),n=document.createElement("canvas");n.width=e.canvas.width,n.height=e.canvas.height;for(var r=n.getContext("2d"),a=r.createImageData(e.canvas.width,e.canvas.height),o=a.data,s=0;s<t.length;s+=4){var u=t[s],l=t[s+1],c=t[s+2],f=t[s+3];o[s]=u*this._renderer._tint[0]/255,o[s+1]=l*this._renderer._tint[1]/255,o[s+2]=c*this._renderer._tint[2]/255,o[s+3]=f*this._renderer._tint[3]/255}return r.putImageData(a,0,0),n},a.default.prototype.imageMode=function(e){a.default._validateParameters("imageMode",arguments),e!==s.CORNER&&e!==s.CORNERS&&e!==s.CENTER||(this._renderer._imageMode=e)};var f=a.default;n.default=f},{"../core/constants":250,"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/helpers":256,"../core/main":260,"./filters":281,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.string.includes":182,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/es.typed-array.uint8-clamped-array":224,omggif:235}],284:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("../core/main")),a=i(e("./filters"));function i(e){return e&&e.__esModule?e:{default:e}}r.default.Image=function(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},r.default.Image.prototype._animateGif=function(e){var t=this.gifProperties,n=e._lastFrameTime+e.deltaTime;if(0===t.lastChangeTime&&(t.lastChangeTime=n),t.playing){t.timeDisplayed=n-t.lastChangeTime;var r=t.frames[t.displayIndex].delay;if(t.timeDisplayed>=r){var a=Math.floor(t.timeDisplayed/r);if(t.timeDisplayed=0,t.lastChangeTime=n,t.displayIndex+=a,t.loopCount=Math.floor(t.displayIndex/t.numFrames),null!==t.loopLimit&&t.loopCount>=t.loopLimit)t.playing=!1;else{var i=t.displayIndex%t.numFrames;this.drawingContext.putImageData(t.frames[i].image,0,0),t.displayIndex=i,this.setModified(!0)}}}},r.default.Image.prototype._setProperty=function(e,t){this[e]=t,this.setModified(!0)},r.default.Image.prototype.loadPixels=function(){r.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},r.default.Image.prototype.updatePixels=function(e,t,n,a){r.default.Renderer2D.prototype.updatePixels.call(this,e,t,n,a),this.setModified(!0)},r.default.Image.prototype.get=function(e,t,n,a){return r.default._validateParameters("p5.Image.get",arguments),r.default.Renderer2D.prototype.get.apply(this,arguments)},r.default.Image.prototype._getPixel=r.default.Renderer2D.prototype._getPixel,r.default.Image.prototype.set=function(e,t,n){r.default.Renderer2D.prototype.set.call(this,e,t,n),this.setModified(!0)},r.default.Image.prototype.resize=function(e,t){0===e&&0===t?(e=this.canvas.width,t=this.canvas.height):0===e?e=this.canvas.width*t/this.canvas.height:0===t&&(t=this.canvas.height*e/this.canvas.width),e=Math.floor(e),t=Math.floor(t);var n=document.createElement("canvas");if(n.width=e,n.height=t,this.gifProperties)for(var r=this.gifProperties,a=function(e,t){for(var n=0,r=0;r<t.height;r++)for(var a=0;a<t.width;a++){var i=Math.floor(a*e.width/t.width),o=4*(Math.floor(r*e.height/t.height)*e.width+i);t.data[n++]=e.data[o++],t.data[n++]=e.data[o++],t.data[n++]=e.data[o++],t.data[n++]=e.data[o++]}},i=0;i<r.numFrames;i++){var o=this.drawingContext.createImageData(e,t);a(r.frames[i].image,o),r.frames[i].image=o}n.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,n.width,n.height),this.canvas.width=this.width=e,this.canvas.height=this.height=t,this.drawingContext.drawImage(n,0,0,e,t,0,0,e,t),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},r.default.Image.prototype.copy=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default.prototype.copy.apply(this,t)},r.default.Image.prototype.mask=function(e){void 0===e&&(e=this);var t=this.drawingContext.globalCompositeOperation,n=1;e instanceof r.default.Renderer&&(n=e._pInst._pixelDensity);var a=[e,0,0,n*e.width,n*e.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",r.default.Image.prototype.copy.apply(this,a),this.drawingContext.globalCompositeOperation=t,this.setModified(!0)},r.default.Image.prototype.filter=function(e,t){a.default.apply(this.canvas,a.default[e],t),this.setModified(!0)},r.default.Image.prototype.blend=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("p5.Image.blend",arguments),r.default.prototype.blend.apply(this,t),this.setModified(!0)},r.default.Image.prototype.setModified=function(e){this._modified=e},r.default.Image.prototype.isModified=function(){return this._modified},r.default.Image.prototype.save=function(e,t){this.gifProperties?r.default.prototype.saveGif(this,e):r.default.prototype.saveCanvas(this.canvas,e,t)},r.default.Image.prototype.reset=function(){if(this.gifProperties){var e=this.gifProperties;e.playing=!0,e.timeSinceStart=0,e.timeDisplayed=0,e.lastChangeTime=0,e.loopCount=0,e.displayIndex=0,this.drawingContext.putImageData(e.frames[0].image,0,0)}},r.default.Image.prototype.getCurrentFrame=function(){if(this.gifProperties){var e=this.gifProperties;return e.displayIndex%e.numFrames}},r.default.Image.prototype.setFrame=function(e){if(this.gifProperties){var t=this.gifProperties;e<t.numFrames&&0<=e?(t.timeDisplayed=0,t.lastChangeTime=0,t.displayIndex=e,this.drawingContext.putImageData(t.frames[e].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero.")}},r.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},r.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},r.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},r.default.Image.prototype.delay=function(e,t){if(this.gifProperties){var n=this.gifProperties;if(t<n.numFrames&&0<=t)n.frames[t].delay=e;else{var r=!0,a=!1,i=void 0;try{for(var o,s=n.frames[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)o.value.delay=e}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}}};var o=r.default.Image;n.default=o},{"../core/main":260,"./filters":281,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],285:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("../core/main")),a=i(e("./filters"));function i(e){return e&&e.__esModule?e:{default:e}}e("../color/p5.Color"),r.default.prototype.pixels=[],r.default.prototype.blend=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a;r.default._validateParameters("blend",t),this._renderer?(a=this._renderer).blend.apply(a,t):r.default.Renderer2D.prototype.blend.apply(this,t)},r.default.prototype.copy=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a,i,o,s,u,l,c,f,d;if(r.default._validateParameters("copy",t),9===t.length)a=t[0],i=t[1],o=t[2],s=t[3],u=t[4],l=t[5],c=t[6],f=t[7],d=t[8];else{if(8!==t.length)throw new Error("Signature not supported");a=this,i=t[0],o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],d=t[7]}r.default.prototype._copyHelper(this,a,i,o,s,u,l,c,f,d)},r.default.prototype._copyHelper=function(e,t,n,a,i,o,s,u,l,c){t.loadPixels();var f=t.canvas.width/t.width,d=0,h=0;t._renderer&&t._renderer.isP3D&&(d=t.width/2,h=t.height/2),e._renderer&&e._renderer.isP3D?r.default.RendererGL.prototype.image.call(e._renderer,t,n+d,a+h,i,o,s,u,l,c):e.drawingContext.drawImage(t.canvas,f*(n+d),f*(a+h),f*i,f*o,s,u,l,c)},r.default.prototype.filter=function(e,t){r.default._validateParameters("filter",arguments),void 0!==this.canvas?a.default.apply(this.canvas,a.default[e],t):a.default.apply(this.elt,a.default[e],t)},r.default.prototype.get=function(e,t,n,a){var i;return r.default._validateParameters("get",arguments),(i=this._renderer).get.apply(i,arguments)},r.default.prototype.loadPixels=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("loadPixels",t),this._renderer.loadPixels()},r.default.prototype.set=function(e,t,n){this._renderer.set(e,t,n)},r.default.prototype.updatePixels=function(e,t,n,a){r.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(e,t,n,a)};var o=r.default;n.default=o},{"../color/p5.Color":248,"../core/main":260,"./filters":281,"core-js/modules/es.array.filter":151}],286:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("../core/main"));e("whatwg-fetch"),e("es6-promise/auto");var a=o(e("fetch-jsonp")),i=o(e("file-saver"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n={};if(void 0===(t=t||[]))for(var r=0;r<e.length;r++)t[r.toString()]=r;for(var a=0;a<t.length;a++){var i=t[a],o=e[a];n[i]=o}return n}function l(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function c(e,t){t&&!0!==t&&"true"!==t||(t="");var n="";return(e=e||"untitled")&&e.includes(".")&&(n=e.split(".").pop()),t&&n!==t&&(n=t,e="".concat(e,".").concat(n)),[e,n]}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),r.default.prototype.loadJSON=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("loadJSON",t);for(var a,i,o,u=t[0],l={},c="json",f=1;f<t.length;f++){var d=t[f];"string"==typeof d?"jsonp"!==d&&"json"!==d||(c=d):"function"==typeof d?a?i=d:a=d:"object"===s(d)&&(d.hasOwnProperty("jsonpCallback")||d.hasOwnProperty("jsonpCallbackFunction"))&&(c="jsonp",o=d)}var h=this;return this.httpDo(u,"GET",o,c,(function(e){for(var t in e)l[t]=e[t];void 0!==a&&a(e),h._decrementPreload()}),(function(e){if(r.default._friendlyFileLoadError(5,u),!i)throw e;i(e)})),l},r.default.prototype.loadStrings=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("loadStrings",t);for(var a,i,o=[],s=1;s<t.length;s++){var u=t[s];"function"==typeof u&&(void 0===a?a=u:void 0===i&&(i=u))}var l=this;return r.default.prototype.httpDo.call(this,t[0],"GET","text",(function(e){for(var t=e.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),n=0,r=t.length;n<r;n+=32768)Array.prototype.push.apply(o,t.slice(n,Math.min(n+32768,r)));void 0!==a&&a(o),l._decrementPreload()}),(function(e){if(r.default._friendlyFileLoadError(3,e),!i)throw e;i(e)})),o},r.default.prototype.loadTable=function(e){var t,n,a,i=[],o=!1,s=e.substring(e.lastIndexOf(".")+1,e.length);"csv"===s?a=",":"ssv"===s?a=";":"tsv"===s&&(a="\t");for(var l=1;l<arguments.length;l++)"function"==typeof arguments[l]?void 0===t?t=arguments[l]:void 0===n&&(n=arguments[l]):"string"==typeof arguments[l]&&(i.push(arguments[l]),"header"===arguments[l]&&(o=!0),"csv"===arguments[l]?a=",":"ssv"===arguments[l]?a=";":"tsv"===arguments[l]&&(a="\t"));var c=new r.default.Table,f=this;return this.httpDo(e,"GET","table",(function(e){for(var n,i,s={},l=[],d=0,h=null,p=function(){s.currentState=0,s.token=""},v=function(){h.push(s.token),p()},m=function(){s.currentState=4,l.push(h),h=null};;){if(null==(n=e[d++])){if(s.escaped)throw new Error("Unclosed quote in file.");if(h){v(),m();break}}if(null===h&&(s.escaped=!1,h=[],p()),0===s.currentState){if('"'===n){s.escaped=!0,s.currentState=1;continue}s.currentState=1}if(1===s.currentState&&s.escaped)if('"'===n)'"'===e[d]?(s.token+='"',d++):(s.escaped=!1,s.currentState=2);else{if("\r"===n)continue;s.token+=n}else"\r"===n?("\n"===e[d]&&d++,v(),m()):"\n"===n?(v(),m()):n===a?v():1===s.currentState&&(s.token+=n)}if(o)c.columns=l.shift();else for(var g=0;g<l[0].length;g++)c.columns[g]="null";for(var y=0;y<l.length;y++)(1!==l[y].length||"undefined"!==l[y][0]&&""!==l[y][0])&&((i=new r.default.TableRow).arr=l[y],i.obj=u(l[y],c.columns),c.addRow(i));"function"==typeof t&&t(c),f._decrementPreload()}),(function(t){r.default._friendlyFileLoadError(2,e),n?n(t):console.error(t)})),c},r.default.prototype.loadXML=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var a,i,o=new r.default.XML,s=1;s<t.length;s++){var u=t[s];"function"==typeof u&&(void 0===a?a=u:void 0===i&&(i=u))}var l=this;return this.httpDo(t[0],"GET","xml",(function(e){for(var t in e)o[t]=e[t];void 0!==a&&a(o),l._decrementPreload()}),(function(e){if(r.default._friendlyFileLoadError(1,e),!i)throw e;i(e)})),o},r.default.prototype.loadBytes=function(e,t,n){var a={},i=this;return this.httpDo(e,"GET","arrayBuffer",(function(e){a.bytes=new Uint8Array(e),"function"==typeof t&&t(a),i._decrementPreload()}),(function(t){if(r.default._friendlyFileLoadError(6,e),!n)throw t;n(t)})),a},r.default.prototype.httpGet=function(){r.default._validateParameters("httpGet",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"GET"),r.default.prototype.httpDo.apply(this,e)},r.default.prototype.httpPost=function(){r.default._validateParameters("httpPost",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"POST"),r.default.prototype.httpDo.apply(this,e)},r.default.prototype.httpDo=function(){for(var e,t,n,i,o,u={},l=0,c="text/plain",f=arguments.length-1;0<f&&"function"==typeof(f<0||arguments.length<=f?void 0:arguments[f]);f--)l++;var d=arguments.length<=0?void 0:arguments[0];if(2==arguments.length-l&&"string"==typeof d&&"object"===s(arguments.length<=1?void 0:arguments[1]))i=new Request(d,arguments.length<=1?void 0:arguments[1]),t=arguments.length<=2?void 0:arguments[2],n=arguments.length<=3?void 0:arguments[3];else{for(var h,p="GET",v=1;v<arguments.length;v++){var m=v<0||arguments.length<=v?void 0:arguments[v];if("string"==typeof m)"GET"===m||"POST"===m||"PUT"===m||"DELETE"===m?p=m:"json"===m||"jsonp"===m||"binary"===m||"arrayBuffer"===m||"xml"===m||"text"===m||"table"===m?e=m:h=m;else if("number"==typeof m)h=m.toString();else if("object"===s(m))if(m.hasOwnProperty("jsonpCallback")||m.hasOwnProperty("jsonpCallbackFunction"))for(var g in m)u[g]=m[g];else c=m instanceof r.default.XML?(h=m.serialize(),"application/xml"):(h=JSON.stringify(m),"application/json");else"function"==typeof m&&(t?n=m:t=m)}var y="GET"===p?new Headers:new Headers({"Content-Type":c});i=new Request(d,{method:p,mode:"cors",body:h,headers:y})}return(o=(o="jsonp"===(e=e||(d.includes("json")?"json":d.includes("xml")?"xml":"text"))?(0,a.default)(d,u):fetch(i)).then((function(t){if(!t.ok){var n=new Error(t.body);throw n.status=t.status,n.ok=!1,n}var a=0;switch("jsonp"!==e&&(a=t.headers.get("content-length")),a&&64e6<a&&r.default._friendlyFileLoadError(7,d),e){case"json":case"jsonp":return t.json();case"binary":return t.blob();case"arrayBuffer":return t.arrayBuffer();case"xml":return t.text().then((function(e){var t=(new DOMParser).parseFromString(e,"text/xml");return new r.default.XML(t.documentElement)}));default:return t.text()}}))).then(t||function(){}),o.catch(n||console.error),o},window.URL=window.URL||window.webkitURL,r.default.prototype._pWriters=[],r.default.prototype.createWriter=function(e,t){var n;for(var a in r.default.prototype._pWriters)if(r.default.prototype._pWriters[a].name===e)return n=new r.default.PrintWriter(e+this.millis(),t),r.default.prototype._pWriters.push(n),n;return n=new r.default.PrintWriter(e,t),r.default.prototype._pWriters.push(n),n},r.default.PrintWriter=function(e,t){var n=this;this.name=e,this.content="",this.write=function(e){this.content+=e},this.print=function(e){this.content+="".concat(e,"\n")},this.clear=function(){this.content=""},this.close=function(){var a=[];for(var i in a.push(this.content),r.default.prototype.writeFile(a,e,t),r.default.prototype._pWriters)r.default.prototype._pWriters[i].name===this.name&&r.default.prototype._pWriters.splice(i,1);n.clear(),n={}}},r.default.prototype.save=function(e,t,n){var a=arguments,i=this._curElement?this._curElement.elt:this.elt;if(0!==a.length)if(a[0]instanceof r.default.Renderer||a[0]instanceof r.default.Graphics)r.default.prototype.saveCanvas(a[0].elt,a[1],a[2]);else if(1===a.length&&"string"==typeof a[0])r.default.prototype.saveCanvas(i,a[0]);else switch(c(a[1],a[2])[1]){case"json":return void r.default.prototype.saveJSON(a[0],a[1],a[2]);case"txt":return void r.default.prototype.saveStrings(a[0],a[1],a[2]);default:a[0]instanceof Array?r.default.prototype.saveStrings(a[0],a[1],a[2]):a[0]instanceof r.default.Table?r.default.prototype.saveTable(a[0],a[1],a[2]):a[0]instanceof r.default.Image?r.default.prototype.saveCanvas(a[0].canvas,a[1]):a[0]instanceof r.default.SoundFile&&r.default.prototype.saveSound(a[0],a[1],a[2],a[3])}else r.default.prototype.saveCanvas(i)},r.default.prototype.saveJSON=function(e,t,n){var a;r.default._validateParameters("saveJSON",arguments),a=n?JSON.stringify(e):JSON.stringify(e,void 0,2),this.saveStrings(a.split("\n"),t,"json")},r.default.prototype.saveJSONObject=r.default.prototype.saveJSON,r.default.prototype.saveJSONArray=r.default.prototype.saveJSON,r.default.prototype.saveStrings=function(e,t,n,a){r.default._validateParameters("saveStrings",arguments);for(var i=n||"txt",o=this.createWriter(t,i),s=0;s<e.length;s++)a?o.write(e[s]+"\r\n"):o.write(e[s]+"\n");o.close(),o.clear()},r.default.prototype.saveTable=function(e,t,n){var a;r.default._validateParameters("saveTable",arguments),a=void 0===n?t.substring(t.lastIndexOf(".")+1,t.length):n;var i=this.createWriter(t,a),o=e.columns,s=",";if("tsv"===a&&(s="\t"),"html"!==a){if("0"!==o[0]){for(var u=0;u<o.length;u++)u<o.length-1?i.write(o[u]+s):i.write(o[u]);i.write("\n")}for(var c=0;c<e.rows.length;c++){var f=void 0;for(f=0;f<e.rows[c].arr.length;f++)f<e.rows[c].arr.length-1?"csv"===a&&String(e.rows[c].arr[f]).includes(",")?i.write('"'+e.rows[c].arr[f]+'"'+s):i.write(e.rows[c].arr[f]+s):"csv"===a&&String(e.rows[c].arr[f]).includes(",")?i.write('"'+e.rows[c].arr[f]+'"'):i.write(e.rows[c].arr[f]);i.write("\n")}}else{if(i.print("<html>"),i.print("<head>"),i.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),i.print("</head>"),i.print("<body>"),i.print("  <table>"),"0"!==o[0]){i.print("    <tr>");for(var d=0;d<o.length;d++){var h=l(o[d]);i.print("      <td>".concat(h)),i.print("      </td>")}i.print("    </tr>")}for(var p=0;p<e.rows.length;p++){i.print("    <tr>");for(var v=0;v<e.columns.length;v++){var m=l(e.rows[p].getString(v));i.print("      <td>".concat(m)),i.print("      </td>")}i.print("    </tr>")}i.print("  </table>"),i.print("</body>"),i.print("</html>")}i.close(),i.clear()},r.default.prototype.writeFile=function(e,t,n){var a="application/octet-stream";r.default.prototype._isSafari()&&(a="text/plain");var i=new Blob(e,{type:a});r.default.prototype.downloadFile(i,t,n)},r.default.prototype.downloadFile=function(e,t,n){var a=c(t,n),o=a[0];if(e instanceof Blob)i.default.saveAs(e,o);else{var s=document.createElement("a");if(s.href=e,s.download=o,s.onclick=function(e){var t;t=e,document.body.removeChild(t.target),e.stopPropagation()},s.style.display="none",document.body.appendChild(s),r.default.prototype._isSafari()){var u="Hello, Safari user! To download this file...\n";u+="1. Go to File --\x3e Save As.\n",u+='2. Choose "Page Source" as the Format.\n',u+='3. Name it with this extension: ."'.concat(a[1],'"'),alert(u)}s.click()}},r.default.prototype._checkFileExtension=c,r.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")};var f=r.default;n.default=f},{"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.last-index-of":158,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.function.name":163,"core-js/modules/es.object.to-string":174,"core-js/modules/es.promise":175,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/web.dom-collections.iterator":226,"core-js/modules/web.url":228,"es6-promise/auto":229,"fetch-jsonp":231,"file-saver":232,"whatwg-fetch":239}],287:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.trim"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.Table=function(e){this.columns=[],this.rows=[]},a.default.Table.prototype.addRow=function(e){var t=e||new a.default.TableRow;if(void 0===t.arr||void 0===t.obj)throw new Error("invalid TableRow: ".concat(t));return(t.table=this).rows.push(t),t},a.default.Table.prototype.removeRow=function(e){this.rows[e].table=null;var t=this.rows.splice(e+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(t)},a.default.Table.prototype.getRow=function(e){return this.rows[e]},a.default.Table.prototype.getRows=function(){return this.rows},a.default.Table.prototype.findRow=function(e,t){if("string"==typeof t){for(var n=0;n<this.rows.length;n++)if(this.rows[n].obj[t]===e)return this.rows[n]}else for(var r=0;r<this.rows.length;r++)if(this.rows[r].arr[t]===e)return this.rows[r];return null},a.default.Table.prototype.findRows=function(e,t){var n=[];if("string"==typeof t)for(var r=0;r<this.rows.length;r++)this.rows[r].obj[t]===e&&n.push(this.rows[r]);else for(var a=0;a<this.rows.length;a++)this.rows[a].arr[t]===e&&n.push(this.rows[a]);return n},a.default.Table.prototype.matchRow=function(e,t){if("number"==typeof t){for(var n=0;n<this.rows.length;n++)if(this.rows[n].arr[t].match(e))return this.rows[n]}else for(var r=0;r<this.rows.length;r++)if(this.rows[r].obj[t].match(e))return this.rows[r];return null},a.default.Table.prototype.matchRows=function(e,t){var n=[];if("number"==typeof t)for(var r=0;r<this.rows.length;r++)this.rows[r].arr[t].match(e)&&n.push(this.rows[r]);else for(var a=0;a<this.rows.length;a++)this.rows[a].obj[t].match(e)&&n.push(this.rows[a]);return n},a.default.Table.prototype.getColumn=function(e){var t=[];if("string"==typeof e)for(var n=0;n<this.rows.length;n++)t.push(this.rows[n].obj[e]);else for(var r=0;r<this.rows.length;r++)t.push(this.rows[r].arr[e]);return t},a.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},a.default.Table.prototype.addColumn=function(e){var t=e||null;this.columns.push(t)},a.default.Table.prototype.getColumnCount=function(){return this.columns.length},a.default.Table.prototype.getRowCount=function(){return this.rows.length},a.default.Table.prototype.removeTokens=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var a=new RegExp(n.join("|"),"g");if(void 0===t)for(var i=0;i<this.columns.length;i++)for(var o=0;o<this.rows.length;o++){var s=this.rows[o].arr[i];s=s.replace(a,""),this.rows[o].arr[i]=s,this.rows[o].obj[this.columns[i]]=s}else if("string"==typeof t)for(var u=0;u<this.rows.length;u++){var l=this.rows[u].obj[t];l=l.replace(a,""),this.rows[u].obj[t]=l;var c=this.columns.indexOf(t);this.rows[u].arr[c]=l}else for(var f=0;f<this.rows.length;f++){var d=this.rows[f].arr[t];d=d.replace(a,""),this.rows[f].arr[t]=d,this.rows[f].obj[this.columns[t]]=d}},a.default.Table.prototype.trim=function(e){var t=new RegExp(" ","g");if(void 0===e)for(var n=0;n<this.columns.length;n++)for(var r=0;r<this.rows.length;r++){var a=this.rows[r].arr[n];a=a.replace(t,""),this.rows[r].arr[n]=a,this.rows[r].obj[this.columns[n]]=a}else if("string"==typeof e)for(var i=0;i<this.rows.length;i++){var o=this.rows[i].obj[e];o=o.replace(t,""),this.rows[i].obj[e]=o;var s=this.columns.indexOf(e);this.rows[i].arr[s]=o}else for(var u=0;u<this.rows.length;u++){var l=this.rows[u].arr[e];l=l.replace(t,""),this.rows[u].arr[e]=l,this.rows[u].obj[this.columns[e]]=l}},a.default.Table.prototype.removeColumn=function(e){var t,n;"string"==typeof e?(t=e,n=this.columns.indexOf(e)):(n=e,t=this.columns[e]);var r=this.columns.splice(n+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(r);for(var a=0;a<this.rows.length;a++){var i=this.rows[a].arr,o=i.splice(n+1,i.length);i.pop(),this.rows[a].arr=i.concat(o),delete this.rows[a].obj[t]}},a.default.Table.prototype.set=function(e,t,n){this.rows[e].set(t,n)},a.default.Table.prototype.setNum=function(e,t,n){this.rows[e].setNum(t,n)},a.default.Table.prototype.setString=function(e,t,n){this.rows[e].setString(t,n)},a.default.Table.prototype.get=function(e,t){return this.rows[e].get(t)},a.default.Table.prototype.getNum=function(e,t){return this.rows[e].getNum(t)},a.default.Table.prototype.getString=function(e,t){return this.rows[e].getString(t)},a.default.Table.prototype.getObject=function(e){for(var t,n={},r=0;r<this.rows.length;r++)if(t=this.rows[r].obj,"string"==typeof e){if(!(0<=this.columns.indexOf(e)))throw new Error('This table has no column named "'.concat(e,'"'));n[t[e]]=t}else n[r]=this.rows[r].obj;return n},a.default.Table.prototype.getArray=function(){for(var e=[],t=0;t<this.rows.length;t++)e.push(this.rows[t].arr);return e};var i=a.default;n.default=i},{"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.join":157,"core-js/modules/es.array.splice":162,"core-js/modules/es.regexp.constructor":177,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.match":184,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.trim":190}],288:[function(e,t,n){"use strict";e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.TableRow=function(e,t){var n=[],r={};e&&(t=t||",",n=e.split(t));for(var a=0;a<n.length;a++){var i=a,o=n[a];r[i]=o}this.arr=n,this.obj=r,this.table=null},a.default.TableRow.prototype.set=function(e,t){if("string"==typeof e){var n=this.table.columns.indexOf(e);if(!(0<=n))throw new Error('This table has no column named "'.concat(e,'"'));this.obj[e]=t,this.arr[n]=t}else{if(!(e<this.table.columns.length))throw new Error("Column #".concat(e," is out of the range of this table"));this.arr[e]=t;var r=this.table.columns[e];this.obj[r]=t}},a.default.TableRow.prototype.setNum=function(e,t){var n=parseFloat(t);this.set(e,n)},a.default.TableRow.prototype.setString=function(e,t){var n=t.toString();this.set(e,n)},a.default.TableRow.prototype.get=function(e){return"string"==typeof e?this.obj[e]:this.arr[e]},a.default.TableRow.prototype.getNum=function(e){var t;if("NaN"===(t="string"==typeof e?parseFloat(this.obj[e]):parseFloat(this.arr[e])).toString())throw"Error: ".concat(this.obj[e]," is NaN (Not a Number)");return t},a.default.TableRow.prototype.getString=function(e){return"string"==typeof e?this.obj[e].toString():this.arr[e].toString()};var i=a.default;n.default=i},{"../core/main":260,"core-js/modules/es.array.index-of":155,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.split":188}],289:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.XML=function(e){if(e)this.DOM=e;else{var t=document.implementation.createDocument(null,"doc");this.DOM=t.createElement("root")}},a.default.XML.prototype.getParent=function(){return new a.default.XML(this.DOM.parentElement)},a.default.XML.prototype.getName=function(){return this.DOM.tagName},a.default.XML.prototype.setName=function(e){var t=this.DOM.innerHTML,n=this.DOM.attributes,r=document.implementation.createDocument(null,"default").createElement(e);r.innerHTML=t;for(var a=0;a<n.length;a++)r.setAttribute(n[a].nodeName,n.nodeValue);this.DOM=r},a.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},a.default.XML.prototype.listChildren=function(){for(var e=[],t=0;t<this.DOM.childNodes.length;t++)e.push(this.DOM.childNodes[t].nodeName);return e},a.default.XML.prototype.getChildren=function(e){return function(e){for(var t=[],n=0;n<e.length;n++)t.push(new a.default.XML(e[n]));return t}(e?this.DOM.getElementsByTagName(e):this.DOM.children)},a.default.XML.prototype.getChild=function(e){if("string"!=typeof e)return new a.default.XML(this.DOM.children[e]);var t=!0,n=!1,r=void 0;try{for(var i,o=this.DOM.children[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;if(s.tagName===e)return new a.default.XML(s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},a.default.XML.prototype.addChild=function(e){e instanceof a.default.XML&&this.DOM.appendChild(e.DOM)},a.default.XML.prototype.removeChild=function(e){var t=-1;if("string"==typeof e){for(var n=0;n<this.DOM.children.length;n++)if(this.DOM.children[n].tagName===e){t=n;break}}else t=e;-1!==t&&this.DOM.removeChild(this.DOM.children[t])},a.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},a.default.XML.prototype.listAttributes=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,i=this.DOM.attributes[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;e.push(o.nodeName)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e},a.default.XML.prototype.hasAttribute=function(e){var t={},n=!0,r=!1,a=void 0;try{for(var i,o=this.DOM.attributes[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;t[s.nodeName]=s.nodeValue}}catch(e){r=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return!!t[e]},a.default.XML.prototype.getNum=function(e,t){var n={},r=!0,a=!1,i=void 0;try{for(var o,s=this.DOM.attributes[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;n[u.nodeName]=u.nodeValue}}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return Number(n[e])||t||0},a.default.XML.prototype.getString=function(e,t){var n={},r=!0,a=!1,i=void 0;try{for(var o,s=this.DOM.attributes[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;n[u.nodeName]=u.nodeValue}}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n[e]?String(n[e]):t||null},a.default.XML.prototype.setAttribute=function(e,t){this.DOM.setAttribute(e,t)},a.default.XML.prototype.getContent=function(e){return this.DOM.textContent.replace(/\s\s+/g,",")||e||null},a.default.XML.prototype.setContent=function(e){this.DOM.children.length||(this.DOM.textContent=e)},a.default.XML.prototype.serialize=function(){return(new XMLSerializer).serializeToString(this.DOM)};var i=a.default;n.default=i},{"../core/main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.number.constructor":167,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.replace":186,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],290:[function(e,t,n){"use strict";e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.string.includes"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(){if("function"==typeof Math.hypot)return Math.hypot.apply(null,arguments);for(var e=arguments.length,t=[],n=0,r=0;r<e;r++){var a=arguments[r];if((a=+a)==1/0||a===-1/0)return 1/0;n<(a=Math.abs(a))&&(n=a),t[r]=a}0===n&&(n=1);for(var i=0,o=0,s=0;s<e;s++){var u=t[s]/n,l=u*u-o,c=i+l;o=c-i-l,i=c}return Math.sqrt(i)*n}a.default.prototype.abs=Math.abs,a.default.prototype.ceil=Math.ceil,a.default.prototype.constrain=function(e,t,n){return a.default._validateParameters("constrain",arguments),Math.max(Math.min(e,n),t)},a.default.prototype.dist=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.default._validateParameters("dist",t),4===t.length?i(t[2]-t[0],t[3]-t[1]):6===t.length?i(t[3]-t[0],t[4]-t[1],t[5]-t[2]):void 0},a.default.prototype.exp=Math.exp,a.default.prototype.floor=Math.floor,a.default.prototype.lerp=function(e,t,n){return a.default._validateParameters("lerp",arguments),n*(t-e)+e},a.default.prototype.log=Math.log,a.default.prototype.mag=function(e,t){return a.default._validateParameters("mag",arguments),i(e,t)},a.default.prototype.map=function(e,t,n,r,i,o){a.default._validateParameters("map",arguments);var s=(e-t)/(n-t)*(i-r)+r;return o?r<i?this.constrain(s,r,i):this.constrain(s,i,r):s},a.default.prototype.max=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[0]instanceof Array?Math.max.apply(null,t[0]):Math.max.apply(null,t)},a.default.prototype.min=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[0]instanceof Array?Math.min.apply(null,t[0]):Math.min.apply(null,t)},a.default.prototype.norm=function(e,t,n){return a.default._validateParameters("norm",arguments),this.map(e,t,n,0,1)},a.default.prototype.pow=Math.pow,a.default.prototype.round=function(e,t){return t?Number(Math.round(e+"e"+t)+"e-"+t):Math.round(e)},a.default.prototype.sq=function(e){return e*e},a.default.prototype.sqrt=Math.sqrt,a.default.prototype.fract=function(e){a.default._validateParameters("fract",arguments);var t=0,n=Number(e);if(isNaN(n)||Math.abs(n)===1/0)return n;if(n<0&&(n=-n,t=1),!String(n).includes(".")||String(n).includes("e"))return n<1?Math.abs(t-n):0;var r=String(n);return r=Number("0"+r.slice(r.indexOf("."))),Math.abs(t-r)};var o=a.default;n.default=o},{"../core/main":260,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.math.hypot":165,"core-js/modules/es.number.constructor":167,"core-js/modules/es.string.includes":182}],291:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.createVector=function(e,t,n){return this instanceof a.default?new a.default.Vector(this,arguments):new a.default.Vector(e,t,n)};var i=a.default;n.default=i},{"../core/main":260}],292:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e){return.5*(1-Math.cos(e*Math.PI))}var o,s=4095,u=4,l=.5;a.default.prototype.noise=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==o){o=new Array(4096);for(var r=0;r<4096;r++)o[r]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),n<0&&(n=-n);for(var a,c,f,d,h,p=Math.floor(e),v=Math.floor(t),m=Math.floor(n),g=e-p,y=t-v,b=n-m,x=0,w=.5,k=0;k<u;k++){var S=p+(v<<4)+(m<<8);a=i(g),c=i(y),f=o[S&s],f+=a*(o[S+1&s]-f),d=o[S+16&s],f+=c*((d+=a*(o[S+16+1&s]-d))-f),d=o[(S+=256)&s],d+=a*(o[S+1&s]-d),h=o[S+16&s],d+=c*((h+=a*(o[S+16+1&s]-h))-d),x+=(f+=i(b)*(d-f))*w,w*=l,p<<=1,v<<=1,m<<=1,1<=(g*=2)&&(p++,g--),1<=(y*=2)&&(v++,y--),1<=(b*=2)&&(m++,b--)}return x},a.default.prototype.noiseDetail=function(e,t){0<e&&(u=e),0<t&&(l=t)},a.default.prototype.noiseSeed=function(e){var t,n,r,a=(r=4294967296,{setSeed:function(e){n=t=(null==e?Math.random()*r:e)>>>0},getSeed:function(){return t},rand:function(){return(n=(1664525*n+1013904223)%r)/r}});a.setSeed(e),o=new Array(4096);for(var i=0;i<4096;i++)o[i]=a.rand()};var c=a.default;n.default=c},{"../core/main":260}],293:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.sub"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function s(e,t){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),this}function u(e,t,n){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),0!==n&&(this.z=this.z%n),this}i.default.Vector=function(e,t,n){var r,a,o;o=e instanceof i.default?(this.p5=e,r=t[0]||0,a=t[1]||0,t[2]||0):(r=e||0,a=t||0,n||0),this.x=r,this.y=a,this.z=o},i.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},i.default.Vector.prototype.set=function(e,t,n){return e instanceof i.default.Vector?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):e instanceof Array?(this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0):(this.x=e||0,this.y=t||0,this.z=n||0),this},i.default.Vector.prototype.copy=function(){return this.p5?new i.default.Vector(this.p5,[this.x,this.y,this.z]):new i.default.Vector(this.x,this.y,this.z)},i.default.Vector.prototype.add=function(e,t,n){return e instanceof i.default.Vector?(this.x+=e.x||0,this.y+=e.y||0,this.z+=e.z||0):e instanceof Array?(this.x+=e[0]||0,this.y+=e[1]||0,this.z+=e[2]||0):(this.x+=e||0,this.y+=t||0,this.z+=n||0),this},i.default.Vector.prototype.rem=function(e,t,n){if(e instanceof i.default.Vector){if(Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)){var r=parseFloat(e.x),a=parseFloat(e.y),o=parseFloat(e.z);u.call(this,r,a,o)}}else if(e instanceof Array)e.every((function(e){return Number.isFinite(e)}))&&(2===e.length&&s.call(this,e[0],e[1]),3===e.length&&u.call(this,e[0],e[1],e[2]));else if(1===arguments.length){if(Number.isFinite(e)&&0!==e)return this.x=this.x%e,this.y=this.y%e,this.z=this.z%e,this}else if(2===arguments.length){var l=Array.prototype.slice.call(arguments);l.every((function(e){return Number.isFinite(e)}))&&2===l.length&&s.call(this,l[0],l[1])}else if(3===arguments.length){var c=Array.prototype.slice.call(arguments);c.every((function(e){return Number.isFinite(e)}))&&3===c.length&&u.call(this,c[0],c[1],c[2])}},i.default.Vector.prototype.sub=function(e,t,n){return e instanceof i.default.Vector?(this.x-=e.x||0,this.y-=e.y||0,this.z-=e.z||0):e instanceof Array?(this.x-=e[0]||0,this.y-=e[1]||0,this.z-=e[2]||0):(this.x-=e||0,this.y-=t||0,this.z-=n||0),this},i.default.Vector.prototype.mult=function(e,t,n){if(e instanceof i.default.Vector)return Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z?(this.x*=e.x,this.y*=e.y,this.z*=e.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"),this;if(e instanceof Array)return e.every((function(e){return Number.isFinite(e)}))&&e.every((function(e){return"number"==typeof e}))?1===e.length?(this.x*=e[0],this.y*=e[0],this.z*=e[0]):2===e.length?(this.x*=e[0],this.y*=e[1]):3===e.length&&(this.x*=e[0],this.y*=e[1],this.z*=e[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"),this;var r=Array.prototype.slice.call(arguments);return r.every((function(e){return Number.isFinite(e)}))&&r.every((function(e){return"number"==typeof e}))?(1===arguments.length&&(this.x*=e,this.y*=e,this.z*=e),2===arguments.length&&(this.x*=e,this.y*=t),3===arguments.length&&(this.x*=e,this.y*=t,this.z*=n)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},i.default.Vector.prototype.div=function(e,t,n){if(e instanceof i.default.Vector){if(Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z){if(0===e.x||0===e.y||0===e.z)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=e.x,this.y/=e.y,this.z/=e.z}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}if(e instanceof Array){if(e.every((function(e){return Number.isFinite(e)}))&&e.every((function(e){return"number"==typeof e}))){if(e.some((function(e){return 0===e})))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===e.length?(this.x/=e[0],this.y/=e[0],this.z/=e[0]):2===e.length?(this.x/=e[0],this.y/=e[1]):3===e.length&&(this.x/=e[0],this.y/=e[1],this.z/=e[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}var r=Array.prototype.slice.call(arguments);if(r.every((function(e){return Number.isFinite(e)}))&&r.every((function(e){return"number"==typeof e}))){if(r.some((function(e){return 0===e})))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===arguments.length&&(this.x/=e,this.y/=e,this.z/=e),2===arguments.length&&(this.x/=e,this.y/=t),3===arguments.length&&(this.x/=e,this.y/=t,this.z/=n)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this},i.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},i.default.Vector.prototype.magSq=function(){var e=this.x,t=this.y,n=this.z;return e*e+t*t+n*n},i.default.Vector.prototype.dot=function(e,t,n){return e instanceof i.default.Vector?this.dot(e.x,e.y,e.z):this.x*(e||0)+this.y*(t||0)+this.z*(n||0)},i.default.Vector.prototype.cross=function(e){var t=this.y*e.z-this.z*e.y,n=this.z*e.x-this.x*e.z,r=this.x*e.y-this.y*e.x;return this.p5?new i.default.Vector(this.p5,[t,n,r]):new i.default.Vector(t,n,r)},i.default.Vector.prototype.dist=function(e){return e.copy().sub(this).mag()},i.default.Vector.prototype.normalize=function(){var e=this.mag();return 0!==e&&this.mult(1/e),this},i.default.Vector.prototype.limit=function(e){var t=this.magSq();return e*e<t&&this.div(Math.sqrt(t)).mult(e),this},i.default.Vector.prototype.setMag=function(e){return this.normalize().mult(e)},i.default.Vector.prototype.heading=function(){var e=Math.atan2(this.y,this.x);return this.p5?this.p5._fromRadians(e):e},i.default.Vector.prototype.setHeading=function(e){var t=this.mag();return this.x=t*Math.cos(e),this.y=t*Math.sin(e),this},i.default.Vector.prototype.rotate=function(e){var t=this.heading()+e;this.p5&&(t=this.p5._toRadians(t));var n=this.mag();return this.x=Math.cos(t)*n,this.y=Math.sin(t)*n,this},i.default.Vector.prototype.angleBetween=function(e){var t,n=this.dot(e)/(this.mag()*e.mag());return t=Math.acos(Math.min(1,Math.max(-1,n))),t*=Math.sign(this.cross(e).z||1),this.p5&&(t=this.p5._fromRadians(t)),t},i.default.Vector.prototype.lerp=function(e,t,n,r){return e instanceof i.default.Vector?this.lerp(e.x,e.y,e.z,t):(this.x+=(e-this.x)*r||0,this.y+=(t-this.y)*r||0,this.z+=(n-this.z)*r||0,this)},i.default.Vector.prototype.reflect=function(e){return e.normalize(),this.sub(e.mult(2*this.dot(e)))},i.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},i.default.Vector.prototype.equals=function(e,t,n){var r,a,o;return o=e instanceof i.default.Vector?(r=e.x||0,a=e.y||0,e.z||0):e instanceof Array?(r=e[0]||0,a=e[1]||0,e[2]||0):(r=e||0,a=t||0,n||0),this.x===r&&this.y===a&&this.z===o},i.default.Vector.fromAngle=function(e,t){return void 0===t&&(t=1),new i.default.Vector(t*Math.cos(e),t*Math.sin(e),0)},i.default.Vector.fromAngles=function(e,t,n){void 0===n&&(n=1);var r=Math.cos(t),a=Math.sin(t),o=Math.cos(e),s=Math.sin(e);return new i.default.Vector(n*s*a,-n*o,n*s*r)},i.default.Vector.random2D=function(){return this.fromAngle(Math.random()*o.TWO_PI)},i.default.Vector.random3D=function(){var e=Math.random()*o.TWO_PI,t=2*Math.random()-1,n=Math.sqrt(1-t*t),r=n*Math.cos(e),a=n*Math.sin(e);return new i.default.Vector(r,a,t)},i.default.Vector.add=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),n.add(t),n},i.default.Vector.rem=function(e,t){if(e instanceof i.default.Vector&&t instanceof i.default.Vector){var n=e.copy();return n.rem(t),n}},i.default.Vector.sub=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),n.sub(t),n},i.default.Vector.mult=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),n.mult(t),n},i.default.Vector.rotate=function(e,t,n){return 2===arguments.length?n=e.copy():(n instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),n.set(e)),n.rotate(t),n},i.default.Vector.div=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),n.div(t),n},i.default.Vector.dot=function(e,t){return e.dot(t)},i.default.Vector.cross=function(e,t){return e.cross(t)},i.default.Vector.dist=function(e,t){return e.dist(t)},i.default.Vector.lerp=function(e,t,n,r){return r?r.set(e):(r=e.copy(),4===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),r.lerp(t,n),r},i.default.Vector.mag=function(e){var t=e.x,n=e.y,r=e.z,a=t*t+n*n+r*r;return Math.sqrt(a)},i.default.Vector.normalize=function(e,t){return arguments.length<2?t=e.copy():(t instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),t.set(e)),t.normalize()};var l=i.default.Vector;n.default=l},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.every":149,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.some":161,"core-js/modules/es.math.sign":166,"core-js/modules/es.number.constructor":167,"core-js/modules/es.number.is-finite":168,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.sub":189}],294:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},i="_lcg_random_state",o=4294967296,s=0;a.default.prototype._lcg=function(e){return this[e]=(1664525*this[e]+1013904223)%o,this[e]/o},a.default.prototype._lcgSetSeed=function(e,t){this[e]=(null==t?Math.random()*o:t)>>>0},a.default.prototype.randomSeed=function(e){this._lcgSetSeed(i,e),this._gaussian_previous=!1},a.default.prototype.random=function(e,t){var n;if(a.default._validateParameters("random",arguments),n=null!=this[i]?this._lcg(i):Math.random(),void 0===e)return n;if(void 0===t)return e instanceof Array?e[Math.floor(n*e.length)]:n*e;if(t<e){var r=e;e=t,t=r}return n*(t-e)+e},a.default.prototype.randomGaussian=function(e){var t,n,r,a,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._gaussian_previous)t=s,this._gaussian_previous=!1;else{for(;1<=(a=(n=this.random(2)-1)*n+(r=this.random(2)-1)*r););t=n*(a=Math.sqrt(-2*Math.log(a)/a)),s=r*a,this._gaussian_previous=!0}return t*i+(e||0)};var u=a.default;n.default=u},{"../core/main":260}],295:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));i.default.prototype._angleMode=o.RADIANS,i.default.prototype.acos=function(e){return this._fromRadians(Math.acos(e))},i.default.prototype.asin=function(e){return this._fromRadians(Math.asin(e))},i.default.prototype.atan=function(e){return this._fromRadians(Math.atan(e))},i.default.prototype.atan2=function(e,t){return this._fromRadians(Math.atan2(e,t))},i.default.prototype.cos=function(e){return Math.cos(this._toRadians(e))},i.default.prototype.sin=function(e){return Math.sin(this._toRadians(e))},i.default.prototype.tan=function(e){return Math.tan(this._toRadians(e))},i.default.prototype.degrees=function(e){return e*o.RAD_TO_DEG},i.default.prototype.radians=function(e){return e*o.DEG_TO_RAD},i.default.prototype.angleMode=function(e){e!==o.DEGREES&&e!==o.RADIANS||(this._angleMode=e)},i.default.prototype._toRadians=function(e){return this._angleMode===o.DEGREES?e*o.DEG_TO_RAD:e},i.default.prototype._toDegrees=function(e){return this._angleMode===o.RADIANS?e*o.RAD_TO_DEG:e},i.default.prototype._fromRadians=function(e){return this._angleMode===o.DEGREES?e*o.RAD_TO_DEG:e};var s=i.default;n.default=s},{"../core/constants":250,"../core/main":260}],296:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.textAlign=function(e,t){var n;return a.default._validateParameters("textAlign",arguments),(n=this._renderer).textAlign.apply(n,arguments)},a.default.prototype.textLeading=function(e){var t;return a.default._validateParameters("textLeading",arguments),(t=this._renderer).textLeading.apply(t,arguments)},a.default.prototype.textSize=function(e){var t;return a.default._validateParameters("textSize",arguments),(t=this._renderer).textSize.apply(t,arguments)},a.default.prototype.textStyle=function(e){var t;return a.default._validateParameters("textStyle",arguments),(t=this._renderer).textStyle.apply(t,arguments)},a.default.prototype.textWidth=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n[0]+="",a.default._validateParameters("textWidth",n),0===n[0].length?0:(e=this._renderer).textWidth.apply(e,n)},a.default.prototype.textAscent=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.default._validateParameters("textAscent",t),this._renderer.textAscent()},a.default.prototype.textDescent=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.default._validateParameters("textDescent",t),this._renderer.textDescent()},a.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()};var i=a.default;n.default=i},{"../core/main":260}],297:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=l(e("../core/constants")),s=l(e("opentype.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),i.default.prototype.loadFont=function(e,t,n){i.default._validateParameters("loadFont",arguments);var r=new i.default.Font(this),a=this;return s.load(e,(function(o,s){if(o)return i.default._friendlyFileLoadError(4,e),void 0!==n?n(o):void console.error(o,e);r.font=s,void 0!==t&&t(r),a._decrementPreload();var u,l,c=e.split("\\").pop().split("/").pop(),f=c.lastIndexOf("."),d=f<1?null:c.substr(f+1);["ttf","otf","woff","woff2"].includes(d)&&(u=c.substr(0,f),(l=document.createElement("style")).appendChild(document.createTextNode("\n@font-face {\nfont-family: ".concat(u,";\nsrc: url(").concat(e,");\n}\n"))),document.head.appendChild(l))})),r},i.default.prototype.text=function(e,t,n,r,a){var o;return i.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(o=this._renderer).text.apply(o,arguments):this},i.default.prototype.textFont=function(e,t){if(i.default._validateParameters("textFont",arguments),arguments.length){if(!e)throw new Error("null font passed to textFont");return this._renderer._setProperty("_textFont",e),t&&(this._renderer._setProperty("_textSize",t),this._renderer._setProperty("_textLeading",t*o._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this._renderer._textFont};var c=i.default;n.default=c},{"../core/constants":250,"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.last-index-of":158,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.split":188,"opentype.js":236}],298:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=function(e,t){if("object"!==o(e))e=t;else for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}(t,{sampleFactor:.1,simplifyThreshold:0}),r=p(e,0,1),a=r/(r*n.sampleFactor),i=[],s=0;s<r;s+=a)i.push(p(e,s));return n.simplifyThreshold&&function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=e.length-1;3<e.length&&0<=n;--n)f(c(e,n-1),c(e,n),c(e,n+1),t)&&e.splice(n%e.length,1)}(i,n.simplifyThreshold),i}function u(e){for(var t,n=[],r=0;r<e.length;r++)"M"===e[r].type&&(t&&n.push(t),t=[]),t.push(l(e[r]));return n.push(t),n}function l(e){var t=[e.type];return"M"===e.type||"L"===e.type?t.push(e.x,e.y):"C"===e.type?t.push(e.x1,e.y1,e.x2,e.y2,e.x,e.y):"Q"===e.type&&t.push(e.x1,e.y1,e.x,e.y),t}function c(e,t){var n=e.length;return e[t<0?t%n+n:t%n]}function f(e,t,n,r){if(!r)return 0==(a=e,o=n,((i=t)[0]-a[0])*(o[1]-a[1])-(o[0]-a[0])*(i[1]-a[1]));var a,i,o;void 0===f.tmpPoint1&&(f.tmpPoint1=[],f.tmpPoint2=[]);var s=f.tmpPoint1,u=f.tmpPoint2;s.x=t.x-e.x,s.y=t.y-e.y,u.x=n.x-t.x,u.y=n.y-t.y;var l=s.x*u.x+s.y*u.y,c=Math.sqrt(s.x*s.x+s.y*s.y),d=Math.sqrt(u.x*u.x+u.y*u.y);return Math.acos(l/(c*d))<r}function d(e,t,n,r,a,i,o,s,u){var l=1-u,c=Math.pow(l,3),f=Math.pow(l,2),d=u*u,h=d*u,p=c*e+3*f*u*n+3*l*u*u*a+h*o,v=c*t+3*f*u*r+3*l*u*u*i+h*s,m=e+2*u*(n-e)+d*(a-2*n+e),g=t+2*u*(r-t)+d*(i-2*r+t),y=n+2*u*(a-n)+d*(o-2*a+n),b=r+2*u*(i-r)+d*(s-2*i+r),x=l*e+u*n,w=l*t+u*r,k=l*a+u*o,S=l*i+u*s,_=90-180*Math.atan2(m-y,g-b)/Math.PI;return(y<m||g<b)&&(_+=180),{x:p,y:v,m:{x:m,y:g},n:{x:y,y:b},start:{x:x,y:w},end:{x:k,y:S},alpha:_}}function h(e,t,n,r,a,i,o,s,u){return null==u?b(e,t,n,r,a,i,o,s):d(e,t,n,r,a,i,o,s,function(e,t,n,r,a,i,o,s,u){if(!(u<0||b(e,t,n,r,a,i,o,s)<u)){var l,c=.5,f=1-c;for(l=b(e,t,n,r,a,i,o,s,f);.01<Math.abs(l-u);)l=b(e,t,n,r,a,i,o,s,f+=(l<u?1:-1)*(c/=2));return f}}(e,t,n,r,a,i,o,s,u))}function p(e,t,n){for(var r,a,i,o,s,u=0,l=0,c=(e=function(e,t){function n(e,t,n){var r,a;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(function e(t,n,r,a,i,o,s,u,l,c){var f,d,h,p,v,m=Math.PI,g=120*m/180,y=m/180*(+i||0),b=[],x=function(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}};if(c)f=c[0],d=c[1],h=c[2],p=c[3];else{t=(v=x(t,n,-y)).x,n=v.y;var w=(t-(u=(v=x(u,l,-y)).x))/2,k=(n-(l=v.y))/2,S=w*w/(r*r)+k*k/(a*a);1<S&&(r*=S=Math.sqrt(S),a*=S);var _=r*r,C=a*a,E=(o===s?-1:1)*Math.sqrt(Math.abs((_*C-_*k*k-C*w*w)/(_*k*k+C*w*w)));h=E*r*k/a+(t+u)/2,p=E*-a*w/r+(n+l)/2,f=Math.asin(((n-p)/a).toFixed(9)),d=Math.asin(((l-p)/a).toFixed(9)),(f=t<h?m-f:f)<0&&(f=2*m+f),(d=u<h?m-d:d)<0&&(d=2*m+d),s&&d<f&&(f-=2*m),!s&&f<d&&(d-=2*m)}var T=d-f;if(Math.abs(T)>g){var I=d,A=u,N=l;d=f+g*(s&&f<d?1:-1),b=e(u=h+r*Math.cos(d),l=p+a*Math.sin(d),r,a,i,0,s,A,N,[d,I,h,p])}T=d-f;var R=Math.cos(f),M=Math.sin(f),O=Math.cos(d),D=Math.sin(d),L=Math.tan(T/4),j=4/3*r*L,P=4/3*a*L,F=[t,n],B=[t+j*M,n-P*R],z=[u+j*D,l-P*O],U=[u,l];if(B[0]=2*F[0]-B[0],B[1]=2*F[1]-B[1],c)return[B,z,U].concat(b);for(var W=[],G=0,V=(b=[B,z,U].concat(b).join().split(",")).length;G<V;G++)W[G]=G%2?x(b[G-1],b[G],y).y:x(b[G],b[G+1],y).x;return W}.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":a="C"===n||"S"===n?(r=2*t.x-t.bx,2*t.y-t.by):(r=t.x,t.y),e=["C",r,a].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(y(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(y(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(g(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(g(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(g(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(g(t.x,t.y,t.X,t.Y))}return e}function r(e,t){if(7<e[t].length){e[t].shift();for(var n=e[t];n.length;)c[t]="A",s&&(f[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),i=Math.max(o.length,s&&s.length||0)}}function a(e,t,n,r,a){e&&t&&"M"===e[a][0]&&"M"!==t[a][0]&&(t.splice(a,0,["M",r.x,r.y]),n.bx=0,n.by=0,n.x=e[a][1],n.y=e[a][2],i=Math.max(o.length,s&&s.length||0))}var i,o=v(e),s=t,u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=[],f=[],d="",h="";i=Math.max(o.length,s&&s.length||0);for(var p=0;p<i;p++){o[p]&&(d=o[p][0]),"C"!==d&&(c[p]=d,p&&(h=c[p-1])),o[p]=n(o[p],u,h),"A"!==c[p]&&"C"===d&&(c[p]="C"),r(o,p),s&&(s[p]&&(d=s[p][0]),"C"!==d&&(f[p]=d,p&&(h=f[p-1])),s[p]=n(s[p],l,h),"A"!==f[p]&&"C"===d&&(f[p]="C"),r(s,p)),a(o,s,u,l,p),a(s,o,l,u,p);var m=o[p],b=s&&s[p],x=m.length,w=s&&b.length;u.x=m[x-2],u.y=m[x-1],u.bx=parseFloat(m[x-4])||u.x,u.by=parseFloat(m[x-3])||u.y,l.bx=s&&(parseFloat(b[w-4])||l.x),l.by=s&&(parseFloat(b[w-3])||l.y),l.x=s&&b[w-2],l.y=s&&b[w-1]}return s?[o,s]:o}(e)).length;l<c;l++){if("M"===(i=e[l])[0])r=+i[1],a=+i[2];else{if(t<u+(o=h(r,a,i[1],i[2],i[3],i[4],i[5],i[6]))&&!n)return{x:(s=h(r,a,i[1],i[2],i[3],i[4],i[5],i[6],t-u)).x,y:s.y,alpha:s.alpha};u+=o,r=+i[5],a=+i[6]}i.shift()}return(s=n?u:d(r,a,i[0],i[1],i[2],i[3],i[4],i[5],1)).alpha&&(s={x:s.x,y:s.y,alpha:s.alpha}),s}function v(e){var t,n=[],r=0,a=0,i=0,o=0,s=0;if(!e)return n;"M"===e[0][0]&&(i=r=+e[0][1],o=a=+e[0][2],s++,n[0]=["M",r,a]);for(var u,l,c=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),f=s,d=e.length;f<d;f++){if(n.push(u=[]),(l=e[f])[0]!==String.prototype.toUpperCase.call(l[0]))switch(u[0]=String.prototype.toUpperCase.call(l[0]),u[0]){case"A":u[1]=l[1],u[2]=l[2],u[3]=l[3],u[4]=l[4],u[5]=l[5],u[6]=+(l[6]+r),u[7]=+(l[7]+a);break;case"V":u[1]=+l[1]+a;break;case"H":u[1]=+l[1]+r;break;case"R":for(var h=2,p=(t=[r,a].concat(l.slice(1))).length;h<p;h++)t[h]=+t[h]+r,t[++h]=+t[h]+a;n.pop(),n=n.concat(m(t,c));break;case"M":i=+l[1]+r,o=+l[2]+a;break;default:for(var v=1,g=l.length;v<g;v++)u[v]=+l[v]+(v%2?r:a)}else if("R"===l[0])t=[r,a].concat(l.slice(1)),n.pop(),n=n.concat(m(t,c)),u=["R"].concat(l.slice(-2));else for(var y=0,b=l.length;y<b;y++)u[y]=l[y];switch(u[0]){case"Z":r=i,a=o;break;case"H":r=u[1];break;case"V":a=u[1];break;case"M":i=u[u.length-2],o=u[u.length-1];break;default:r=u[u.length-2],a=u[u.length-1]}}return n}function m(e,t){for(var n=[],r=0,a=e.length;r<a-2*!t;r+=2){var i=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?a-4===r?i[3]={x:+e[0],y:+e[1]}:a-2===r&&(i[2]={x:+e[0],y:+e[1]},i[3]={x:+e[2],y:+e[3]}):i[0]={x:+e[a-2],y:+e[a-1]}:a-4===r?i[3]=i[2]:r||(i[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return n}function g(e,t,n,r){return[e,t,n,r,n,r]}function y(e,t,n,r,a,i){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*a+2/3*n,1/3*i+2/3*r,a,i]}function b(e,t,n,r,a,i,o,s,u){null==u&&(u=1);for(var l=(u=1<u?1:u<0?0:u)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=0,d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0;h<12;h++){var p=l*c[h]+l,v=x(p,e,n,a,o),m=x(p,t,r,i,s),g=v*v+m*m;f+=d[h]*Math.sqrt(g)}return l*f}function x(e,t,n,r,a){return e*(e*(-3*t+9*n-9*r+3*a)+6*t-12*n+6*r)-3*t+3*n}a.default.Font=function(e){this.parent=e,this.cache={},this.font=void 0},a.default.Font.prototype.textBounds=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length?arguments[3]:void 0,o=4<arguments.length?arguments[4]:void 0,s=o&&o.renderer&&o.renderer._pInst||this.parent,u=s._renderer.drawingContext;if(u.textAlign||i.LEFT,u.textBaseline||i.BASELINE,a=a||s._renderer._textSize,!t){var l,c,f=[],d=[],h=[];h[0]=[];var p=[],v=this._scale(a),m=s._renderer.textLeading(),g=0;this.font.forEachGlyph(e,n,r,a,o,(function(e,t,n,r){var a=e.getMetrics();0===e.index||10===e.index?h[g+=1]=[]:(h[g].push(t+a.xMin*v),h[g].push(t+a.xMax*v),p.push(n+g*m+-a.yMin*v),p.push(n+g*m+-a.yMax*v))})),0<h[g].length&&(f[g]=Math.min.apply(null,h[g]),d[g]=Math.max.apply(null,h[g]));for(var y=0,b=0;b<=g;b++){f[b]=Math.min.apply(null,h[b]),d[b]=Math.max.apply(null,h[b]);var x=d[b]-f[b];y<x&&(y=x)}var w=Math.min.apply(null,f);t={x:w,y:l=Math.min.apply(null,p),h:Math.max.apply(null,p)-l,w:y,advance:w-n},c=this._handleAlignment(s._renderer,e,t.x,t.y,t.w+t.advance),t.x=c.x,t.y=c.y}return t},a.default.Font.prototype.textToPoints=function(e,t,n,r,a){var i,o=0,l=[],c=this._getGlyphs(e);r=r||this.parent._renderer._textSize;for(var f=0;f<c.length;f++){if(!(c[i=f].name&&"space"===c[i].name||e.length===c.length&&" "===e[i]||c[i].index&&3===c[i].index))for(var d=u(c[f].getPath(t,n,r).commands),h=0;h<d.length;h++)for(var p=s(d[h],a),v=0;v<p.length;v++)p[v].x+=o,l.push(p[v]);o+=c[f].advanceWidth*this._scale(r)}return l},a.default.Font.prototype._getGlyphs=function(e){return this.font.stringToGlyphs(e)},a.default.Font.prototype._getPath=function(e,t,n,r){var a=(r&&r.renderer&&r.renderer._pInst||this.parent)._renderer,i=this._handleAlignment(a,e,t,n);return this.font.getPath(e,i.x,i.y,a._textSize,r)},a.default.Font.prototype._getPathData=function(e,t,n,r){var a=3;return"string"==typeof e&&2<arguments.length?e=this._getPath(e,t,n,r):"object"===o(t)&&(r=t),r&&"number"==typeof r.decimals&&(a=r.decimals),e.toPathData(a)},a.default.Font.prototype._getSVG=function(e,t,n,r){var a=3;return"string"==typeof e&&2<arguments.length?e=this._getPath(e,t,n,r):"object"===o(t)&&(r=t),r&&("number"==typeof r.decimals&&(a=r.decimals),"number"==typeof r.strokeWidth&&(e.strokeWidth=r.strokeWidth),void 0!==r.fill&&(e.fill=r.fill),void 0!==r.stroke&&(e.stroke=r.stroke)),e.toSVG(a)},a.default.Font.prototype._renderPath=function(e,t,n,r){var a,s=r&&r.renderer||this.parent._renderer,u=s.drawingContext;a="object"===o(e)&&e.commands?e.commands:this._getPath(e,t,n,r).commands,u.beginPath();var l=!0,c=!1,f=void 0;try{for(var d,h=a[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;"M"===p.type?u.moveTo(p.x,p.y):"L"===p.type?u.lineTo(p.x,p.y):"C"===p.type?u.bezierCurveTo(p.x1,p.y1,p.x2,p.y2,p.x,p.y):"Q"===p.type?u.quadraticCurveTo(p.x1,p.y1,p.x,p.y):"Z"===p.type&&u.closePath()}}catch(e){c=!0,f=e}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}return s._doStroke&&s._strokeSet&&u.stroke(),s._doFill&&(s._fillSet||s._setFill(i._DEFAULT_TEXT_FILL),u.fill()),this},a.default.Font.prototype._textWidth=function(e,t){return this.font.getAdvanceWidth(e,t)},a.default.Font.prototype._textAscent=function(e){return this.font.ascender*this._scale(e)},a.default.Font.prototype._textDescent=function(e){return-this.font.descender*this._scale(e)},a.default.Font.prototype._scale=function(e){return 1/this.font.unitsPerEm*(e||this.parent._renderer._textSize)},a.default.Font.prototype._handleAlignment=function(e,t,n,r,a){var o=e._textSize;switch(void 0===a&&(a=this._textWidth(t,o)),e._textAlign){case i.CENTER:n-=a/2;break;case i.RIGHT:n-=a}switch(e._textBaseline){case i.TOP:r+=this._textAscent(o);break;case i.CENTER:r+=this._textAscent(o)/2;break;case i.BOTTOM:r-=this._textDescent(o)}return{x:n,y:r}};var w=a.default;n.default=w},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.join":157,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.function.name":163,"core-js/modules/es.number.to-fixed":169,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.split":188,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],299:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.append=function(e,t){return e.push(t),e},a.default.prototype.arrayCopy=function(e,t,n,r,a){var i,o;e=void 0!==a?(o=Math.min(a,e.length),i=r,e.slice(t,o+t)):(o=void 0!==n?(o=n,Math.min(o,e.length)):e.length,i=0,n=t,e.slice(0,o)),Array.prototype.splice.apply(n,[i,o].concat(e))},a.default.prototype.concat=function(e,t){return e.concat(t)},a.default.prototype.reverse=function(e){return e.reverse()},a.default.prototype.shorten=function(e){return e.pop(),e},a.default.prototype.shuffle=function(e,t){for(var n,r,a=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e),i=(e=t||a?e:e.slice()).length;1<i;)n=this.random(0,1)*i|0,r=e[--i],e[i]=e[n],e[n]=r;return e},a.default.prototype.sort=function(e,t){var n=t?e.slice(0,Math.min(t,e.length)):e,r=t?e.slice(Math.min(t,e.length)):[];return(n="string"==typeof n[0]?n.sort():n.sort((function(e,t){return e-t}))).concat(r)},a.default.prototype.splice=function(e,t,n){return Array.prototype.splice.apply(e,[n,0].concat(t)),e},a.default.prototype.subset=function(e,t,n){return void 0!==n?e.slice(t,t+n):e.slice(t,e.length)};var i=a.default;n.default=i},{"../core/main":260,"core-js/modules/es.array-buffer.constructor":147,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.object.to-string":174}],300:[function(e,t,n){"use strict";e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.float=function(e){return e instanceof Array?e.map(parseFloat):parseFloat(e)},a.default.prototype.int=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return e===1/0||"Infinity"===e?1/0:e===-1/0||"-Infinity"===e?-1/0:"string"==typeof e?parseInt(e,t):"number"==typeof e?0|e:"boolean"==typeof e?e?1:0:e instanceof Array?e.map((function(e){return a.default.prototype.int(e,t)})):void 0},a.default.prototype.str=function(e){return e instanceof Array?e.map(a.default.prototype.str):String(e)},a.default.prototype.boolean=function(e){return"number"==typeof e?0!==e:"string"==typeof e?"true"===e.toLowerCase():"boolean"==typeof e?e:e instanceof Array?e.map(a.default.prototype.boolean):void 0},a.default.prototype.byte=function(e){var t=a.default.prototype.int(e,10);return"number"==typeof t?(t+128)%256-128:t instanceof Array?t.map(a.default.prototype.byte):void 0},a.default.prototype.char=function(e){return"number"!=typeof e||isNaN(e)?e instanceof Array?e.map(a.default.prototype.char):"string"==typeof e?a.default.prototype.char(parseInt(e,10)):void 0:String.fromCharCode(e)},a.default.prototype.unchar=function(e){return"string"==typeof e&&1===e.length?e.charCodeAt(0):e instanceof Array?e.map(a.default.prototype.unchar):void 0},a.default.prototype.hex=function(e,t){if(t=null==t?t=8:t,e instanceof Array)return e.map((function(e){return a.default.prototype.hex(e,t)}));if(e===1/0||e===-1/0)return(e===1/0?"F":"0").repeat(t);if("number"==typeof e){e<0&&(e=4294967295+e+1);for(var n=Number(e).toString(16).toUpperCase();n.length<t;)n="0".concat(n);return n.length>=t&&(n=n.substring(n.length-t,n.length)),n}},a.default.prototype.unhex=function(e){return e instanceof Array?e.map(a.default.prototype.unhex):parseInt("0x".concat(e),16)};var i=a.default;n.default=i},{"../core/main":260,"core-js/modules/es.array.map":159,"core-js/modules/es.number.constructor":167,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.repeat":185}],301:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e,t,n){var r=e<0,a=r?e.toString().substring(1):e.toString(),i=a.indexOf("."),o=-1!==i?a.substring(0,i):a,s=-1!==i?a.substring(i+1):"",u=r?"-":"";if(void 0!==n){var l="";(-1!==i||0<n-s.length)&&(l="."),s.length>n&&(s=s.substring(0,n));for(var c=0;c<t-o.length;c++)u+="0";u+=o,u+=l,u+=s;for(var f=0;f<n-s.length;f++)u+="0";return u}for(var d=0;d<Math.max(t-o.length,0);d++)u+="0";return u+a}function o(e,t){var n=(e=e.toString()).indexOf("."),r=-1!==n?e.substring(n):"",a=-1!==n?e.substring(0,n):e;if(a=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===t)r="";else if(void 0!==t)if(t>r.length)for(var i=t-(r+=-1===n?".":"").length+1,o=0;o<i;o++)r+="0";else r=r.substring(0,t+1);return a+r}function s(e){return 0<parseFloat(e)?"+".concat(e.toString()):e.toString()}function u(e){return 0<=parseFloat(e)?" ".concat(e.toString()):e.toString()}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),a.default.prototype.join=function(e,t){return a.default._validateParameters("join",arguments),e.join(t)},a.default.prototype.match=function(e,t){return a.default._validateParameters("match",arguments),e.match(t)},a.default.prototype.matchAll=function(e,t){a.default._validateParameters("matchAll",arguments);for(var n=new RegExp(t,"g"),r=n.exec(e),i=[];null!==r;)i.push(r),r=n.exec(e);return i},a.default.prototype.nf=function(e,t,n){return a.default._validateParameters("nf",arguments),e instanceof Array?e.map((function(e){return i(e,t,n)})):"[object Arguments]"===Object.prototype.toString.call(e)?3===e.length?this.nf(e[0],e[1],e[2]):2===e.length?this.nf(e[0],e[1]):this.nf(e[0]):i(e,t,n)},a.default.prototype.nfc=function(e,t){return a.default._validateParameters("nfc",arguments),e instanceof Array?e.map((function(e){return o(e,t)})):o(e,t)},a.default.prototype.nfp=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default._validateParameters("nfp",t);var r=a.default.prototype.nf.apply(this,t);return r instanceof Array?r.map(s):s(r)},a.default.prototype.nfs=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default._validateParameters("nfs",t);var r=a.default.prototype.nf.apply(this,t);return r instanceof Array?r.map(u):u(r)},a.default.prototype.split=function(e,t){return a.default._validateParameters("split",arguments),e.split(t)},a.default.prototype.splitTokens=function(e,t){var n;if(a.default._validateParameters("splitTokens",arguments),void 0!==t){var r=t,i=/\]/g.exec(r),o=/\[/g.exec(r);n=o&&i?(r=r.slice(0,i.index)+r.slice(i.index+1),o=/\[/g.exec(r),r=r.slice(0,o.index)+r.slice(o.index+1),new RegExp("[\\[".concat(r,"\\]]"),"g")):i?(r=r.slice(0,i.index)+r.slice(i.index+1),new RegExp("[".concat(r,"\\]]"),"g")):o?(r=r.slice(0,o.index)+r.slice(o.index+1),new RegExp("[".concat(r,"\\[]"),"g")):new RegExp("[".concat(r,"]"),"g")}else n=/\s/g;return e.split(n).filter((function(e){return e}))},a.default.prototype.trim=function(e){return a.default._validateParameters("trim",arguments),e instanceof Array?e.map(this.trim):e.trim()};var l=a.default;n.default=l},{"../core/friendly_errors/fes_core":252,"../core/friendly_errors/file_errors":253,"../core/friendly_errors/validate_params":255,"../core/main":260,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.join":157,"core-js/modules/es.array.map":159,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.constructor":177,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.match":184,"core-js/modules/es.string.replace":186,"core-js/modules/es.string.split":188,"core-js/modules/es.string.trim":190}],302:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.day=function(){return(new Date).getDate()},a.default.prototype.hour=function(){return(new Date).getHours()},a.default.prototype.minute=function(){return(new Date).getMinutes()},a.default.prototype.millis=function(){return-1===this._millisStart?0:window.performance.now()-this._millisStart},a.default.prototype.month=function(){return(new Date).getMonth()+1},a.default.prototype.second=function(){return(new Date).getSeconds()},a.default.prototype.year=function(){return(new Date).getFullYear()};var i=a.default;n.default=i},{"../core/main":260}],303:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a};e("./p5.Geometry");var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function s(e,t,n,r,a,o,s){e=e<=0?1:e,t=t<0?0:t,n=n<=0?e:n,r=r<3?3:r;var u,l,c,f=(o=void 0===o||o)?-2:0,d=(a=a<1?1:a)+((s=void 0===s?0!==t:s)?2:0),h=Math.atan2(e-t,n),p=Math.sin(h),v=Math.cos(h);for(u=f;u<=d;++u){var m=u/a,g=n*m,y=void 0;for(y=u<0?(m=g=0,e):a<u?(g=n,m=1,t):e+(t-e)*m,-2!==u&&u!==a+2||(y=0),g-=n/2,l=0;l<r;++l){var b,x=l/(r-1),w=2*Math.PI*x,k=Math.sin(w),S=Math.cos(w);this.vertices.push(new i.default.Vector(k*y,g,S*y)),b=u<0?new i.default.Vector(0,-1,0):a<u&&t?new i.default.Vector(0,1,0):new i.default.Vector(k*v,p,S*v),this.vertexNormals.push(b),this.uvs.push(x,m)}}var _=0;if(o){for(c=0;c<r;++c){var C=(c+1)%r;this.faces.push([_+c,_+r+C,_+r+c])}_+=2*r}for(u=0;u<a;++u){for(l=0;l<r;++l){var E=(l+1)%r;this.faces.push([_+l,_+E,_+r+E]),this.faces.push([_+l,_+r+E,_+r+l])}_+=r}if(s)for(_+=r,l=0;l<r;++l)this.faces.push([_+l,_+(l+1)%r,_+r])}i.default.prototype.plane=function(e,t,n,r){this._assert3d("plane"),i.default._validateParameters("plane",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=1),void 0===r&&(r=1);var a="plane|".concat(n,"|").concat(r);if(!this._renderer.geometryInHash(a)){var o=new i.default.Geometry(n,r,(function(){for(var e,t,n,r=0;r<=this.detailY;r++){t=r/this.detailY;for(var a=0;a<=this.detailX;a++)e=a/this.detailX,n=new i.default.Vector(e-.5,t-.5,0),this.vertices.push(n),this.uvs.push(e,t)}}));o.computeFaces().computeNormals(),n<=1&&r<=1?o._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(a,o)}return this._renderer.drawBuffersScaled(a,e,t,1),this},i.default.prototype.box=function(e,t,n,r,a){this._assert3d("box"),i.default._validateParameters("box",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=t);var o=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;void 0===r&&(r=o?1:4),void 0===a&&(a=o?1:4);var s="box|".concat(r,"|").concat(a);if(!this._renderer.geometryInHash(s)){var u=new i.default.Geometry(r,a,(function(){var e=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var t=0;t<e.length;t++){for(var n=e[t],r=4*t,a=0;a<4;a++){var o=n[a],s=new i.default.Vector((2*(1&o)-1)/2,((2&o)-1)/2,((4&o)/2-1)/2);this.vertices.push(s),this.uvs.push(1&a,(2&a)/2)}this.faces.push([r,1+r,2+r]),this.faces.push([2+r,1+r,3+r])}}));u.computeNormals(),r<=4&&a<=4?u._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(s,u)}return this._renderer.drawBuffersScaled(s,e,t,n),this},i.default.prototype.sphere=function(e,t,n){return this._assert3d("sphere"),i.default._validateParameters("sphere",arguments),void 0===e&&(e=50),void 0===t&&(t=24),void 0===n&&(n=16),this.ellipsoid(e,e,e,t,n),this},i.default.prototype.cylinder=function(e,t,n,r,a,o){this._assert3d("cylinder"),i.default._validateParameters("cylinder",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=24),void 0===r&&(r=1),void 0===o&&(o=!0),void 0===a&&(a=!0);var u="cylinder|".concat(n,"|").concat(r,"|").concat(a,"|").concat(o);if(!this._renderer.geometryInHash(u)){var l=new i.default.Geometry(n,r);s.call(l,1,1,1,n,r,a,o),n<=24&&r<=16?l._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(u,l)}return this._renderer.drawBuffersScaled(u,e,t,e),this},i.default.prototype.cone=function(e,t,n,r,a){this._assert3d("cone"),i.default._validateParameters("cone",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=24),void 0===r&&(r=1),void 0===a&&(a=!0);var o="cone|".concat(n,"|").concat(r,"|").concat(a);if(!this._renderer.geometryInHash(o)){var u=new i.default.Geometry(n,r);s.call(u,1,0,1,n,r,a,!1),n<=24&&r<=16?u._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(o,u)}return this._renderer.drawBuffersScaled(o,e,t,e),this},i.default.prototype.ellipsoid=function(e,t,n,r,a){this._assert3d("ellipsoid"),i.default._validateParameters("ellipsoid",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=e),void 0===r&&(r=24),void 0===a&&(a=16);var o="ellipsoid|".concat(r,"|").concat(a);if(!this._renderer.geometryInHash(o)){var s=new i.default.Geometry(r,a,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=Math.PI*t-Math.PI/2,r=Math.cos(n),a=Math.sin(n),o=0;o<=this.detailX;o++){var s=o/this.detailX,u=2*Math.PI*s,l=Math.cos(u),c=Math.sin(u),f=new i.default.Vector(r*c,a,r*l);this.vertices.push(f),this.vertexNormals.push(f),this.uvs.push(s,t)}}));s.computeFaces(),r<=24&&a<=24?s._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(o,s)}return this._renderer.drawBuffersScaled(o,e,t,n),this},i.default.prototype.torus=function(e,t,n,r){if(this._assert3d("torus"),i.default._validateParameters("torus",arguments),void 0===e)e=50;else if(!e)return;if(void 0===t)t=10;else if(!t)return;void 0===n&&(n=24),void 0===r&&(r=16);var a=(t/e).toPrecision(4),o="torus|".concat(a,"|").concat(n,"|").concat(r);if(!this._renderer.geometryInHash(o)){var s=new i.default.Geometry(n,r,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=2*Math.PI*t,r=Math.cos(n),o=Math.sin(n),s=1+a*r,u=0;u<=this.detailX;u++){var l=u/this.detailX,c=2*Math.PI*l,f=Math.cos(c),d=Math.sin(c),h=new i.default.Vector(s*f,s*d,a*o),p=new i.default.Vector(r*f,r*d,o);this.vertices.push(h),this.vertexNormals.push(p),this.uvs.push(l,t)}}));s.computeFaces(),n<=24&&r<=16?s._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(o,s)}return this._renderer.drawBuffersScaled(o,e,e,e),this},i.default.RendererGL.prototype.point=function(e,t,n){void 0===n&&(n=0);var r=[];return r.push(new i.default.Vector(e,t,n)),this._drawPoints(r,this.immediateMode.buffers.point),this},i.default.RendererGL.prototype.triangle=function(e){var t=e[0],n=e[1],r=e[2],a=e[3],o=e[4],s=e[5];if(!this.geometryInHash("tri")){var u=new i.default.Geometry(1,1,(function(){var e=[];e.push(new i.default.Vector(0,0,0)),e.push(new i.default.Vector(0,1,0)),e.push(new i.default.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=e,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]}));u._makeTriangleEdges()._edgesToVertices(),u.computeNormals(),this.createBuffers("tri",u)}var l=this.uMVMatrix.copy();try{var c=new i.default.Matrix([r-t,a-n,0,0,o-t,s-n,0,0,0,0,1,0,t,n,0,1]).mult(this.uMVMatrix);this.uMVMatrix=c,this.drawBuffers("tri")}finally{this.uMVMatrix=l}return this},i.default.RendererGL.prototype.ellipse=function(e){this.arc(e[0],e[1],e[2],e[3],0,o.TWO_PI,o.OPEN,e[4])},i.default.RendererGL.prototype.arc=function(e){var t,n,r=e,a=arguments[1],s=arguments[2],u=arguments[3],l=arguments[4],c=arguments[5],f=arguments[6],d=arguments[7]||25;if(n=Math.abs(c-l)>=o.TWO_PI?"".concat(t="ellipse","|").concat(d,"|"):"".concat(t="arc","|").concat(l,"|").concat(c,"|").concat(f,"|").concat(d,"|"),!this.geometryInHash(n)){var h=new i.default.Geometry(d,1,(function(){if(this.strokeIndices=[],l.toFixed(10)!==c.toFixed(10)){f!==o.PIE&&void 0!==f||(this.vertices.push(new i.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var e=0;e<=d;e++){var t=e/d*(c-l)+l,n=.5+Math.cos(t)/2,r=.5+Math.sin(t)/2;this.vertices.push(new i.default.Vector(n,r,0)),this.uvs.push([n,r]),e<d-1&&(this.faces.push([0,e+1,e+2]),this.strokeIndices.push([e+1,e+2]))}switch(f){case o.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case o.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case o.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}}));h.computeNormals(),d<=50?h._makeTriangleEdges()._edgesToVertices(h):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(t," with more than 50 detail")),this.createBuffers(n,h)}var p=this.uMVMatrix.copy();try{this.uMVMatrix.translate([r,a,0]),this.uMVMatrix.scale(s,u,1),this.drawBuffers(n)}finally{this.uMVMatrix=p}return this},i.default.RendererGL.prototype.rect=function(e){var t=this._pInst._glAttributes.perPixelLighting,n=e[0],r=e[1],a=e[2],o=e[3],s=e[4]||(t?1:24),u=e[5]||(t?1:16),l="rect|".concat(s,"|").concat(u);if(!this.geometryInHash(l)){var c=new i.default.Geometry(s,u,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=0;n<=this.detailX;n++){var r=n/this.detailX,a=new i.default.Vector(r,t,0);this.vertices.push(a),this.uvs.push(r,t)}0<s&&0<u&&(this.strokeIndices=[[0,s],[s,(s+1)*(u+1)-1],[(s+1)*(u+1)-1,(s+1)*u],[(s+1)*u,0]])}));c.computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(l,c)}var f=this.uMVMatrix.copy();try{this.uMVMatrix.translate([n,r,0]),this.uMVMatrix.scale(a,o,1),this.drawBuffers(l)}finally{this.uMVMatrix=f}return this},i.default.RendererGL.prototype.quad=function(e,t,n,r,a,o,s,u,l,c,f,d,h,p){void 0===h&&(h=2),void 0===p&&(p=2);var v="quad|".concat(e,"|").concat(t,"|").concat(n,"|").concat(r,"|").concat(a,"|").concat(o,"|").concat(s,"|").concat(u,"|").concat(l,"|").concat(c,"|").concat(f,"|").concat(d,"|").concat(h,"|").concat(p);if(!this.geometryInHash(v)){var m=new i.default.Geometry(h,p,(function(){for(var h=1/(this.detailX-1),p=1/(this.detailY-1),v=0;v<this.detailY;v++)for(var m=0;m<this.detailX;m++){var g=m*h,y=v*p,b=(1-g)*((1-y)*e+y*c)+g*((1-y)*r+y*s),x=(1-g)*((1-y)*t+y*f)+g*((1-y)*a+y*u),w=(1-g)*((1-y)*n+y*d)+g*((1-y)*o+y*l);this.vertices.push(new i.default.Vector(b,x,w)),this.uvs.push([g,y])}}));m.faces=[];for(var g=0;g<p-1;g++)for(var y=0;y<h-1;y++){var b=y+g*h,x=y+1+g*h,w=y+1+(g+1)*h,k=y+(g+1)*h;m.faces.push([b,x,w]),m.faces.push([b,w,k])}m.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(v,m)}return this.drawBuffers(v),this},i.default.RendererGL.prototype.bezier=function(e,t,n,r,a,i,o,s,u,l,c,f){8===arguments.length&&(c=s,l=o,s=i,o=a,a=r,r=n,n=i=u=f=0);var d=this._pInst._bezierDetail||20;this.beginShape();for(var h=0;h<=d;h++){var p=Math.pow(1-h/d,3),v=h/d*3*Math.pow(1-h/d,2),m=3*Math.pow(h/d,2)*(1-h/d),g=Math.pow(h/d,3);this.vertex(e*p+r*v+o*m+l*g,t*p+a*v+s*m+c*g,n*p+i*v+u*m+f*g)}return this.endShape(),this},i.default.RendererGL.prototype.curve=function(e,t,n,r,a,i,o,s,u,l,c,f){8===arguments.length&&(l=o,c=s,o=a,s=r,a=r=n,n=i=u=f=0);var d=this._pInst._curveDetail;this.beginShape();for(var h=0;h<=d;h++){var p=.5*Math.pow(h/d,3),v=.5*Math.pow(h/d,2),m=h/d*.5,g=p*(3*r-e-3*o+l)+v*(2*e-5*r+4*o-l)+m*(-e+o)+2*r*.5,y=p*(3*a-t-3*s+c)+v*(2*t-5*a+4*s-c)+m*(-t+s)+2*a*.5,b=p*(3*i-n-3*u+f)+v*(2*n-5*i+4*u-f)+m*(-n+u)+2*i*.5;this.vertex(g,y,b)}return this.endShape(),this},i.default.RendererGL.prototype.line=function(){return 6===arguments.length?(this.beginShape(o.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):4===arguments.length&&(this.beginShape(o.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},i.default.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var e,t,n,r,a,i=[],o=[],s=[],u=arguments.length;if((e=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var l=1/this._lutBezierDetail,c=0,f=1,d=0;c<1;){if(e=parseFloat(c.toFixed(6)),this._lookUpTableBezier[d]=this._bezierCoefficients(e),f.toFixed(6)===l.toFixed(6)){e=parseFloat(f.toFixed(6))+parseFloat(c.toFixed(6)),++d,this._lookUpTableBezier[d]=this._bezierCoefficients(e);break}c+=l,f-=l,++d}}var h=this._lookUpTableBezier.length;if(6===u){for(this.isBezier=!0,i=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],o=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],a=0;a<h;a++)t=i[0]*this._lookUpTableBezier[a][0]+i[1]*this._lookUpTableBezier[a][1]+i[2]*this._lookUpTableBezier[a][2]+i[3]*this._lookUpTableBezier[a][3],n=o[0]*this._lookUpTableBezier[a][0]+o[1]*this._lookUpTableBezier[a][1]+o[2]*this._lookUpTableBezier[a][2]+o[3]*this._lookUpTableBezier[a][3],this.vertex(t,n);this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(9===u){for(this.isBezier=!0,i=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],o=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]],s=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],a=0;a<h;a++)t=i[0]*this._lookUpTableBezier[a][0]+i[1]*this._lookUpTableBezier[a][1]+i[2]*this._lookUpTableBezier[a][2]+i[3]*this._lookUpTableBezier[a][3],n=o[0]*this._lookUpTableBezier[a][0]+o[1]*this._lookUpTableBezier[a][1]+o[2]*this._lookUpTableBezier[a][2]+o[3]*this._lookUpTableBezier[a][3],r=s[0]*this._lookUpTableBezier[a][0]+s[1]*this._lookUpTableBezier[a][1]+s[2]*this._lookUpTableBezier[a][2]+s[3]*this._lookUpTableBezier[a][3],this.vertex(t,n,r);this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},i.default.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var e,t,n,r,a,i=[],o=[],s=[],u=arguments.length;if((e=0)===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var l=1/this._lutQuadraticDetail,c=0,f=1,d=0;c<1;){if(e=parseFloat(c.toFixed(6)),this._lookUpTableQuadratic[d]=this._quadraticCoefficients(e),f.toFixed(6)===l.toFixed(6)){e=parseFloat(f.toFixed(6))+parseFloat(c.toFixed(6)),++d,this._lookUpTableQuadratic[d]=this._quadraticCoefficients(e);break}c+=l,f-=l,++d}}var h=this._lookUpTableQuadratic.length;if(4===u){for(this.isQuadratic=!0,i=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],o=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],a=0;a<h;a++)t=i[0]*this._lookUpTableQuadratic[a][0]+i[1]*this._lookUpTableQuadratic[a][1]+i[2]*this._lookUpTableQuadratic[a][2],n=o[0]*this._lookUpTableQuadratic[a][0]+o[1]*this._lookUpTableQuadratic[a][1]+o[2]*this._lookUpTableQuadratic[a][2],this.vertex(t,n);this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(6===u){for(this.isQuadratic=!0,i=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],o=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]],s=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],a=0;a<h;a++)t=i[0]*this._lookUpTableQuadratic[a][0]+i[1]*this._lookUpTableQuadratic[a][1]+i[2]*this._lookUpTableQuadratic[a][2],n=o[0]*this._lookUpTableQuadratic[a][0]+o[1]*this._lookUpTableQuadratic[a][1]+o[2]*this._lookUpTableQuadratic[a][2],r=s[0]*this._lookUpTableQuadratic[a][0]+s[1]*this._lookUpTableQuadratic[a][1]+s[2]*this._lookUpTableQuadratic[a][2],this.vertex(t,n,r);this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},i.default.RendererGL.prototype.curveVertex=function(){var e,t,n,r,a,i=[],o=[],s=[],u=arguments.length;if((e=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var l=1/this._lutBezierDetail,c=0,f=1,d=0;c<1;){if(e=parseFloat(c.toFixed(6)),this._lookUpTableBezier[d]=this._bezierCoefficients(e),f.toFixed(6)===l.toFixed(6)){e=parseFloat(f.toFixed(6))+parseFloat(c.toFixed(6)),++d,this._lookUpTableBezier[d]=this._bezierCoefficients(e);break}c+=l,f-=l,++d}}var h=this._lookUpTableBezier.length;if(2===u){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,i=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),o=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),a=0;a<h;a++)t=i[0]*this._lookUpTableBezier[a][0]+i[1]*this._lookUpTableBezier[a][1]+i[2]*this._lookUpTableBezier[a][2]+i[3]*this._lookUpTableBezier[a][3],n=o[0]*this._lookUpTableBezier[a][0]+o[1]*this._lookUpTableBezier[a][1]+o[2]*this._lookUpTableBezier[a][2]+o[3]*this._lookUpTableBezier[a][3],this.vertex(t,n);for(a=0;a<u;a++)this.immediateMode._curveVertex.shift()}}else if(3===u&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,i=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),o=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),s=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),a=0;a<h;a++)t=i[0]*this._lookUpTableBezier[a][0]+i[1]*this._lookUpTableBezier[a][1]+i[2]*this._lookUpTableBezier[a][2]+i[3]*this._lookUpTableBezier[a][3],n=o[0]*this._lookUpTableBezier[a][0]+o[1]*this._lookUpTableBezier[a][1]+o[2]*this._lookUpTableBezier[a][2]+o[3]*this._lookUpTableBezier[a][3],r=s[0]*this._lookUpTableBezier[a][0]+s[1]*this._lookUpTableBezier[a][1]+s[2]*this._lookUpTableBezier[a][2]+s[3]*this._lookUpTableBezier[a][3],this.vertex(t,n,r);for(a=0;a<u;a++)this.immediateMode._curveVertex.shift()}},i.default.RendererGL.prototype.image=function(e,t,n,r,a,i,s,u,l){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.texture(e),this._pInst.textureMode(o.NORMAL);var c=0;t<=e.width&&(c=t/e.width);var f=1;t+r<=e.width&&(f=(t+r)/e.width);var d=0;n<=e.height&&(d=n/e.height);var h=1;n+a<=e.height&&(h=(n+a)/e.height),this.beginShape(),this.vertex(i,s,0,c,d),this.vertex(i+u,s,0,f,d),this.vertex(i+u,s+l,0,f,h),this.vertex(i,s+l,0,c,h),this.endShape(o.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(o.REMOVE)};var u=i.default;n.default=u},{"../core/constants":250,"../core/main":260,"./p5.Geometry":309,"core-js/modules/es.array.concat":148,"core-js/modules/es.number.to-fixed":169}],304:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));i.default.prototype.orbitControl=function(e,t,n){if(this._assert3d("orbitControl"),i.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY){var r=this._renderer._curCamera;void 0===e&&(e=1),void 0===t&&(t=e),void 0===n&&(n=.5),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var a=this.height<this.width?this.height:this.width;if(this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,n*a):this._renderer._curCamera._orbit(0,0,-n*a)),this.mouseIsPressed)if(this.mouseButton===this.LEFT){var o=-e*(this.mouseX-this.pmouseX)/a,s=t*(this.mouseY-this.pmouseY)/a;this._renderer._curCamera._orbit(o,s,0)}else if(this.mouseButton===this.RIGHT){var u=r._getLocalAxes(),l=Math.sqrt(u.x[0]*u.x[0]+u.x[2]*u.x[2]);0!==l&&(u.x[0]/=l,u.x[2]/=l);var c=Math.sqrt(u.y[0]*u.y[0]+u.y[2]*u.y[2]);0!==c&&(u.y[0]/=c,u.y[2]/=c);var f=-1*e*(this.mouseX-this.pmouseX),d=-1*t*(this.mouseY-this.pmouseY);r.setPosition(r.eyeX+f*u.x[0]+d*u.z[0],r.eyeY,r.eyeZ+f*u.x[2]+d*u.z[2])}return this}},i.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.default._validateParameters("debugMode",t);for(var r=this._registeredMethods.post.length-1;0<=r;r--)this._registeredMethods.post[r].toString()!==this._grid().toString()&&this._registeredMethods.post[r].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(r,1);t[0]===o.GRID?this.registerMethod("post",this._grid.call(this,t[1],t[2],t[3],t[4],t[5])):t[0]===o.AXES?this.registerMethod("post",this._axesIcon.call(this,t[1],t[2],t[3],t[4])):(this.registerMethod("post",this._grid.call(this,t[0],t[1],t[2],t[3],t[4])),this.registerMethod("post",this._axesIcon.call(this,t[5],t[6],t[7],t[8])))},i.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var e=this._registeredMethods.post.length-1;0<=e;e--)this._registeredMethods.post[e].toString()!==this._grid().toString()&&this._registeredMethods.post[e].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(e,1)},i.default.prototype._grid=function(e,t,n,r,a){void 0===e&&(e=this.width/2),void 0===t&&(t=Math.round(e/30)<4?4:Math.round(e/30)),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=0);var i=e/t,o=e/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var e=0;e<=t;e++)this.beginShape(this.LINES),this.vertex(-o+n,r,e*i-o+a),this.vertex(+o+n,r,e*i-o+a),this.endShape();for(var s=0;s<=t;s++)this.beginShape(this.LINES),this.vertex(s*i-o+n,r,-o+a),this.vertex(s*i-o+n,r,+o+a),this.endShape();this.pop()}},i.default.prototype._axesIcon=function(e,t,n,r){return void 0===e&&(e=40<this.width/20?this.width/20:40),void 0===t&&(t=-this.width/4),void 0===n&&(n=t),void 0===r&&(r=t),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t+e,n,r),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t,n+e,r),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t,n,r+e),this.endShape(),this.pop()}};var s=i.default;n.default=s},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.splice":162,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179}],305:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));i.default.prototype.ambientLight=function(e,t,n,r){this._assert3d("ambientLight"),i.default._validateParameters("ambientLight",arguments);var a=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(a._array[0],a._array[1],a._array[2]),this._renderer._enableLighting=!0,this},i.default.prototype.specularColor=function(e,t,n){this._assert3d("specularColor"),i.default._validateParameters("specularColor",arguments);var r=this.color.apply(this,arguments);return this._renderer.specularColors=[r._array[0],r._array[1],r._array[2]],this},i.default.prototype.directionalLight=function(e,t,n,r,a,o){var s,u,l,c;this._assert3d("directionalLight"),i.default._validateParameters("directionalLight",arguments),s=e instanceof i.default.Color?e:this.color(e,t,n);var f=arguments[arguments.length-1];c="number"==typeof f?(u=arguments[arguments.length-3],l=arguments[arguments.length-2],arguments[arguments.length-1]):(u=f.x,l=f.y,f.z);var d=Math.sqrt(u*u+l*l+c*c);return this._renderer.directionalLightDirections.push(u/d,l/d,c/d),this._renderer.directionalLightDiffuseColors.push(s._array[0],s._array[1],s._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},i.default.prototype.pointLight=function(e,t,n,r,a,o){var s,u,l,c;this._assert3d("pointLight"),i.default._validateParameters("pointLight",arguments),s=e instanceof i.default.Color?e:this.color(e,t,n);var f=arguments[arguments.length-1];return c="number"==typeof f?(u=arguments[arguments.length-3],l=arguments[arguments.length-2],arguments[arguments.length-1]):(u=f.x,l=f.y,f.z),this._renderer.pointLightPositions.push(u,l,c),this._renderer.pointLightDiffuseColors.push(s._array[0],s._array[1],s._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},i.default.prototype.lights=function(){if(this._assert3d("lights"),this._colorMode===o.RGB)this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1);else{var e=this._colorMaxes[this._colorMode][2];this.ambientLight(0,0,e),this.directionalLight(0,0,e,0,0,-1)}return this},i.default.prototype.lightFalloff=function(e,t,n){return this._assert3d("lightFalloff"),i.default._validateParameters("lightFalloff",arguments),e<0&&(e=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),t<0&&(t=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),n<0&&(n=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===e&&0===t&&0===n&&(e=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=e,this._renderer.linearAttenuation=t,this._renderer.quadraticAttenuation=n,this},i.default.prototype.spotLight=function(e,t,n,r,a,o,s,u,l,c,f){var d,h,p;this._assert3d("spotLight"),i.default._validateParameters("spotLight",arguments);var v=arguments.length;switch(v){case 11:case 10:d=this.color(e,t,n),h=new i.default.Vector(r,a,o),p=new i.default.Vector(s,u,l);break;case 9:e instanceof i.default.Color?(d=e,h=new i.default.Vector(t,n,r),p=new i.default.Vector(a,o,s),c=u,f=l):r instanceof i.default.Vector?(d=this.color(e,t,n),h=r,p=new i.default.Vector(a,o,s),c=u,f=l):s instanceof i.default.Vector?(d=this.color(e,t,n),h=new i.default.Vector(r,a,o),p=s,c=u,f=l):(d=this.color(e,t,n),h=new i.default.Vector(r,a,o),p=new i.default.Vector(s,u,l));break;case 8:p=e instanceof i.default.Color?(d=e,h=new i.default.Vector(t,n,r),new i.default.Vector(a,o,s)):r instanceof i.default.Vector?(d=this.color(e,t,n),h=r,new i.default.Vector(a,o,s)):(d=this.color(e,t,n),h=new i.default.Vector(r,a,o),s),c=u;break;case 7:e instanceof i.default.Color&&t instanceof i.default.Vector?(d=e,h=t,p=new i.default.Vector(n,r,a),c=o,f=s):e instanceof i.default.Color&&a instanceof i.default.Vector?(d=e,h=new i.default.Vector(t,n,r),p=a,c=o,f=s):r instanceof i.default.Vector&&a instanceof i.default.Vector?(d=this.color(e,t,n),h=r,p=a,c=o,f=s):p=e instanceof i.default.Color?(d=e,h=new i.default.Vector(t,n,r),new i.default.Vector(a,o,s)):r instanceof i.default.Vector?(d=this.color(e,t,n),h=r,new i.default.Vector(a,o,s)):(d=this.color(e,t,n),h=new i.default.Vector(r,a,o),s);break;case 6:r instanceof i.default.Vector&&a instanceof i.default.Vector?(d=this.color(e,t,n),h=r,p=a,c=o):e instanceof i.default.Color&&a instanceof i.default.Vector?(d=e,h=new i.default.Vector(t,n,r),p=a,c=o):e instanceof i.default.Color&&t instanceof i.default.Vector&&(d=e,h=t,p=new i.default.Vector(n,r,a),c=o);break;case 5:e instanceof i.default.Color&&t instanceof i.default.Vector&&n instanceof i.default.Vector?(d=e,h=t,p=n,c=r,f=a):r instanceof i.default.Vector&&a instanceof i.default.Vector?(d=this.color(e,t,n),h=r,p=a):e instanceof i.default.Color&&a instanceof i.default.Vector?(d=e,h=new i.default.Vector(t,n,r),p=a):e instanceof i.default.Color&&t instanceof i.default.Vector&&(d=e,h=t,p=new i.default.Vector(n,r,a));break;case 4:d=e,h=t,p=n,c=r;break;case 3:d=e,h=t,p=n;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(v<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(d._array[0],d._array[1],d._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(h.x,h.y,h.z),p.normalize(),this._renderer.spotLightDirections.push(p.x,p.y,p.z),void 0===c&&(c=Math.PI/3),void 0!==f&&f<1?(f=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===f&&(f=100),c=this._renderer._pInst._toRadians(c),this._renderer.spotLightAngle.push(Math.cos(c)),this._renderer.spotLightConc.push(f),this._renderer._enableLighting=!0,this},i.default.prototype.noLights=function(){return this._assert3d("noLights"),i.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var s=i.default;n.default=s},{"../core/constants":250,"../core/main":260}],306:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e,t,n){for(var r=0,a=e.length;r<a;r++)if(e[r]!==t.getUint8(n+r,!1))return!1;return!0}e("./p5.Geometry"),a.default.prototype.loadModel=function(e){var t,n,r;a.default._validateParameters("loadModel",arguments);var o=e.slice(-4);"boolean"==typeof arguments[1]?(t=arguments[1],n=arguments[2],r=arguments[3],void 0!==arguments[4]&&(o=arguments[4])):(t=!1,n=arguments[1],r=arguments[2],void 0!==arguments[3]&&(o=arguments[3]));var s=new a.default.Geometry;s.gid="".concat(e,"|").concat(t);var u=this;return o.match(/\.stl$/i)?this.httpDo(e,"GET","arrayBuffer",(function(e){!function(e,t){if(function(e){for(var t=new DataView(e),n=[115,111,108,105,100],r=0;r<5;r++)if(i(n,t,r))return!1;return!0}(t))!function(e,t){for(var n,r,i,o,s,u,l,c=new DataView(t),f=c.getUint32(80,!0),d=!1,h=0;h<70;h++)1129270351===c.getUint32(h,!1)&&82===c.getUint8(h+4)&&61===c.getUint8(h+5)&&(d=!0,o=[],s=c.getUint8(h+6)/255,u=c.getUint8(h+7)/255,l=c.getUint8(h+8)/255);for(var p=0;p<f;p++){var v=84+50*p,m=c.getFloat32(v,!0),g=c.getFloat32(4+v,!0),y=c.getFloat32(8+v,!0);if(d){var b=c.getUint16(48+v,!0);i=0==(32768&b)?(n=(31&b)/31,r=(b>>5&31)/31,(b>>10&31)/31):(n=s,r=u,l)}for(var x=new a.default.Vector(m,g,y),w=1;w<=3;w++){var k=v+12*w,S=new a.default.Vector(c.getFloat32(k,!0),c.getFloat32(4+k,!0),c.getFloat32(8+k,!0));e.vertices.push(S),e.vertexNormals.push(x),d&&o.push(n,r,i)}e.faces.push([3*p,3*p+1,3*p+2]),e.uvs.push([0,0],[0,0],[0,0])}}(e,t);else{var n=new DataView(t);if(!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");!function(e,t){for(var n,r,i="",o=[],s=0;s<t.length;++s){for(var u=t[s].trim(),l=u.split(" "),c=0;c<l.length;++c)""===l[c]&&l.splice(c,1);if(0!==l.length)switch(i){case"":if("solid"!==l[0])return console.error(u),console.error('Invalid state "'.concat(l[0],'", should be "solid"'));i="solid";break;case"solid":if("facet"!==l[0]||"normal"!==l[1])return console.error(u),console.error('Invalid state "'.concat(l[0],'", should be "facet normal"'));n=new a.default.Vector(parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4])),e.vertexNormals.push(n,n,n),i="facet normal";break;case"facet normal":if("outer"!==l[0]||"loop"!==l[1])return console.error(u),console.error('Invalid state "'.concat(l[0],'", should be "outer loop"'));i="vertex";break;case"vertex":if("vertex"===l[0])r=new a.default.Vector(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])),e.vertices.push(r),e.uvs.push([0,0]),o.push(e.vertices.indexOf(r));else{if("endloop"!==l[0])return console.error(u),console.error('Invalid state "'.concat(l[0],'", should be "vertex" or "endloop"'));e.faces.push(o),o=[],i="endloop"}break;case"endloop":if("endfacet"!==l[0])return console.error(u),console.error('Invalid state "'.concat(l[0],'", should be "endfacet"'));i="endfacet";break;case"endfacet":if("endsolid"!==l[0]){if("facet"!==l[0]||"normal"!==l[1])return console.error(u),console.error('Invalid state "'.concat(l[0],'", should be "endsolid" or "facet normal"'));n=new a.default.Vector(parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4])),e.vertexNormals.push(n,n,n),i="facet normal"}break;default:console.error('Invalid state "'.concat(i,'"'))}}}(e,new TextDecoder("utf-8").decode(n).split("\n"))}}(s,e),t&&s.normalize(),u._decrementPreload(),"function"==typeof n&&n(s)}),r):o.match(/\.obj$/i)?this.loadStrings(e,(function(e){!function(e,t){for(var n={v:[],vt:[],vn:[]},r={},i=0;i<t.length;++i){var o=t[i].trim().split(/\b\s+/);if(0<o.length)if("v"===o[0]||"vn"===o[0]){var s=new a.default.Vector(parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]));n[o[0]].push(s)}else if("vt"===o[0]){var u=[parseFloat(o[1]),1-parseFloat(o[2])];n[o[0]].push(u)}else if("f"===o[0])for(var l=3;l<o.length;++l){for(var c=[],f=[1,l-1,l],d=0;d<f.length;++d){var h=o[f[d]],p=0;if(void 0!==r[h])p=r[h];else{for(var v=h.split("/"),m=0;m<v.length;m++)v[m]=parseInt(v[m])-1;p=r[h]=e.vertices.length,e.vertices.push(n.v[v[0]].copy()),n.vt[v[1]]?e.uvs.push(n.vt[v[1]].slice()):e.uvs.push([0,0]),n.vn[v[2]]&&e.vertexNormals.push(n.vn[v[2]].copy())}c.push(p)}c[0]!==c[1]&&c[0]!==c[2]&&c[1]!==c[2]&&e.faces.push(c)}}0===e.vertexNormals.length&&e.computeNormals()}(s,e),t&&s.normalize(),u._decrementPreload(),"function"==typeof n&&n(s)}),r):(a.default._friendlyFileLoadError(3,e),r?r():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),s},a.default.prototype.model=function(e){this._assert3d("model"),a.default._validateParameters("model",arguments),0<e.vertices.length&&(this._renderer.geometryInHash(e.gid)||(e._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(e.gid,e)),this._renderer.drawBuffers(e.gid))};var o=a.default;n.default=o},{"../core/main":260,"./p5.Geometry":309,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.slice":160,"core-js/modules/es.array.splice":162,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.match":184,"core-js/modules/es.string.split":188,"core-js/modules/es.string.trim":190}],307:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.join"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));e("./p5.Texture"),i.default.prototype.loadShader=function(e,t,n,r){function a(){s._decrementPreload(),n&&n(o)}i.default._validateParameters("loadShader",arguments),r=r||console.error;var o=new i.default.Shader,s=this,u=!1,l=!1;return this.loadStrings(e,(function(e){o._vertSrc=e.join("\n"),l=!0,u&&a()}),r),this.loadStrings(t,(function(e){o._fragSrc=e.join("\n"),u=!0,l&&a()}),r),o},i.default.prototype.createShader=function(e,t){return this._assert3d("createShader"),i.default._validateParameters("createShader",arguments),new i.default.Shader(this._renderer,e,t)},i.default.prototype.shader=function(e){return this._assert3d("shader"),i.default._validateParameters("shader",arguments),void 0===e._renderer&&(e._renderer=this._renderer),e.isStrokeShader()?this._renderer.userStrokeShader=e:(this._renderer.userFillShader=e,this._renderer._useNormalMaterial=!1),e.init(),this},i.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},i.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default._validateParameters("normalMaterial",t),this._renderer.drawMode=o.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},i.default.prototype.texture=function(e){return this._assert3d("texture"),i.default._validateParameters("texture",arguments),e.gifProperties&&e._animateGif(this),this._renderer.drawMode=o.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=e,this._renderer._setProperty("_doFill",!0),this},i.default.prototype.textureMode=function(e){e!==o.IMAGE&&e!==o.NORMAL?console.warn("You tried to set ".concat(e," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=e},i.default.prototype.textureWrap=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e;this._renderer.textureWrapX=e,this._renderer.textureWrapY=t;for(var n=this._renderer.textures,r=0;r<n.length;r++)n[r].setWrapMode(e,t)},i.default.prototype.ambientMaterial=function(e,t,n){this._assert3d("ambientMaterial"),i.default._validateParameters("ambientMaterial",arguments);var r=i.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=r._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},i.default.prototype.emissiveMaterial=function(e,t,n,r){this._assert3d("emissiveMaterial"),i.default._validateParameters("emissiveMaterial",arguments);var a=i.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=a._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},i.default.prototype.specularMaterial=function(e,t,n,r){this._assert3d("specularMaterial"),i.default._validateParameters("specularMaterial",arguments);var a=i.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=a._array,this._renderer._useSpecularMaterial=!0,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},i.default.prototype.shininess=function(e){return this._assert3d("shininess"),i.default._validateParameters("shininess",arguments),e<1&&(e=1),this._renderer._useShininess=e,this},i.default.RendererGL.prototype._applyColorBlend=function(e){var t=this.GL,n=this.drawMode===o.TEXTURE||e[e.length-1]<1||this._isErasing;return n!==this._isBlending&&(n||this.curBlendMode!==o.BLEND&&this.curBlendMode!==o.ADD?t.enable(t.BLEND):t.disable(t.BLEND),t.depthMask(!0),this._isBlending=n),this._applyBlendMode(),e},i.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var e=this.GL;switch(this.curBlendMode){case o.BLEND:case o.ADD:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA);break;case o.REMOVE:e.blendEquation(e.FUNC_REVERSE_SUBTRACT),e.blendFunc(e.SRC_ALPHA,e.DST_ALPHA);break;case o.MULTIPLY:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ONE,e.ONE);break;case o.SCREEN:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE_MINUS_DST_COLOR,e.ONE,e.ONE,e.ONE);break;case o.EXCLUSION:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE_MINUS_DST_COLOR,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE);break;case o.REPLACE:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO);break;case o.SUBTRACT:e.blendEquationSeparate(e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE);break;case o.DARKEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MIN_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case o.LIGHTEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MAX_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var s=i.default;n.default=s},{"../core/constants":250,"../core/main":260,"./p5.Texture":316,"core-js/modules/es.array.join":157}],308:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.camera=function(){var e;this._assert3d("camera");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.default._validateParameters("camera",n),(e=this._renderer._curCamera).camera.apply(e,n),this},a.default.prototype.perspective=function(){var e;this._assert3d("perspective");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.default._validateParameters("perspective",n),(e=this._renderer._curCamera).perspective.apply(e,n),this},a.default.prototype.ortho=function(){var e;this._assert3d("ortho");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.default._validateParameters("ortho",n),(e=this._renderer._curCamera).ortho.apply(e,n),this},a.default.prototype.frustum=function(){var e;this._assert3d("frustum");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.default._validateParameters("frustum",n),(e=this._renderer._curCamera).frustum.apply(e,n),this},a.default.prototype.createCamera=function(){this._assert3d("createCamera");var e=new a.default.Camera(this._renderer);return e._computeCameraDefaultSettings(),e._setDefaultCamera(),this._renderer._curCamera=e},a.default.Camera=function(e){this._renderer=e,this.cameraType="default",this.cameraMatrix=new a.default.Matrix,this.projMatrix=new a.default.Matrix},a.default.Camera.prototype.perspective=function(e,t,n,r){this.cameraType=0<arguments.length?"custom":"default",void 0===e?(e=this.defaultCameraFOV,this.cameraFOV=e):this.cameraFOV=this._renderer._pInst._toRadians(e),void 0===t&&(t=this.defaultAspectRatio),void 0===n&&(n=this.defaultCameraNear),void 0===r&&(r=this.defaultCameraFar),n<=1e-4&&(n=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),r<n&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=t,this.cameraNear=n,this.cameraFar=r,this.projMatrix=a.default.Matrix.identity();var i=1/Math.tan(this.cameraFOV/2),o=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(i/t,0,0,0,0,-i,0,0,0,0,(r+n)*o,-1,0,0,2*r*n*o,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},a.default.Camera.prototype.ortho=function(e,t,n,r,i,o){void 0===e&&(e=-this._renderer.width/2),void 0===t&&(t=this._renderer.width/2),void 0===n&&(n=-this._renderer.height/2),void 0===r&&(r=this._renderer.height/2),void 0===i&&(i=0),void 0===o&&(o=Math.max(this._renderer.width,this._renderer.height));var s=t-e,u=r-n,l=o-i,c=2/s,f=2/u,d=-2/l,h=-(t+e)/s,p=-(r+n)/u,v=-(o+i)/l;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(c,0,0,0,0,-f,0,0,0,0,d,0,h,p,v,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},a.default.Camera.prototype.frustum=function(e,t,n,r,i,o){void 0===e&&(e=-this._renderer.width/2),void 0===t&&(t=this._renderer.width/2),void 0===n&&(n=-this._renderer.height/2),void 0===r&&(r=this._renderer.height/2),void 0===i&&(i=0),void 0===o&&(o=Math.max(this._renderer.width,this._renderer.height));var s=t-e,u=r-n,l=o-i,c=2*i/s,f=2*i/u,d=-2*o*i/l,h=(t+e)/s,p=(r+n)/u,v=-(o+i)/l;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(c,0,0,0,0,f,0,0,h,p,v,-1,0,0,d,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},a.default.Camera.prototype._rotateView=function(e,t,n,r){var i=this.centerX,o=this.centerY,s=this.centerZ;i-=this.eyeX,o-=this.eyeY,s-=this.eyeZ;var u=a.default.Matrix.identity(this._renderer._pInst);u.rotate(this._renderer._pInst._toRadians(e),t,n,r);var l=[i*u.mat4[0]+o*u.mat4[4]+s*u.mat4[8],i*u.mat4[1]+o*u.mat4[5]+s*u.mat4[9],i*u.mat4[2]+o*u.mat4[6]+s*u.mat4[10]];l[0]+=this.eyeX,l[1]+=this.eyeY,l[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,l[0],l[1],l[2],this.upX,this.upY,this.upZ)},a.default.Camera.prototype.pan=function(e){var t=this._getLocalAxes();this._rotateView(e,t.y[0],t.y[1],t.y[2])},a.default.Camera.prototype.tilt=function(e){var t=this._getLocalAxes();this._rotateView(e,t.x[0],t.x[1],t.x[2])},a.default.Camera.prototype.lookAt=function(e,t,n){this.camera(this.eyeX,this.eyeY,this.eyeZ,e,t,n,this.upX,this.upY,this.upZ)},a.default.Camera.prototype.camera=function(e,t,n,r,a,i,o,s,u){void 0===e&&(e=this.defaultEyeX,t=this.defaultEyeY,n=this.defaultEyeZ,r=e,a=t,s=1,u=o=i=0),this.eyeX=e,this.eyeY=t,this.eyeZ=n,void 0!==r&&(this.centerX=r,this.centerY=a,this.centerZ=i),void 0!==o&&(this.upX=o,this.upY=s,this.upZ=u);var l=this._getLocalAxes();this.cameraMatrix.set(l.x[0],l.y[0],l.z[0],0,l.x[1],l.y[1],l.z[1],0,l.x[2],l.y[2],l.z[2],0,0,0,0,1);var c=-e,f=-t,d=-n;return this.cameraMatrix.translate([c,f,d]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},a.default.Camera.prototype.move=function(e,t,n){var r=this._getLocalAxes(),a=[r.x[0]*e,r.x[1]*e,r.x[2]*e],i=[r.y[0]*t,r.y[1]*t,r.y[2]*t],o=[r.z[0]*n,r.z[1]*n,r.z[2]*n];this.camera(this.eyeX+a[0]+i[0]+o[0],this.eyeY+a[1]+i[1]+o[1],this.eyeZ+a[2]+i[2]+o[2],this.centerX+a[0]+i[0]+o[0],this.centerY+a[1]+i[1]+o[1],this.centerZ+a[2]+i[2]+o[2],0,1,0)},a.default.Camera.prototype.setPosition=function(e,t,n){var r=e-this.eyeX,a=t-this.eyeY,i=n-this.eyeZ;this.camera(e,t,n,this.centerX+r,this.centerY+a,this.centerZ+i,0,1,0)},a.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},a.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},a.default.Camera.prototype._resize=function(){"default"===this.cameraType?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},a.default.Camera.prototype.copy=function(){var e=new a.default.Camera(this._renderer);return e.cameraFOV=this.cameraFOV,e.aspectRatio=this.aspectRatio,e.eyeX=this.eyeX,e.eyeY=this.eyeY,e.eyeZ=this.eyeZ,e.centerX=this.centerX,e.centerY=this.centerY,e.centerZ=this.centerZ,e.cameraNear=this.cameraNear,e.cameraFar=this.cameraFar,e.cameraType=this.cameraType,e.cameraMatrix=this.cameraMatrix.copy(),e.projMatrix=this.projMatrix.copy(),e},a.default.Camera.prototype._getLocalAxes=function(){var e=this.eyeX-this.centerX,t=this.eyeY-this.centerY,n=this.eyeZ-this.centerZ,r=Math.sqrt(e*e+t*t+n*n);0!==r&&(e/=r,t/=r,n/=r);var a=this.upX,i=this.upY,o=this.upZ,s=i*n-o*t,u=-a*n+o*e,l=a*t-i*e;a=t*l-n*u,i=-e*l+n*s,o=e*u-t*s;var c=Math.sqrt(s*s+u*u+l*l);0!==c&&(s/=c,u/=c,l/=c);var f=Math.sqrt(a*a+i*i+o*o);return 0!==f&&(a/=f,i/=f,o/=f),{x:[s,u,l],y:[a,i,o],z:[e,t,n]}},a.default.Camera.prototype._orbit=function(e,t,n){var r=this.eyeX-this.centerX,a=this.eyeY-this.centerY,i=this.eyeZ-this.centerZ,o=Math.sqrt(r*r+a*a+i*i),s=Math.atan2(r,i),u=Math.acos(Math.max(-1,Math.min(1,a/o)));s+=e,(o+=n)<0&&(o=.1),(u+=t)>Math.PI?u=Math.PI:u<=0&&(u=.001);var l=Math.sin(u)*o*Math.sin(s),c=Math.cos(u)*o,f=Math.sin(u)*o*Math.cos(s);this.camera(l+this.centerX,c+this.centerY,f+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},a.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},a.default.prototype.setCamera=function(e){this._renderer._curCamera=e,this._renderer.uPMatrix.set(e.projMatrix.mat4[0],e.projMatrix.mat4[1],e.projMatrix.mat4[2],e.projMatrix.mat4[3],e.projMatrix.mat4[4],e.projMatrix.mat4[5],e.projMatrix.mat4[6],e.projMatrix.mat4[7],e.projMatrix.mat4[8],e.projMatrix.mat4[9],e.projMatrix.mat4[10],e.projMatrix.mat4[11],e.projMatrix.mat4[12],e.projMatrix.mat4[13],e.projMatrix.mat4[14],e.projMatrix.mat4[15])};var i=a.default.Camera;n.default=i},{"../core/main":260}],309:[function(e,t,n){"use strict";e("core-js/modules/es.string.sub"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.Geometry=function(e,t,n){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.detailX=void 0!==e?e:1,this.detailY=void 0!==t?t:1,this.dirtyFlags={},n instanceof Function&&n.call(this),this},a.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineNormals.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},a.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var e,t,n,r,a=this.detailX+1,i=0;i<this.detailY;i++)for(var o=0;o<this.detailX;o++)t=(e=i*a+o)+1,n=(i+1)*a+o+1,r=(i+1)*a+o,this.faces.push([e,t,r]),this.faces.push([r,t,n]);return this},a.default.Geometry.prototype._getFaceNormal=function(e){var t=this.faces[e],n=this.vertices[t[0]],r=this.vertices[t[1]],i=this.vertices[t[2]],o=a.default.Vector.sub(r,n),s=a.default.Vector.sub(i,n),u=a.default.Vector.cross(o,s),l=a.default.Vector.mag(u),c=l/(a.default.Vector.mag(o)*a.default.Vector.mag(s));return 0===c||isNaN(c)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),u):(1<c&&(c=1),u.mult(Math.asin(c)/l))},a.default.Geometry.prototype.computeNormals=function(){var e,t=this.vertexNormals,n=this.vertices,r=this.faces;for(e=t.length=0;e<n.length;++e)t.push(new a.default.Vector);for(var i=0;i<r.length;++i)for(var o=r[i],s=this._getFaceNormal(i),u=0;u<3;++u)t[o[u]].add(s);for(e=0;e<n.length;++e)t[e].normalize();return this},a.default.Geometry.prototype.averageNormals=function(){for(var e=0;e<=this.detailY;e++){var t=this.detailX+1,n=a.default.Vector.add(this.vertexNormals[e*t],this.vertexNormals[e*t+this.detailX]);n=a.default.Vector.div(n,2),this.vertexNormals[e*t]=n,this.vertexNormals[e*t+this.detailX]=n}return this},a.default.Geometry.prototype.averagePoleNormals=function(){for(var e=new a.default.Vector(0,0,0),t=0;t<this.detailX;t++)e.add(this.vertexNormals[t]);e=a.default.Vector.div(e,this.detailX);for(var n=0;n<this.detailX;n++)this.vertexNormals[n]=e;e=new a.default.Vector(0,0,0);for(var r=this.vertices.length-1;r>this.vertices.length-1-this.detailX;r--)e.add(this.vertexNormals[r]);e=a.default.Vector.div(e,this.detailX);for(var i=this.vertices.length-1;i>this.vertices.length-1-this.detailX;i--)this.vertexNormals[i]=e;return this},a.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var e=0,t=this.strokeIndices.length;e<t;e++)this.edges.push(this.strokeIndices[e]);else for(var n=0;n<this.faces.length;n++)this.edges.push([this.faces[n][0],this.faces[n][1]]),this.edges.push([this.faces[n][1],this.faces[n][2]]),this.edges.push([this.faces[n][2],this.faces[n][0]]);return this},a.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0;for(var e=this.lineNormals.length=0;e<this.edges.length;e++){var t=this.vertices[this.edges[e][0]],n=this.vertices[this.edges[e][1]],r=n.copy().sub(t).normalize(),a=t.array(),i=t.array(),o=n.array(),s=n.array(),u=r.array(),l=r.array();u.push(1),l.push(-1),this.lineNormals.push(u,l,u,u,l,l),this.lineVertices.push(a,i,o,o,i,s)}return this},a.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var e=this.vertices[0].copy(),t=this.vertices[0].copy(),n=0;n<this.vertices.length;n++)e.x=Math.max(e.x,this.vertices[n].x),t.x=Math.min(t.x,this.vertices[n].x),e.y=Math.max(e.y,this.vertices[n].y),t.y=Math.min(t.y,this.vertices[n].y),e.z=Math.max(e.z,this.vertices[n].z),t.z=Math.min(t.z,this.vertices[n].z);for(var r=a.default.Vector.lerp(e,t,.5),i=a.default.Vector.sub(e,t),o=200/Math.max(Math.max(i.x,i.y),i.z),s=0;s<this.vertices.length;s++)this.vertices[s].sub(r),this.vertices[s].mult(o)}return this};var i=a.default.Geometry;n.default=i},{"../core/main":260,"core-js/modules/es.string.sub":189}],310:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},i=Array,o=function(e){return e instanceof Array};"undefined"!=typeof Float32Array&&(i=Float32Array,o=function(e){return e instanceof Array||e instanceof Float32Array}),a.default.Matrix=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];return e.length&&e[e.length-1]instanceof a.default&&(this.p5=e[e.length-1]),"mat3"===e[0]?this.mat3=Array.isArray(e[1])?e[1]:new i([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(e[0])?e[0]:new i([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},a.default.Matrix.prototype.set=function(e){return e instanceof a.default.Matrix?this.mat4=e.mat4:o(e)?this.mat4=e:16===arguments.length&&(this.mat4[0]=e,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},a.default.Matrix.prototype.get=function(){return new a.default.Matrix(this.mat4,this.p5)},a.default.Matrix.prototype.copy=function(){var e=new a.default.Matrix(this.p5);return e.mat4[0]=this.mat4[0],e.mat4[1]=this.mat4[1],e.mat4[2]=this.mat4[2],e.mat4[3]=this.mat4[3],e.mat4[4]=this.mat4[4],e.mat4[5]=this.mat4[5],e.mat4[6]=this.mat4[6],e.mat4[7]=this.mat4[7],e.mat4[8]=this.mat4[8],e.mat4[9]=this.mat4[9],e.mat4[10]=this.mat4[10],e.mat4[11]=this.mat4[11],e.mat4[12]=this.mat4[12],e.mat4[13]=this.mat4[13],e.mat4[14]=this.mat4[14],e.mat4[15]=this.mat4[15],e},a.default.Matrix.identity=function(e){return new a.default.Matrix(e)},a.default.Matrix.prototype.transpose=function(e){var t,n,r,i,s,u;return e instanceof a.default.Matrix?(t=e.mat4[1],n=e.mat4[2],r=e.mat4[3],i=e.mat4[6],s=e.mat4[7],u=e.mat4[11],this.mat4[0]=e.mat4[0],this.mat4[1]=e.mat4[4],this.mat4[2]=e.mat4[8],this.mat4[3]=e.mat4[12],this.mat4[4]=t,this.mat4[5]=e.mat4[5],this.mat4[6]=e.mat4[9],this.mat4[7]=e.mat4[13],this.mat4[8]=n,this.mat4[9]=i,this.mat4[10]=e.mat4[10],this.mat4[11]=e.mat4[14],this.mat4[12]=r,this.mat4[13]=s,this.mat4[14]=u,this.mat4[15]=e.mat4[15]):o(e)&&(t=e[1],n=e[2],r=e[3],i=e[6],s=e[7],u=e[11],this.mat4[0]=e[0],this.mat4[1]=e[4],this.mat4[2]=e[8],this.mat4[3]=e[12],this.mat4[4]=t,this.mat4[5]=e[5],this.mat4[6]=e[9],this.mat4[7]=e[13],this.mat4[8]=n,this.mat4[9]=i,this.mat4[10]=e[10],this.mat4[11]=e[14],this.mat4[12]=r,this.mat4[13]=s,this.mat4[14]=u,this.mat4[15]=e[15]),this},a.default.Matrix.prototype.invert=function(e){var t,n,r,i,s,u,l,c,f,d,h,p,v,m,g,y;e instanceof a.default.Matrix?(t=e.mat4[0],n=e.mat4[1],r=e.mat4[2],i=e.mat4[3],s=e.mat4[4],u=e.mat4[5],l=e.mat4[6],c=e.mat4[7],f=e.mat4[8],d=e.mat4[9],h=e.mat4[10],p=e.mat4[11],v=e.mat4[12],m=e.mat4[13],g=e.mat4[14],y=e.mat4[15]):o(e)&&(t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=e[9],h=e[10],p=e[11],v=e[12],m=e[13],g=e[14],y=e[15]);var b=t*u-n*s,x=t*l-r*s,w=t*c-i*s,k=n*l-r*u,S=n*c-i*u,_=r*c-i*l,C=f*m-d*v,E=f*g-h*v,T=f*y-p*v,I=d*g-h*m,A=d*y-p*m,N=h*y-p*g,R=b*N-x*A+w*I+k*T-S*E+_*C;return R?(R=1/R,this.mat4[0]=(u*N-l*A+c*I)*R,this.mat4[1]=(r*A-n*N-i*I)*R,this.mat4[2]=(m*_-g*S+y*k)*R,this.mat4[3]=(h*S-d*_-p*k)*R,this.mat4[4]=(l*T-s*N-c*E)*R,this.mat4[5]=(t*N-r*T+i*E)*R,this.mat4[6]=(g*w-v*_-y*x)*R,this.mat4[7]=(f*_-h*w+p*x)*R,this.mat4[8]=(s*A-u*T+c*C)*R,this.mat4[9]=(n*T-t*A-i*C)*R,this.mat4[10]=(v*S-m*w+y*b)*R,this.mat4[11]=(d*w-f*S-p*b)*R,this.mat4[12]=(u*E-s*I-l*C)*R,this.mat4[13]=(t*I-n*E+r*C)*R,this.mat4[14]=(m*x-v*k-g*b)*R,this.mat4[15]=(f*k-d*x+h*b)*R,this):null},a.default.Matrix.prototype.invert3x3=function(){var e=this.mat3[0],t=this.mat3[1],n=this.mat3[2],r=this.mat3[3],a=this.mat3[4],i=this.mat3[5],o=this.mat3[6],s=this.mat3[7],u=this.mat3[8],l=u*a-i*s,c=-u*r+i*o,f=s*r-a*o,d=e*l+t*c+n*f;return d?(d=1/d,this.mat3[0]=l*d,this.mat3[1]=(-u*t+n*s)*d,this.mat3[2]=(i*t-n*a)*d,this.mat3[3]=c*d,this.mat3[4]=(u*e-n*o)*d,this.mat3[5]=(-i*e+n*r)*d,this.mat3[6]=f*d,this.mat3[7]=(-s*e+t*o)*d,this.mat3[8]=(a*e-t*r)*d,this):null},a.default.Matrix.prototype.transpose3x3=function(e){var t=e[1],n=e[2],r=e[5];return this.mat3[1]=e[3],this.mat3[2]=e[6],this.mat3[3]=t,this.mat3[5]=e[7],this.mat3[6]=n,this.mat3[7]=r,this},a.default.Matrix.prototype.inverseTranspose=function(e){void 0===this.mat3?console.error("sorry, this function only works with mat3"):(this.mat3[0]=e.mat4[0],this.mat3[1]=e.mat4[1],this.mat3[2]=e.mat4[2],this.mat3[3]=e.mat4[4],this.mat3[4]=e.mat4[5],this.mat3[5]=e.mat4[6],this.mat3[6]=e.mat4[8],this.mat3[7]=e.mat4[9],this.mat3[8]=e.mat4[10]);var t=this.invert3x3();if(t)t.transpose3x3(this.mat3);else for(var n=0;n<9;n++)this.mat3[n]=0;return this},a.default.Matrix.prototype.determinant=function(){var e=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],t=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],n=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],r=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],a=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],i=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],o=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],s=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],u=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],l=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],c=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return e*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-t*c+n*l+r*u-a*s+i*o},a.default.Matrix.prototype.mult=function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof a.default.Matrix)t=e.mat4;else if(o(e))t=e;else{if(16!==arguments.length)return;t=arguments}var n=this.mat4[0],r=this.mat4[1],i=this.mat4[2],s=this.mat4[3];return this.mat4[0]=n*t[0]+r*t[4]+i*t[8]+s*t[12],this.mat4[1]=n*t[1]+r*t[5]+i*t[9]+s*t[13],this.mat4[2]=n*t[2]+r*t[6]+i*t[10]+s*t[14],this.mat4[3]=n*t[3]+r*t[7]+i*t[11]+s*t[15],n=this.mat4[4],r=this.mat4[5],i=this.mat4[6],s=this.mat4[7],this.mat4[4]=n*t[0]+r*t[4]+i*t[8]+s*t[12],this.mat4[5]=n*t[1]+r*t[5]+i*t[9]+s*t[13],this.mat4[6]=n*t[2]+r*t[6]+i*t[10]+s*t[14],this.mat4[7]=n*t[3]+r*t[7]+i*t[11]+s*t[15],n=this.mat4[8],r=this.mat4[9],i=this.mat4[10],s=this.mat4[11],this.mat4[8]=n*t[0]+r*t[4]+i*t[8]+s*t[12],this.mat4[9]=n*t[1]+r*t[5]+i*t[9]+s*t[13],this.mat4[10]=n*t[2]+r*t[6]+i*t[10]+s*t[14],this.mat4[11]=n*t[3]+r*t[7]+i*t[11]+s*t[15],n=this.mat4[12],r=this.mat4[13],i=this.mat4[14],s=this.mat4[15],this.mat4[12]=n*t[0]+r*t[4]+i*t[8]+s*t[12],this.mat4[13]=n*t[1]+r*t[5]+i*t[9]+s*t[13],this.mat4[14]=n*t[2]+r*t[6]+i*t[10]+s*t[14],this.mat4[15]=n*t[3]+r*t[7]+i*t[11]+s*t[15],this},a.default.Matrix.prototype.apply=function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof a.default.Matrix)t=e.mat4;else if(o(e))t=e;else{if(16!==arguments.length)return;t=arguments}var n=this.mat4,r=n[0],i=n[4],s=n[8],u=n[12];n[0]=t[0]*r+t[1]*i+t[2]*s+t[3]*u,n[4]=t[4]*r+t[5]*i+t[6]*s+t[7]*u,n[8]=t[8]*r+t[9]*i+t[10]*s+t[11]*u,n[12]=t[12]*r+t[13]*i+t[14]*s+t[15]*u;var l=n[1],c=n[5],f=n[9],d=n[13];n[1]=t[0]*l+t[1]*c+t[2]*f+t[3]*d,n[5]=t[4]*l+t[5]*c+t[6]*f+t[7]*d,n[9]=t[8]*l+t[9]*c+t[10]*f+t[11]*d,n[13]=t[12]*l+t[13]*c+t[14]*f+t[15]*d;var h=n[2],p=n[6],v=n[10],m=n[14];n[2]=t[0]*h+t[1]*p+t[2]*v+t[3]*m,n[6]=t[4]*h+t[5]*p+t[6]*v+t[7]*m,n[10]=t[8]*h+t[9]*p+t[10]*v+t[11]*m,n[14]=t[12]*h+t[13]*p+t[14]*v+t[15]*m;var g=n[3],y=n[7],b=n[11],x=n[15];return n[3]=t[0]*g+t[1]*y+t[2]*b+t[3]*x,n[7]=t[4]*g+t[5]*y+t[6]*b+t[7]*x,n[11]=t[8]*g+t[9]*y+t[10]*b+t[11]*x,n[15]=t[12]*g+t[13]*y+t[14]*b+t[15]*x,this},a.default.Matrix.prototype.scale=function(e,t,n){return e instanceof a.default.Vector?(t=e.y,n=e.z,e=e.x):e instanceof Array&&(t=e[1],n=e[2],e=e[0]),this.mat4[0]*=e,this.mat4[1]*=e,this.mat4[2]*=e,this.mat4[3]*=e,this.mat4[4]*=t,this.mat4[5]*=t,this.mat4[6]*=t,this.mat4[7]*=t,this.mat4[8]*=n,this.mat4[9]*=n,this.mat4[10]*=n,this.mat4[11]*=n,this},a.default.Matrix.prototype.rotate=function(e,t,n,r){t instanceof a.default.Vector?(n=t.y,r=t.z,t=t.x):t instanceof Array&&(n=t[1],r=t[2],t=t[0]);var i=Math.sqrt(t*t+n*n+r*r);t*=1/i,n*=1/i,r*=1/i;var o=this.mat4[0],s=this.mat4[1],u=this.mat4[2],l=this.mat4[3],c=this.mat4[4],f=this.mat4[5],d=this.mat4[6],h=this.mat4[7],p=this.mat4[8],v=this.mat4[9],m=this.mat4[10],g=this.mat4[11],y=Math.sin(e),b=Math.cos(e),x=1-b,w=t*t*x+b,k=n*t*x+r*y,S=r*t*x-n*y,_=t*n*x-r*y,C=n*n*x+b,E=r*n*x+t*y,T=t*r*x+n*y,I=n*r*x-t*y,A=r*r*x+b;return this.mat4[0]=o*w+c*k+p*S,this.mat4[1]=s*w+f*k+v*S,this.mat4[2]=u*w+d*k+m*S,this.mat4[3]=l*w+h*k+g*S,this.mat4[4]=o*_+c*C+p*E,this.mat4[5]=s*_+f*C+v*E,this.mat4[6]=u*_+d*C+m*E,this.mat4[7]=l*_+h*C+g*E,this.mat4[8]=o*T+c*I+p*A,this.mat4[9]=s*T+f*I+v*A,this.mat4[10]=u*T+d*I+m*A,this.mat4[11]=l*T+h*I+g*A,this},a.default.Matrix.prototype.translate=function(e){var t=e[0],n=e[1],r=e[2]||0;this.mat4[12]+=this.mat4[0]*t+this.mat4[4]*n+this.mat4[8]*r,this.mat4[13]+=this.mat4[1]*t+this.mat4[5]*n+this.mat4[9]*r,this.mat4[14]+=this.mat4[2]*t+this.mat4[6]*n+this.mat4[10]*r,this.mat4[15]+=this.mat4[3]*t+this.mat4[7]*n+this.mat4[11]*r},a.default.Matrix.prototype.rotateX=function(e){this.rotate(e,1,0,0)},a.default.Matrix.prototype.rotateY=function(e){this.rotate(e,0,1,0)},a.default.Matrix.prototype.rotateZ=function(e){this.rotate(e,0,0,1)},a.default.Matrix.prototype.perspective=function(e,t,n,r){var a=1/Math.tan(e/2),i=1/(n-r);return this.mat4[0]=a/t,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=a,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(r+n)*i,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*r*n*i,this.mat4[15]=0,this},a.default.Matrix.prototype.ortho=function(e,t,n,r,a,i){var o=1/(e-t),s=1/(n-r),u=1/(a-i);return this.mat4[0]=-2*o,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*s,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*u,this.mat4[11]=0,this.mat4[12]=(e+t)*o,this.mat4[13]=(r+n)*s,this.mat4[14]=(i+a)*u,this.mat4[15]=1,this};var s=a.default.Matrix;n.default=s},{"../core/main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.float32-array":200,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220}],311:[function(e,t,n){"use strict";e("core-js/modules/es.array.map"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.RenderBuffer=function(e,t,n,r,a,i){this.size=e,this.src=t,this.dst=n,this.attr=r,this._renderer=a,this.map=i},a.default.RenderBuffer.prototype._prepareBuffer=function(e,t){var n,r=t.attributes,a=this._renderer.GL;n=e.model?e.model:e;var i=r[this.attr];if(i){var o=e[this.dst],s=n[this.src];if(0<s.length){var u=!o;if(u&&(e[this.dst]=o=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,o),u||!1!==n.dirtyFlags[this.src]){var l=this.map,c=l?l(s):s;this._renderer._bindBuffer(o,a.ARRAY_BUFFER,c),n.dirtyFlags[this.src]=!1}t.enableAttrib(i,this.size)}}};var i=a.default.RenderBuffer;n.default=i},{"../core/main":260,"core-js/modules/es.array.map":159}],312:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));e("./p5.RenderBuffer"),i.default.RendererGL.prototype.beginShape=function(e){return this.immediateMode.shapeMode=void 0!==e?e:o.TRIANGLE_FAN,this.immediateMode.geometry.reset(),this},i.default.RendererGL.prototype.vertex=function(e,t){var n,r,a;n=r=a=0,3===arguments.length?n=arguments[2]:4===arguments.length?(r=arguments[2],a=arguments[3]):5===arguments.length&&(n=arguments[2],r=arguments[3],a=arguments[4]);var s=new i.default.Vector(e,t,n);this.immediateMode.geometry.vertices.push(s);var u=this.curFillColor||[.5,.5,.5,1];return this.immediateMode.geometry.vertexColors.push(u[0],u[1],u[2],u[3]),this.textureMode===o.IMAGE&&(null!==this._tex?0<this._tex.width&&0<this._tex.height&&(r/=this._tex.width,a/=this._tex.height):null===this._tex&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(r,a),this.immediateMode._bezierVertex[0]=e,this.immediateMode._bezierVertex[1]=t,this.immediateMode._bezierVertex[2]=n,this.immediateMode._quadraticVertex[0]=e,this.immediateMode._quadraticVertex[1]=t,this.immediateMode._quadraticVertex[2]=n,this},i.default.RendererGL.prototype.endShape=function(e,t,n,r,a,i){return this.immediateMode.shapeMode===o.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this._processVertices.apply(this,arguments),this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},i.default.RendererGL.prototype._processVertices=function(e){if(0!==this.immediateMode.geometry.vertices.length){var t=this._doStroke&&this.drawMode!==o.TEXTURE,n=e===o.CLOSE;t&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,n),this.immediateMode.geometry._edgesToVertices());var r=this.immediateMode.shapeMode===o.TESS;(this.isBezier||this.isQuadratic||this.isCurve||r)&&this.immediateMode.shapeMode!==o.LINES&&this._tesselateShape()}},i.default.RendererGL.prototype._calculateEdges=function(e,t,n){var r=[],a=0;switch(e){case o.TRIANGLE_STRIP:for(a=0;a<t.length-2;a++)r.push([a,a+1]),r.push([a,a+2]);r.push([a,a+1]);break;case o.TRIANGLES:for(a=0;a<t.length-2;a+=3)r.push([a,a+1]),r.push([a+1,a+2]),r.push([a+2,a]);break;case o.LINES:for(a=0;a<t.length-1;a+=2)r.push([a,a+1]);break;default:for(a=0;a<t.length-1;a++)r.push([a,a+1])}return n&&r.push([t.length-1,0]),r},i.default.RendererGL.prototype._tesselateShape=function(){this.immediateMode.shapeMode=o.TRIANGLES;var e=[new Float32Array(this._vToNArray(this.immediateMode.geometry.vertices))],t=this._triangulate(e);this.immediateMode.geometry.vertices=[];for(var n=0,r=t.length;n<r;n+=3)this.vertex(t[n],t[n+1],t[n+2])},i.default.RendererGL.prototype._drawImmediateFill=function(){var e=this.GL,t=this._getImmediateFillShader();this._calculateNormals(this.immediateMode.geometry),this._setFillUniforms(t);var n=!0,r=!1,a=void 0;try{for(var i,s=this.immediateMode.buffers.fill[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)i.value._prepareBuffer(this.immediateMode.geometry,t)}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}this.immediateMode.shapeMode!==o.LINE_STRIP&&this.immediateMode.shapeMode!==o.LINES||(this.immediateMode.shapeMode=o.TRIANGLE_FAN),this._applyColorBlend(this.curFillColor),e.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),t.unbindShader()},i.default.RendererGL.prototype._drawImmediateStroke=function(){var e=this.GL,t=this._getImmediateStrokeShader();this._setStrokeUniforms(t);var n=!0,r=!1,a=void 0;try{for(var i,o=this.immediateMode.buffers.stroke[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)i.value._prepareBuffer(this.immediateMode.geometry,t)}catch(e){r=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}this._applyColorBlend(this.curStrokeColor),e.drawArrays(e.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),t.unbindShader()},i.default.RendererGL.prototype._calculateNormals=function(e){e.vertices.forEach((function(){e.vertexNormals.push(new i.default.Vector(0,0,1))}))};var s=i.default.RendererGL;n.default=s},{"../core/constants":250,"../core/main":260,"./p5.RenderBuffer":311,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.for-each":152,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.float32-array":200,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/web.dom-collections.for-each":225,"core-js/modules/web.dom-collections.iterator":226}],313:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};e("./p5.RendererGL"),e("./p5.RenderBuffer");var i=0;a.default.RendererGL.prototype._initBufferDefaults=function(e){if(this._freeBuffers(e),1e3<++i){var t=Object.keys(this.retainedMode.geometry)[0];delete this.retainedMode.geometry[t],i--}return this.retainedMode.geometry[e]={}},a.default.RendererGL.prototype._freeBuffers=function(e){var t=this.retainedMode.geometry[e];if(t){delete this.retainedMode.geometry[e],i--;var n=this.GL;t.indexBuffer&&n.deleteBuffer(t.indexBuffer),r(this.retainedMode.buffers.stroke),r(this.retainedMode.buffers.fill)}function r(e){var r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;t[u.dst]&&(n.deleteBuffer(t[u.dst]),t[u.dst]=null)}}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}},a.default.RendererGL.prototype.createBuffers=function(e,t){var n=this.GL,r=this._initBufferDefaults(e);r.model=t;var i=r.indexBuffer;if(t.faces.length){i=i||(r.indexBuffer=n.createBuffer());var o=a.default.RendererGL.prototype._flatten(t.faces);this._bindBuffer(i,n.ELEMENT_ARRAY_BUFFER,o,Uint16Array),r.vertexCount=3*t.faces.length}else i&&(n.deleteBuffer(i),r.indexBuffer=null),r.vertexCount=t.vertices?t.vertices.length:0;return r.lineVertexCount=t.lineVertices?t.lineVertices.length:0,r},a.default.RendererGL.prototype.drawBuffers=function(e){var t=this.GL,n=this.retainedMode.geometry[e];if(this._doStroke&&0<n.lineVertexCount){var r=this._getRetainedStrokeShader();this._setStrokeUniforms(r);var a=!0,i=!1,o=void 0;try{for(var s,u=this.retainedMode.buffers.stroke[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)s.value._prepareBuffer(n,r)}catch(e){i=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw o}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(t.TRIANGLES,e),r.unbindShader()}if(this._doFill){var l=this._getRetainedFillShader();this._setFillUniforms(l);var c=!0,f=!1,d=void 0;try{for(var h,p=this.retainedMode.buffers.fill[Symbol.iterator]();!(c=(h=p.next()).done);c=!0)h.value._prepareBuffer(n,l)}catch(e){f=!0,d=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}n.indexBuffer&&this._bindBuffer(n.indexBuffer,t.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(t.TRIANGLES,e),l.unbindShader()}return this},a.default.RendererGL.prototype.drawBuffersScaled=function(e,t,n,r){var a=this.uMVMatrix.copy();try{this.uMVMatrix.scale(t,n,r),this.drawBuffers(e)}finally{this.uMVMatrix=a}},a.default.RendererGL.prototype._drawArrays=function(e,t){return this.GL.drawArrays(e,0,this.retainedMode.geometry[t].lineVertexCount),this},a.default.RendererGL.prototype._drawElements=function(e,t){var n=this.retainedMode.geometry[t],r=this.GL;n.indexBuffer?r.drawElements(r.TRIANGLES,n.vertexCount,r.UNSIGNED_SHORT,0):r.drawArrays(e||r.TRIANGLES,0,n.vertexCount)},a.default.RendererGL.prototype._drawPoints=function(e,t){var n=this.GL,r=this._getImmediatePointShader();this._setPointUniforms(r),this._bindBuffer(t,n.ARRAY_BUFFER,this._vToNArray(e),Float32Array,n.STATIC_DRAW),r.enableAttrib(r.attributes.aPosition,3),n.drawArrays(n.Points,0,e.length),r.unbindShader()};var o=a.default.RendererGL;n.default=o},{"../core/main":260,"./p5.RenderBuffer":311,"./p5.RendererGL":314,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.keys":173,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.float32-array":200,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint16-array":221,"core-js/modules/web.dom-collections.iterator":226}],314:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.float64-array"),e("core-js/modules/es.typed-array.int16-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=s(e("../core/main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants")),o=s(e("libtess"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e("./p5.Shader"),e("./p5.Camera"),e("../core/p5.Renderer"),e("./p5.Matrix"),e("path");var l="precision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\n\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];\t\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  if (uSpecular)\n    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);\n  lr.diffuse = _lambertDiffuse(lightDir, normal);\n  return lr;\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n",c={immediateVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nvarying vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vColor;\n}",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));\n  vVertTexCoord = aTexCoord;\n}\n",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nuniform vec4 uMaterialColor;\nvoid main(void) {\n  gl_FragColor = uMaterialColor;\n}",lightVert:l+"// include lighting.glgl\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n}\n",lightTextureFrag:"precision highp float;\n\nuniform vec4 uMaterialColor;\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    gl_FragColor = uMaterialColor;\n  }\n  else {\n    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;\n    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;\n  }\n}",phongVert:"precision highp float;\nprecision highp int;\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform vec3 uAmbientColor[5];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = uNormalMatrix * aNormal;\n  vTexCoord = aTexCoord;\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n}\n",phongFrag:l+"// include lighting.glsl\nprecision highp float;\nprecision highp int;\n\nuniform vec4 uMaterialColor;\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\n\nvoid main(void) {\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);\n\n  if(uEmissive && !isTexture) {\n    gl_FragColor = uMaterialColor;\n  }\n  else {\n    gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;\n    gl_FragColor.rgb = gl_FragColor.rgb * (diffuse + vAmbientColor) + specular;\n  }\n}",fontVert:"precision mediump float;\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nvarying vec2 vTexCoord;\nvarying float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord;\n  w = gl_Position.w;\n}\n",fontFrag:"#extension GL_OES_standard_derivatives : enable\nprecision mediump float;\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nvarying vec2 vTexCoord;\n\n// some helper functions\nint round(float v) { return ifloor(v + 0.5); }\nivec2 round(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = round(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  gl_FragColor = uMaterialColor;\n  gl_FragColor.a *= saturate(max(antialias, cover));\n}",lineVert:"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\n\nattribute vec4 aPosition;\nattribute vec4 aDirection;\n  \nvoid main() {\n  // using a scale <1 moves the lines towards the camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  vec3 scale = vec3(0.9995);\n\n  vec4 posp = uModelViewMatrix * aPosition;\n  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  posp.xyz = posp.xyz * scale;\n  posq.xyz = posq.xyz * scale;\n\n  vec4 p = uProjectionMatrix * posp;\n  vec4 q = uProjectionMatrix * posq;\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);\n\n  // flip tangent to normal (it's already normalized)\n  vec2 normal = vec2(-tangent.y, tangent.x);\n\n  float thickness = aDirection.w * uStrokeWeight;\n  vec2 offset = normal * thickness / 2.0;\n\n  vec2 curPerspScale;\n\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n    // invert Y, projections in Processing invert Y\n    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  gl_Position.xy = p.xy + offset.xy * curPerspScale;\n  gl_Position.zw = p.zw;\n}\n",lineFrag:"precision mediump float;\nprecision mediump int;\n\nuniform vec4 uMaterialColor;\n\nvoid main() {\n  gl_FragColor = uMaterialColor;\n}",pointVert:"attribute vec3 aPosition;\nuniform float uPointSize;\nvarying float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvoid main() {\n\tvec4 positionVec4 =  vec4(aPosition, 1.0);\n\tgl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\tgl_PointSize = uPointSize;\n\tvStrokeWeight = uPointSize;\n}",pointFrag:"precision mediump float;\nprecision mediump int;\nuniform vec4 uMaterialColor;\nvarying float vStrokeWeight;\n\nvoid main(){\n\tfloat mask = 0.0;\n\n\t// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n\tmask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n\t// if strokeWeight is 1 or less lets just draw a square\n\t// this prevents weird artifacting from carving circles when our points are really small\n\t// if strokeWeight is larger than 1, we just use it as is\n\n\tmask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n\t// throw away the borders of the mask\n    // otherwise we get weird alpha blending issues\n\n\tif(mask > 0.98){\n      discard;\n  \t}\n\n  \tgl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;\n}"};a.default.RendererGL=function(e,t,n,r){return a.default.Renderer.call(this,e,t,n),this._setAttributeDefaults(t),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=i.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=i.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new a.default.Matrix,this.uPMatrix=new a.default.Matrix,this.uNMatrix=new a.default.Matrix("mat3"),this._curCamera=new a.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new a.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new a.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],fill:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new a.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new a.default.RenderBuffer(4,"vertexColors","colorBuffer","aMaterialColor",this),new a.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new a.default.Geometry,shapeMode:i.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new a.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new a.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new a.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new a.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new a.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=i.IMAGE,this.textureWrapX=i.CLAMP,this.textureWrapY=i.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},a.default.RendererGL.prototype=Object.create(a.default.Renderer.prototype),a.default.RendererGL.prototype._setAttributeDefaults=function(e){var t={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!0};null===e._glAttributes?e._glAttributes=t:e._glAttributes=Object.assign(t,e._glAttributes)},a.default.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),null===this.drawingContext)throw new Error("Error creating webgl context");var e=this.drawingContext;e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}catch(e){throw e}},a.default.RendererGL.prototype._resetContext=function(e,t){var n=this.width,r=this.height,i=this.canvas.id,o=this._pInst instanceof a.default.Graphics;if(o){var s=this._pInst;s.canvas.parentNode.removeChild(s.canvas),s.canvas=document.createElement("canvas"),(s._pInst._userNode||document.body).appendChild(s.canvas),a.default.Element.call(s,s.canvas,s._pInst),s.width=n,s.height=r}else{var u=this.canvas;u&&u.parentNode.removeChild(u),(u=document.createElement("canvas")).id=i,this._pInst._userNode?this._pInst._userNode.appendChild(u):document.body.appendChild(u),this._pInst.canvas=u}var l=new a.default.RendererGL(this._pInst.canvas,this._pInst,!o);this._pInst._setProperty("_renderer",l),l.resize(n,r),l._applyDefaults(),o||this._pInst._elements.push(l),"function"==typeof t&&setTimeout((function(){t.apply(window._renderer,e)}),0)},a.default.prototype.setAttributes=function(e,t){if(void 0!==this._glAttributes){var n=!0;if(void 0!==t?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[e]!==t&&(this._glAttributes[e]=t,n=!1)):e instanceof Object&&this._glAttributes!==e&&(this._glAttributes=e,n=!1),this._renderer.isP3D&&!n){if(!this._setupDone)for(var r in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(r))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()");this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}else console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.")},a.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},a.default.RendererGL.prototype.background=function(){var e,t=(e=this._pInst).color.apply(e,arguments),n=t.levels[0]/255,r=t.levels[1]/255,a=t.levels[2]/255,i=t.levels[3]/255;this.GL.clearColor(n,r,a,i),this.GL.clear(this.GL.COLOR_BUFFER_BIT)},a.default.RendererGL.prototype.fill=function(e,t,n,r){var o=a.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=o._array,this.drawMode=i.FILL,this._useNormalMaterial=!1,this._tex=null},a.default.RendererGL.prototype.stroke=function(e,t,n,r){arguments[3]=255;var i=a.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=i._array},a.default.RendererGL.prototype.strokeCap=function(e){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},a.default.RendererGL.prototype.strokeJoin=function(e){console.error("Sorry, strokeJoin() is not yet implemented in WEBGL mode")},a.default.RendererGL.prototype.filter=function(e){console.error("filter() does not work in WEBGL mode")},a.default.RendererGL.prototype.blendMode=function(e){e===i.DARKEST||e===i.LIGHTEST||e===i.ADD||e===i.BLEND||e===i.SUBTRACT||e===i.SCREEN||e===i.EXCLUSION||e===i.REPLACE||e===i.MULTIPLY||e===i.REMOVE?this.curBlendMode=e:e!==i.BURN&&e!==i.OVERLAY&&e!==i.HARD_LIGHT&&e!==i.SOFT_LIGHT&&e!==i.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},a.default.RendererGL.prototype.erase=function(e,t){this._isErasing||(this._applyBlendMode(i.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,e/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,t/255])},a.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},a.default.RendererGL.prototype.strokeWeight=function(e){this.curStrokeWeight!==e&&(this.pointSize=e,this.curStrokeWeight=e)},a.default.RendererGL.prototype._getPixel=function(e,t){var n;return n=new Uint8Array(4),this.drawingContext.readPixels(e,t,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,n),[n[0],n[1],n[2],n[3]]},a.default.RendererGL.prototype.loadPixels=function(){var e=this._pixelsState;if(!0===this._pInst._glAttributes.preserveDrawingBuffer){var t=e.pixels,n=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4;t instanceof Uint8Array&&t.length===n||(t=new Uint8Array(n),this._pixelsState._setProperty("pixels",t));var r=this._pInst._pixelDensity;this.GL.readPixels(0,0,this.width*r,this.height*r,this.GL.RGBA,this.GL.UNSIGNED_BYTE,t)}else console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true.")},a.default.RendererGL.prototype.geometryInHash=function(e){return void 0!==this.retainedMode.geometry[e]},a.default.RendererGL.prototype.resize=function(e,t){a.default.Renderer.prototype.resize.call(this,e,t),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var n=this._pixelsState;void 0!==n.pixels&&n._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},a.default.RendererGL.prototype.clear=function(){var e=(arguments.length<=0?void 0:arguments[0])||0,t=(arguments.length<=1?void 0:arguments[1])||0,n=(arguments.length<=2?void 0:arguments[2])||0,r=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(e,t,n,r),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},a.default.RendererGL.prototype.applyMatrix=function(e,t,n,r,i,o){16===arguments.length?a.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([e,t,0,0,n,r,0,0,0,0,1,0,i,o,0,1])},a.default.RendererGL.prototype.translate=function(e,t,n){return e instanceof a.default.Vector&&(n=e.z,t=e.y,e=e.x),this.uMVMatrix.translate([e,t,n]),this},a.default.RendererGL.prototype.scale=function(e,t,n){return this.uMVMatrix.scale(e,t,n),this},a.default.RendererGL.prototype.rotate=function(e,t){return void 0===t?this.rotateZ(e):(a.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},a.default.RendererGL.prototype.rotateX=function(e){return this.rotate(e,1,0,0),this},a.default.RendererGL.prototype.rotateY=function(e){return this.rotate(e,0,1,0),this},a.default.RendererGL.prototype.rotateZ=function(e){return this.rotate(e,0,0,1),this},a.default.RendererGL.prototype.push=function(){var e=a.default.Renderer.prototype.push.apply(this),t=e.properties;return t.uMVMatrix=this.uMVMatrix.copy(),t.uPMatrix=this.uPMatrix.copy(),t._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),t.ambientLightColors=this.ambientLightColors.slice(),t.specularColors=this.specularColors.slice(),t.directionalLightDirections=this.directionalLightDirections.slice(),t.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),t.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),t.pointLightPositions=this.pointLightPositions.slice(),t.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),t.pointLightSpecularColors=this.pointLightSpecularColors.slice(),t.spotLightPositions=this.spotLightPositions.slice(),t.spotLightDirections=this.spotLightDirections.slice(),t.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),t.spotLightSpecularColors=this.spotLightSpecularColors.slice(),t.spotLightAngle=this.spotLightAngle.slice(),t.spotLightConc=this.spotLightConc.slice(),t.userFillShader=this.userFillShader,t.userStrokeShader=this.userStrokeShader,t.userPointShader=this.userPointShader,t.pointSize=this.pointSize,t.curStrokeWeight=this.curStrokeWeight,t.curStrokeColor=this.curStrokeColor,t.curFillColor=this.curFillColor,t._useSpecularMaterial=this._useSpecularMaterial,t._useEmissiveMaterial=this._useEmissiveMaterial,t._useShininess=this._useShininess,t.constantAttenuation=this.constantAttenuation,t.linearAttenuation=this.linearAttenuation,t.quadraticAttenuation=this.quadraticAttenuation,t._enableLighting=this._enableLighting,t._useNormalMaterial=this._useNormalMaterial,t._tex=this._tex,t.drawMode=this.drawMode,e},a.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=a.default.Matrix.identity(this._pInst),this},a.default.RendererGL.prototype._getImmediateStrokeShader=function(){var e=this.userStrokeShader;return e&&e.isStrokeShader()?e:this._getLineShader()},a.default.RendererGL.prototype._getRetainedStrokeShader=a.default.RendererGL.prototype._getImmediateStrokeShader,a.default.RendererGL.prototype._getImmediateFillShader=function(){var e=this.userFillShader;if(this._useNormalMaterial&&(!e||!e.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getImmediateModeShader();return e},a.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var e=this.userFillShader;if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getColorShader();return e},a.default.RendererGL.prototype._getImmediatePointShader=function(){var e=this.userPointShader;return e&&e.isPointShader()?e:this._getPointShader()},a.default.RendererGL.prototype._getRetainedLineShader=a.default.RendererGL.prototype._getImmediateLineShader,a.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new a.default.Shader(this,c.phongVert,c.phongFrag):this._defaultLightShader=new a.default.Shader(this,c.lightVert,c.lightTextureFrag)),this._defaultLightShader},a.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new a.default.Shader(this,c.immediateVert,c.vertexColorFrag)),this._defaultImmediateModeShader},a.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new a.default.Shader(this,c.normalVert,c.normalFrag)),this._defaultNormalShader},a.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new a.default.Shader(this,c.normalVert,c.basicFrag)),this._defaultColorShader},a.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new a.default.Shader(this,c.pointVert,c.pointFrag)),this._defaultPointShader},a.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new a.default.Shader(this,c.lineVert,c.lineFrag)),this._defaultLineShader},a.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new a.default.Shader(this,c.fontVert,c.fontFrag)),this._defaultFontShader},a.default.RendererGL.prototype._getEmptyTexture=function(){if(!this._emptyTexture){var e=new a.default.Image(1,1);e.set(0,0,255),this._emptyTexture=new a.default.Texture(this,e)}return this._emptyTexture},a.default.RendererGL.prototype.getTexture=function(e){var t=this.textures,n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;if(u.src===e)return u}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}var l=new a.default.Texture(this,e);return t.push(l),l},a.default.RendererGL.prototype._setStrokeUniforms=function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uStrokeWeight",this.curStrokeWeight)},a.default.RendererGL.prototype._setFillUniforms=function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curFillColor),e.setUniform("isTexture",!!this._tex),this._tex&&e.setUniform("uSampler",this._tex),e.setUniform("uTint",this._tint),e.setUniform("uSpecular",this._useSpecularMaterial),e.setUniform("uEmissive",this._useEmissiveMaterial),e.setUniform("uShininess",this._useShininess),e.setUniform("uUseLighting",this._enableLighting);var t=this.pointLightDiffuseColors.length/3;e.setUniform("uPointLightCount",t),e.setUniform("uPointLightLocation",this.pointLightPositions),e.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),e.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors);var n=this.directionalLightDiffuseColors.length/3;e.setUniform("uDirectionalLightCount",n),e.setUniform("uLightingDirection",this.directionalLightDirections),e.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),e.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors);var r=this.ambientLightColors.length/3;e.setUniform("uAmbientLightCount",r),e.setUniform("uAmbientColor",this.ambientLightColors);var a=this.spotLightDiffuseColors.length/3;e.setUniform("uSpotLightCount",a),e.setUniform("uSpotLightAngle",this.spotLightAngle),e.setUniform("uSpotLightConc",this.spotLightConc),e.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),e.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),e.setUniform("uSpotLightLocation",this.spotLightPositions),e.setUniform("uSpotLightDirection",this.spotLightDirections),e.setUniform("uConstantAttenuation",this.constantAttenuation),e.setUniform("uLinearAttenuation",this.linearAttenuation),e.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),e.bindTextures()},a.default.RendererGL.prototype._setPointUniforms=function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},a.default.RendererGL.prototype._bindBuffer=function(e,t,n,r,a){if(t=t||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(t,e),void 0!==n){var i=new(r||Float32Array)(n);this.GL.bufferData(t,i,a||this.GL.STATIC_DRAW)}},a.default.RendererGL.prototype._arraysEqual=function(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0},a.default.RendererGL.prototype._isTypedArray=function(e){return Float32Array,Float64Array,Int16Array,Uint16Array,e instanceof Uint32Array},a.default.RendererGL.prototype._flatten=function(e){if(0===e.length)return[];if(2e4<e.length){var t,n=Object.prototype.toString,r=[],a=e.slice();for(t=a.pop();"[object Array]"===n.call(t)?a.push.apply(a,u(t)):r.push(t),a.length&&void 0!==(t=a.pop()););return r.reverse(),r}var i;return(i=[]).concat.apply(i,u(e))},a.default.RendererGL.prototype._vToNArray=function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;t.push(s.x,s.y,s.z)}}catch(e){r=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return t},a.default.prototype._assert3d=function(e){if(!this._renderer.isP3D)throw new Error("".concat(e,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},a.default.RendererGL.prototype._initTessy=function(){var e=new o.default.GluTesselator;return e.gluTessCallback(o.default.gluEnum.GLU_TESS_VERTEX_DATA,(function(e,t){t[t.length]=e[0],t[t.length]=e[1],t[t.length]=e[2]})),e.gluTessCallback(o.default.gluEnum.GLU_TESS_BEGIN,(function(e){e!==o.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(e))})),e.gluTessCallback(o.default.gluEnum.GLU_TESS_ERROR,(function(e){console.log("error callback"),console.log("error number: ".concat(e))})),e.gluTessCallback(o.default.gluEnum.GLU_TESS_COMBINE,(function(e,t,n){return[e[0],e[1],e[2]]})),e.gluTessCallback(o.default.gluEnum.GLU_TESS_EDGE_FLAG,(function(e){})),e},a.default.RendererGL.prototype._triangulate=function(e){this._tessy.gluTessNormal(0,0,1);var t=[];this._tessy.gluTessBeginPolygon(t);for(var n=0;n<e.length;n++){this._tessy.gluTessBeginContour();for(var r=e[n],a=0;a<r.length;a+=3){var i=[r[a],r[a+1],r[a+2]];this._tessy.gluTessVertex(i,i)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),t},a.default.RendererGL.prototype._bezierCoefficients=function(e){var t=e*e,n=1-e,r=n*n;return[r*n,3*r*e,3*n*t,t*e]},a.default.RendererGL.prototype._quadraticCoefficients=function(e){var t=1-e;return[t*t,2*t*e,e*e]},a.default.RendererGL.prototype._bezierToCatmull=function(e){return[e[1],e[1]+(e[2]-e[0])/this._curveTightness,e[2]-(e[3]-e[1])/this._curveTightness,e[2]]};var f=a.default.RendererGL;n.default=f},{"../core/constants":250,"../core/main":260,"../core/p5.Renderer":263,"./p5.Camera":308,"./p5.Matrix":310,"./p5.Shader":315,"core-js/modules/es.array.concat":148,"core-js/modules/es.array.fill":150,"core-js/modules/es.array.filter":151,"core-js/modules/es.array.from":153,"core-js/modules/es.array.includes":154,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.slice":160,"core-js/modules/es.object.assign":170,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.to-string":179,"core-js/modules/es.string.includes":182,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.float32-array":200,"core-js/modules/es.typed-array.float64-array":201,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.int16-array":205,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint16-array":221,"core-js/modules/es.typed-array.uint32-array":222,"core-js/modules/es.typed-array.uint8-array":223,"core-js/modules/web.dom-collections.iterator":226,libtess:234,path:237}],315:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.Shader=function(e,t,n){this._renderer=e,this._vertSrc=t,this._fragSrc=n,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},a.default.Shader.prototype.init=function(){if(0===this._glProgram){var e=this._renderer.GL;if(this._vertShader=e.createShader(e.VERTEX_SHADER),e.shaderSource(this._vertShader,this._vertSrc),e.compileShader(this._vertShader),!e.getShaderParameter(this._vertShader,e.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(e.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(this._fragShader,this._fragSrc),e.compileShader(this._fragShader),!e.getShaderParameter(this._fragShader,e.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(e.getShaderInfoLog(this._fragShader))),null;this._glProgram=e.createProgram(),e.attachShader(this._glProgram,this._vertShader),e.attachShader(this._glProgram,this._fragShader),e.linkProgram(this._glProgram),e.getProgramParameter(this._glProgram,e.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(e.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},a.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_ATTRIBUTES),n=0;n<t;++n){var r=e.getActiveAttrib(this._glProgram,n),a=r.name,i=e.getAttribLocation(this._glProgram,a),o={};o.name=a,o.location=i,o.index=n,o.type=r.type,o.size=r.size,this.attributes[a]=o}this._loadedAttributes=!0}},a.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_UNIFORMS),n=0,r=0;r<t;++r){var a=e.getActiveUniform(this._glProgram,r),i={};i.location=e.getUniformLocation(this._glProgram,a.name),i.size=a.size;var o=a.name;1<a.size&&(o=o.substring(0,o.indexOf("[0]"))),i.name=o,i.type=a.type,i._cachedData=void 0,i.type===e.SAMPLER_2D&&(i.samplerIndex=n,n++,this.samplers.push(i)),i.isArray=i.type===e.FLOAT_MAT3||i.type===e.FLOAT_MAT4||i.type===e.FLOAT_VEC2||i.type===e.FLOAT_VEC3||i.type===e.FLOAT_VEC4||i.type===e.INT_VEC2||i.type===e.INT_VEC3||i.type===e.INT_VEC4,this.uniforms[o]=i}this._loadedUniforms=!0}},a.default.Shader.prototype.compile=function(){},a.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},a.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},a.default.Shader.prototype.bindTextures=function(){var e=this._renderer.GL,t=!0,n=!1,r=void 0;try{for(var a,i=this.samplers[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value,s=o.texture;void 0===s&&(s=this._renderer._getEmptyTexture()),e.activeTexture(e.TEXTURE0+o.samplerIndex),s.bindTexture(),s.update(),e.uniform1i(o.location,o.samplerIndex)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},a.default.Shader.prototype.updateTextures=function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.samplers[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var i=r.value.texture;i&&i.update()}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}},a.default.Shader.prototype.unbindTextures=function(){},a.default.Shader.prototype._setMatrixUniforms=function(){this.setUniform("uProjectionMatrix",this._renderer.uPMatrix.mat4),this.isStrokeShader()&&("default"===this._renderer._curCamera.cameraType?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uModelViewMatrix",this._renderer.uMVMatrix.mat4),this.setUniform("uViewMatrix",this._renderer._curCamera.cameraMatrix.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},a.default.Shader.prototype.useProgram=function(){var e=this._renderer.GL;return this._renderer._curShader!==this&&(e.useProgram(this._glProgram),this._renderer._curShader=this),this},a.default.Shader.prototype.setUniform=function(e,t){var n=this.uniforms[e];if(n){var r=this._renderer.GL;if(n.isArray){if(n._cachedData&&this._renderer._arraysEqual(n._cachedData,t))return;n._cachedData=t.slice(0)}else{if(n._cachedData&&n._cachedData===t)return;n._cachedData=t}var a=n.location;switch(this.useProgram(),n.type){case r.BOOL:!0===t?r.uniform1i(a,1):r.uniform1i(a,0);break;case r.INT:1<n.size?t.length&&r.uniform1iv(a,t):r.uniform1i(a,t);break;case r.FLOAT:1<n.size?t.length&&r.uniform1fv(a,t):r.uniform1f(a,t);break;case r.FLOAT_MAT3:r.uniformMatrix3fv(a,!1,t);break;case r.FLOAT_MAT4:r.uniformMatrix4fv(a,!1,t);break;case r.FLOAT_VEC2:1<n.size?t.length&&r.uniform2fv(a,t):r.uniform2f(a,t[0],t[1]);break;case r.FLOAT_VEC3:1<n.size?t.length&&r.uniform3fv(a,t):r.uniform3f(a,t[0],t[1],t[2]);break;case r.FLOAT_VEC4:1<n.size?t.length&&r.uniform4fv(a,t):r.uniform4f(a,t[0],t[1],t[2],t[3]);break;case r.INT_VEC2:1<n.size?t.length&&r.uniform2iv(a,t):r.uniform2i(a,t[0],t[1]);break;case r.INT_VEC3:1<n.size?t.length&&r.uniform3iv(a,t):r.uniform3i(a,t[0],t[1],t[2]);break;case r.INT_VEC4:1<n.size?t.length&&r.uniform4iv(a,t):r.uniform4i(a,t[0],t[1],t[2],t[3]);break;case r.SAMPLER_2D:r.activeTexture(r.TEXTURE0+n.samplerIndex),n.texture=this._renderer.getTexture(t),r.uniform1i(n.location,n.samplerIndex)}return this}},a.default.Shader.prototype.isLightShader=function(){return void 0!==this.attributes.aNormal||void 0!==this.uniforms.uUseLighting||void 0!==this.uniforms.uAmbientLightCount||void 0!==this.uniforms.uDirectionalLightCount||void 0!==this.uniforms.uPointLightCount||void 0!==this.uniforms.uAmbientColor||void 0!==this.uniforms.uDirectionalDiffuseColors||void 0!==this.uniforms.uDirectionalSpecularColors||void 0!==this.uniforms.uPointLightLocation||void 0!==this.uniforms.uPointLightDiffuseColors||void 0!==this.uniforms.uPointLightSpecularColors||void 0!==this.uniforms.uLightingDirection||void 0!==this.uniforms.uSpecular},a.default.Shader.prototype.isNormalShader=function(){return void 0!==this.attributes.aNormal},a.default.Shader.prototype.isTextureShader=function(){return 0<this.samplerIndex},a.default.Shader.prototype.isColorShader=function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor},a.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},a.default.Shader.prototype.isStrokeShader=function(){return void 0!==this.uniforms.uStrokeWeight},a.default.Shader.prototype.enableAttrib=function(e,t,n,r,a,i){if(e){var o=e.location;if(-1!==o){var s=this._renderer.GL;e.enabled||(s.enableVertexAttribArray(o),e.enabled=!0),this._renderer.GL.vertexAttribPointer(o,t,n||s.FLOAT,r||!1,a||0,i||0)}}return this};var i=a.default.Shader;n.default=i},{"../core/main":260,"core-js/modules/es.array.index-of":155,"core-js/modules/es.array.iterator":156,"core-js/modules/es.array.slice":160,"core-js/modules/es.function.name":163,"core-js/modules/es.object.to-string":174,"core-js/modules/es.string.iterator":183,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}],316:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));i.default.Texture=function(e,t){this._renderer=e;var n=this._renderer.GL;this.src=t,this.glTex=void 0,this.glTarget=n.TEXTURE_2D,this.glFormat=n.RGBA,this.mipmaps=!1,this.glMinFilter=n.LINEAR,this.glMagFilter=n.LINEAR,this.glWrapS=n.CLAMP_TO_EDGE,this.glWrapT=n.CLAMP_TO_EDGE,this.isSrcMediaElement=void 0!==i.default.MediaElement&&t instanceof i.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==i.default.Element&&t instanceof i.default.Element&&!(t instanceof i.default.Graphics),this.isSrcP5Image=t instanceof i.default.Image,this.isSrcP5Graphics=t instanceof i.default.Graphics,this.isImageData="undefined"!=typeof ImageData&&t instanceof ImageData;var r=this._getTextureDataFromSource();return this.width=r.width,this.height=r.height,this.init(r),this},i.default.Texture.prototype._getTextureDataFromSource=function(){var e;return this.isSrcP5Image?e=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcHTMLElement?e=this.src.elt:this.isImageData&&(e=this.src),e},i.default.Texture.prototype.init=function(e){var t=this._renderer.GL;if(this.glTex=t.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.glMagFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.glMinFilter),0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata){var n=new Uint8Array([1,1,1,1]);t.texImage2D(this.glTarget,0,t.RGBA,1,1,0,this.glFormat,t.UNSIGNED_BYTE,n)}else t.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,t.UNSIGNED_BYTE,e)},i.default.Texture.prototype.update=function(){var e=this.src;if(0===e.width||0===e.height)return!1;var t=this._getTextureDataFromSource(),n=!1,r=this._renderer.GL;return t.width!==this.width||t.height!==this.height?(n=!0,this.width=t.width,this.height=t.height,this.isSrcP5Image?e.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&e.setModified(!0)):this.isSrcP5Image?e.isModified()&&(n=!0,e.setModified(!1)):this.isSrcMediaElement?e.isModified()?(n=!0,e.setModified(!1)):e.loadedmetadata&&this._videoPrevUpdateTime!==e.time()&&(this._videoPrevUpdateTime=e.time(),n=!0):this.isImageData?e._dirty&&(n=!(e._dirty=!1)):n=!0,n&&(this.bindTexture(),r.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,r.UNSIGNED_BYTE,t)),n},i.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},i.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},i.default.Texture.prototype.setInterpolation=function(e,t){var n=this._renderer.GL;e===o.NEAREST?this.glMinFilter=n.NEAREST:this.glMinFilter=n.LINEAR,t===o.NEAREST?this.glMagFilter=n.NEAREST:this.glMagFilter=n.LINEAR,this.bindTexture(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.glMinFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},i.default.Texture.prototype.setWrapMode=function(e,t){function n(e){return 0==(e&e-1)}var r=this._renderer.GL,a=n(this.width),i=n(this.height);e===o.REPEAT?a&&i?this.glWrapS=r.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=r.CLAMP_TO_EDGE):e===o.MIRROR?a&&i?this.glWrapS=r.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=r.CLAMP_TO_EDGE):this.glWrapS=r.CLAMP_TO_EDGE,t===o.REPEAT?a&&i?this.glWrapT=r.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=r.CLAMP_TO_EDGE):t===o.MIRROR?a&&i?this.glWrapT=r.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=r.CLAMP_TO_EDGE):this.glWrapT=r.CLAMP_TO_EDGE,this.bindTexture(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this.glWrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var s=i.default.Texture;n.default=s},{"../core/constants":250,"../core/main":260,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.typed-array.copy-within":194,"core-js/modules/es.typed-array.every":195,"core-js/modules/es.typed-array.fill":196,"core-js/modules/es.typed-array.filter":197,"core-js/modules/es.typed-array.find":199,"core-js/modules/es.typed-array.find-index":198,"core-js/modules/es.typed-array.for-each":202,"core-js/modules/es.typed-array.includes":203,"core-js/modules/es.typed-array.index-of":204,"core-js/modules/es.typed-array.iterator":207,"core-js/modules/es.typed-array.join":208,"core-js/modules/es.typed-array.last-index-of":209,"core-js/modules/es.typed-array.map":210,"core-js/modules/es.typed-array.reduce":212,"core-js/modules/es.typed-array.reduce-right":211,"core-js/modules/es.typed-array.reverse":213,"core-js/modules/es.typed-array.set":214,"core-js/modules/es.typed-array.slice":215,"core-js/modules/es.typed-array.some":216,"core-js/modules/es.typed-array.sort":217,"core-js/modules/es.typed-array.subarray":218,"core-js/modules/es.typed-array.to-locale-string":219,"core-js/modules/es.typed-array.to-string":220,"core-js/modules/es.typed-array.uint8-array":223}],317:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.iterator");var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t="function"!=typeof WeakMap?null:new WeakMap;if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function s(e,t){this.width=e,this.height=t,this.infos=[],this.findImage=function(e){var t,n,r=this.width*this.height;if(r<e)throw new Error("font is too complex to render in 3D");for(var a=this.infos.length-1;0<=a;--a){var i=this.infos[a];if(i.index+e<r){n=(t=i).imageData;break}}if(!t){try{n=new ImageData(this.width,this.height)}catch(e){var o=document.getElementsByTagName("canvas")[0],s=!o;o||((o=document.createElement("canvas")).style.display="none",document.body.appendChild(o));var u=o.getContext("2d");u&&(n=u.createImageData(this.width,this.height)),s&&document.body.removeChild(o)}t={index:0,imageData:n},this.infos.push(t)}var l=t.index;return t.index+=e,n._dirty=!0,{imageData:n,index:l}}}function u(e,t,n,r,a){var i=e.imageData.data,o=4*e.index++;i[o++]=t,i[o++]=n,i[o++]=r,i[o++]=a}function l(e){this.font=e,this.strokeImageInfos=new s(64,64),this.colDimImageInfos=new s(64,64),this.rowDimImageInfos=new s(64,64),this.colCellImageInfos=new s(64,64),this.rowCellImageInfos=new s(64,64),this.glyphInfos={},this.getGlyphInfo=function(e){var t=this.glyphInfos[e.index];if(t)return t;var n,r=e.getBoundingBox(),a=r.x1,o=r.y1,s=r.x2-a,l=r.y2-o,f=e.path.commands;if(0==s||0==l||!f.length)return this.glyphInfos[e.index]={};var d,h,p,v,m=[],g=[],y=[];for(n=8;0<=n;--n)y.push([]);for(n=8;0<=n;--n)g.push([]);function b(e,t,n){var r=m.length;function a(e,t,n){for(var r=e.length;0<r--;){var a=e[r];a<t&&(t=a),n<a&&(n=a)}return{min:t,max:n}}m.push(n);for(var i=a(e,1,0),o=Math.max(Math.floor(9*i.min),0),s=Math.min(Math.ceil(9*i.max),9),u=o;u<s;++u)y[u].push(r);for(var l=a(t,1,0),c=Math.max(Math.floor(9*l.min),0),f=Math.min(Math.ceil(9*l.max),9),d=c;d<f;++d)g[d].push(r)}function x(e){return(t=255*e)<0?0:255<t?255:t;var t}function w(e,t,n,r){this.p0=e,this.c0=t,this.c1=n,this.p1=r,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return i.default.Vector.sub(i.default.Vector.sub(this.p1,this.p0),i.default.Vector.mult(i.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(e){var t=i.default.Vector.lerp(this.p0,this.c0,e),n=i.default.Vector.lerp(this.c0,this.c1,e),r=i.default.Vector.lerp(t,n,e);this.c1=i.default.Vector.lerp(this.c1,this.p1,e),this.c0=i.default.Vector.lerp(n,this.c1,e);var a=i.default.Vector.lerp(r,this.c0,e),o=new w(this.p0,t,r,a);return this.p0=a,o},this.splitInflections=function(){var e=i.default.Vector.sub(this.c0,this.p0),t=i.default.Vector.sub(i.default.Vector.sub(this.c1,this.c0),e),n=i.default.Vector.sub(i.default.Vector.sub(i.default.Vector.sub(this.p1,this.c1),e),i.default.Vector.mult(t,2)),r=[],a=t.x*n.y-t.y*n.x;if(0!==a){var o=e.x*n.y-e.y*n.x,s=e.x*t.y-e.y*t.x,u=o*o-4*a*s;if(0<=u){a<0&&(a=-a,o=-o,s=-s);var l=Math.sqrt(u),c=(-o-l)/(2*a),f=(-o+l)/(2*a);0<c&&c<1&&(r.push(this.split(c)),f=1-(1-f)/(1-c)),0<f&&f<1&&r.push(this.split(f))}}return r.push(this),r}}function k(e,t,n,r,a,o,s,u){var l=new w(new i.default.Vector(e,t),new i.default.Vector(n,r),new i.default.Vector(a,o),new i.default.Vector(s,u)).splitInflections(),f=[],d=30/c,h=!0,p=!1,v=void 0;try{for(var m,g=l[Symbol.iterator]();!(h=(m=g.next()).done);h=!0){for(var y=m.value,b=[],x=void 0;!(.125<=(x=d/y.quadError()));){var k=Math.pow(x,1/3),S=y.split(k),_=y.split(1-k/(1-k));f.push(S),b.push(y),y=_}x<1&&f.push(y.split(.5)),f.push(y),Array.prototype.push.apply(f,b.reverse())}}catch(e){p=!0,v=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw v}}return f}function S(e,t,n,r){b([e,n],[t,r],{x:e,y:t,cx:(e+n)/2,cy:(t+r)/2})}function _(e,t,n,r){return Math.abs(n-e)<1e-5&&Math.abs(r-t)<1e-5}var C=!0,E=!1,T=void 0;try{for(var I,A=f[Symbol.iterator]();!(C=(I=A.next()).done);C=!0){var N=I.value,R=(N.x-a)/s,M=(N.y-o)/l;if(!_(d,h,R,M)){switch(N.type){case"M":p=R,v=M;break;case"L":S(d,h,R,M);break;case"Q":var O=(N.x1-a)/s,D=(N.y1-o)/l;b([d,R,O],[h,M,D],{x:d,y:h,cx:O,cy:D});break;case"Z":_(d,h,p,v)?m.push({x:d,y:h}):(S(d,h,p,v),m.push({x:p,y:v}));break;case"C":for(var L=k(d,h,(N.x1-a)/s,(N.y1-o)/l,(N.x2-a)/s,(N.y2-o)/l,R,M),j=0;j<L.length;j++){var P=L[j].toQuadratic();b([P.x,P.x1,P.cx],[P.y,P.y1,P.cy],P)}break;default:throw new Error("unknown command type: ".concat(N.type))}d=R,h=M}}}catch(e){E=!0,T=e}finally{try{C||null==A.return||A.return()}finally{if(E)throw T}}for(var F=m.length,B=this.strokeImageInfos.findImage(F),z=B.index,U=0;U<F;++U){var W=m[U];u(B,x(W.x),x(W.y),x(W.cx),x(W.cy))}function G(e,t,n){for(var r=e.length,a=t.findImage(r),i=a.index,o=0,s=0;s<r;++s)o+=e[s].length;for(var l=n.findImage(o),c=0;c<r;++c){var f=e[c],d=f.length,h=l.index;u(a,h>>7,127&h,d>>7,127&d);for(var p=0;p<d;++p){var v=f[p]+z;u(l,v>>7,127&v,0,0)}}return{cellImageInfo:l,dimOffset:i,dimImageInfo:a}}return(t=this.glyphInfos[e.index]={glyph:e,uGlyphRect:[r.x1,-r.y1,r.x2,-r.y2],strokeImageInfo:B,strokes:m,colInfo:G(y,this.colDimImageInfos,this.colCellImageInfos),rowInfo:G(g,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[t.colInfo.dimOffset,t.rowInfo.dimOffset],t}}e("./p5.Shader"),e("./p5.RendererGL.Retained"),i.default.RendererGL.prototype._applyTextProperties=function(){},i.default.RendererGL.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):0};var c=Math.sqrt(3);i.default.RendererGL.prototype._renderText=function(e,t,n,r,a){if(this._textFont&&"string"!=typeof this._textFont){if(!(a<=r)&&this._doFill){if(!this._isOpenType())return console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported"),e;e.push();var s=this._doStroke,u=this.drawMode;this._doStroke=!1,this.drawMode=o.TEXTURE;var c=this._textFont.font,f=this._textFont._fontInfo;f=f||(this._textFont._fontInfo=new l(c));var d=this._textFont._handleAlignment(this,t,n,r),h=this._textSize/c.unitsPerEm;this.translate(d.x,d.y,0),this.scale(h,h,1);var p=this.GL,v=!this._defaultFontShader,m=this._getFontShader();m.init(),m.bindShader(),v&&(m.setUniform("uGridImageSize",[64,64]),m.setUniform("uCellsImageSize",[64,64]),m.setUniform("uStrokeImageSize",[64,64]),m.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor);var g=this.retainedMode.geometry.glyph;if(!g){var y=this._textGeom=new i.default.Geometry(1,1,(function(){for(var e=0;e<=1;e++)for(var t=0;t<=1;t++)this.vertices.push(new i.default.Vector(t,e,0)),this.uvs.push(t,e)}));y.computeFaces().computeNormals(),g=this.createBuffers("glyph",y)}var b=!0,x=!1,w=void 0;try{for(var k,S=this.retainedMode.buffers.text[Symbol.iterator]();!(b=(k=S.next()).done);b=!0)k.value._prepareBuffer(g,m)}catch(e){x=!0,w=e}finally{try{b||null==S.return||S.return()}finally{if(x)throw w}}this._bindBuffer(g.indexBuffer,p.ELEMENT_ARRAY_BUFFER),m.setUniform("uMaterialColor",this.curFillColor);try{var _=0,C=null,E=c.stringToGlyphs(t),T=!0,I=!1,A=void 0;try{for(var N,R=E[Symbol.iterator]();!(T=(N=R.next()).done);T=!0){var M=N.value;C&&(_+=c.getKerningValue(C,M));var O=f.getGlyphInfo(M);if(O.uGlyphRect){var D=O.rowInfo,L=O.colInfo;m.setUniform("uSamplerStrokes",O.strokeImageInfo.imageData),m.setUniform("uSamplerRowStrokes",D.cellImageInfo.imageData),m.setUniform("uSamplerRows",D.dimImageInfo.imageData),m.setUniform("uSamplerColStrokes",L.cellImageInfo.imageData),m.setUniform("uSamplerCols",L.dimImageInfo.imageData),m.setUniform("uGridOffset",O.uGridOffset),m.setUniform("uGlyphRect",O.uGlyphRect),m.setUniform("uGlyphOffset",_),m.bindTextures(),p.drawElements(p.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)}_+=M.advanceWidth,C=M}}catch(e){I=!0,A=e}finally{try{T||null==R.return||R.return()}finally{if(I)throw A}}}finally{m.unbindShader(),this._doStroke=s,this.drawMode=u,e.pop()}return e}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":250,"../core/main":260,"./p5.RendererGL.Retained":313,"./p5.Shader":315,"core-js/modules/es.array.iterator":156,"core-js/modules/es.object.to-string":174,"core-js/modules/es.regexp.exec":178,"core-js/modules/es.string.iterator":183,"core-js/modules/es.string.split":188,"core-js/modules/es.string.sub":189,"core-js/modules/es.symbol":193,"core-js/modules/es.symbol.description":191,"core-js/modules/es.symbol.iterator":192,"core-js/modules/web.dom-collections.iterator":226}]},{},[245])(245)}).call(this,n(3))},function(e,t,n){"use strict";n.r(t),n.d(t,"p5Events",(function(){return h})),n.d(t,"default",(function(){return p}));var r=n(0),a=n.n(r),i=n(1),o=n.n(i);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}"undefined"!=typeof window&&(window.p5=o.a);var h=["draw","windowResized","preload","mouseClicked","doubleClicked","mouseMoved","mousePressed","mouseWheel","mouseDragged","mouseReleased","keyPressed","keyReleased","keyTyped","touchStarted","touchMoved","touchEnded","deviceMoved","deviceTurned","deviceShaken"],p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(s,e);var t,n,r,i=c(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).canvasParentRef=a.a.createRef(),t}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this;this.sketch=new o.a((function(t){t.setup=function(){e.props.setup(t,e.canvasParentRef.current)},h.forEach((function(n){e.props[n]&&(t[n]=function(){for(var r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];(r=e.props)[n].apply(r,[t].concat(i))})}))}))}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){this.sketch.remove()}},{key:"render",value:function(){return a.a.createElement("div",{ref:this.canvasParentRef,className:this.props.className||"react-p5","data-testid":"react-p5",style:this.props.style||{}})}}])&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(a.a.Component)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}]).default)},5472:function(e,t,n){"use strict";var r=n(4879);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(2791)),i=(r(n(2391)),function(e){e.index;var t=e.children;a.default.Children.count(t)});t.default=i},2630:function(e,t,n){"use strict";var r=n(4879);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.children,r=e.startIndex,o=e.startX,s=e.pageX,u=e.viewLength,l=e.resistance,c=a.default.Children.count(n)-1,f=r+(o-s)/u;l?f<0?f=Math.exp(f*i.default.RESISTANCE_COEF)-1:f>c&&(f=c+1-Math.exp((c-f)*i.default.RESISTANCE_COEF)):f<0?t=((f=0)-r)*u+s:f>c&&(t=((f=c)-r)*u+s);return{index:f,startX:t}};var a=r(n(2791)),i=r(n(5610))},5610:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3}},1014:function(e,t,n){"use strict";var r=n(4879);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(2791)),i=function(e,t){var n=!1,r=function(e){return e?e.key:"empty"};if(e.children.length&&t.children.length){var i=a.default.Children.map(e.children,r)[e.index];if(null!==i&&void 0!==i)i===a.default.Children.map(t.children,r)[t.index]&&(n=!0)}return n};t.default=i},3062:function(e,t,n){"use strict";var r=n(4879);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"checkIndexBounds",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"computeIndex",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"constant",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"getDisplaySameSlide",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return u.default}});var a=r(n(5472)),i=r(n(2630)),o=r(n(5610)),s=r(n(1014)),u=r(n(3451))},3451:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){var n=e%t;return n<0?n+t:n};t.default=n},5228:function(e,t,n){"use strict";var r=n(1964),a=n(745);Object.defineProperty(t,"__esModule",{value:!0}),t.getDomTreeShapes=w,t.findNativeHandler=S,t.default=t.SwipeableViewsContext=void 0;var i=a(n(4788)),o=a(n(779)),s=a(n(1931)),u=a(n(4658)),l=a(n(1036)),c=a(n(2083)),f=a(n(531)),d=r(n(2791)),h=(a(n(2007)),a(n(2391)),n(3062));function p(e,t,n,r){return e.addEventListener(t,n,r),{remove:function(){e.removeEventListener(t,n,r)}}}var v={direction:"ltr",display:"flex",willChange:"transform"},m={width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"},g={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(e){return"translate(".concat(-e,"%, 0)")},"x-reverse":function(e){return"translate(".concat(e,"%, 0)")},y:function(e){return"translate(0, ".concat(-e,"%)")},"y-reverse":function(e){return"translate(0, ".concat(e,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function y(e,t){var n=t.duration,r=t.easeFunction,a=t.delay;return"".concat(e," ").concat(n," ").concat(r," ").concat(a)}function b(e,t){var n=g.rotationMatrix[t];return{pageX:n.x[0]*e.pageX+n.x[1]*e.pageY,pageY:n.y[0]*e.pageX+n.y[1]*e.pageY}}function x(e){return e.touches=[{pageX:e.pageX,pageY:e.pageY}],e}function w(e,t){for(var n=[];e&&e!==t&&e!==document.body&&!e.hasAttribute("data-swipeable");){var r=window.getComputedStyle(e);"absolute"===r.getPropertyValue("position")||"hidden"===r.getPropertyValue("overflow-x")?n=[]:(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&n.push({element:e,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),e=e.parentNode}return n}var k=null;function S(e){var t=e.domTreeShapes,n=e.pageX,r=e.startX,a=e.axis;return t.some((function(e){var t=n>=r;"x"!==a&&"y"!==a||(t=!t);var i=Math.round(e[g.scrollPosition[a]]),o=i>0,s=i+e[g.clientLength[a]]<e[g.scrollLength[a]];return!!(t&&s||!t&&o)&&(k=e.element,!0)}))}var _=d.createContext();t.SwipeableViewsContext=_;var C=function(e){function t(e){var n;return(0,s.default)(this,t),(n=(0,l.default)(this,(0,c.default)(t).call(this,e))).rootNode=null,n.containerNode=null,n.ignoreNextScrollEvents=!1,n.viewLength=0,n.startX=0,n.lastX=0,n.vx=0,n.startY=0,n.isSwiping=void 0,n.started=!1,n.startIndex=0,n.transitionListener=null,n.touchMoveListener=null,n.activeSlide=null,n.indexCurrent=null,n.firstRenderTimeout=null,n.setRootNode=function(e){n.rootNode=e},n.setContainerNode=function(e){n.containerNode=e},n.setActiveSlide=function(e){n.activeSlide=e,n.updateHeight()},n.handleSwipeStart=function(e){var t=n.props.axis,r=b(e.touches[0],t);n.viewLength=n.rootNode.getBoundingClientRect()[g.length[t]],n.startX=r.pageX,n.lastX=r.pageX,n.vx=0,n.startY=r.pageY,n.isSwiping=void 0,n.started=!0;var a=window.getComputedStyle(n.containerNode),i=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("transform");if(i&&"none"!==i){var o=i.split("(")[1].split(")")[0].split(","),s=window.getComputedStyle(n.rootNode),u=b({pageX:parseInt(o[4],10),pageY:parseInt(o[5],10)},t);n.startIndex=-u.pageX/(n.viewLength-parseInt(s.paddingLeft,10)-parseInt(s.paddingRight,10))||0}},n.handleSwipeMove=function(e){if(n.started){if(null===k||k===n.rootNode){var t=n.props,r=t.axis,a=t.children,i=t.ignoreNativeScroll,o=t.onSwitching,s=t.resistance,u=b(e.touches[0],r);if(void 0===n.isSwiping){var l=Math.abs(u.pageX-n.startX),c=Math.abs(u.pageY-n.startY),f=l>c&&l>h.constant.UNCERTAINTY_THRESHOLD;if(!s&&("y"===r||"y-reverse"===r)&&(0===n.indexCurrent&&n.startX<u.pageX||n.indexCurrent===d.Children.count(n.props.children)-1&&n.startX>u.pageX))return void(n.isSwiping=!1);if(l>c&&e.preventDefault(),!0===f||c>h.constant.UNCERTAINTY_THRESHOLD)return n.isSwiping=f,void(n.startX=u.pageX)}if(!0===n.isSwiping){e.preventDefault(),n.vx=.5*n.vx+.5*(u.pageX-n.lastX),n.lastX=u.pageX;var p=(0,h.computeIndex)({children:a,resistance:s,pageX:u.pageX,startIndex:n.startIndex,startX:n.startX,viewLength:n.viewLength}),v=p.index,m=p.startX;if(null===k&&!i)if(S({domTreeShapes:w(e.target,n.rootNode),startX:n.startX,pageX:u.pageX,axis:r}))return;m?n.startX=m:null===k&&(k=n.rootNode),n.setIndexCurrent(v);var g=function(){o&&o(v,"move")};!n.state.displaySameSlide&&n.state.isDragging||n.setState({displaySameSlide:!1,isDragging:!0},g),g()}}}else n.handleTouchStart(e)},n.handleSwipeEnd=function(){if(k=null,n.started&&(n.started=!1,!0===n.isSwiping)){var e,t=n.state.indexLatest,r=n.indexCurrent,a=t-r;e=Math.abs(n.vx)>n.props.threshold?n.vx>0?Math.floor(r):Math.ceil(r):Math.abs(a)>n.props.hysteresis?a>0?Math.floor(r):Math.ceil(r):t;var i=d.Children.count(n.props.children)-1;e<0?e=0:e>i&&(e=i),n.setIndexCurrent(e),n.setState({indexLatest:e,isDragging:!1},(function(){n.props.onSwitching&&n.props.onSwitching(e,"end"),n.props.onChangeIndex&&e!==t&&n.props.onChangeIndex(e,t,{reason:"swipe"}),r===t&&n.handleTransitionEnd()}))}},n.handleTouchStart=function(e){n.props.onTouchStart&&n.props.onTouchStart(e),n.handleSwipeStart(e)},n.handleTouchEnd=function(e){n.props.onTouchEnd&&n.props.onTouchEnd(e),n.handleSwipeEnd(e)},n.handleMouseDown=function(e){n.props.onMouseDown&&n.props.onMouseDown(e),e.persist(),n.handleSwipeStart(x(e))},n.handleMouseUp=function(e){n.props.onMouseUp&&n.props.onMouseUp(e),n.handleSwipeEnd(x(e))},n.handleMouseLeave=function(e){n.props.onMouseLeave&&n.props.onMouseLeave(e),n.started&&n.handleSwipeEnd(x(e))},n.handleMouseMove=function(e){n.props.onMouseMove&&n.props.onMouseMove(e),n.started&&n.handleSwipeMove(x(e))},n.handleScroll=function(e){if(n.props.onScroll&&n.props.onScroll(e),e.target===n.rootNode)if(n.ignoreNextScrollEvents)n.ignoreNextScrollEvents=!1;else{var t=n.state.indexLatest,r=Math.ceil(e.target.scrollLeft/e.target.clientWidth)+t;n.ignoreNextScrollEvents=!0,e.target.scrollLeft=0,n.props.onChangeIndex&&r!==t&&n.props.onChangeIndex(r,t,{reason:"focus"})}},n.updateHeight=function(){if(null!==n.activeSlide){var e=n.activeSlide.children[0];void 0!==e&&void 0!==e.offsetHeight&&n.state.heightLatest!==e.offsetHeight&&n.setState({heightLatest:e.offsetHeight})}},n.state={indexLatest:e.index,isDragging:!1,renderOnlyActive:!e.disableLazyLoading,heightLatest:0,displaySameSlide:!0},n.setIndexCurrent(e.index),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.transitionListener=p(this.containerNode,"transitionend",(function(t){t.target===e.containerNode&&e.handleTransitionEnd()})),this.touchMoveListener=p(this.rootNode,"touchmove",(function(t){e.props.disabled||e.handleSwipeMove(t)}),{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout((function(){e.setState({renderOnlyActive:!1})}),0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;"number"===typeof t&&t!==this.props.index&&(this.setIndexCurrent(t),this.setState({displaySameSlide:(0,h.getDisplaySameSlide)(this.props,e),indexLatest:t}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var e=this;return{slideUpdateHeight:function(){e.updateHeight()}}}},{key:"setIndexCurrent",value:function(e){if(this.props.animateTransitions||this.indexCurrent===e||this.handleTransitionEnd(),this.indexCurrent=e,this.containerNode){var t=this.props.axis,n=g.transform[t](100*e);this.containerNode.style.WebkitTransform=n,this.containerNode.style.transform=n}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var e,t,n=this,r=this.props,a=(r.action,r.animateHeight),s=r.animateTransitions,u=r.axis,l=r.children,c=r.containerStyle,f=r.disabled,h=(r.disableLazyLoading,r.enableMouseEvents),p=(r.hysteresis,r.ignoreNativeScroll,r.index,r.onChangeIndex,r.onSwitching,r.onTransitionEnd,r.resistance,r.slideStyle),b=r.slideClassName,x=r.springConfig,w=r.style,k=(r.threshold,(0,o.default)(r,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"])),S=this.state,C=S.displaySameSlide,E=S.heightLatest,T=S.indexLatest,I=S.isDragging,A=S.renderOnlyActive,N=f?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},R=!f&&h?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},M=(0,i.default)({},m,p);if(I||!s||C)e="all 0s ease 0s",t="all 0s ease 0s";else if(e=y("transform",x),t=y("-webkit-transform",x),0!==E){var O=", ".concat(y("height",x));e+=O,t+=O}var D={height:null,WebkitFlexDirection:g.flexDirection[u],flexDirection:g.flexDirection[u],WebkitTransition:t,transition:e};if(!A){var L=g.transform[u](100*this.indexCurrent);D.WebkitTransform=L,D.transform=L}return a&&(D.height=E),d.createElement(_.Provider,{value:this.getSwipeableViewsContext()},d.createElement("div",(0,i.default)({ref:this.setRootNode,style:(0,i.default)({},g.root[u],w)},k,N,R,{onScroll:this.handleScroll}),d.createElement("div",{ref:this.setContainerNode,style:(0,i.default)({},D,v,c),className:"react-swipeable-view-container"},d.Children.map(l,(function(e,t){if(A&&t!==T)return null;var r,i=!0;return t===T&&(i=!1,a&&(r=n.setActiveSlide,M.overflowY="hidden")),d.createElement("div",{ref:r,style:M,className:b,"aria-hidden":i,"data-swipeable":"true"},e)})))))}}]),t}(d.Component);C.displayName="ReactSwipableView",C.propTypes={},C.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var E=C;t.default=E},1065:function(e,t,n){"use strict";var r=n(1964);Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return a.default}});var a=r(n(5228))},6374:function(e,t,n){"use strict";var r=n(2791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:l,ref:c,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=b.prototype=new y;x.constructor=b,v(x,g.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,a)&&!_.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===i?"."+I(u,0):i,w(o)?(a="",null!=e&&(a=e.replace(T,"$&/")+"/"),A(o,t,a,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",w(e))for(var l=0;l<e.length;l++){var c=i+I(s=e[l],l);u+=A(s,t,a,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=A(s=s.value,t,a,c=i+I(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],a=0;return A(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},O={transition:null},D={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=v({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)k.call(t,l)&&!_.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>i(u,n))l<a&&0>i(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<a&&0>i(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],f=1,d=null,h=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function w(e){if(m=!1,x(e),!v)if(null!==r(l))v=!0,O(k);else{var t=r(c);null!==t&&D(w,t.startTime-e)}}function k(e,n){v=!1,m&&(m=!1,y(E),E=-1),p=!0;var i=h;try{for(x(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,h=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(l)&&a(l),x(n)}else a(l);d=r(l)}if(null!==d)var u=!0;else{var f=r(c);null!==f&&D(w,f.startTime-n),u=!1}return u}finally{d=null,h=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,C=null,E=-1,T=5,I=-1;function A(){return!(t.unstable_now()-I<T)}function N(){if(null!==C){var e=t.unstable_now();I=e;var n=!0;try{n=C(!0,e)}finally{n?S():(_=!1,C=null)}}else _=!1}if("function"===typeof b)S=function(){b(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,M=R.port2;R.port1.onmessage=N,S=function(){M.postMessage(null)}}else S=function(){g(N,0)};function O(e){C=e,_||(_=!0,S())}function D(e,n){E=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(c,e),null===r(l)&&e===r(c)&&(m?(y(E),E=-1):m=!0,D(w,i-o))):(e.sortIndex=s,n(l,e),v||p||(v=!0,O(k))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6699:function(e,t,n){var r=n(2501),a=n(9112),i=n(2132),o=n(890),s=n(4113),u=n(1725),l=n(3411);l.alea=r,l.xor128=a,l.xorwow=i,l.xorshift7=o,l.xor4096=s,l.tychei=u,e.exports=l},2501:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},1725:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var r;!function(a,i,o){var s,u=256,l=o.pow(u,6),c=o.pow(2,52),f=2*c,d=255;function h(e,t,n){var r=[],d=g(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(i)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(u):(e=new Uint8Array(u),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,y(i)]}}():e,3),r),h=new p(r),b=function(){for(var e=h.g(6),t=l,n=0;e<c;)e=(e+n)*u,t*=u,n=h.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|h.g(4)},b.quick=function(){return h.g(4)/4294967296},b.double=b,g(y(h.S),i),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,h),e.state=function(){return v(h,{})}),n?(o.random=e,t):e})(b,d,"global"in t?t.global:this==o,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=d&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*u+o[d&(o[a]=o[i=d&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(g(o.random(),i),e.exports){e.exports=h;try{s=n(5042)}catch(b){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},6426:function(e,t,n){var r=n(9020);e.exports=function(e,t){var n,a=null;if(!e||"string"!==typeof e)return a;for(var i,o,s=r(e),u="function"===typeof t,l=0,c=s.length;l<c;l++)i=(n=s[l]).property,o=n.value,u?t(i,o,n):o&&(a||(a={}),a[i]=o);return a}},2391:function(e){"use strict";var t=function(){};e.exports=t},4879:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},2736:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},1931:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},4658:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},4788:function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t},2083:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},531:function(e,t,n){var r=n(7929);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},745:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},1964:function(e){e.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}},779:function(e,t,n){var r=n(191);e.exports=function(e,t){if(null==e)return{};var n,a,i=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},191:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}},1036:function(e,t,n){var r=n(8209),a=n(2736);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?a(e):t}},7929:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t},8209:function(e){function t(e){return t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(r){return"function"===typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=n=function(e){return t(e)}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n},6303:function(e,t,n){var r={"./giardia.png":2609,"./logo.png":6338,"./logo2.svg":9356,"./perfil.png":4166,"./pong_cover.png":6199,"./temperature_cover.png":5420};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=6303},2585:function(e,t,n){var r={"./temperature_report.ipynb":805};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=2585},9356:function(e,t,n){"use strict";e.exports=n.p+"static/media/logo2.4eeaed5f706ec09efba9.svg"},805:function(e,t,n){"use strict";e.exports=n.p+"static/media/temperature_report.f7a624c9108b22b8d75d.ipynb"},2609:function(e,t,n){"use strict";e.exports=n.p+"static/media/giardia.5d134d81c3534709d82b.png"},6338:function(e,t,n){"use strict";e.exports=n.p+"static/media/logo.25b7e0b559f75a2b6055.png"},4166:function(e,t,n){"use strict";e.exports=n.p+"static/media/perfil.5ea7bdb1308625d809e2.png"},6199:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAwAAAAGICAQAAABc9E+ZAAAMFklEQVR42u3dbYxlZ0HA8f+dmd3Z0u12S5cW2i1SoXShVF4skBpbIJBoCqJBv5iQKFgUqEIhEhCjiSEGQU0UiGBKBTFuRYpYgjalGFCi8qIIUiq0UFqWLdBlu233pbszd2b8wHgzLzt9oYvszPx+n855zjmzm+fOvf977zn3zqC5YN3Z0o7GGnZjh0wG69aYKQAQAAAEAAABAGBNmjAFP0wndVmnrbj1c+1stmf3whX3ONw722UaWaVO6BVtX3Hr//Sehj2lF6/4PHWm93SjaRSA1erEfqkdK27d2VXV03rNinvc1YcEgFVrU7/YBStu/Yfe17DH9+oVH6am+mcBEIDVb/m1uIP73Wdg2vD7jwCsdnf0h+1bNPLUXt74opEP9+FF6xv69c4zdawB+/ujdi8aeVyXt2nRyMfbuSgBY72sp5s6AVgL7mpnty8aeUEvWxKAz3TlovXJfkYAWBMOdfWSN3Ke2SuWBOCGrlwUgPGeIwDHgKuAAAQAAAEAQAAAEAAABACA1c5loMeB8bZ0cNHI5mX7nNDJi9Yn22DiWCPPQk9a8tu9ednHvCY7eclloBtNnACsDdvb2ZFFI6cue3j/5Z675E5zroljTTilK5Y8AdrSiUv2+bmevCgAg84xcQKwNkz21Pvd58zONFGs0Qeh8+93n9Pu40sTEYBVarbvtGXFrd/7eogD7V7xe0/ubsoksop///cs+Qz8Qnubq+7t9vv4MrjDJvEhGfibwD9M422/j/cy9/ft6pS23ccdaLe7wPfF3wQ+Hoy1vckVtx7sW821uUetuMdc31ry5hECAAIADyjBAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAIAAACAAAAgCAAAAgAAAIAAACAIAAAHCcmzAFAOvBmZ06Wp7plu4VAID14VW9dLS8r5/viwIAsD5sbttoeayJnAMAWLcEAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAEAATAGAAAAgAACsdROmAGA9ONido+V9zVSD5kwL68+WdjTWsBs7ZDJYJ85q22h5pq92yCsAgPVhV7uWjDgHALBOCQCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACACAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACACAAJgCAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAEAQAAAWBcmalPP6uTRwB19shnzArAeArClt/bE0cAnemH3mheA9RCAQeNNjAbGzQnAuuAcAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAAPD/ZcIUrC4bO7Xx7uyQqQAEYP0Y9LR+o2c00Vf6865r2pQAArA+XNBftqNBdU7P7PKuas6kAN835wBWjU29tic0mF97RK/rUSYFEID1YFsXLFo/p3NNCiAA68FEGxatjzdpUgABWA/2ddui9T3dalIAAVgP7umK7hmtTfc3fc2kAA+Bq4BWjbmubmuvbntj7e2q3uIyUEAA1ovDvbNr29GGbunLTZkQQADWj5m+5o0f4BhxDgBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAAjhu+C4jj3tYu7eHLRj/e9V3cT/Wl3t/M/NgZvbRh726qS9u27IhPdm0X9dMNqo2d2qDZbupd3VVt7tJOW3bEv/eRfqJLRn+I8/8c6MoO9Cs9ctkRn+3v/aVmBACOlZN7ZWcvG53t+i7sjV3dB0YBOL3XdLi/62Av75xlR2zo2p7ZGxeN3dLO7qpO7GU9cdkR7+gjPX3JEVXf6Zpmu7Tzl225omsEAAGAY+VAV7Wt2tAlndYnunn+ufZ9G3Zdu+eXBz2rx4+23NrHGm9rg2a7sxf13T5S1UzX9c3RXhf1hNHyN7p+FJlTesFofKaPtmvJqwwP/wgAHDN7++2qtrSjbb239z2go6b7kz42vzzWXywIwBe6rE3taKxhE324Yf/Rvmq6t3Xd6Ih3LQjADV3Wkfnl87p4wb/x9q51AyEAsFqc1Yvb0BkNmmm8TR14SD9tvGe3fbR2U5/yGgABgOPVU7uiRid2Bw8xABNd3iWjtXf3aQFAAOAH79Y+2t6e157+q609pe39W/s7dD9H7em/G+vEBs12sJnu7OBD+D/M9vk2VoPO7dHLrhcCAYAfiA92TS/pg32yF/XkPtDuXtjtTXXGfR716V7cZOc21rAvd6i5po5yCegDNd2bGqsG/XGvcJMgAHAsTfZjbapObEuDzu2iqnZ1a8OG7e6z7enCzu4L7W7/6GTtWOcvWD5t0XP2w9VUYw073OHR+FhPGr16GBzlGv/lxnrS6A2kQae7qRAAOLZO7709pqpNjfWbXV7VW/u9qv6xj/X8ru7GfqF9Cx7OJ3vz6NLN2vgA/p2N/f6DPuJND/IIEAB4EIbtOsqJ1X2jrcPu7Ovt6kD3jsZubmrZEd+uvtsNfeMoP23YV48y+q1qbzd024JtR/pKdaSZvnqUb1K53SlgVpFBc6f3T503Gvh4zx/djeB4MN7WxpeNHlpw9c5kJzds3+jBd6xTVjjiYW3uSPd00vznAG6cf9Pn6Efc2/4e1uamunv0syfaWt3VbFuP8vzp3va7wfAKAI6Vmfbezx5HumPR+uyKRxxa4RqhB37EsO/OL93ppmGV822gAF4BwGr9JT6lsWq2A21etrSv4VH2O7WHN9bUgjvARJu7u9rS1FF+yoEm57ceatqUs3YCMOyWBR9fuc1JLFaZc3pbdzfX/j7Qa7un2UVLb+rr8/tt73c6u7qtv+11DapN/WpfnN/6o72+Nzfst7quX+tAsx3s/V3egeba2jt7Tm9out/tr/q8KWftBGBfL1nwPGhqdO00rA4ntKm/7kvd2mM6oZ0dbqrDHel1HWx2dLVQfbM3dFnjvb2zGu9tzfaqJkdbJ7uwVzbs4j7T5t7fl/p6ZzbT65vuT9vaWY03bHsnmHDWUgBm7/cUGxzftvT0vtGeNvWpntyGntE7muqOJd/yM2xP+xvvjh7ZsH3Njt4c+p6v9a/VY6vNXdCu7ui0ptvjSRFrOQCwus02Xf1sz+uaptrQoEFzPbq3NOxgf7bgO/6b/9jWXNu6rLkeueANz7mOdH3TvahhU9ULem7/0lRzzTXdTGf0B8302GZNOGvGwFv+rHYn9eNtqKa6uce3oZruptHSfy66Mv9HGnRrJ/WTPbaxDveh9sxv2dzjuqG5zmtvj2tjNeymHtENzfakBWOf625TjgDA6rVlyQfBYD3yOQAAAQBAAAAQAAAEAAABAGC1+18dYCjn2hYKEwAAAABJRU5ErkJggg=="},5420:function(e,t,n){"use strict";e.exports=n.p+"static/media/temperature_cover.cf66317a6a0b0024bb0b.png"},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(i,o),i}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".5c39024c.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="homepage:";n.l=function(r,a,i,o){if(e[r])e[r].push(a);else{var s,u;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var f=l[c];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+i){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[a];var d=function(t,n){s.onerror=s.onload=null,clearTimeout(h);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/homepage/",function(){var e={179:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=i);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var a,i,o=r[0],s=r[1],u=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)u(n)}for(t&&t(r);l<o.length;l++)i=o[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkhomepage=self.webpackChunkhomepage||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{attentionMarkers:function(){return vc},contentInitial:function(){return lc},disable:function(){return mc},document:function(){return uc},flow:function(){return fc},flowInitial:function(){return cc},insideSpan:function(){return pc},string:function(){return dc},text:function(){return hc}});var t={};n.r(t),n.d(t,{boolean:function(){return cf},booleanish:function(){return ff},commaOrSpaceSeparated:function(){return mf},commaSeparated:function(){return vf},number:function(){return hf},overloadedBoolean:function(){return df},spaceSeparated:function(){return pf}});var r={};n.r(r),n.d(r,{browserFiles:function(){return ab},browserHTTPRequest:function(){return mb},concatenateArrayBuffers:function(){return Qg},copyModel:function(){return Gy},decodeWeights:function(){return Hg},encodeWeights:function(){return Gg},fromMemory:function(){return xb},fromMemorySync:function(){return wb},getLoadHandlers:function(){return cy},getModelArtifactsForJSON:function(){return ty},getModelArtifactsForJSONSync:function(){return ey},getModelArtifactsInfoForJSON:function(){return ry},getSaveHandlers:function(){return ly},getWeightSpecs:function(){return ay},http:function(){return vb},isHTTPScheme:function(){return hb},listModels:function(){return By},loadWeights:function(){return ub},moveModel:function(){return Hy},registerLoadRouter:function(){return uy},registerSaveRouter:function(){return sy},removeModel:function(){return Uy},weightsLoaderFactory:function(){return cb},withSaveHandler:function(){return kb},withSaveHandlerSync:function(){return Sb}});var a,i=n(2791),o=n.t(i,2),s=n(1250);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function f(e){return function(e){if(Array.isArray(e))return u(e)}(e)||l(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){if(t&&("object"===b(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function k(e){var t=y();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w(this,n)}}function S(e){if(Array.isArray(e))return e}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,t){return S(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||c(e,t)||_()}function E(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function T(){T=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),o=new _(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return E()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=u;var c={};function f(){}function d(){}function h(){}var p={};s(p,a,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(C([])));m&&m!==t&&n.call(m,a)&&(p=m);var g=h.prototype=f.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,o,s){var u=l(e[a],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==b(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=h,s(g,"constructor",h),s(h,"constructor",d),d.displayName=s(h,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(x.prototype),s(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(u(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(g),s(g,o,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function I(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){I(i,r,a,o,s,"next",e)}function s(e){I(i,r,a,o,s,"throw",e)}o(void 0)}))}}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t,n){return R=y()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&v(a,n.prototype),a},R.apply(null,arguments)}function M(e){var t="function"===typeof Map?new Map:void 0;return M=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return R(e,arguments,g(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),v(r,e)},M(e)}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(a||(a={}));var D,L="popstate";function j(e){return{usr:e.state,key:e.key}}function P(e,t,n,r){return void 0===n&&(n=null),O({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?B(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function F(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,i=e.hash,o=void 0===i?"":i;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function B(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function z(e,t,n,r){void 0===r&&(r={});var i=r,o=i.window,s=void 0===o?document.defaultView:o,u=i.v5Compat,l=void 0!==u&&u,c=s.history,f=a.Pop,d=null;function h(){f=a.Pop,d&&d({action:f,location:p.location})}var p={get action(){return f},get location(){return e(s,c)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(L,h),d=e,function(){s.removeEventListener(L,h),d=null}},createHref:function(e){return t(s,e)},push:function(e,t){f=a.Push;var r=P(p.location,e,t);n&&n(r,e);var i=j(r),o=p.createHref(r);try{c.pushState(i,"",o)}catch(u){s.location.assign(o)}l&&d&&d({action:f,location:r})},replace:function(e,t){f=a.Replace;var r=P(p.location,e,t);n&&n(r,e);var i=j(r),o=p.createHref(r);c.replaceState(i,"",o),l&&d&&d({action:f,location:r})},go:function(e){return c.go(e)}};return p}function U(e,t,n){return void 0===t&&(t=[]),void 0===n&&(n=new Set),e.map((function(e,r){var a=[].concat(f(t),[r]),i="string"===typeof e.id?e.id:a.join("-");return Z(!0!==e.index||!e.children,"Cannot specify children on an index route"),Z(!n.has(i),'Found a route id collision on id "'+i+"\".  Route id's must be globally unique within Data Router usages"),n.add(i),function(e){return!0===e.index}(e)?O({},e,{id:i}):O({},e,{id:i,children:e.children?U(e.children,a,n):void 0})}))}function W(e,t,n){void 0===n&&(n="/");var r=K(("string"===typeof t?B(t):t).pathname||"/",n);if(null==r)return null;var a=G(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var i=null,o=0;null==i&&o<a.length;++o)i=X(a[o],r);return i}function G(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,a){var i={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(Z(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));var o=ee([r,i.relativePath]),s=n.concat(i);e.children&&e.children.length>0&&(Z(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),G(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:q(o,e.index),routesMeta:s})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(D||(D={}));var V=/^:\w+$/,H=function(e){return"*"===e};function q(e,t){var n=e.split("/"),r=n.length;return n.some(H)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!H(e)})).reduce((function(e,t){return e+(V.test(t)?3:""===t?1:10)}),r)}function X(e,t){for(var n=e.routesMeta,r={},a="/",i=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===a?t:t.slice(a.length)||"/",c=Y({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var f=s.route;i.push({params:r,pathname:ee([a,c.pathname]),pathnameBase:te(ee([a,c.pathnameBase])),route:f}),"/"!==c.pathnameBase&&(a=ee([a,c.pathnameBase]))}return i}function Y(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Q("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");return[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=C(n,2),a=r[0],i=r[1],o=t.match(a);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),l=o.slice(1),c=i.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return Q(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{});return{params:c,pathname:s,pathnameBase:u,pattern:e}}function K(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Z(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Q(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function $(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function J(e,t,n,r){var a;void 0===r&&(r=!1),"string"===typeof e?a=B(e):(Z(!(a=O({},e)).pathname||!a.pathname.includes("?"),$("?","pathname","search",a)),Z(!a.pathname||!a.pathname.includes("#"),$("#","pathname","hash",a)),Z(!a.search||!a.search.includes("#"),$("#","search","hash",a)));var i,o=""===e||""===a.pathname,s=o?"/":a.pathname;if(r||null==s)i=n;else{var u=t.length-1;if(s.startsWith("..")){for(var l=s.split("/");".."===l[0];)l.shift(),u-=1;a.pathname=l.join("/")}i=u>=0?t[u]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?B(e):e,r=n.pathname,a=n.search,i=void 0===a?"":a,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:ne(i),hash:re(s)}}(a,i),f=s&&"/"!==s&&s.endsWith("/"),d=(o||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!f&&!d||(c.pathname+="/"),c}var ee=function(e){return e.join("/").replace(/\/\/+/g,"/")},te=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ne=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},re=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ae=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n)}(M(Error)),ie=function(){function e(t){var n,r=this;d(this,e),this.pendingKeys=new Set,this.subscriber=void 0,Z(t&&"object"===typeof t&&!Array.isArray(t),"defer() only accepts plain objects"),this.abortPromise=new Promise((function(e,t){return n=t})),this.controller=new AbortController;var a=function(){return n(new ae("Deferred data aborted"))};this.unlistenAbortSignal=function(){return r.controller.signal.removeEventListener("abort",a)},this.controller.signal.addEventListener("abort",a),this.data=Object.entries(t).reduce((function(e,t){var n=C(t,2),a=n[0],i=n[1];return Object.assign(e,N({},a,r.trackPromise(a,i)))}),{})}return p(e,[{key:"trackPromise",value:function(e,t){var n=this;if(!(t instanceof Promise))return t;this.pendingKeys.add(e);var r=Promise.race([t,this.abortPromise]).then((function(t){return n.onSettle(r,e,null,t)}),(function(t){return n.onSettle(r,e,t)}));return r.catch((function(){})),Object.defineProperty(r,"_tracked",{get:function(){return!0}}),r}},{key:"onSettle",value:function(e,t,n,r){if(this.controller.signal.aborted&&n instanceof ae)return this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:function(){return n}}),Promise.reject(n);this.pendingKeys.delete(t),this.done&&this.unlistenAbortSignal();var a=this.subscriber;return n?(Object.defineProperty(e,"_error",{get:function(){return n}}),a&&a(!1),Promise.reject(n)):(Object.defineProperty(e,"_data",{get:function(){return r}}),a&&a(!1),r)}},{key:"subscribe",value:function(e){this.subscriber=e}},{key:"cancel",value:function(){var e=this;this.controller.abort(),this.pendingKeys.forEach((function(t,n){return e.pendingKeys.delete(n)}));var t=this.subscriber;t&&t(!0)}},{key:"resolveData",value:function(){var e=A(T().mark((function e(t){var n,r,a=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,this.done){e.next=7;break}return r=function(){return a.cancel()},t.addEventListener("abort",r),e.next=6,new Promise((function(e){a.subscribe((function(n){t.removeEventListener("abort",r),(n||a.done)&&e(n)}))}));case 6:n=e.sent;case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"done",get:function(){return 0===this.pendingKeys.size}},{key:"unwrappedData",get:function(){return Z(null!==this.data&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((function(e,t){var n=C(t,2),r=n[0],a=n[1];return Object.assign(e,N({},r,function(e){if(!function(e){return e instanceof Promise&&!0===e._tracked}(e))return e;if(e._error)throw e._error;return e._data}(a)))}),{})}}]),e}();var oe=p((function e(t,n,r){d(this,e),this.status=t,this.statusText=n||"",this.data=r}));function se(e){return e instanceof oe}var ue={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},le={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};function ce(e){Z(e.routes.length>0,"You must provide a non-empty routes array to createRouter");var t=U(e.routes),n=null,r=new Set,i=null,o=null,s=null,u=!1,l=W(t,e.history.location,e.basename),c=null;if(null==l){var d=Ce(t),h=d.matches,p=d.route,v=d.error;l=h,c=N({},p.id,v)}var m,g,y=!l.some((function(e){return e.route.loader}))||null!=e.hydrationData,b={historyAction:e.history.action,location:e.history.location,matches:l,initialized:y,navigation:ue,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||c,fetchers:new Map},x=a.Pop,w=!1,k=!1,S=!1,_=[],I=[],R=new Map,M=0,D=-1,L=new Map,j=new Set,F=new Map,B=new Map;function z(e){b=O({},b,e),r.forEach((function(e){return e(b)}))}function G(t,n){var r;z(O({},null!=b.actionData&&null!=b.navigation.formMethod&&"loading"===b.navigation.state&&(null==(r=b.navigation.formAction)?void 0:r.split("?")[0])===t.pathname?{}:{actionData:null},n,n.loaderData?{loaderData:Se(b.loaderData,n.loaderData,n.matches||[])}:{},{historyAction:x,location:t,initialized:!0,navigation:ue,revalidation:"idle",restoreScrollPosition:!b.navigation.formData&&De(t,n.matches||b.matches),preventScrollReset:w})),k||x===a.Pop||(x===a.Push?e.history.push(t,t.state):x===a.Replace&&e.history.replace(t,t.state)),x=a.Pop,w=!1,k=!1,S=!1,_=[],I=[]}function V(){return V=A(T().mark((function t(n,r){var i,o,s,u,l,c,f;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("number"!==typeof n){t.next=3;break}return e.history.go(n),t.abrupt("return");case 3:return i=fe(n,r),o=i.path,s=i.submission,u=i.error,l=P(b.location,o,r&&r.state),c=!0===(r&&r.replace)||null!=s?a.Replace:a.Push,f=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,t.next=9,H(c,l,{submission:s,pendingError:u,preventScrollReset:f,replace:r&&r.replace});case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)}))),V.apply(this,arguments)}function H(e,t,n){return q.apply(this,arguments)}function q(){return q=A(T().mark((function n(r,a,i){var o,s,u,l,c,f,d,h,p,v,m,y,S,_,C;return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(g&&g.abort(),g=null,x=r,k=!0===(i&&i.startUninterruptedRevalidation),we(b.location,b.matches),w=!0===(i&&i.preventScrollReset),o=i&&i.overrideNavigation,s=W(t,a,e.basename)){n.next=13;break}return u=Ce(t),l=u.matches,c=u.route,f=u.error,xe(),G(a,{matches:l,loaderData:{},errors:N({},c.id,f)}),n.abrupt("return");case 13:if(!Ae(b.location,a)){n.next=16;break}return G(a,{matches:s}),n.abrupt("return");case 16:if(g=new AbortController,d=be(a,g.signal,i&&i.submission),!i||!i.pendingError){n.next=22;break}p=N({},_e(s).route.id,i.pendingError),n.next=32;break;case 22:if(!i||!i.submission){n.next=32;break}return n.next=25,X(d,a,i.submission,s,{replace:i.replace});case 25:if(!(v=n.sent).shortCircuited){n.next=28;break}return n.abrupt("return");case 28:h=v.pendingActionData,p=v.pendingActionError,m=O({state:"loading",location:a},i.submission),o=m;case 32:return n.next=34,K(d,a,s,o,i&&i.submission,i&&i.replace,h,p);case 34:if(y=n.sent,S=y.shortCircuited,_=y.loaderData,C=y.errors,!S){n.next=40;break}return n.abrupt("return");case 40:g=null,G(a,{matches:s,loaderData:_,errors:C});case 42:case"end":return n.stop()}}),n)}))),q.apply(this,arguments)}function X(e,t,n,r,a){return Y.apply(this,arguments)}function Y(){return Y=A(T().mark((function e(t,n,r,i,o){var s,u,l,c;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie(),z({navigation:O({state:"submitting",location:n},r)}),(u=Be(i,n)).route.action){e.next=8;break}s=Ee(n),e.next=13;break;case 8:return e.next=10,ge("action",t,u);case 10:if(s=e.sent,!t.signal.aborted){e.next=13;break}return e.abrupt("return",{shortCircuited:!0});case 13:if(!Me(s)){e.next=18;break}return l=O({state:"loading",location:P(b.location,s.location)},r),e.next=17,te(s,l,o&&o.replace);case 17:return e.abrupt("return",{shortCircuited:!0});case 18:if(!Re(s)){e.next=22;break}return c=_e(i,u.route.id),!0!==(o&&o.replace)&&(x=a.Push),e.abrupt("return",{pendingActionError:N({},c.route.id,s.error)});case 22:if(!Ne(s)){e.next=24;break}throw new Error("defer() is not supported in actions");case 24:return e.abrupt("return",{pendingActionData:N({},u.route.id,s.data)});case 25:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function K(e,t,n,r,a,i,o,s){return Q.apply(this,arguments)}function Q(){return Q=A(T().mark((function e(t,n,r,a,i,o,s,u){var l,c,f,d,h,p,v,m,y,x,w,E,A,N,L;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((l=a)||(l={state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0}),c=pe(b,r,i,n,S,_,I,s,u,F),f=C(c,2),d=f[0],h=f[1],xe((function(e){return!(r&&r.some((function(t){return t.route.id===e})))||d&&d.some((function(t){return t.route.id===e}))})),0!==d.length||0!==h.length){e.next=7;break}return G(n,{matches:r,loaderData:Se(b.loaderData,{},r),errors:u||null,actionData:s||null}),e.abrupt("return",{shortCircuited:!0});case 7:return k||(h.forEach((function(e){var t=C(e,1)[0],n=b.fetchers.get(t),r={state:"loading",data:n&&n.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};b.fetchers.set(t,r)})),z(O({navigation:l,actionData:s||b.actionData||null},h.length>0?{fetchers:new Map(b.fetchers)}:{}))),D=++M,h.forEach((function(e){var t=C(e,1)[0];return R.set(t,g)})),e.next=12,re(b.matches,d,h,t);case 12:if(p=e.sent,v=p.results,m=p.loaderResults,y=p.fetcherResults,!t.signal.aborted){e.next=18;break}return e.abrupt("return",{shortCircuited:!0});case 18:if(h.forEach((function(e){var t=C(e,1)[0];return R.delete(t)})),!(x=Te(v))){e.next=25;break}return w=de(b,x),e.next=24,te(x,w,o);case 24:return e.abrupt("return",{shortCircuited:!0});case 25:return E=ke(b,r,d,m,u,h,y,B),A=E.loaderData,N=E.errors,B.forEach((function(e,t){e.subscribe((function(n){(n||e.done)&&B.delete(t)}))})),me(),L=ye(D),e.abrupt("return",O({loaderData:A,errors:N},L||h.length>0?{fetchers:new Map(b.fetchers)}:{}));case 30:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function $(e){return b.fetchers.get(e)||le}function J(){return J=A(T().mark((function n(r,a,i,o,s){var u,l,c,f,d,h,p,v,m,y,w,k,E,A,U,V,H,q,X,Y,K,Q,$,J,ee,ne,ae,oe;return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(ie(),F.delete(r),o.route.action){n.next=6;break}return u=Ee(i),l=u.error,se(r,a,l),n.abrupt("return");case 6:return c=b.fetchers.get(r),f=O({state:"submitting"},s,{data:c&&c.data}),b.fetchers.set(r,f),z({fetchers:new Map(b.fetchers)}),d=new AbortController,h=be(i,d.signal,s),R.set(r,d),n.next=15,ge("action",h,o);case 15:if(p=n.sent,!h.signal.aborted){n.next=19;break}return R.get(r)===d&&R.delete(r),n.abrupt("return");case 19:if(!Me(p)){n.next=29;break}return R.delete(r),j.add(r),v=O({state:"loading"},s,{data:void 0}),b.fetchers.set(r,v),z({fetchers:new Map(b.fetchers)}),m=O({state:"loading",location:P(b.location,p.location)},s),n.next=28,te(p,m);case 28:return n.abrupt("return");case 29:if(!Re(p)){n.next=32;break}return se(r,a,p.error),n.abrupt("return");case 32:return Ne(p)&&Z(!1,"defer() is not supported in actions"),y=b.navigation.location||b.location,w=be(y,d.signal),Z(k="idle"!==b.navigation.state?W(t,b.navigation.location,e.basename):b.matches,"Didn't find any matches after fetcher action"),E=++M,L.set(r,E),A=O({state:"loading",data:p.data},s),b.fetchers.set(r,A),U=pe(b,k,s,y,S,_,I,N({},o.route.id,p.data),void 0,F),V=C(U,2),H=V[0],(q=V[1]).filter((function(e){return C(e,1)[0]!==r})).forEach((function(e){var t=C(e,1)[0],n=b.fetchers.get(t),r={state:"loading",data:n&&n.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};b.fetchers.set(t,r),R.set(t,d)})),z({fetchers:new Map(b.fetchers)}),n.next=46,re(b.matches,H,q,w);case 46:if(X=n.sent,Y=X.results,K=X.loaderResults,Q=X.fetcherResults,!d.signal.aborted){n.next=52;break}return n.abrupt("return");case 52:if(L.delete(r),R.delete(r),q.forEach((function(e){var t=C(e,1)[0];return R.delete(t)})),!($=Te(Y))){n.next=61;break}return m=de(b,$),n.next=60,te($,m);case 60:return n.abrupt("return");case 61:J=ke(b,b.matches,H,K,void 0,q,Q,B),ee=J.loaderData,ne=J.errors,ae={state:"idle",data:p.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},b.fetchers.set(r,ae),oe=ye(E),"loading"===b.navigation.state&&E>D?(Z(x,"Expected pending action"),g&&g.abort(),G(b.navigation.location,{matches:k,loaderData:ee,errors:ne,fetchers:new Map(b.fetchers)})):(z(O({errors:ne,loaderData:Se(b.loaderData,ee,k)},oe?{fetchers:new Map(b.fetchers)}:{})),S=!1);case 66:case"end":return n.stop()}}),n)}))),J.apply(this,arguments)}function ee(){return ee=A(T().mark((function e(t,n,r,a){var i,o,s,u,l,c,f,d;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=b.fetchers.get(t),o={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:i&&i.data},b.fetchers.set(t,o),z({fetchers:new Map(b.fetchers)}),s=new AbortController,u=be(r,s.signal),R.set(t,s),e.next=9,ge("loader",u,a);case 9:if(!Ne(l=e.sent)){e.next=17;break}return e.next=13,Le(l,u.signal,!0);case 13:if(e.t0=e.sent,e.t0){e.next=16;break}e.t0=l;case 16:l=e.t0;case 17:if(R.get(t)===s&&R.delete(t),!u.signal.aborted){e.next=20;break}return e.abrupt("return");case 20:if(!Me(l)){e.next=25;break}return c=de(b,l),e.next=24,te(l,c);case 24:return e.abrupt("return");case 25:if(!Re(l)){e.next=30;break}return f=_e(b.matches,n),b.fetchers.delete(t),z({fetchers:new Map(b.fetchers),errors:N({},f.route.id,l.error)}),e.abrupt("return");case 30:Z(!Ne(l),"Unhandled fetcher deferred data"),d={state:"idle",data:l.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},b.fetchers.set(t,d),z({fetchers:new Map(b.fetchers)});case 34:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(e,t,n){return ne.apply(this,arguments)}function ne(){return ne=A(T().mark((function e(t,n,r){var i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.revalidate&&(S=!0),Z(n.location,"Expected a location on the redirect navigation"),g=null,i=!0===r?a.Replace:a.Push,e.next=6,H(i,n.location,{overrideNavigation:n});case 6:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}function re(e,t,n,r){return ae.apply(this,arguments)}function ae(){return(ae=A(T().mark((function e(t,n,r,a){var i,o,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([].concat(f(n.map((function(e){return ge("loader",a,e)}))),f(r.map((function(e){var t=C(e,3),n=t[1],r=t[2];return ge("loader",be(n,a.signal),r)})))));case 2:return i=e.sent,o=i.slice(0,n.length),s=i.slice(n.length),e.next=7,Promise.all([Oe(t,n,o,a.signal,!1,b.loaderData),Oe(t,r.map((function(e){return C(e,3)[2]})),s,a.signal,!0)]);case 7:return e.abrupt("return",{results:i,loaderResults:o,fetcherResults:s});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){var e;S=!0,(e=_).push.apply(e,f(xe())),F.forEach((function(e,t){R.has(t)&&(I.push(t),he(t))}))}function se(e,t,n){var r=_e(b.matches,t);ce(e),z({errors:N({},r.route.id,n),fetchers:new Map(b.fetchers)})}function ce(e){R.has(e)&&he(e),F.delete(e),L.delete(e),j.delete(e),b.fetchers.delete(e)}function he(e){var t=R.get(e);Z(t,"Expected fetch controller: "+e),t.abort(),R.delete(e)}function ve(e){var t,n=E(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a={state:"idle",data:$(r).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};b.fetchers.set(r,a)}}catch(i){n.e(i)}finally{n.f()}}function me(){var e,t=[],n=E(j);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=b.fetchers.get(r);Z(a,"Expected fetcher: "+r),"loading"===a.state&&(j.delete(r),t.push(r))}}catch(i){n.e(i)}finally{n.f()}ve(t)}function ye(e){var t,n=[],r=E(L);try{for(r.s();!(t=r.n()).done;){var a=C(t.value,2),i=a[0];if(a[1]<e){var o=b.fetchers.get(i);Z(o,"Expected fetcher: "+i),"loading"===o.state&&(he(i),L.delete(i),n.push(i))}}}catch(s){r.e(s)}finally{r.f()}return ve(n),n.length>0}function xe(e){var t=[];return B.forEach((function(n,r){e&&!e(r)||(n.cancel(),t.push(r),B.delete(r))})),t}function we(e,t){if(i&&o&&s){var n=t.map((function(e){return Fe(e,b.loaderData)})),r=o(e,n)||e.key;i[r]=s()}}function De(e,t){if(i&&o&&s){var n=t.map((function(e){return Fe(e,b.loaderData)})),r=o(e,n)||e.key,a=i[r];if("number"===typeof a)return a}return null}return m={get basename(){return e.basename},get state(){return b},get routes(){return t},initialize:function(){return n=e.history.listen((function(e){return H(e.action,e.location)})),b.initialized||H(a.Pop,b.location),m},subscribe:function(e){return r.add(e),function(){return r.delete(e)}},enableScrollRestoration:function(e,t,n){if(i=e,s=t,o=n||function(e){return e.key},!u&&b.navigation===ue){u=!0;var r=De(b.location,b.matches);null!=r&&z({restoreScrollPosition:r})}return function(){i=null,s=null,o=null}},navigate:function(e,t){return V.apply(this,arguments)},fetch:function(n,r,a,i){if("undefined"===typeof AbortController)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");R.has(n)&&he(n);var o=W(t,a,e.basename);if(o){var s=fe(a,i,!0),u=s.path,l=s.submission,c=Be(o,u);l?function(e,t,n,r,a){J.apply(this,arguments)}(n,r,u,c,l):(F.set(n,[u,c]),function(e,t,n,r){ee.apply(this,arguments)}(n,r,u,c))}else se(n,r,new oe(404,"Not Found",null))},revalidate:function(){ie(),z({revalidation:"loading"}),"submitting"!==b.navigation.state&&("idle"!==b.navigation.state?H(x||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation}):H(b.historyAction,b.location,{startUninterruptedRevalidation:!0}))},createHref:Ie,getFetcher:$,deleteFetcher:ce,dispose:function(){n&&n(),r.clear(),g&&g.abort(),b.fetchers.forEach((function(e,t){return ce(t)}))},_internalFetchControllers:R,_internalActiveDeferreds:B},m}function fe(e,t,n){void 0===n&&(n=!1);var r="string"===typeof e?e:F(e);if(!t||!("formMethod"in t)&&!("formData"in t))return{path:r};if(null!=t.formMethod&&"get"!==t.formMethod)return{path:r,submission:{formMethod:t.formMethod,formAction:Ie(B(r)),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData}};if(!t.formData)return{path:r};var a=B(r);try{var i=xe(t.formData);n&&a.search&&Pe(a.search)&&i.append("index",""),a.search="?"+i}catch(o){return{path:r,error:new oe(400,"Bad Request","Cannot submit binary form data using GET")}}return{path:F(a)}}function de(e,t){var n=e.navigation,r=n.formMethod,a=n.formAction,i=n.formEncType,o=n.formData;return{state:"loading",location:P(e.location,t.location),formMethod:r||void 0,formAction:a||void 0,formEncType:i||void 0,formData:o||void 0}}function he(e,t){var n=e;if(t){var r=e.findIndex((function(e){return e.route.id===t}));r>=0&&(n=e.slice(0,r))}return n}function pe(e,t,n,r,a,i,o,s,u,l){var c=u?Object.values(u)[0]:s?Object.values(s)[0]:null,f=he(t,u?Object.keys(u)[0]:void 0).filter((function(t,o){return null!=t.route.loader&&(function(e,t,n){var r=!t||n.route.id!==t.route.id,a=void 0===e[n.route.id];return r||a}(e.loaderData,e.matches[o],t)||i.some((function(e){return e===t.route.id}))||me(e.location,e.matches[o],n,r,t,a,c))})),d=[];return l&&l.forEach((function(e,t){var r=C(e,2),i=r[0],s=r[1];if(o.includes(t))d.push([t,i,s]);else if(a){me(i,s,n,i,s,a,c)&&d.push([t,i,s])}})),[f,d]}function ve(e,t){var n=e.route.path;return e.pathname!==t.pathname||n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function me(e,t,n,r,a,i,o){var s=ze(e),u=t.params,l=ze(r),c=a.params,f=ve(t,a)||s.toString()===l.toString()||s.search!==l.search||i;if(a.route.shouldRevalidate){var d=a.route.shouldRevalidate(O({currentUrl:s,currentParams:u,nextUrl:l,nextParams:c},n,{actionResult:o,defaultShouldRevalidate:f}));if("boolean"===typeof d)return d}return f}function ge(e,t,n,r,a){return ye.apply(this,arguments)}function ye(){return ye=A(T().mark((function e(t,n,r,a,i){var o,s,u,l,c,f,d,h,p,v;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=!1),void 0===i&&(i=!1),l=new Promise((function(e,t){return u=t})),c=function(){return u()},n.signal.addEventListener("abort",c),e.prev=5,Z(f=r.route[t],"Could not find the "+t+' to run on the "'+r.route.id+'" route'),e.next=10,Promise.race([f({request:n,params:r.params}),l]);case 10:s=e.sent,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),o=D.error,s=e.t0;case 17:return e.prev=17,n.signal.removeEventListener("abort",c),e.finish(17);case 20:if(!(s instanceof Response)){e.next=42;break}if(d=s.status,h=s.headers.get("Location"),!i){e.next=25;break}throw s;case 25:if(!(d>=300&&d<=399&&null!=h)){e.next=29;break}if(!a){e.next=28;break}throw s;case 28:return e.abrupt("return",{type:D.redirect,status:d,location:h,revalidate:null!==s.headers.get("X-Remix-Revalidate")});case 29:if(!(v=s.headers.get("Content-Type"))||!v.startsWith("application/json")){e.next=36;break}return e.next=33,s.json();case 33:p=e.sent,e.next=39;break;case 36:return e.next=38,s.text();case 38:p=e.sent;case 39:if(o!==D.error){e.next=41;break}return e.abrupt("return",{type:o,error:new oe(d,s.statusText,p),headers:s.headers});case 41:return e.abrupt("return",{type:D.data,data:p,statusCode:s.status,headers:s.headers});case 42:if(o!==D.error){e.next=44;break}return e.abrupt("return",{type:o,error:s});case 44:if(!(s instanceof ie)){e.next=46;break}return e.abrupt("return",{type:D.deferred,deferredData:s});case 46:return e.abrupt("return",{type:D.data,data:s});case 47:case"end":return e.stop()}}),e,null,[[5,13,17,20]])}))),ye.apply(this,arguments)}function be(e,t,n){var r=ze(e).toString(),a={signal:t};if(n){var i=n.formMethod,o=n.formEncType,s=n.formData;a.method=i.toUpperCase(),a.body="application/x-www-form-urlencoded"===o?xe(s):s}return new Request(r,a)}function xe(e){var t,n=new URLSearchParams,r=E(e.entries());try{for(r.s();!(t=r.n()).done;){var a=C(t.value,2),i=a[0],o=a[1];Z("string"===typeof o,'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),n.append(i,o)}}catch(s){r.e(s)}finally{r.f()}return n}function we(e,t,n,r,a){var i,o={},s=null,u=!1,l={};return n.forEach((function(n,c){var f=t[c].route.id;if(Z(!Me(n),"Cannot handle redirect results in processLoaderData"),Re(n)){var d=_e(e,f),h=n.error;r&&(h=Object.values(r)[0],r=void 0),s=Object.assign(s||{},N({},d.route.id,h)),u||(u=!0,i=se(n.error)?n.error.status:500),n.headers&&(l[f]=n.headers)}else Ne(n)?(a&&a.set(f,n.deferredData),o[f]=n.deferredData.data):(o[f]=n.data,null==n.statusCode||200===n.statusCode||u||(i=n.statusCode),n.headers&&(l[f]=n.headers))})),r&&(s=r),{loaderData:o,errors:s,statusCode:i||200,loaderHeaders:l}}function ke(e,t,n,r,a,i,o,s){for(var u=we(t,n,r,a,s),l=u.loaderData,c=u.errors,f=0;f<i.length;f++){var d=C(i[f],3),h=d[0],p=d[2];Z(void 0!==o&&void 0!==o[f],"Did not find corresponding fetcher result");var v=o[f];if(Re(v)){var m=_e(e.matches,p.route.id);c&&c[m.route.id]||(c=O({},c,N({},m.route.id,v.error))),e.fetchers.delete(h)}else{if(Me(v))throw new Error("Unhandled fetcher revalidation redirect");if(Ne(v))throw new Error("Unhandled fetcher deferred data");var g={state:"idle",data:v.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};e.fetchers.set(h,g)}}return{loaderData:l,errors:c}}function Se(e,t,n){var r=O({},t);return n.forEach((function(n){var a=n.route.id;void 0===t[a]&&void 0!==e[a]&&(r[a]=e[a])})),r}function _e(e,t){return(t?e.slice(0,e.findIndex((function(e){return e.route.id===t}))+1):f(e)).reverse().find((function(e){return!0===e.route.hasErrorBoundary}))||e[0]}function Ce(e){var t=e.find((function(e){return e.index||""===e.path||"/"===e.path}))||{id:"__shim-404-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t,error:new oe(404,"Not Found",null)}}function Ee(e){var t="string"===typeof e?e:Ie(e);return console.warn("You're trying to submit to a route that does not have an action.  To fix this, please add an `action` function to the route for ["+t+"]"),{type:D.error,error:new oe(405,"Method Not Allowed","No action found for ["+t+"]")}}function Te(e){for(var t=e.length-1;t>=0;t--){var n=e[t];if(Me(n))return n}}function Ie(e){return(e.pathname||"")+(e.search||"")}function Ae(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function Ne(e){return e.type===D.deferred}function Re(e){return e.type===D.error}function Me(e){return(e&&e.type)===D.redirect}function Oe(e,t,n,r,a,i){return De.apply(this,arguments)}function De(){return De=A(T().mark((function e(t,n,r,a,i,o){var s,u;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=T().mark((function e(s){var u,l,c,f;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=r[s],l=n[s],c=t.find((function(e){return e.route.id===l.route.id})),f=null!=c&&!ve(c,l)&&void 0!==(o&&o[l.route.id]),!Ne(u)||!i&&!f){e.next=7;break}return e.next=7,Le(u,a,i).then((function(e){e&&(r[s]=e||r[s])}));case 7:case"end":return e.stop()}}),e)})),u=0;case 2:if(!(u<r.length)){e.next=7;break}return e.delegateYield(s(u),"t0",4);case 4:u++,e.next=2;break;case 7:case"end":return e.stop()}}),e)}))),De.apply(this,arguments)}function Le(e,t,n){return je.apply(this,arguments)}function je(){return je=A(T().mark((function e(t,n,r){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),e.next=3,t.deferredData.resolveData(n);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!r){e.next=14;break}return e.prev=7,e.abrupt("return",{type:D.data,data:t.deferredData.unwrappedData});case 11:return e.prev=11,e.t0=e.catch(7),e.abrupt("return",{type:D.error,error:e.t0});case 14:return e.abrupt("return",{type:D.data,data:t.deferredData.data});case 15:case"end":return e.stop()}}),e,null,[[7,11]])}))),je.apply(this,arguments)}function Pe(e){return new URLSearchParams(e).getAll("index").some((function(e){return""===e}))}function Fe(e,t){var n=e.route,r=e.pathname,a=e.params;return{id:n.id,pathname:r,params:a,data:t[n.id],handle:n.handle}}function Be(e,t){var n="string"===typeof t?B(t).search:t.search;return e[e.length-1].route.index&&!Pe(n||"")?e.slice(-2)[0]:e.slice(-1)[0]}function ze(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location?window.location.origin:"unknown://unknown",n="string"===typeof e?e:Ie(e);return new URL(n,t)}function Ue(){return Ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ue.apply(this,arguments)}var We="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Ge=i.useState,Ve=i.useEffect,He=i.useLayoutEffect,qe=i.useDebugValue;function Xe(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!We(n,r)}catch(a){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement;var Ye=o.useSyncExternalStore,Ke=i.createContext(null);var Ze=i.createContext(null);var Qe=i.createContext(null);var $e=i.createContext(null);var Je=i.createContext(null);var et=i.createContext(null);var tt=i.createContext({outlet:null,matches:[]});var nt=i.createContext(null);function rt(){return null!=i.useContext(et)}function at(){return rt()||Z(!1),i.useContext(et).location}function it(e){return e.filter((function(t,n){return 0===n||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase}))}function ot(){rt()||Z(!1);var e=i.useContext(Je),t=e.basename,n=e.navigator,r=i.useContext(tt).matches,a=at().pathname,o=JSON.stringify(it(r).map((function(e){return e.pathnameBase}))),s=i.useRef(!1);i.useEffect((function(){s.current=!0}));var u=i.useCallback((function(e,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof e){var i=J(e,JSON.parse(o),a,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:ee([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,o,a]);return u}var st=i.createContext(null);function ut(e,t){var n=(void 0===t?{}:t).relative,r=i.useContext(tt).matches,a=at().pathname,o=JSON.stringify(it(r).map((function(e){return e.pathnameBase})));return i.useMemo((function(){return J(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function lt(){var e=function(){var e,t=i.useContext(nt),n=vt(ft.UseRouteError),r=i.useContext(tt),a=r.matches[r.matches.length-1];if(t)return t;return r||Z(!1),!a.route.id&&Z(!1),null==(e=n.errors)?void 0:e[a.route.id]}(),t=se(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unhandled Thrown Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:a},n):null,i.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),i.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",i.createElement("code",{style:o},"errorElement")," props on\xa0",i.createElement("code",{style:o},"<Route>")))}var ct,ft,dt=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return p(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?i.createElement(nt.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(i.Component);function ht(e){var t=e.routeContext,n=e.match,r=e.children,a=i.useContext(Ke);return a&&n.route.errorElement&&(a._deepestRenderedBoundaryId=n.route.id),i.createElement(tt.Provider,{value:t},r)}function pt(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var r=e,a=null==n?void 0:n.errors;if(null!=a){var o=r.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||Z(!1),r=r.slice(0,Math.min(r.length,o+1))}return r.reduceRight((function(e,o,s){var u=o.route.id?null==a?void 0:a[o.route.id]:null,l=n?o.route.errorElement||i.createElement(lt,null):null,c=function(){return i.createElement(ht,{match:o,routeContext:{outlet:e,matches:t.concat(r.slice(0,s+1))}},u?l:void 0!==o.route.element?o.route.element:e)};return n&&(o.route.errorElement||0===s)?i.createElement(dt,{location:n.location,component:l,error:u,children:c()}):c()}),null)}function vt(e){var t=i.useContext(Qe);return t||Z(!1),t}!function(e){e.UseRevalidator="useRevalidator"}(ct||(ct={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(ft||(ft={}));var mt;function gt(e){var t=e.fallbackElement,n=e.router,r=Ye(n.subscribe,(function(){return n.state}),(function(){return n.state})),a=i.useMemo((function(){return{createHref:n.createHref,go:function(e){return n.navigate(e)},push:function(e,t,r){return n.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})},replace:function(e,t,r){return n.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})}}}),[n]),o=n.basename||"/";return i.createElement(Ze.Provider,{value:{router:n,navigator:a,static:!1,basename:o}},i.createElement(Qe.Provider,{value:r},i.createElement(xt,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:a},n.state.initialized?i.createElement(wt,null):t)))}function yt(e){return function(e){var t=i.useContext(tt).outlet;return t?i.createElement(st.Provider,{value:e},t):t}(e.context)}function bt(e){Z(!1)}function xt(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,o=void 0===r?null:r,s=e.location,u=e.navigationType,l=void 0===u?a.Pop:u,c=e.navigator,f=e.static,d=void 0!==f&&f;rt()&&Z(!1);var h=n.replace(/^\/*/,"/"),p=i.useMemo((function(){return{basename:h,navigator:c,static:d}}),[h,c,d]);"string"===typeof s&&(s=B(s));var v=s,m=v.pathname,g=void 0===m?"/":m,y=v.search,b=void 0===y?"":y,x=v.hash,w=void 0===x?"":x,k=v.state,S=void 0===k?null:k,_=v.key,C=void 0===_?"default":_,E=i.useMemo((function(){var e=K(g,h);return null==e?null:{pathname:e,search:b,hash:w,state:S,key:C}}),[h,g,b,w,S,C]);return null==E?null:i.createElement(Je.Provider,{value:p},i.createElement(et.Provider,{children:o,value:{location:E,navigationType:l}}))}function wt(e){var t=e.children,n=e.location,r=i.useContext(Ze);return function(e,t){rt()||Z(!1);var n,r=i.useContext(Qe),o=i.useContext(tt).matches,s=o[o.length-1],u=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),c=(s&&s.route,at());if(t){var f,d="string"===typeof t?B(t):t;"/"===l||(null==(f=d.pathname)?void 0:f.startsWith(l))||Z(!1),n=d}else n=c;var h=n.pathname||"/",p=W(e,{pathname:"/"===l?h:h.slice(l.length)||"/"}),v=pt(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:ee([l,e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ee([l,e.pathnameBase])})})),o,r||void 0);return t?i.createElement(et.Provider,{value:{location:Ue({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:a.Pop}},v):v}(r&&!t?r.router.routes:St(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(mt||(mt={}));var kt=new Promise((function(){}));i.Component;function St(e,t){void 0===t&&(t=[]);var n=[];return i.Children.forEach(e,(function(e,r){if(i.isValidElement(e))if(e.type!==i.Fragment){e.type!==bt&&Z(!1),e.props.index&&e.props.children&&Z(!1);var a=[].concat(f(t),[r]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=St(e.props.children,a)),n.push(o)}else n.push.apply(n,St(e.props.children,t))})),n}function _t(e){return e.map((function(e){var t=Ue({},e);return null==t.hasErrorBoundary&&(t.hasErrorBoundary=null!=t.errorElement),t.children&&(t.children=_t(t.children)),t}))}function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ct.apply(this,arguments)}function Et(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Tt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var It=i.forwardRef((function(e,t){var n=e.onClick,r=e.relative,a=e.reloadDocument,o=e.replace,s=e.state,u=e.target,l=e.to,c=e.preventScrollReset,f=Et(e,Tt),d=function(e,t){var n=(void 0===t?{}:t).relative;rt()||Z(!1);var r=i.useContext(Je),a=r.basename,o=r.navigator,s=ut(e,{relative:n}),u=s.hash,l=s.pathname,c=s.search,f=l;return"/"!==a&&(f="/"===l?a:ee([a,l])),o.createHref({pathname:f,search:c,hash:u})}(l,{relative:r}),h=function(e,t){var n=void 0===t?{}:t,r=n.target,a=n.replace,o=n.state,s=n.preventScrollReset,u=n.relative,l=ot(),c=at(),f=ut(e,{relative:u});return i.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==a?a:F(c)===F(f);l(e,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[c,l,f,a,o,r,e,s,u])}(l,{replace:o,state:s,target:u,preventScrollReset:c,relative:r});return i.createElement("a",Ct({},f,{href:d,onClick:a?n:function(e){n&&n(e),e.defaultPrevented||h(e)},ref:t,target:u}))}));var At,Nt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(At||(At={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Nt||(Nt={}));function Rt(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Mt(e,t){if(null==e)return{};var n,r,a=Rt(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}function Dt(e){return e&&"object"===b(e)&&e.constructor===Object}function Lt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?Ot({},e):e;return Dt(e)&&Dt(t)&&Object.keys(t).forEach((function(a){"__proto__"!==a&&(Dt(t[a])&&a in e?r[a]=Lt(e[a],t[a],n):r[a]=t[a])})),r}var jt=["xs","sm","md","lg","xl"];function Pt(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,a=void 0===r?"px":r,i=e.step,o=void 0===i?5:i,s=Mt(e,["values","unit","step"]);function u(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(a,")")}function l(e,t){var r=jt.indexOf(t);return r===jt.length-1?u(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(a,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[jt[r+1]]?n[jt[r+1]]:t)-o/100).concat(a,")")}return Ot({keys:jt,values:n,up:u,down:function(e){var t=jt.indexOf(e)+1,r=n[jt[t]];return t===jt.length?u("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-o/100).concat(a,")")},between:l,only:function(e){return l(e,e)},width:function(e){return n[e]}},s)}function Ft(e,t,n){var r;return Ot({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),Ot({paddingLeft:t(2),paddingRight:t(2)},n,N({},e.up("sm"),Ot({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},N(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),N(r,e.up("sm"),{minHeight:64}),r)},n)}function Bt(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}var zt={black:"#000",white:"#fff"},Ut={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},Wt={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},Gt={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},Vt={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Ht={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},qt={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Xt={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function Yt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Kt(e){if(e.type)return e;if("#"===e.charAt(0))return Kt(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(Bt(3,e));var r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function Zt(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function Qt(e){var t="hsl"===(e=Kt(e)).type?Kt(function(e){var t=(e=Kt(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,i=r*Math.min(a,1-a),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-i*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),Zt({type:s,values:u})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function $t(e,t){return e=Kt(e),t=Yt(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,Zt(e)}function Jt(e,t){if(e=Kt(e),t=Yt(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return Zt(e)}function en(e,t){if(e=Kt(e),t=Yt(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return Zt(e)}var tn={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:zt.white,default:Ut[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},nn={text:{primary:zt.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:Ut[800],default:"#303030"},action:{active:zt.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function rn(e,t,n,r){var a=r.light||r,i=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=en(e.main,a):"dark"===t&&(e.dark=Jt(e.main,i)))}function an(e){var t=e.primary,n=void 0===t?{light:Wt[300],main:Wt[500],dark:Wt[700]}:t,r=e.secondary,a=void 0===r?{light:Gt.A200,main:Gt.A400,dark:Gt.A700}:r,i=e.error,o=void 0===i?{light:Vt[300],main:Vt[500],dark:Vt[700]}:i,s=e.warning,u=void 0===s?{light:Ht[300],main:Ht[500],dark:Ht[700]}:s,l=e.info,c=void 0===l?{light:qt[300],main:qt[500],dark:qt[700]}:l,f=e.success,d=void 0===f?{light:Xt[300],main:Xt[500],dark:Xt[700]}:f,h=e.type,p=void 0===h?"light":h,v=e.contrastThreshold,m=void 0===v?3:v,g=e.tonalOffset,y=void 0===g?.2:g,b=Mt(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function x(e){var t=function(e,t){var n=Qt(e),r=Qt(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,nn.text.primary)>=m?nn.text.primary:tn.text.primary;return t}var w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=Ot({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(Bt(4,t));if("string"!==typeof e.main)throw new Error(Bt(5,JSON.stringify(e.main)));return rn(e,"light",n,y),rn(e,"dark",r,y),e.contrastText||(e.contrastText=x(e.main)),e},k={dark:nn,light:tn};return Lt(Ot({common:zt,type:p,primary:w(n),secondary:w(a,"A400","A200","A700"),error:w(o),warning:w(u),info:w(c),success:w(d),grey:Ut,contrastThreshold:m,getContrastText:x,augmentColor:w,tonalOffset:y},k[p]),b)}function on(e){return Math.round(1e5*e)/1e5}function sn(e){return on(e)}var un={textTransform:"uppercase"},ln='"Roboto", "Helvetica", "Arial", sans-serif';function cn(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,a=void 0===r?ln:r,i=n.fontSize,o=void 0===i?14:i,s=n.fontWeightLight,u=void 0===s?300:s,l=n.fontWeightRegular,c=void 0===l?400:l,f=n.fontWeightMedium,d=void 0===f?500:f,h=n.fontWeightBold,p=void 0===h?700:h,v=n.htmlFontSize,m=void 0===v?16:v,g=n.allVariants,y=n.pxToRem,b=Mt(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var x=o/14,w=y||function(e){return"".concat(e/m*x,"rem")},k=function(e,t,n,r,i){return Ot({fontFamily:a,fontWeight:e,fontSize:w(t),lineHeight:n},a===ln?{letterSpacing:"".concat(on(r/t),"em")}:{},i,g)},S={h1:k(u,96,1.167,-1.5),h2:k(u,60,1.2,-.5),h3:k(c,48,1.167,0),h4:k(c,34,1.235,.25),h5:k(c,24,1.334,0),h6:k(d,20,1.6,.15),subtitle1:k(c,16,1.75,.15),subtitle2:k(d,14,1.57,.1),body1:k(c,16,1.5,.15),body2:k(c,14,1.43,.15),button:k(d,14,1.75,.4,un),caption:k(c,12,1.66,.4),overline:k(c,12,2.66,1,un)};return Lt(Ot({htmlFontSize:m,pxToRem:w,round:sn,fontFamily:a,fontSize:o,fontWeightLight:u,fontWeightRegular:c,fontWeightMedium:d,fontWeightBold:p},S),b,{clone:!1})}function fn(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var dn=["none",fn(0,2,1,-1,0,1,1,0,0,1,3,0),fn(0,3,1,-2,0,2,2,0,0,1,5,0),fn(0,3,3,-2,0,3,4,0,0,1,8,0),fn(0,2,4,-1,0,4,5,0,0,1,10,0),fn(0,3,5,-1,0,5,8,0,0,1,14,0),fn(0,3,5,-1,0,6,10,0,0,1,18,0),fn(0,4,5,-2,0,7,10,1,0,2,16,1),fn(0,5,5,-3,0,8,10,1,0,3,14,2),fn(0,5,6,-3,0,9,12,1,0,3,16,2),fn(0,6,6,-3,0,10,14,1,0,4,18,3),fn(0,6,7,-4,0,11,15,1,0,4,20,3),fn(0,7,8,-4,0,12,17,2,0,5,22,4),fn(0,7,8,-4,0,13,19,2,0,5,24,4),fn(0,7,9,-4,0,14,21,2,0,5,26,4),fn(0,8,9,-5,0,15,22,2,0,6,28,5),fn(0,8,10,-5,0,16,24,2,0,6,30,5),fn(0,8,11,-5,0,17,26,2,0,6,32,5),fn(0,9,11,-5,0,18,28,2,0,7,34,6),fn(0,9,12,-6,0,19,29,2,0,7,36,6),fn(0,10,13,-6,0,20,31,3,0,8,38,7),fn(0,10,13,-6,0,21,33,3,0,8,40,7),fn(0,10,14,-6,0,22,35,3,0,8,42,7),fn(0,11,14,-7,0,23,36,3,0,9,44,8),fn(0,11,15,-7,0,24,38,3,0,9,46,8)],hn={borderRadius:4},pn={xs:0,sm:600,md:960,lg:1280,xl:1920},vn={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(pn[e],"px)")}};function mn(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||vn;return t.reduce((function(e,a,i){return e[r.up(r.keys[i])]=n(t[i]),e}),{})}if("object"===b(t)){var a=e.theme.breakpoints||vn;return Object.keys(t).reduce((function(e,r){return e[a.up(r)]=n(t[r]),e}),{})}return n(t)}var gn=function(e,t){return t?Lt(e,t,{clone:!1}):e};var yn={m:"margin",p:"padding"},bn={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},xn={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},wn=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!xn[e])return[e];e=xn[e]}var t=C(e.split(""),2),n=t[0],r=t[1],a=yn[n],i=bn[r]||"";return Array.isArray(i)?i.map((function(e){return a+e})):[a+i]})),kn=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function Sn(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function _n(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function Cn(e){var t=Sn(e.theme);return Object.keys(e).map((function(n){if(-1===kn.indexOf(n))return null;var r=_n(wn(n),t),a=e[n];return mn(e,a,r)})).reduce(gn,{})}Cn.propTypes={},Cn.filterProps=kn;var En=Cn;function Tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Sn({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var In={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},An={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Nn(e){return"".concat(Math.round(e),"ms")}var Rn={easing:In,duration:An,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?An.standard:n,a=t.easing,i=void 0===a?In.easeInOut:a,o=t.delay,s=void 0===o?0:o;Mt(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:Nn(r)," ").concat(i," ").concat("string"===typeof s?s:Nn(s))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},Mn={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function On(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,a=void 0===r?{}:r,i=e.palette,o=void 0===i?{}:i,s=e.spacing,u=e.typography,l=void 0===u?{}:u,c=Mt(e,["breakpoints","mixins","palette","spacing","typography"]),f=an(o),d=Pt(n),h=Tn(s),p=Lt({breakpoints:d,direction:"ltr",mixins:Ft(d,h,a),overrides:{},palette:f,props:{},shadows:dn,typography:cn(f,l),spacing:h,shape:hn,transitions:Rn,zIndex:Mn},c),v=arguments.length,m=new Array(v>1?v-1:0),g=1;g<v;g++)m[g-1]=arguments[g];return p=m.reduce((function(e,t){return Lt(e,t)}),p)}var Dn=On;function Ln(e){return String(parseFloat(e)).length===String(e).length}function jn(e){return parseFloat(e)}function Pn(e){return function(t,n){var r=function(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}(t);if(r===n)return t;var a=jn(t);if("px"!==r)if("em"===r)a=jn(t)*jn(e);else if("rem"===r)return a=jn(t)*jn(e),t;var i=a;if("px"!==n)if("em"===n)i=a/jn(e);else{if("rem"!==n)return t;i=a/jn(e)}return parseFloat(i.toFixed(5))+n}}function Fn(e){var t=e.size,n=e.grid,r=t-t%n,a=r+n;return t-r<a-t?r:a}function Bn(e){var t=e.lineHeight;return e.pixels/(t*e.htmlFontSize)}function zn(e){var t=e.cssProperty,n=e.min,r=e.max,a=e.unit,i=void 0===a?"rem":a,o=e.breakpoints,s=void 0===o?[600,960,1280]:o,u=e.transform,l=void 0===u?null:u,c=N({},t,"".concat(n).concat(i)),f=(r-n)/s[s.length-1];return s.forEach((function(e){var r=n+f*e;null!==l&&(r=l(r)),c["@media (min-width:".concat(e,"px)")]=N({},t,"".concat(Math.round(1e4*r)/1e4).concat(i))})),c}var Un=i.createContext(null);function Wn(){return i.useContext(Un)}var Gn="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var Vn=function(e){var t=e.children,n=e.theme,r=Wn(),a=i.useMemo((function(){var e=null===r?n:function(e,t){return"function"===typeof t?t(e):Ot({},e,t)}(r,n);return null!=e&&(e[Gn]=null!==r),e}),[n,r]);return i.createElement(Un.Provider,{value:a},t)},Hn=n(2110),qn=n.n(Hn),Xn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yn="object"===("undefined"===typeof window?"undefined":Xn(window))&&"object"===("undefined"===typeof document?"undefined":Xn(document))&&9===document.nodeType;function Kn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,v(e,t)}var Zn={}.constructor;function Qn(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(Qn);if(e.constructor!==Zn)return e;var t={};for(var n in e)t[n]=Qn(e[n]);return t}function $n(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,a=Qn(t),i=r.plugins.onCreateRule(e,a,n);return i||(e[0],null)}var Jn=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},er=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=Jn(e[n]," ");else t=Jn(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function tr(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function nr(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function rr(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var a=n.indent,i=void 0===a?0:a,o=t.fallbacks;!1===n.format&&(i=-1/0);var s=tr(n),u=s.linebreak,l=s.space;if(e&&i++,o)if(Array.isArray(o))for(var c=0;c<o.length;c++){var f=o[c];for(var d in f){var h=f[d];null!=h&&(r&&(r+=u),r+=nr(d+":"+l+er(h)+";",i))}}else for(var p in o){var v=o[p];null!=v&&(r&&(r+=u),r+=nr(p+":"+l+er(v)+";",i))}for(var m in t){var g=t[m];null!=g&&"fallbacks"!==m&&(r&&(r+=u),r+=nr(m+":"+l+er(g)+";",i))}return(r||n.allowEmpty)&&e?(r&&(r=""+u+r+u),nr(""+e+l+"{"+r,--i)+nr("}",i)):r}var ar=/([[\].#*$><+~=|^:(),"'`\s])/g,ir="undefined"!==typeof CSS&&CSS.escape,or=function(e){return ir?ir(e):e.replace(ar,"\\$1")},sr=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,a=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:a&&(this.renderer=new a)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var a=t;n&&!1===n.process||(a=this.options.jss.plugins.onChangeValue(t,e,this));var i=null==a||!1===a,o=e in this.style;if(i&&!o&&!r)return this;var s=i&&o;if(s?delete this.style[e]:this.style[e]=a,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,a),this;var u=this.options.sheet;return u&&u.attached,this},e}(),ur=function(e){function t(t,n,r){var a;a=e.call(this,t,n,r)||this;var i=r.selector,o=r.scoped,s=r.sheet,u=r.generateId;return i?a.selectorText=i:!1!==o&&(a.id=u(x(x(a)),s),a.selectorText="."+or(a.id)),a}Kn(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=er(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Ot({},e,{allowEmpty:!0}):e;return rr(this.selectorText,this.style,n)},p(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(sr),lr={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new ur(e,t,n)}},cr={indent:1,children:!0},fr=/@([\w-]+)/,dr=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(fr);for(var a in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new jr(Ot({},n,{parent:this})),t)this.rules.add(a,t[a]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=cr);var t=tr(e).linebreak;if(null==e.indent&&(e.indent=cr.indent),null==e.children&&(e.children=cr.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),hr=/@media|@supports\s+/,pr={onCreateRule:function(e,t,n){return hr.test(e)?new dr(e,t,n):null}},vr={indent:1,children:!0},mr=/@keyframes\s+([\w-]+)/,gr=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(mr);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var a=n.scoped,i=n.sheet,o=n.generateId;for(var s in this.id=!1===a?this.name:or(o(this,i)),this.rules=new jr(Ot({},n,{parent:this})),t)this.rules.add(s,t[s],Ot({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=vr);var t=tr(e).linebreak;if(null==e.indent&&(e.indent=vr.indent),null==e.children&&(e.children=vr.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),yr=/@keyframes\s+/,br=/\$([\w-]+)/g,xr=function(e,t){return"string"===typeof e?e.replace(br,(function(e,n){return n in t?t[n]:e})):e},wr=function(e,t,n){var r=e[t],a=xr(r,n);a!==r&&(e[t]=a)},kr={onCreateRule:function(e,t,n){return"string"===typeof e&&yr.test(e)?new gr(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&wr(e,"animation-name",n.keyframes),"animation"in e&&wr(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return xr(e,r.keyframes);default:return e}}},Sr=function(e){function t(){return e.apply(this,arguments)||this}return Kn(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Ot({},e,{allowEmpty:!0}):e;return rr(this.key,this.style,n)},t}(sr),_r={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new Sr(e,t,n):null}},Cr=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=tr(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=rr(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return rr(this.at,this.style,e)},e}(),Er=/@font-face/,Tr={onCreateRule:function(e,t,n){return Er.test(e)?new Cr(e,t,n):null}},Ir=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return rr(this.key,this.style,e)},e}(),Ar={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new Ir(e,t,n):null}},Nr=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),Rr={"@charset":!0,"@import":!0,"@namespace":!0},Mr={onCreateRule:function(e,t,n){return e in Rr?new Nr(e,t,n):null}},Or=[lr,pr,kr,_r,Tr,Ar,Mr],Dr={process:!0},Lr={force:!0,process:!0},jr=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,a=r.parent,i=r.sheet,o=r.jss,s=r.Renderer,u=r.generateId,l=r.scoped,c=Ot({classes:this.classes,parent:a,sheet:i,jss:o,Renderer:s,generateId:u,scoped:l,name:e,keyframes:this.keyframes,selector:void 0},n),f=e;e in this.raw&&(f=e+"-d"+this.counter++),this.raw[f]=t,f in this.classes&&(c.selector="."+or(this.classes[f]));var d=$n(f,t,c);if(!d)return null;this.register(d);var h=void 0===c.index?this.index.length:c.index;return this.index.splice(h,0,d),d},t.replace=function(e,t,n){var r=this.get(e),a=this.index.indexOf(r);r&&this.remove(r);var i=n;return-1!==a&&(i=Ot({},n,{index:a})),this.add(e,t,i)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof ur?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof gr&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof ur?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof gr&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=Dr);var a=this.options,i=a.jss.plugins,o=a.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t.style;if(i.onUpdate(n,t,o,r),r.process&&s&&s!==t.style){for(var u in i.onProcessStyle(t.style,t,o),t.style){var l=t.style[u];l!==s[u]&&t.prop(u,l,Lr)}for(var c in s){var f=t.style[c],d=s[c];null==f&&f!==d&&t.prop(c,null,Lr)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,a=tr(e).linebreak,i=0;i<this.index.length;i++){var o=this.index[i].toString(e);(o||r)&&(t&&(t+=a),t+=o)}return t},e}(),Pr=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Ot({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new jr(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var a=this.rules.add(e,t,n);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(r?r.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),a):a:(this.deployed=!1,a)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var a=this.rules.replace(e,t,n);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(this.renderer&&(a?r.renderable&&this.renderer.replaceRule(r.renderable,a):this.renderer.deleteRule(r)),a):a:(this.deployed=!1,a)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var a=this.addRule(r,e[r],t);a&&n.push(a)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),Fr=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var a=this.registry.onCreateRule[r](e,t,n);if(a)return a}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,a=0;a<this.registry.onChangeValue.length;a++)r=this.registry.onChangeValue[a](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),Br=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=Rt(t,["attached"]),a=tr(r).linebreak,i="",o=0;o<this.registry.length;o++){var s=this.registry[o];null!=n&&s.attached!==n||(i&&(i+=a),i+=s.toString(r))}return i},p(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),zr=new Br,Ur="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),Wr="2f1acc6c3a606b082e5eef5e54414ffb";null==Ur[Wr]&&(Ur[Wr]=0);var Gr=Ur[Wr]++,Vr=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var a="",i="";return r&&(r.options.classNamePrefix&&(i=r.options.classNamePrefix),null!=r.options.jss.id&&(a=String(r.options.jss.id))),e.minify?""+(i||"c")+Gr+a+t:i+n.key+"-"+Gr+(a?"-"+a:"")+"-"+t}},Hr=function(e){var t;return function(){return t||(t=e()),t}},qr=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},Xr=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=er(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,r);else{var a=r?r.indexOf("!important"):-1,i=a>-1?r.substr(0,a-1):r;e.style.setProperty(t,i,a>-1?"important":"")}}catch(o){return!1}return!0},Yr=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},Kr=function(e,t){return e.selectorText=t,e.selectorText===t},Zr=Hr((function(){return document.querySelector("head")}));function Qr(e){var t=zr.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var a=function(e){for(var t=Zr(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(a)return{parent:a.parentNode,node:a.nextSibling}}return!1}var $r=Hr((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),Jr=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},ea=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},ta=function(){function e(e){this.getPropertyValue=qr,this.setProperty=Xr,this.removeProperty=Yr,this.setSelector=Kr,this.hasInsertedRules=!1,this.cssRules=[],e&&zr.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,a=t.element;this.element=a||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var i=$r();i&&this.element.setAttribute("nonce",i)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=Qr(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var a=n,i=a.parentNode;i&&i.insertBefore(e,a.nextSibling)}else Zr().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,a=n;if("conditional"===e.type||"keyframes"===e.type){var i=ea(n,t);if(!1===(a=Jr(n,r.toString({children:!1}),i)))return!1;this.refCssRule(e,i,a)}return this.insertRules(r.rules,a),a}var o=e.toString();if(!o)return!1;var s=ea(n,t),u=Jr(n,o,s);return!1!==u&&(this.hasInsertedRules=!0,this.refCssRule(e,s,u),u)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof Pr&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),na=0,ra=function(){function e(e){this.id=na++,this.version="10.9.2",this.plugins=new Fr,this.options={id:{minify:!1},createGenerateId:Vr,Renderer:Yn?ta:null,plugins:[]},this.generateId=Vr({minify:!1});for(var t=0;t<Or.length;t++)this.plugins.use(Or[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=Ot({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===zr.index?0:zr.index+1);var r=new Pr(e,Ot({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),zr.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=Ot({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var a=$n(e,t,r);return a&&this.plugins.onProcessRule(a),a},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),aa=function(e){return new ra(e)},ia="object"===typeof CSS&&null!=CSS&&"number"in CSS;function oa(e){var t=null;for(var n in e){var r=e[n],a=typeof r;if("function"===a)t||(t={}),t[n]=r;else if("object"===a&&null!==r&&!Array.isArray(r)){var i=oa(r);i&&(t||(t={}),t[n]=i)}}return t}aa();function sa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=Ot({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}var ua={set:function(e,t,n,r){var a=e.get(t);a||(a=new Map,e.set(t,a)),a.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},la=ua,ca=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var fa=Date.now(),da="fnValues"+fa,ha="fnStyle"+ ++fa,pa=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=$n(e,{},n);return r[ha]=t,r},onProcessStyle:function(e,t){if(da in t||ha in t)return e;var n={};for(var r in e){var a=e[r];"function"===typeof a&&(delete e[r],n[r]=a)}return t[da]=n,e},onUpdate:function(e,t,n,r){var a=t,i=a[ha];i&&(a.style=i(e)||{});var o=a[da];if(o)for(var s in o)a.prop(s,o[s](e),r)}}},va="@global",ma="@global ",ga=function(){function e(e,t,n){for(var r in this.type="global",this.at=va,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new jr(Ot({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),ya=function(){function e(e,t,n){this.type="global",this.at=va,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr(ma.length);this.rule=n.jss.createRule(r,t,Ot({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),ba=/\s*,\s*/g;function xa(e,t){for(var n=e.split(ba),r="",a=0;a<n.length;a++)r+=t+" "+n[a].trim(),n[a+1]&&(r+=", ");return r}var wa=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===va)return new ga(e,t,n);if("@"===e[0]&&e.substr(0,ma.length)===ma)return new ya(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,a=r?r[va]:null;if(a){for(var i in a)t.addRule(i,a[i],Ot({},n,{selector:xa(i,e.selector)}));delete r[va]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var a in r)if("@"===a[0]&&a.substr(0,va.length)===va){var i=xa(a.substr(va.length),e.selector);t.addRule(i,r[a],Ot({},n,{selector:i})),delete r[a]}}(e,t))}}},ka=/\s*,\s*/g,Sa=/&/g,_a=/\$([\w-]+)/g;var Ca=function(){function e(e,t){return function(n,r){var a=e.getRule(r)||t&&t.getRule(r);return a?a.selector:r}}function t(e,t){for(var n=t.split(ka),r=e.split(ka),a="",i=0;i<n.length;i++)for(var o=n[i],s=0;s<r.length;s++){var u=r[s];a&&(a+=", "),a+=-1!==u.indexOf("&")?u.replace(Sa,o):o+" "+u}return a}function n(e,t,n){if(n)return Ot({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var a=Ot({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete a.name,a}return{onProcessStyle:function(r,a,i){if("style"!==a.type)return r;var o,s,u=a,l=u.options.parent;for(var c in r){var f=-1!==c.indexOf("&"),d="@"===c[0];if(f||d){if(o=n(u,l,o),f){var h=t(c,u.selector);s||(s=e(l,i)),h=h.replace(_a,s);var p=u.key+"-"+c;"replaceRule"in l?l.replaceRule(p,r[c],Ot({},o,{selector:h})):l.addRule(p,r[c],Ot({},o,{selector:h}))}else d&&l.addRule(c,{},o).addRule(u.key,r[c],{selector:u.selector});delete r[c]}}return r}}},Ea=/[A-Z]/g,Ta=/^ms-/,Ia={};function Aa(e){return"-"+e.toLowerCase()}var Na=function(e){if(Ia.hasOwnProperty(e))return Ia[e];var t=e.replace(Ea,Aa);return Ia[e]=Ta.test(t)?"-"+t:t};function Ra(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Na(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(Ra):t.fallbacks=Ra(e.fallbacks)),t}var Ma=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=Ra(e[t]);return e}return Ra(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=Na(t);return t===r?e:(n.prop(r,e),null)}}},Oa=ia&&CSS?CSS.px:"px",Da=ia&&CSS?CSS.ms:"ms",La=ia&&CSS?CSS.percent:"%";function ja(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var a in e)r[a]=e[a],r[a.replace(t,n)]=e[a];return r}var Pa=ja({"animation-delay":Da,"animation-duration":Da,"background-position":Oa,"background-position-x":Oa,"background-position-y":Oa,"background-size":Oa,border:Oa,"border-bottom":Oa,"border-bottom-left-radius":Oa,"border-bottom-right-radius":Oa,"border-bottom-width":Oa,"border-left":Oa,"border-left-width":Oa,"border-radius":Oa,"border-right":Oa,"border-right-width":Oa,"border-top":Oa,"border-top-left-radius":Oa,"border-top-right-radius":Oa,"border-top-width":Oa,"border-width":Oa,"border-block":Oa,"border-block-end":Oa,"border-block-end-width":Oa,"border-block-start":Oa,"border-block-start-width":Oa,"border-block-width":Oa,"border-inline":Oa,"border-inline-end":Oa,"border-inline-end-width":Oa,"border-inline-start":Oa,"border-inline-start-width":Oa,"border-inline-width":Oa,"border-start-start-radius":Oa,"border-start-end-radius":Oa,"border-end-start-radius":Oa,"border-end-end-radius":Oa,margin:Oa,"margin-bottom":Oa,"margin-left":Oa,"margin-right":Oa,"margin-top":Oa,"margin-block":Oa,"margin-block-end":Oa,"margin-block-start":Oa,"margin-inline":Oa,"margin-inline-end":Oa,"margin-inline-start":Oa,padding:Oa,"padding-bottom":Oa,"padding-left":Oa,"padding-right":Oa,"padding-top":Oa,"padding-block":Oa,"padding-block-end":Oa,"padding-block-start":Oa,"padding-inline":Oa,"padding-inline-end":Oa,"padding-inline-start":Oa,"mask-position-x":Oa,"mask-position-y":Oa,"mask-size":Oa,height:Oa,width:Oa,"min-height":Oa,"max-height":Oa,"min-width":Oa,"max-width":Oa,bottom:Oa,left:Oa,top:Oa,right:Oa,inset:Oa,"inset-block":Oa,"inset-block-end":Oa,"inset-block-start":Oa,"inset-inline":Oa,"inset-inline-end":Oa,"inset-inline-start":Oa,"box-shadow":Oa,"text-shadow":Oa,"column-gap":Oa,"column-rule":Oa,"column-rule-width":Oa,"column-width":Oa,"font-size":Oa,"font-size-delta":Oa,"letter-spacing":Oa,"text-decoration-thickness":Oa,"text-indent":Oa,"text-stroke":Oa,"text-stroke-width":Oa,"word-spacing":Oa,motion:Oa,"motion-offset":Oa,outline:Oa,"outline-offset":Oa,"outline-width":Oa,perspective:Oa,"perspective-origin-x":La,"perspective-origin-y":La,"transform-origin":La,"transform-origin-x":La,"transform-origin-y":La,"transform-origin-z":La,"transition-delay":Da,"transition-duration":Da,"vertical-align":Oa,"flex-basis":Oa,"shape-margin":Oa,size:Oa,gap:Oa,grid:Oa,"grid-gap":Oa,"row-gap":Oa,"grid-row-gap":Oa,"grid-column-gap":Oa,"grid-template-rows":Oa,"grid-template-columns":Oa,"grid-auto-rows":Oa,"grid-auto-columns":Oa,"box-shadow-x":Oa,"box-shadow-y":Oa,"box-shadow-blur":Oa,"box-shadow-spread":Oa,"font-line-height":Oa,"text-shadow-x":Oa,"text-shadow-y":Oa,"text-shadow-blur":Oa});function Fa(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=Fa(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var a in t)t[a]=Fa(a,t[a],n);else for(var i in t)t[i]=Fa(e+"-"+i,t[i],n);else if("number"===typeof t&&!1===isNaN(t)){var o=n[e]||Pa[e];return!o||0===t&&o===Oa?t.toString():"function"===typeof o?o(t).toString():""+t+o}return t}var Ba=function(e){void 0===e&&(e={});var t=ja(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=Fa(r,e[r],t);return e},onChangeValue:function(e,n){return Fa(n,e,t)}}},za="",Ua="",Wa="",Ga="",Va=Yn&&"ontouchstart"in document.documentElement;if(Yn){var Ha={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},qa=document.createElement("p").style;for(var Xa in Ha)if(Xa+"Transform"in qa){za=Xa,Ua=Ha[Xa];break}"Webkit"===za&&"msHyphens"in qa&&(za="ms",Ua=Ha.ms,Ga="edge"),"Webkit"===za&&"-apple-trailing-word"in qa&&(Wa="apple")}var Ya=za,Ka=Ua,Za=Wa,Qa=Ga,$a=Va;var Ja={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===Ya?"-webkit-"+e:Ka+e)}},ei={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===Ya?Ka+"print-"+e:e)}},ti=/[-\s]+(.)?/g;function ni(e,t){return t?t.toUpperCase():""}function ri(e){return e.replace(ti,ni)}function ai(e){return ri("-"+e)}var ii,oi={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===Ya){var n="mask-image";if(ri(n)in t)return e;if(Ya+ai(n)in t)return Ka+e}return e}},si={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==Za||$a?e:Ka+e)}},ui={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:Ka+e)}},li={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:Ka+e)}},ci={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===Ya||"ms"===Ya&&"edge"!==Qa?Ka+e:e)}},fi={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===Ya||"ms"===Ya||"apple"===Za?Ka+e:e)}},di={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===Ya?"WebkitColumn"+ai(e)in t&&Ka+"column-"+e:"Moz"===Ya&&("page"+ai(e)in t&&"page-"+e))}},hi={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===Ya)return e;var n=e.replace("-inline","");return Ya+ai(n)in t&&Ka+n}},pi={supportedProperty:function(e,t){return ri(e)in t&&e}},vi={supportedProperty:function(e,t){var n=ai(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:Ya+n in t?Ka+e:"Webkit"!==Ya&&"Webkit"+n in t&&"-webkit-"+e}},mi={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===Ya?""+Ka+e:e)}},gi={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===Ya?Ka+"scroll-chaining":e)}},yi={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},bi={supportedProperty:function(e,t){var n=yi[e];return!!n&&(Ya+ai(n)in t&&Ka+n)}},xi={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},wi=Object.keys(xi),ki=function(e){return Ka+e},Si={supportedProperty:function(e,t,n){var r=n.multiple;if(wi.indexOf(e)>-1){var a=xi[e];if(!Array.isArray(a))return Ya+ai(a)in t&&Ka+a;if(!r)return!1;for(var i=0;i<a.length;i++)if(!(Ya+ai(a[0])in t))return!1;return a.map(ki)}return!1}},_i=[Ja,ei,oi,si,ui,li,ci,fi,di,hi,pi,vi,mi,gi,bi,Si],Ci=_i.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Ei=_i.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,f(t.noPrefill)),e}),[]),Ti={};if(Yn){ii=document.createElement("p");var Ii=window.getComputedStyle(document.documentElement,"");for(var Ai in Ii)isNaN(Ai)||(Ti[Ii[Ai]]=Ii[Ai]);Ei.forEach((function(e){return delete Ti[e]}))}function Ni(e,t){if(void 0===t&&(t={}),!ii)return e;if(null!=Ti[e])return Ti[e];"transition"!==e&&"transform"!==e||(t[e]=e in ii.style);for(var n=0;n<Ci.length&&(Ti[e]=Ci[n](e,ii.style,t),!Ti[e]);n++);try{ii.style[e]=""}catch(r){return!1}return Ti[e]}var Ri,Mi={},Oi={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Di=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Li(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?Ni(t):", "+Ni(n);return r||(t||n)}function ji(e,t){var n=t;if(!Ri||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=Mi[r])return Mi[r];try{Ri.style[e]=n}catch(a){return Mi[r]=!1,!1}if(Oi[e])n=n.replace(Di,Li);else if(""===Ri.style[e]&&("-ms-flex"===(n=Ka+n)&&(Ri.style[e]="-ms-flexbox"),Ri.style[e]=n,""===Ri.style[e]))return Mi[r]=!1,!1;return Ri.style[e]="",Mi[r]=n,Mi[r]}Yn&&(Ri=document.createElement("p"));var Pi=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var a=!1,i=Ni(n);i&&i!==n&&(a=!0);var o=!1,s=ji(i,er(r));s&&s!==r&&(o=!0),(a||o)&&(a&&delete t[n],t[i||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===Ya?e:"@"+Ka+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return ji(t,er(e))||e}}};var Fi=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},a=Object.keys(t).sort(e),i=0;i<a.length;i++)r[a[i]]=t[a[i]];return r}}};var Bi=aa({plugins:[pa(),wa(),Ca(),Ma(),Ba(),"undefined"===typeof window?null:Pi(),Fi()]}),zi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,a=void 0===r?"jss":r,i=e.seed,o=void 0===i?"":i,s=""===o?"":"".concat(o,"-"),u=0,l=function(){return u+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==ca.indexOf(e.key))return"Mui-".concat(e.key);var i="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[Gn]&&""===o?"".concat(i,"-").concat(l()):i}return"".concat(s).concat(a).concat(l())}}(),Ui={disableGeneration:!1,generateClassName:zi,jss:Bi,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},Wi=i.createContext(Ui);var Gi=-1e9;function Vi(){return Gi+=1}function Hi(e){var t="function"===typeof e;return{create:function(n,r){var a;try{a=t?e(n):e}catch(s){throw s}if(!r||!n.overrides||!n.overrides[r])return a;var i=n.overrides[r],o=Ot({},a);return Object.keys(i).forEach((function(e){o[e]=Lt(o[e],i[e])})),o},options:{}}}var qi={};function Xi(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var a=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,a=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,a=!0),a&&(r.cacheClasses.value=sa({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function Yi(e,t){var n=e.state,r=e.theme,a=e.stylesOptions,i=e.stylesCreator,o=e.name;if(!a.disableGeneration){var s=la.get(a.sheetsManager,i,r);s||(s={refs:0,staticSheet:null,dynamicStyles:null},la.set(a.sheetsManager,i,r,s));var u=Ot({},i.options,a,{theme:r,flip:"boolean"===typeof a.flip?a.flip:"rtl"===r.direction});u.generateId=u.serverGenerateClassName||u.generateClassName;var l=a.sheetsRegistry;if(0===s.refs){var c;a.sheetsCache&&(c=la.get(a.sheetsCache,i,r));var f=i.create(r,o);c||((c=a.jss.createStyleSheet(f,Ot({link:!1},u))).attach(),a.sheetsCache&&la.set(a.sheetsCache,i,r,c)),l&&l.add(c),s.staticSheet=c,s.dynamicStyles=oa(f)}if(s.dynamicStyles){var d=a.jss.createStyleSheet(s.dynamicStyles,Ot({link:!0},u));d.update(t),d.attach(),n.dynamicSheet=d,n.classes=sa({baseClasses:s.staticSheet.classes,newClasses:d.classes}),l&&l.add(d)}else n.classes=s.staticSheet.classes;s.refs+=1}}function Ki(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function Zi(e){var t=e.state,n=e.theme,r=e.stylesOptions,a=e.stylesCreator;if(!r.disableGeneration){var i=la.get(r.sheetsManager,a,n);i.refs-=1;var o=r.sheetsRegistry;0===i.refs&&(la.delete(r.sheetsManager,a,n),r.jss.removeStyleSheet(i.staticSheet),o&&o.remove(i.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}function Qi(e,t){var n,r=i.useRef([]),a=i.useMemo((function(){return{}}),t);r.current!==a&&(r.current=a,n=e()),i.useEffect((function(){return function(){n&&n()}}),[a])}function $i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,r=t.classNamePrefix,a=t.Component,o=t.defaultTheme,s=void 0===o?qi:o,u=Mt(t,["name","classNamePrefix","Component","defaultTheme"]),l=Hi(e),c=n||r||"makeStyles";l.options={index:Vi(),name:n,meta:c,classNamePrefix:c};var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Wn()||s,r=Ot({},i.useContext(Wi),u),o=i.useRef(),c=i.useRef();Qi((function(){var a={name:n,state:{},stylesCreator:l,stylesOptions:r,theme:t};return Yi(a,e),c.current=!1,o.current=a,function(){Zi(a)}}),[t,l]),i.useEffect((function(){c.current&&Ki(o.current,e),c.current=!0}));var f=Xi(o.current,e.classes,a);return f};return f}function Ji(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var a,i=t.props[n];for(a in i)void 0===r[a]&&(r[a]=i[a]);return r}var eo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=t.defaultTheme,a=t.withTheme,o=void 0!==a&&a,s=t.name,u=Mt(t,["defaultTheme","withTheme","name"]);var l=s,c=$i(e,Ot({defaultTheme:r,Component:n,name:s||n.displayName,classNamePrefix:l},u)),f=i.forwardRef((function(e,t){e.classes;var a,u=e.innerRef,l=Mt(e,["classes","innerRef"]),f=c(Ot({},n.defaultProps,e)),d=l;return("string"===typeof s||o)&&(a=Wn()||r,s&&(d=Ji({theme:a,name:s,props:l})),o&&!d.theme&&(d.theme=a)),i.createElement(n,Ot({ref:u||t,classes:f},d))}));return qn()(f,n),f}},to=Dn();var no=function(e,t){return eo(e,Ot({defaultTheme:to},t))},ro={WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box"},ao=function(e){return Ot({color:e.palette.text.primary},e.typography.body2,{backgroundColor:e.palette.background.default,"@media print":{backgroundColor:e.palette.common.white}})};var io=no((function(e){return{"@global":{html:ro,"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:Ot({margin:0},ao(e),{"&::backdrop":{backgroundColor:e.palette.background.default}})}}}),{name:"MuiCssBaseline"})((function(e){var t=e.children,n=void 0===t?null:t;return e.classes,i.createElement(i.Fragment,null,n)}));function oo(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=oo(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var so=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=oo(e))&&(r&&(r+=" "),r+=t);return r};function uo(e){if("string"!==typeof e)throw new Error(Bt(7));return e.charAt(0).toUpperCase()+e.slice(1)}var lo=i.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.component,o=void 0===a?"div":a,s=e.square,u=void 0!==s&&s,l=e.elevation,c=void 0===l?1:l,f=e.variant,d=void 0===f?"elevation":f,h=Mt(e,["classes","className","component","square","elevation","variant"]);return i.createElement(o,Ot({className:so(n.root,r,"outlined"===d?n.outlined:n["elevation".concat(c)],!u&&n.rounded),ref:t},h))})),co=no((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),Ot({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(lo),fo=i.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.color,o=void 0===a?"primary":a,s=e.position,u=void 0===s?"fixed":s,l=Mt(e,["classes","className","color","position"]);return i.createElement(co,Ot({square:!0,component:"header",elevation:4,className:so(n.root,n["position".concat(uo(u))],n["color".concat(uo(o))],r,"fixed"===u&&"mui-fixed"),ref:t},l))})),ho=no((function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}}),{name:"MuiAppBar"})(fo),po=i.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.component,o=void 0===a?"div":a,s=e.disableGutters,u=void 0!==s&&s,l=e.variant,c=void 0===l?"regular":l,f=Mt(e,["classes","className","component","disableGutters","variant"]);return i.createElement(o,Ot({className:so(n.root,n[c],r,!u&&n.gutters),ref:t},f))})),vo=no((function(e){return{root:{position:"relative",display:"flex",alignItems:"center"},gutters:N({paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),regular:e.mixins.toolbar,dense:{minHeight:48}}}),{name:"MuiToolbar"})(po),mo=i.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.component,o=void 0===a?"div":a,s=e.disableGutters,u=void 0!==s&&s,l=e.fixed,c=void 0!==l&&l,f=e.maxWidth,d=void 0===f?"lg":f,h=Mt(e,["classes","className","component","disableGutters","fixed","maxWidth"]);return i.createElement(o,Ot({className:so(n.root,r,c&&n.fixed,u&&n.disableGutters,!1!==d&&n["maxWidth".concat(uo(String(d)))]),ref:t},h))})),go=no((function(e){return{root:N({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),display:"block"},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),disableGutters:{paddingLeft:0,paddingRight:0},fixed:Object.keys(e.breakpoints.values).reduce((function(t,n){var r=e.breakpoints.values[n];return 0!==r&&(t[e.breakpoints.up(n)]={maxWidth:r}),t}),{}),maxWidthXs:N({},e.breakpoints.up("xs"),{maxWidth:Math.max(e.breakpoints.values.xs,444)}),maxWidthSm:N({},e.breakpoints.up("sm"),{maxWidth:e.breakpoints.values.sm}),maxWidthMd:N({},e.breakpoints.up("md"),{maxWidth:e.breakpoints.values.md}),maxWidthLg:N({},e.breakpoints.up("lg"),{maxWidth:e.breakpoints.values.lg}),maxWidthXl:N({},e.breakpoints.up("xl"),{maxWidth:e.breakpoints.values.xl})}}),{name:"MuiContainer"})(mo),yo={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},bo=i.forwardRef((function(e,t){var n=e.align,r=void 0===n?"inherit":n,a=e.classes,o=e.className,s=e.color,u=void 0===s?"initial":s,l=e.component,c=e.display,f=void 0===c?"initial":c,d=e.gutterBottom,h=void 0!==d&&d,p=e.noWrap,v=void 0!==p&&p,m=e.paragraph,g=void 0!==m&&m,y=e.variant,b=void 0===y?"body1":y,x=e.variantMapping,w=void 0===x?yo:x,k=Mt(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),S=l||(g?"p":w[b]||yo[b])||"span";return i.createElement(S,Ot({className:so(a.root,o,"inherit"!==b&&a[b],"initial"!==u&&a["color".concat(uo(u))],v&&a.noWrap,h&&a.gutterBottom,g&&a.paragraph,"inherit"!==r&&a["align".concat(uo(r))],"initial"!==f&&a["display".concat(uo(f))]),ref:t},k))})),xo=no((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(bo);var wo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $i(e,Ot({defaultTheme:to},t))},ko=wo((function(e){return{appBar:{backgroundColor:"#1c1d25",position:"sticky"},mainHeader:{display:"flex",flexDirection:"column",direction:"column",alignItems:"flex-start",padding:e.spacing(2,0,2),gutterBottom:"true"},projectTitle:{padding:e.spacing(4,5,2),display:"flex",justifyContent:"space-between"},container:{height:"80vh",backgroundColor:e.palette.background.paper,padding:e.spacing(8,5,6),display:"flex",justifyContent:"space-between"},containerToolbar:{alignItems:"flex-start",flexDirection:"row",justifyContent:"space-between"},icon:{marginRight:"20px"},buttons:{marginTop:"40px"},cardGrid:{padding:"20px 20px"},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},headshot:{marginRight:"20px"},socials:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row",flexGrow:1,width:"30vw"},footer:{position:"fixed",left:"0px",bottom:"0px",width:"100%",color:"#fff",backgroundColor:"#1c1d25",height:"50px",alignItems:"space-around",display:"flex",justifyContent:"center"},slideBox:{display:"block",justifyContent:"center",alignItems:"space-around",bgcolor:"background.default"},slideText:{alignItems:"center",justifyContent:"center",padding:e.spacing(0,1,1),pl:2,bgcolor:"background.default"},slideImage:{width:"100%"},slide:{padding:e.spacing(2,0,2),display:"flex",justifyContent:"center",flexGrow:1,minHeight:"55vh",maxHeight:"50vh",overflow:"scroll"}}})),So=ko,_o=n(184);function Co(e){var t=So(e);return(0,_o.jsx)(_o.Fragment,{children:(0,_o.jsx)(ho,{position:"sticky",className:t.appBar,children:(0,_o.jsx)(vo,{className:t.containerToolbar,children:(0,_o.jsxs)(go,{className:t.mainHeader,children:[(0,_o.jsx)(xo,{variant:"h4",children:"Guilherme Garcia"}),(0,_o.jsx)(xo,{variant:"h6",children:"Data Scientist"})]})})})})}function Eo(e,t){var n={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(n[r]=e[r])})),n}function To(e){var t=function(t){var n=e(t);return t.css?Ot({},gn(n,e(Ot({theme:t.theme},t.css))),Eo(t.css,[e.filterProps])):t.sx?Ot({},gn(n,e(Ot({theme:t.theme},t.sx))),Eo(t.sx,[e.filterProps])):n};return t.propTypes={},t.filterProps=["css","sx"].concat(f(e.filterProps)),t}var Io=To;var Ao=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(e){return t.reduce((function(t,n){var r=n(e);return r?gn(t,r):t}),{})};return r.propTypes={},r.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),r};function No(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}var Ro=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,a=e.themeKey,i=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=No(e.theme,a)||{};return mn(e,n,(function(e){var t;return"function"===typeof o?t=o(e):Array.isArray(o)?t=o[e]||e:(t=No(o,e)||e,i&&(t=i(t))),!1===r?t:N({},r,t)}))};return o.propTypes={},o.filterProps=[t],o};function Mo(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var Oo=Ao(Ro({prop:"border",themeKey:"borders",transform:Mo}),Ro({prop:"borderTop",themeKey:"borders",transform:Mo}),Ro({prop:"borderRight",themeKey:"borders",transform:Mo}),Ro({prop:"borderBottom",themeKey:"borders",transform:Mo}),Ro({prop:"borderLeft",themeKey:"borders",transform:Mo}),Ro({prop:"borderColor",themeKey:"palette"}),Ro({prop:"borderRadius",themeKey:"shape"})),Do=Ao(Ro({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),Ro({prop:"display"}),Ro({prop:"overflow"}),Ro({prop:"textOverflow"}),Ro({prop:"visibility"}),Ro({prop:"whiteSpace"})),Lo=Ao(Ro({prop:"flexBasis"}),Ro({prop:"flexDirection"}),Ro({prop:"flexWrap"}),Ro({prop:"justifyContent"}),Ro({prop:"alignItems"}),Ro({prop:"alignContent"}),Ro({prop:"order"}),Ro({prop:"flex"}),Ro({prop:"flexGrow"}),Ro({prop:"flexShrink"}),Ro({prop:"alignSelf"}),Ro({prop:"justifyItems"}),Ro({prop:"justifySelf"})),jo=Ao(Ro({prop:"gridGap"}),Ro({prop:"gridColumnGap"}),Ro({prop:"gridRowGap"}),Ro({prop:"gridColumn"}),Ro({prop:"gridRow"}),Ro({prop:"gridAutoFlow"}),Ro({prop:"gridAutoColumns"}),Ro({prop:"gridAutoRows"}),Ro({prop:"gridTemplateColumns"}),Ro({prop:"gridTemplateRows"}),Ro({prop:"gridTemplateAreas"}),Ro({prop:"gridArea"})),Po=Ao(Ro({prop:"position"}),Ro({prop:"zIndex",themeKey:"zIndex"}),Ro({prop:"top"}),Ro({prop:"right"}),Ro({prop:"bottom"}),Ro({prop:"left"})),Fo=Ao(Ro({prop:"color",themeKey:"palette"}),Ro({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"})),Bo=Ro({prop:"boxShadow",themeKey:"shadows"});function zo(e){return e<=1?"".concat(100*e,"%"):e}var Uo=Ro({prop:"width",transform:zo}),Wo=Ro({prop:"maxWidth",transform:zo}),Go=Ro({prop:"minWidth",transform:zo}),Vo=Ro({prop:"height",transform:zo}),Ho=Ro({prop:"maxHeight",transform:zo}),qo=Ro({prop:"minHeight",transform:zo}),Xo=(Ro({prop:"size",cssProperty:"width",transform:zo}),Ro({prop:"size",cssProperty:"height",transform:zo}),Ao(Uo,Wo,Go,Vo,Ho,qo,Ro({prop:"boxSizing"}))),Yo=Ao(Ro({prop:"fontFamily",themeKey:"typography"}),Ro({prop:"fontSize",themeKey:"typography"}),Ro({prop:"fontStyle",themeKey:"typography"}),Ro({prop:"fontWeight",themeKey:"typography"}),Ro({prop:"letterSpacing"}),Ro({prop:"lineHeight"}),Ro({prop:"textAlign"}));function Ko(e,t){var n={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(n[r]=e[r])})),n}var Zo=function(e){var t=function(e){return function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.name,o=Mt(r,["name"]),s=a,u="function"===typeof t?function(e){return{root:function(n){return t(Ot({theme:e},n))}}}:{root:t},l=$i(u,Ot({Component:e,name:a||e.displayName,classNamePrefix:s},o));t.filterProps&&(n=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);var c=i.forwardRef((function(t,r){var a=t.children,o=t.className,s=t.clone,u=t.component,c=Mt(t,["children","className","clone","component"]),f=l(t),d=so(f.root,o),h=c;if(n&&(h=Ko(h,n)),s)return i.cloneElement(a,Ot({className:so(a.props.className,d)},h));if("function"===typeof a)return a(Ot({className:d},h));var p=u||e;return i.createElement(p,Ot({ref:r,className:d},h),a)}));return qn()(c,e),c}}(e);return function(e,n){return t(e,Ot({defaultTheme:to},n))}},Qo=Io(Ao(Oo,Do,Lo,jo,Po,Fo,Bo,Xo,En,Yo)),$o=Zo("div")(Qo,{name:"MuiBox"}),Jo=[0,1,2,3,4,5,6,7,8,9,10],es=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function ts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/t).concat(String(e).replace(String(n),"")||"px")}var ns=i.forwardRef((function(e,t){var n=e.alignContent,r=void 0===n?"stretch":n,a=e.alignItems,o=void 0===a?"stretch":a,s=e.classes,u=e.className,l=e.component,c=void 0===l?"div":l,f=e.container,d=void 0!==f&&f,h=e.direction,p=void 0===h?"row":h,v=e.item,m=void 0!==v&&v,g=e.justify,y=e.justifyContent,b=void 0===y?"flex-start":y,x=e.lg,w=void 0!==x&&x,k=e.md,S=void 0!==k&&k,_=e.sm,C=void 0!==_&&_,E=e.spacing,T=void 0===E?0:E,I=e.wrap,A=void 0===I?"wrap":I,N=e.xl,R=void 0!==N&&N,M=e.xs,O=void 0!==M&&M,D=e.zeroMinWidth,L=void 0!==D&&D,j=Mt(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),P=so(s.root,u,d&&[s.container,0!==T&&s["spacing-xs-".concat(String(T))]],m&&s.item,L&&s.zeroMinWidth,"row"!==p&&s["direction-xs-".concat(String(p))],"wrap"!==A&&s["wrap-xs-".concat(String(A))],"stretch"!==o&&s["align-items-xs-".concat(String(o))],"stretch"!==r&&s["align-content-xs-".concat(String(r))],"flex-start"!==(g||b)&&s["justify-content-xs-".concat(String(g||b))],!1!==O&&s["grid-xs-".concat(String(O))],!1!==C&&s["grid-sm-".concat(String(C))],!1!==S&&s["grid-md-".concat(String(S))],!1!==w&&s["grid-lg-".concat(String(w))],!1!==R&&s["grid-xl-".concat(String(R))]);return i.createElement(c,Ot({className:P,ref:t},j))})),rs=no((function(e){return Ot({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return Jo.forEach((function(r){var a=e.spacing(r);0!==a&&(n["spacing-".concat(t,"-").concat(r)]={margin:"-".concat(ts(a,2)),width:"calc(100% + ".concat(ts(a),")"),"& > $item":{padding:ts(a,2)}})})),n}(e,"xs"),e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var r={};es.forEach((function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var a="".concat(Math.round(e/12*1e8)/1e6,"%");r[t]={flexBasis:a,flexGrow:0,maxWidth:a}}else r[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?Ot(e,r):e[t.breakpoints.up(n)]=r}(t,e,n),t}),{}))}),{name:"MuiGrid"})(ns),as=rs,is=n(4164);function os(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function ss(e,t){return i.useMemo((function(){return null==e&&null==t?null:function(n){os(e,n),os(t,n)}}),[e,t])}var us="undefined"!==typeof window?i.useLayoutEffect:i.useEffect;function ls(e){var t=i.useRef(e);return us((function(){t.current=e})),i.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}var cs=!0,fs=!1,ds=null,hs={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function ps(e){e.metaKey||e.altKey||e.ctrlKey||(cs=!0)}function vs(){cs=!1}function ms(){"hidden"===this.visibilityState&&fs&&(cs=!0)}function gs(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return cs||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!hs[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function ys(){fs=!0,window.clearTimeout(ds),ds=window.setTimeout((function(){fs=!1}),100)}function bs(){return{isFocusVisible:gs,onBlurVisible:ys,ref:i.useCallback((function(e){var t,n=is.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",ps,!0),t.addEventListener("mousedown",vs,!0),t.addEventListener("pointerdown",vs,!0),t.addEventListener("touchstart",vs,!0),t.addEventListener("visibilitychange",ms,!0))}),[])}}var xs=i.createContext(null);function ws(e,t){var n=Object.create(null);return e&&i.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,i.isValidElement)(e)?t(e):e}(e)})),n}function ks(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Ss(e,t,n){var r=ws(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,a=Object.create(null),i=[];for(var o in e)o in t?i.length&&(a[o]=i,i=[]):i.push(o);var s={};for(var u in t){if(a[u])for(r=0;r<a[u].length;r++){var l=a[u][r];s[a[u][r]]=n(l)}s[u]=n(u)}for(r=0;r<i.length;r++)s[i[r]]=n(i[r]);return s}(t,r);return Object.keys(a).forEach((function(o){var s=a[o];if((0,i.isValidElement)(s)){var u=o in t,l=o in r,c=t[o],f=(0,i.isValidElement)(c)&&!c.props.in;!l||u&&!f?l||!u||f?l&&u&&(0,i.isValidElement)(c)&&(a[o]=(0,i.cloneElement)(s,{onExited:n.bind(null,s),in:c.props.in,exit:ks(s,"exit",e),enter:ks(s,"enter",e)})):a[o]=(0,i.cloneElement)(s,{in:!1}):a[o]=(0,i.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:ks(s,"exit",e),enter:ks(s,"enter",e)})}})),a}var _s=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Cs=function(e){function t(t,n){var r,a=(r=e.call(this,t,n)||this).handleExited.bind(x(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}Kn(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,a=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,ws(n.children,(function(e){return(0,i.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:ks(e,"appear",n),enter:ks(e,"enter",n),exit:ks(e,"exit",n)})}))):Ss(e,a,o),firstRender:!1}},n.handleExited=function(e,t){var n=ws(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Ot({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Rt(e,["component","childFactory"]),a=this.state.contextValue,o=_s(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?i.createElement(xs.Provider,{value:a},o):i.createElement(xs.Provider,{value:a},i.createElement(t,r,o))},t}(i.Component);Cs.propTypes={},Cs.defaultProps={component:"div",childFactory:function(e){return e}};var Es=Cs,Ts="undefined"===typeof window?i.useEffect:i.useLayoutEffect;var Is=function(e){var t=e.classes,n=e.pulsate,r=void 0!==n&&n,a=e.rippleX,o=e.rippleY,s=e.rippleSize,u=e.in,l=e.onExited,c=void 0===l?function(){}:l,f=e.timeout,d=i.useState(!1),h=d[0],p=d[1],v=so(t.ripple,t.rippleVisible,r&&t.ripplePulsate),m={width:s,height:s,top:-s/2+o,left:-s/2+a},g=so(t.child,h&&t.childLeaving,r&&t.childPulsate),y=ls(c);return Ts((function(){if(!u){p(!0);var e=setTimeout(y,f);return function(){clearTimeout(e)}}}),[y,u,f]),i.createElement("span",{className:v,style:m},i.createElement("span",{className:g}))},As=i.forwardRef((function(e,t){var n=e.center,r=void 0!==n&&n,a=e.classes,o=e.className,s=Mt(e,["center","classes","className"]),u=i.useState([]),l=u[0],c=u[1],d=i.useRef(0),h=i.useRef(null);i.useEffect((function(){h.current&&(h.current(),h.current=null)}),[l]);var p=i.useRef(!1),v=i.useRef(null),m=i.useRef(null),g=i.useRef(null);i.useEffect((function(){return function(){clearTimeout(v.current)}}),[]);var y=i.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,o=e.rippleSize,s=e.cb;c((function(e){return[].concat(f(e),[i.createElement(Is,{key:d.current,classes:a,timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:o})])})),d.current+=1,h.current=s}),[a]),b=i.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=t.pulsate,i=void 0!==a&&a,o=t.center,s=void 0===o?r||t.pulsate:o,u=t.fakeElement,l=void 0!==u&&u;if("mousedown"===e.type&&p.current)p.current=!1;else{"touchstart"===e.type&&(p.current=!0);var c,f,d,h=l?null:g.current,b=h?h.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(b.width/2),f=Math.round(b.height/2);else{var x=e.touches?e.touches[0]:e,w=x.clientX,k=x.clientY;c=Math.round(w-b.left),f=Math.round(k-b.top)}if(s)(d=Math.sqrt((2*Math.pow(b.width,2)+Math.pow(b.height,2))/3))%2===0&&(d+=1);else{var S=2*Math.max(Math.abs((h?h.clientWidth:0)-c),c)+2,_=2*Math.max(Math.abs((h?h.clientHeight:0)-f),f)+2;d=Math.sqrt(Math.pow(S,2)+Math.pow(_,2))}e.touches?null===m.current&&(m.current=function(){y({pulsate:i,rippleX:c,rippleY:f,rippleSize:d,cb:n})},v.current=setTimeout((function(){m.current&&(m.current(),m.current=null)}),80)):y({pulsate:i,rippleX:c,rippleY:f,rippleSize:d,cb:n})}}),[r,y]),x=i.useCallback((function(){b({},{pulsate:!0})}),[b]),w=i.useCallback((function(e,t){if(clearTimeout(v.current),"touchend"===e.type&&m.current)return e.persist(),m.current(),m.current=null,void(v.current=setTimeout((function(){w(e,t)})));m.current=null,c((function(e){return e.length>0?e.slice(1):e})),h.current=t}),[]);return i.useImperativeHandle(t,(function(){return{pulsate:x,start:b,stop:w}}),[x,b,w]),i.createElement("span",Ot({className:so(a.root,o),ref:g},s),i.createElement(Es,{component:null,exit:!0},l))})),Ns=no((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(i.memo(As)),Rs=i.forwardRef((function(e,t){var n=e.action,r=e.buttonRef,a=e.centerRipple,o=void 0!==a&&a,s=e.children,u=e.classes,l=e.className,c=e.component,f=void 0===c?"button":c,d=e.disabled,h=void 0!==d&&d,p=e.disableRipple,v=void 0!==p&&p,m=e.disableTouchRipple,g=void 0!==m&&m,y=e.focusRipple,b=void 0!==y&&y,x=e.focusVisibleClassName,w=e.onBlur,k=e.onClick,S=e.onFocus,_=e.onFocusVisible,C=e.onKeyDown,E=e.onKeyUp,T=e.onMouseDown,I=e.onMouseLeave,A=e.onMouseUp,N=e.onTouchEnd,R=e.onTouchMove,M=e.onTouchStart,O=e.onDragLeave,D=e.tabIndex,L=void 0===D?0:D,j=e.TouchRippleProps,P=e.type,F=void 0===P?"button":P,B=Mt(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),z=i.useRef(null);var U=i.useRef(null),W=i.useState(!1),G=W[0],V=W[1];h&&G&&V(!1);var H=bs(),q=H.isFocusVisible,X=H.onBlurVisible,Y=H.ref;function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return ls((function(r){return t&&t(r),!n&&U.current&&U.current[e](r),!0}))}i.useImperativeHandle(n,(function(){return{focusVisible:function(){V(!0),z.current.focus()}}}),[]),i.useEffect((function(){G&&b&&!v&&U.current.pulsate()}),[v,b,G]);var Z=K("start",T),Q=K("stop",O),$=K("stop",A),J=K("stop",(function(e){G&&e.preventDefault(),I&&I(e)})),ee=K("start",M),te=K("stop",N),ne=K("stop",R),re=K("stop",(function(e){G&&(X(e),V(!1)),w&&w(e)}),!1),ae=ls((function(e){z.current||(z.current=e.currentTarget),q(e)&&(V(!0),_&&_(e)),S&&S(e)})),ie=function(){var e=is.findDOMNode(z.current);return f&&"button"!==f&&!("A"===e.tagName&&e.href)},oe=i.useRef(!1),se=ls((function(e){b&&!oe.current&&G&&U.current&&" "===e.key&&(oe.current=!0,e.persist(),U.current.stop(e,(function(){U.current.start(e)}))),e.target===e.currentTarget&&ie()&&" "===e.key&&e.preventDefault(),C&&C(e),e.target===e.currentTarget&&ie()&&"Enter"===e.key&&!h&&(e.preventDefault(),k&&k(e))})),ue=ls((function(e){b&&" "===e.key&&U.current&&G&&!e.defaultPrevented&&(oe.current=!1,e.persist(),U.current.stop(e,(function(){U.current.pulsate(e)}))),E&&E(e),k&&e.target===e.currentTarget&&ie()&&" "===e.key&&!e.defaultPrevented&&k(e)})),le=f;"button"===le&&B.href&&(le="a");var ce={};"button"===le?(ce.type=F,ce.disabled=h):("a"===le&&B.href||(ce.role="button"),ce["aria-disabled"]=h);var fe=ss(r,t),de=ss(Y,z),he=ss(fe,de),pe=i.useState(!1),ve=pe[0],me=pe[1];i.useEffect((function(){me(!0)}),[]);var ge=ve&&!v&&!h;return i.createElement(le,Ot({className:so(u.root,l,G&&[u.focusVisible,x],h&&u.disabled),onBlur:re,onClick:k,onFocus:ae,onKeyDown:se,onKeyUp:ue,onMouseDown:Z,onMouseLeave:J,onMouseUp:$,onDragLeave:Q,onTouchEnd:te,onTouchMove:ne,onTouchStart:ee,ref:he,tabIndex:h?-1:L},ce,B),s,ge?i.createElement(Ns,Ot({ref:U,center:o},j)):null)})),Ms=no({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(Rs),Os=i.forwardRef((function(e,t){var n=e.edge,r=void 0!==n&&n,a=e.children,o=e.classes,s=e.className,u=e.color,l=void 0===u?"default":u,c=e.disabled,f=void 0!==c&&c,d=e.disableFocusRipple,h=void 0!==d&&d,p=e.size,v=void 0===p?"medium":p,m=Mt(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return i.createElement(Ms,Ot({className:so(o.root,s,"default"!==l&&o["color".concat(uo(l))],f&&o.disabled,"small"===v&&o["size".concat(uo(v))],{start:o.edgeStart,end:o.edgeEnd}[r]),centerRipple:!0,focusRipple:!h,disabled:f,ref:t},m),i.createElement("span",{className:o.label},a))})),Ds=no((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:$t(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:$t(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:$t(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(Os),Ls=JSON.parse('[{"title":"Github","url":"https://github.com/ggarciapato","path":"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm2.218 18.616c-.354.069-.468-.149-.468-.336v-1.921c0-.653-.229-1.079-.481-1.296 1.56-.173 3.198-.765 3.198-3.454 0-.765-.273-1.389-.721-1.879.072-.177.312-.889-.069-1.853 0 0-.587-.188-1.923.717-.561-.154-1.159-.231-1.754-.234-.595.003-1.193.08-1.753.235-1.337-.905-1.925-.717-1.925-.717-.379.964-.14 1.676-.067 1.852-.448.49-.722 1.114-.722 1.879 0 2.682 1.634 3.282 3.189 3.459-.2.175-.381.483-.444.936-.4.179-1.413.488-2.037-.582 0 0-.37-.672-1.073-.722 0 0-.683-.009-.048.426 0 0 .46.215.777 1.024 0 0 .405 1.25 2.353.826v1.303c0 .185-.113.402-.462.337-2.782-.925-4.788-3.549-4.788-6.641 0-3.867 3.135-7 7-7s7 3.133 7 7c0 3.091-2.003 5.715-4.782 6.641z"},{"title":"LinkedIn","url":"https://www.linkedin.com/in/guilherme-garcia-b54900101/","path":"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"},{"title":"Twitter","url":"https://twitter.com/ggarciapato","path":"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"}]');function js(){var e=So();return(0,_o.jsx)($o,{className:e.footer,children:(0,_o.jsx)(as,{container:!0,spacing:0,className:e.socials,children:Ls.map((function(e){return(0,_o.jsx)(as,{item:!0,children:(0,_o.jsx)("a",{href:e.url,children:(0,_o.jsx)(Ds,{children:(0,_o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#ffffff",width:"30",height:"30",viewBox:"0 0 24 24",children:(0,_o.jsx)("path",{d:e.path})})})})},e.title)}))})})}function Ps(){return(0,_o.jsxs)(_o.Fragment,{children:[(0,_o.jsx)(Co,{}),(0,_o.jsx)(yt,{}),(0,_o.jsx)(js,{})]})}var Fs=n(4166);function Bs(){var e=So();return(0,_o.jsx)(_o.Fragment,{children:(0,_o.jsxs)(go,{className:e.container,children:[(0,_o.jsxs)($o,{children:[(0,_o.jsx)(xo,{variant:"h3",children:"About me"}),(0,_o.jsx)(xo,{variant:"body2",children:"Hello. My name is Guilherme Garcia, evolutionary biologist and data scientist. After completing my phD in Evolutionary Biology in the University of S\xe3o Paulo, I have worked as a data scientist at Folha de S. Paulo for four years in the data journalism desk, producing data-driven content for the newspaper."})]}),(0,_o.jsx)($o,{className:e.headshot,children:(0,_o.jsx)("img",{src:Fs,width:"150px",alt:"Guilherme Garcia"})})]})})}var zs=i.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.raised,o=void 0!==a&&a,s=Mt(e,["classes","className","raised"]);return i.createElement(co,Ot({className:so(n.root,r),elevation:o?8:1,ref:t},s))})),Us=no({root:{overflow:"hidden"}},{name:"MuiCard"})(zs),Ws=i.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,o=e.focusVisibleClassName,s=Mt(e,["children","classes","className","focusVisibleClassName"]);return i.createElement(Ms,Ot({className:so(r.root,a),focusVisibleClassName:so(o,r.focusVisible),ref:t},s),n,i.createElement("span",{className:r.focusHighlight}))})),Gs=no((function(e){return{root:{display:"block",textAlign:"inherit",width:"100%","&:hover $focusHighlight":{opacity:e.palette.action.hoverOpacity},"&$focusVisible $focusHighlight":{opacity:.12}},focusVisible:{},focusHighlight:{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}}}),{name:"MuiCardActionArea"})(Ws),Vs=["video","audio","picture","iframe","img"],Hs=i.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,o=e.component,s=void 0===o?"div":o,u=e.image,l=e.src,c=e.style,f=Mt(e,["children","classes","className","component","image","src","style"]),d=-1!==Vs.indexOf(s),h=!d&&u?Ot({backgroundImage:'url("'.concat(u,'")')},c):c;return i.createElement(s,Ot({className:so(r.root,a,d&&r.media,-1!=="picture img".indexOf(s)&&r.img),ref:t,style:h,src:d?u||l:void 0},f),n)})),qs=no({root:{display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},media:{width:"100%"},img:{objectFit:"cover"}},{name:"MuiCardMedia"})(Hs),Xs=i.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.component,o=void 0===a?"div":a,s=Mt(e,["classes","className","component"]);return i.createElement(o,Ot({className:so(n.root,r),ref:t},s))})),Ys=no({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(Xs),Ks=JSON.parse('[{"title":"Temperature Maps for Brazil","image":"temperature_cover.png","description":"Gaussian Process Regression with Tensorflow Probability","alt":"Climate Changes in Brazil","tag":"temperature","jupyter":"true","filename":"temperature_report.ipynb"}]');function Zs(e,t){return(0,_o.jsx)(_o.Fragment,{children:(0,_o.jsx)(as,{container:!0,className:t.cardGrid,spacing:2,justifyContent:"center",children:e.map((function(e){return(0,_o.jsx)(as,{item:!0,xs:12,sm:6,md:4,children:(0,_o.jsx)(Us,{className:t.card,children:(0,_o.jsxs)(Gs,{component:It,to:"/homepage/projects/".concat(e.tag),state:e,children:[(0,_o.jsx)(qs,{className:t.cardMedia,image:n(6303)("./".concat(e.image)),title:e.alt}),(0,_o.jsxs)(Ys,{className:t.cardContent,children:[(0,_o.jsx)(xo,{gutterBottom:!0,variant:"h6",children:e.title}),(0,_o.jsx)(xo,{variant:"subtitle2",children:e.description})]})]})})},e.title)}))})})}function Qs(){var e=So();return(0,_o.jsxs)(_o.Fragment,{children:[(0,_o.jsx)(go,{className:e.projectTitle,children:(0,_o.jsx)(xo,{variant:"h4",children:"Projects"})}),(0,_o.jsx)(go,{children:Zs(Ks,e)})]})}function $s(){return(0,_o.jsxs)(_o.Fragment,{children:[(0,_o.jsx)(Qs,{}),(0,_o.jsx)(Bs,{})]})}function Js(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Js(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Js(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tu=n(5586);function nu(e){return e&&"object"===typeof e?"position"in e||"type"in e?au(e.position):"start"in e||"end"in e?au(e):"line"in e||"column"in e?ru(e):"":""}function ru(e){return iu(e&&e.line)+":"+iu(e&&e.column)}function au(e){return ru(e&&e.start)+"-"+ru(e&&e.end)}function iu(e){return e&&"number"===typeof e?e:1}var ou=function(e){m(n,e);var t=k(n);function n(e,r,a){var i;d(this,n);var o=[null,null],s={start:{line:null,column:null},end:{line:null,column:null}};if(i=t.call(this),"string"===typeof r&&(a=r,r=void 0),"string"===typeof a){var u=a.indexOf(":");-1===u?o[1]=a:(o[0]=a.slice(0,u),o[1]=a.slice(u+1))}return r&&("type"in r||"position"in r?r.position&&(s=r.position):"start"in r||"end"in r?s=r:("line"in r||"column"in r)&&(s.start=r)),i.name=nu(r)||"1:1",i.message="object"===typeof e?e.message:e,i.stack="object"===typeof e?e.stack:"",i.reason=i.message,i.fatal,i.line=s.start.line,i.column=s.start.column,i.source=o[0],i.ruleId=o[1],i.position=s,i.actual,i.expected,i.file,i.url,i.note,i}return p(n)}(M(Error));ou.prototype.file="",ou.prototype.name="",ou.prototype.reason="",ou.prototype.message="",ou.prototype.stack="",ou.prototype.fatal=null,ou.prototype.column=null,ou.prototype.line=null,ou.prototype.source=null,ou.prototype.ruleId=null,ou.prototype.position=null;var su={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');lu(e);var n,r=0,a=-1,i=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;i--;)if(47===e.charCodeAt(i)){if(n){r=i+1;break}}else a<0&&(n=!0,a=i+1);return a<0?"":e.slice(r,a)}if(t===e)return"";var o=-1,s=t.length-1;for(;i--;)if(47===e.charCodeAt(i)){if(n){r=i+1;break}}else o<0&&(n=!0,o=i+1),s>-1&&(e.charCodeAt(i)===t.charCodeAt(s--)?s<0&&(a=i):(s=-1,a=o));r===a?a=o:a<0&&(a=e.length);return e.slice(r,a)},dirname:function(e){if(lu(e),0===e.length)return".";var t,n=-1,r=e.length;for(;--r;)if(47===e.charCodeAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.charCodeAt(0)?"/":".":1===n&&47===e.charCodeAt(0)?"//":e.slice(0,n)},extname:function(e){lu(e);var t,n=e.length,r=-1,a=0,i=-1,o=0;for(;n--;){var s=e.charCodeAt(n);if(47!==s)r<0&&(t=!0,r=n+1),46===s?i<0?i=n:1!==o&&(o=1):i>-1&&(o=-1);else if(t){a=n+1;break}}if(i<0||r<0||0===o||1===o&&i===r-1&&i===a+1)return"";return e.slice(i,r)},join:function(){for(var e,t=-1,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];for(;++t<r.length;)lu(r[t]),r[t]&&(e=void 0===e?r[t]:e+"/"+r[t]);return void 0===e?".":uu(e)},sep:"/"};function uu(e){lu(e);var t=47===e.charCodeAt(0),n=function(e,t){var n,r,a="",i=0,o=-1,s=0,u=-1;for(;++u<=e.length;){if(u<e.length)n=e.charCodeAt(u);else{if(47===n)break;n=47}if(47===n){if(o===u-1||1===s);else if(o!==u-1&&2===s){if(a.length<2||2!==i||46!==a.charCodeAt(a.length-1)||46!==a.charCodeAt(a.length-2))if(a.length>2){if((r=a.lastIndexOf("/"))!==a.length-1){r<0?(a="",i=0):i=(a=a.slice(0,r)).length-1-a.lastIndexOf("/"),o=u,s=0;continue}}else if(a.length>0){a="",i=0,o=u,s=0;continue}t&&(a=a.length>0?a+"/..":"..",i=2)}else a.length>0?a+="/"+e.slice(o+1,u):a=e.slice(o+1,u),i=u-o-1;o=u,s=0}else 46===n&&s>-1?s++:s=-1}return a}(e,!t);return 0!==n.length||t||(n="."),n.length>0&&47===e.charCodeAt(e.length-1)&&(n+="/"),t?"/"+n:n}function lu(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}var cu={cwd:function(){return"/"}};function fu(e){return null!==e&&"object"===typeof e&&e.href&&e.origin}function du(e){if("string"===typeof e)e=new URL(e);else if(!fu(e)){var t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){var n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return function(e){if(""!==e.hostname){var t=new TypeError('File URL host must be "localhost" or empty on darwin');throw t.code="ERR_INVALID_FILE_URL_HOST",t}var n=e.pathname,r=-1;for(;++r<n.length;)if(37===n.charCodeAt(r)&&50===n.charCodeAt(r+1)){var a=n.charCodeAt(r+2);if(70===a||102===a){var i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(n)}(e)}var hu=["history","path","basename","stem","extname","dirname"],pu=function(){function e(t){var n;d(this,e),n=t?"string"===typeof t||tu(t)?{value:t}:fu(t)?{path:t}:t:{},this.data={},this.messages=[],this.history=[],this.cwd=cu.cwd(),this.value,this.stored,this.result,this.map;for(var r,a=-1;++a<hu.length;){var i=hu[a];i in n&&void 0!==n[i]&&(this[i]="history"===i?f(n[i]):n[i])}for(r in n)hu.includes(r)||(this[r]=n[r])}return p(e,[{key:"path",get:function(){return this.history[this.history.length-1]},set:function(e){fu(e)&&(e=du(e)),mu(e,"path"),this.path!==e&&this.history.push(e)}},{key:"dirname",get:function(){return"string"===typeof this.path?su.dirname(this.path):void 0},set:function(e){gu(this.basename,"dirname"),this.path=su.join(e||"",this.basename)}},{key:"basename",get:function(){return"string"===typeof this.path?su.basename(this.path):void 0},set:function(e){mu(e,"basename"),vu(e,"basename"),this.path=su.join(this.dirname||"",e)}},{key:"extname",get:function(){return"string"===typeof this.path?su.extname(this.path):void 0},set:function(e){if(vu(e,"extname"),gu(this.dirname,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=su.join(this.dirname,this.stem+(e||""))}},{key:"stem",get:function(){return"string"===typeof this.path?su.basename(this.path,this.extname):void 0},set:function(e){mu(e,"stem"),vu(e,"stem"),this.path=su.join(this.dirname||"",e+(this.extname||""))}},{key:"toString",value:function(e){return(this.value||"").toString(e)}},{key:"message",value:function(e,t,n){var r=new ou(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}},{key:"info",value:function(e,t,n){var r=this.message(e,t,n);return r.fatal=null,r}},{key:"fail",value:function(e,t,n){var r=this.message(e,t,n);throw r.fatal=!0,r}}]),e}();function vu(e,t){if(e&&e.includes(su.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+su.sep+"`")}function mu(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function gu(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function yu(e){return S(e)||l(e)||c(e)||_()}function bu(e){if(e)throw e}var xu=n(1132);function wu(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ku(e,t){var n;return function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];var s,u=e.length>i.length;u&&i.push(r);try{s=e.apply(this,i)}catch(c){var l=c;if(u&&n)throw l;return r(l)}u||(s instanceof Promise?s.then(a,r):s instanceof Error?r(s):a(s))};function r(e){if(!n){n=!0;for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];t.apply(void 0,[e].concat(a))}}function a(e){r(null,e)}}var Su=function e(){var t,n=function(){var e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=-1,i=n.pop();if("function"!==typeof i)throw new TypeError("Expected function as last argument, not "+i);function o(t){var r=e[++a],s=-1;if(t)i(t);else{for(var u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];for(;++s<n.length;)null!==l[s]&&void 0!==l[s]||(l[s]=n[s]);n=l,r?ku(r,o).apply(void 0,l):i.apply(void 0,[null].concat(l))}}o.apply(void 0,[null].concat(f(n)))},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}(),r=[],a={},i=-1;return o.data=function(e,n){if("string"===typeof e)return 2===arguments.length?(Iu("data",t),a[e]=n,o):_u.call(a,e)&&a[e]||null;if(e)return Iu("data",t),a=e,o;return a},o.Parser=void 0,o.Compiler=void 0,o.freeze=function(){if(t)return o;for(;++i<r.length;){var e=yu(r[i]),a=e[0],s=e.slice(1);if(!1!==s[0]){!0===s[0]&&(s[0]=void 0);var u=a.call.apply(a,[o].concat(f(s)));"function"===typeof u&&n.use(u)}}return t=!0,i=Number.POSITIVE_INFINITY,o},o.attachers=r,o.use=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var u;if(Iu("use",t),null===e||void 0===e);else if("function"===typeof e)h.apply(void 0,[e].concat(i));else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?d(e):c(e)}u&&(a.settings=Object.assign(a.settings||{},u));return o;function l(e){if("function"===typeof e)h(e);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){var t=yu(e),n=t[0],r=t.slice(1);h.apply(void 0,[n].concat(f(r)))}else c(e)}}function c(e){d(e.plugins),e.settings&&(u=Object.assign(u||{},e.settings))}function d(e){var t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){l(e[t])}}}function h(e,t){for(var n,a=-1;++a<r.length;)if(r[a][0]===e){n=r[a];break}n?(wu(n[1])&&wu(t)&&(t=xu(!0,n[1],t)),n[1]=t):r.push(Array.prototype.slice.call(arguments))}},o.parse=function(e){o.freeze();var t=Ru(e),n=o.Parser;if(Eu("parse",n),Cu(n,"parse"))return new n(String(t),t).parse();return n(String(t),t)},o.stringify=function(e,t){o.freeze();var n=Ru(t),r=o.Compiler;if(Tu("stringify",r),Au(e),Cu(r,"compile"))return new r(e,n).compile();return r(e,n)},o.run=function(e,t,r){Au(e),o.freeze(),r||"function"!==typeof t||(r=t,t=void 0);if(!r)return new Promise(a);function a(a,i){function o(t,n,o){n=n||e,t?i(t):a?a(n):r(null,n,o)}n.run(e,Ru(t),o)}a(null,r)},o.runSync=function(e,t){var n,r;return o.run(e,t,a),Nu("runSync","run",r),n;function a(e,t){bu(e),n=t,r=!0}},o.process=function(e,t){if(o.freeze(),Eu("process",o.Parser),Tu("process",o.Compiler),!t)return new Promise(n);function n(n,r){var a=Ru(e);function i(e,a){e||!a?r(e):n?n(a):t(null,a)}o.run(o.parse(a),a,(function(e,t,n){if(!e&&t&&n){var r=o.stringify(t,n);void 0===r||null===r||("string"===typeof(a=r)||tu(a)?n.value=r:n.result=r),i(e,n)}else i(e);var a}))}n(null,t)},o.processSync=function(e){var t;o.freeze(),Eu("processSync",o.Parser),Tu("processSync",o.Compiler);var n=Ru(e);return o.process(n,r),Nu("processSync","process",t),n;function r(e){t=!0,bu(e)}},o;function o(){for(var t=e(),n=-1;++n<r.length;)t.use.apply(t,f(r[n]));return t.data(xu(!0,{},a)),t}}().freeze(),_u={}.hasOwnProperty;function Cu(e,t){return"function"===typeof e&&e.prototype&&(function(e){var t;for(t in e)if(_u.call(e,t))return!0;return!1}(e.prototype)||t in e.prototype)}function Eu(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `Parser`")}function Tu(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `Compiler`")}function Iu(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Au(e){if(!wu(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function Nu(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ru(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new pu(e)}function Mu(e,t){var n=(t||{}).includeImageAlt;return Ou(e,void 0===n||n)}function Ou(e,t){return e&&"object"===typeof e&&(e.value||(t?e.alt:"")||"children"in e&&Du(e.children,t)||Array.isArray(e)&&Du(e,t))||""}function Du(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=Ou(e[r],t);return n.join("")}function Lu(e,t,n,r){var a,i=e.length,o=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,r.length<1e4)(a=Array.from(r)).unshift(t,n),[].splice.apply(e,a);else for(n&&[].splice.apply(e,[t,n]);o<r.length;)(a=r.slice(o,o+1e4)).unshift(t,0),[].splice.apply(e,a),o+=1e4,t+=1e4}function ju(e,t){return e.length>0?(Lu(e,e.length,0,t),e):t}var Pu={}.hasOwnProperty;function Fu(e){for(var t={},n=-1;++n<e.length;)Bu(t,e[n]);return t}function Bu(e,t){var n;for(n in t){var r=(Pu.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n],i=void 0;for(i in a){Pu.call(r,i)||(r[i]=[]);var o=a[i];zu(r[i],Array.isArray(o)?o:o?[o]:[])}}}function zu(e,t){for(var n=-1,r=[];++n<t.length;)("after"===t[n].add?e:r).push(t[n]);Lu(e,0,0,r)}var Uu=Ju(/[A-Za-z]/),Wu=Ju(/\d/),Gu=Ju(/[\dA-Fa-f]/),Vu=Ju(/[\dA-Za-z]/),Hu=Ju(/[!-/:-@[-`{-~]/),qu=Ju(/[#-'*+\--9=?A-Z^-~]/);function Xu(e){return null!==e&&(e<32||127===e)}function Yu(e){return null!==e&&(e<0||32===e)}function Ku(e){return null!==e&&e<-2}function Zu(e){return-2===e||-1===e||32===e}var Qu=Ju(/\s/),$u=Ju(/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/);function Ju(e){return function(t){return null!==t&&e.test(String.fromCharCode(t))}}function el(e,t,n,r){var a=r?r-1:Number.POSITIVE_INFINITY,i=0;return function(r){if(Zu(r))return e.enter(n),o(r);return t(r)};function o(r){return Zu(r)&&i++<a?(e.consume(r),o):(e.exit(n),t(r))}}var tl={tokenize:function(e){var t,n=e.attempt(this.parser.constructs.contentInitial,(function(t){if(null===t)return void e.consume(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),el(e,n,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));return n;function r(n){var r=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=r),t=r,a(n)}function a(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Ku(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),a)}}};var nl={tokenize:function(e){var t,n,r,a=this,i=[],o=0;return s;function s(t){if(o<i.length){var n=i[o];return a.containerState=n[1],e.attempt(n[0].continuation,u,l)(t)}return l(t)}function u(e){if(o++,a.containerState._closeFlow){a.containerState._closeFlow=void 0,t&&y();for(var n,r=a.events.length,i=r;i--;)if("exit"===a.events[i][0]&&"chunkFlow"===a.events[i][1].type){n=a.events[i][1].end;break}g(o);for(var u=r;u<a.events.length;)a.events[u][1].end=Object.assign({},n),u++;return Lu(a.events,i+1,0,a.events.slice(r)),a.events.length=u,l(e)}return s(e)}function l(n){if(o===i.length){if(!t)return d(n);if(t.currentConstruct&&t.currentConstruct.concrete)return p(n);a.interrupt=Boolean(t.currentConstruct&&!t._gfmTableDynamicInterruptHack)}return a.containerState={},e.check(rl,c,f)(n)}function c(e){return t&&y(),g(o),d(e)}function f(e){return a.parser.lazy[a.now().line]=o!==i.length,r=a.now().offset,p(e)}function d(t){return a.containerState={},e.attempt(rl,h,p)(t)}function h(e){return o++,i.push([a.currentConstruct,a.containerState]),d(e)}function p(r){return null===r?(t&&y(),g(0),void e.consume(r)):(t=t||a.parser.flow(a.now()),e.enter("chunkFlow",{contentType:"flow",previous:n,_tokenizer:t}),v(r))}function v(t){return null===t?(m(e.exit("chunkFlow"),!0),g(0),void e.consume(t)):Ku(t)?(e.consume(t),m(e.exit("chunkFlow")),o=0,a.interrupt=void 0,s):(e.consume(t),v)}function m(e,i){var s=a.sliceStream(e);if(i&&s.push(null),e.previous=n,n&&(n.next=e),n=e,t.defineSkip(e.start),t.write(s),a.parser.lazy[e.start.line]){for(var u=t.events.length;u--;)if(t.events[u][1].start.offset<r&&(!t.events[u][1].end||t.events[u][1].end.offset>r))return;for(var l,c,f=a.events.length,d=f;d--;)if("exit"===a.events[d][0]&&"chunkFlow"===a.events[d][1].type){if(l){c=a.events[d][1].end;break}l=!0}for(g(o),u=f;u<a.events.length;)a.events[u][1].end=Object.assign({},c),u++;Lu(a.events,d+1,0,a.events.slice(f)),a.events.length=u}}function g(t){for(var n=i.length;n-- >t;){var r=i[n];a.containerState=r[1],r[0].exit.call(a,e)}i.length=t}function y(){t.write([null]),n=void 0,t=void 0,a.containerState._closeFlow=void 0}}},rl={tokenize:function(e,t,n){return el(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};var al={tokenize:function(e,t,n){return el(e,(function(e){return null===e||Ku(e)?t(e):n(e)}),"linePrefix")},partial:!0};function il(e){for(var t,n,r,a,i,o,s,u={},l=-1;++l<e.length;){for(;l in u;)l=u[l];if(t=e[l],l&&"chunkFlow"===t[1].type&&"listItemPrefix"===e[l-1][1].type&&((r=0)<(o=t[1]._tokenizer.events).length&&"lineEndingBlank"===o[r][1].type&&(r+=2),r<o.length&&"content"===o[r][1].type))for(;++r<o.length&&"content"!==o[r][1].type;)"chunkText"===o[r][1].type&&(o[r][1]._isInFirstContentOfListItem=!0,r++);if("enter"===t[0])t[1].contentType&&(Object.assign(u,ol(e,l)),l=u[l],s=!0);else if(t[1]._container){for(r=l,n=void 0;r--&&("lineEnding"===(a=e[r])[1].type||"lineEndingBlank"===a[1].type);)"enter"===a[0]&&(n&&(e[n][1].type="lineEndingBlank"),a[1].type="lineEnding",n=r);n&&(t[1].end=Object.assign({},e[n][1].start),(i=e.slice(n,l)).unshift(t),Lu(e,n,l-n+1,i))}}return!s}function ol(e,t){for(var n,r,a=e[t][1],i=e[t][2],o=t-1,s=[],u=a._tokenizer||i.parser[a.contentType](a.start),l=u.events,c=[],f={},d=-1,h=a,p=0,v=0,m=[v];h;){for(;e[++o][1]!==h;);s.push(o),h._tokenizer||(n=i.sliceStream(h),h.next||n.push(null),r&&u.defineSkip(h.start),h._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(n),h._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),r=h,h=h.next}for(h=a;++d<l.length;)"exit"===l[d][0]&&"enter"===l[d-1][0]&&l[d][1].type===l[d-1][1].type&&l[d][1].start.line!==l[d][1].end.line&&(v=d+1,m.push(v),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(u.events=[],h?(h._tokenizer=void 0,h.previous=void 0):m.pop(),d=m.length;d--;){var g=l.slice(m[d],m[d+1]),y=s.pop();c.unshift([y,y+g.length-1]),Lu(e,y,2,g)}for(d=-1;++d<c.length;)f[p+c[d][0]]=p+c[d][1],p+=c[d][1]-c[d][0]-1;return f}var sl={tokenize:function(e,t){var n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?a(t):Ku(t)?e.check(ul,i,a)(t):(e.consume(t),r)}function a(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function i(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}},resolve:function(e){return il(e),e}},ul={tokenize:function(e,t,n){var r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),el(e,a,"linePrefix")};function a(a){if(null===a||Ku(a))return n(a);var i=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}},partial:!0};var ll={tokenize:function(e){var t=this,n=e.attempt(al,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,el(e,e.attempt(this.parser.constructs.flow,r,e.attempt(sl,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};var cl={resolveAll:pl()},fl=hl("string"),dl=hl("text");function hl(e){return{tokenize:function(t){var n=this,r=this.parser.constructs[e],a=t.attempt(r,i,o);return i;function i(e){return u(e)?a(e):o(e)}function o(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return u(e)?(t.exit("data"),a(e)):(t.consume(e),s)}function u(e){if(null===e)return!0;var t=r[e],a=-1;if(t)for(;++a<t.length;){var i=t[a];if(!i.previous||i.previous.call(n,n.previous))return!0}return!1}},resolveAll:pl("text"===e?vl:void 0)}}function pl(e){return function(t,n){var r,a=-1;for(;++a<=t.length;)void 0===r?t[a]&&"data"===t[a][1].type&&(r=a,a++):t[a]&&"data"===t[a][1].type||(a!==r+2&&(t[r][1].end=t[a-1][1].end,t.splice(r+2,a-r-2),a=r+2),r=void 0);return e?e(t,n):t}}function vl(e,t){for(var n=0;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){for(var r=e[n-1][1],a=t.sliceStream(r),i=a.length,o=-1,s=0,u=void 0;i--;){var l=a[i];if("string"===typeof l){for(o=l.length;32===l.charCodeAt(o-1);)s++,o--;if(o)break;o=-1}else if(-2===l)u=!0,s++;else if(-1!==l){i++;break}}if(s){var c={type:n===e.length||u||s<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-s,offset:r.end.offset-s,_index:r.start._index+i,_bufferIndex:i?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},c.start),r.start.offset===r.end.offset?Object.assign(r,c):(e.splice(n,0,["enter",c,t],["exit",c,t]),n+=2)}n++}return e}function ml(e,t,n){for(var r=[],a=-1;++a<e.length;){var i=e[a].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}function gl(e,t,n){var r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),a={},i=[],o=[],s=[],u={consume:function(e){Ku(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,b()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++));l.previous=e,!0},enter:function(e,t){var n=t||{};return n.type=e,n.start=h(),l.events.push(["enter",n,l]),s.push(n),n},exit:function(e){var t=s.pop();return t.end=h(),l.events.push(["exit",t,l]),t},attempt:g((function(e,t){y(e,t.from)})),check:g(m),interrupt:g(m,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:d,sliceSerialize:function(e,t){return function(e,t){var n,r=-1,a=[];for(;++r<e.length;){var i=e[r],o=void 0;if("string"===typeof i)o=i;else switch(i){case-5:o="\r";break;case-4:o="\n";break;case-3:o="\r\n";break;case-2:o=t?" ":"\t";break;case-1:if(!t&&n)continue;o=" ";break;default:o=String.fromCharCode(i)}n=-2===i,a.push(o)}return a.join("")}(d(e),t)},now:h,defineSkip:function(e){a[e.line]=e.column,b()},write:function(e){if(o=ju(o,e),p(),null!==o[o.length-1])return[];return y(t,0),l.events=ml(i,l.events,l),l.events}},c=t.tokenize.call(l,u);return t.resolveAll&&i.push(t),l;function d(e){return function(e,t){var n,r=t.start._index,a=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;r===i?n=[e[r].slice(a,o)]:(n=e.slice(r,i),a>-1&&(n[0]=n[0].slice(a)),o>0&&n.push(e[i].slice(0,o)));return n}(o,e)}function h(){return Object.assign({},r)}function p(){for(var e;r._index<o.length;){var t=o[r._index];if("string"===typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)v(t.charCodeAt(r._bufferIndex));else v(t)}}function v(e){void 0,e,c=c(e)}function m(e,t){t.restore()}function g(e,t){return function(n,a,i){var o,c,d,p;return Array.isArray(n)?v(n):"tokenize"in n?v([n]):function(e){return t;function t(t){var n=null!==t&&e[t],r=null!==t&&e.null;return v([].concat(f(Array.isArray(n)?n:n?[n]:[]),f(Array.isArray(r)?r:r?[r]:[])))(t)}}(n);function v(e){return o=e,c=0,0===e.length?i:m(e[c])}function m(e){return function(n){p=function(){var e=h(),t=l.previous,n=l.currentConstruct,a=l.events.length,i=Array.from(s);return{restore:o,from:a};function o(){r=e,l.previous=t,l.currentConstruct=n,l.events.length=a,s=i,b()}}(),d=e,e.partial||(l.currentConstruct=e);if(e.name&&l.parser.constructs.disable.null.includes(e.name))return y(n);return e.tokenize.call(t?Object.assign(Object.create(l),t):l,u,g,y)(n)}}function g(t){return!0,e(d,p),a}function y(e){return!0,p.restore(),++c<o.length?m(o[c]):i}}}function y(e,t){e.resolveAll&&!i.includes(e)&&i.push(e),e.resolve&&Lu(l.events,t,l.events.length-t,e.resolve(l.events.slice(t),l)),e.resolveTo&&(l.events=e.resolveTo(l.events,l))}function b(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}var yl={name:"thematicBreak",tokenize:function(e,t,n){var r,a=0;return function(t){return e.enter("thematicBreak"),r=t,i(t)};function i(s){return s===r?(e.enter("thematicBreakSequence"),o(s)):Zu(s)?el(e,i,"whitespace")(s):a<3||null!==s&&!Ku(s)?n(s):(e.exit("thematicBreak"),t(s))}function o(t){return t===r?(e.consume(t),a++,o):(e.exit("thematicBreakSequence"),i(t))}}};var bl={name:"list",tokenize:function(e,t,n){var r=this,a=r.events[r.events.length-1],i=a&&"linePrefix"===a[1].type?a[2].sliceSerialize(a[1],!0).length:0,o=0;return function(t){var a=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===a?!r.containerState.marker||t===r.containerState.marker:Wu(t)){if(r.containerState.type||(r.containerState.type=a,e.enter(a,{_container:!0})),"listUnordered"===a)return e.enter("listItemPrefix"),42===t||45===t?e.check(yl,n,u)(t):u(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return Wu(t)&&++o<10?(e.consume(t),s):(!r.interrupt||o<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),u(t)):n(t)}function u(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(al,r.interrupt?n:l,e.attempt(xl,f,c))}function l(e){return r.containerState.initialBlankLine=!0,i++,f(e)}function c(t){return Zu(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),f):n(t)}function f(n){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){var r=this;return r.containerState._closeFlow=void 0,e.check(al,a,i);function a(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,el(e,t,"listItemIndent",r.containerState.size+1)(n)}function i(n){return r.containerState.furtherBlankLines||!Zu(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(wl,t,o)(n))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,el(e,e.attempt(bl,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}},exit:function(e){e.exit(this.containerState.type)}},xl={tokenize:function(e,t,n){var r=this;return el(e,(function(e){var a=r.events[r.events.length-1];return!Zu(e)&&a&&"listItemPrefixWhitespace"===a[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},wl={tokenize:function(e,t,n){var r=this;return el(e,(function(e){var a=r.events[r.events.length-1];return a&&"listItemIndent"===a[1].type&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)},partial:!0};var kl={name:"blockQuote",tokenize:function(e,t,n){var r=this;return function(t){if(62===t){var i=r.containerState;return i.open||(e.enter("blockQuote",{_container:!0}),i.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),a}return n(t)};function a(n){return Zu(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){return el(e,e.attempt(kl,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},exit:function(e){e.exit("blockQuote")}};function Sl(e,t,n,r,a,i,o,s,u){var l=u||Number.POSITIVE_INFINITY,c=0;return function(t){if(60===t)return e.enter(r),e.enter(a),e.enter(i),e.consume(t),e.exit(i),f;if(null===t||41===t||Xu(t))return n(t);return e.enter(r),e.enter(o),e.enter(s),e.enter("chunkString",{contentType:"string"}),p(t)};function f(n){return 62===n?(e.enter(i),e.consume(n),e.exit(i),e.exit(a),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),d(n))}function d(t){return 62===t?(e.exit("chunkString"),e.exit(s),f(t)):null===t||60===t||Ku(t)?n(t):(e.consume(t),92===t?h:d)}function h(t){return 60===t||62===t||92===t?(e.consume(t),d):d(t)}function p(a){return 40===a?++c>l?n(a):(e.consume(a),p):41===a?c--?(e.consume(a),p):(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(a)):null===a||Yu(a)?c?n(a):(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(r),t(a)):Xu(a)?n(a):(e.consume(a),92===a?v:p)}function v(t){return 40===t||41===t||92===t?(e.consume(t),p):p(t)}}function _l(e,t,n,r,a,i){var o,s=this,u=0;return function(t){return e.enter(r),e.enter(a),e.consume(t),e.exit(a),e.enter(i),l};function l(f){return null===f||91===f||93===f&&!o||94===f&&!u&&"_hiddenFootnoteSupport"in s.parser.constructs||u>999?n(f):93===f?(e.exit(i),e.enter(a),e.consume(f),e.exit(a),e.exit(r),t):Ku(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),l):(e.enter("chunkString",{contentType:"string"}),c(f))}function c(t){return null===t||91===t||93===t||Ku(t)||u++>999?(e.exit("chunkString"),l(t)):(e.consume(t),o=o||!Zu(t),92===t?f:c)}function f(t){return 91===t||92===t||93===t?(e.consume(t),u++,c):c(t)}}function Cl(e,t,n,r,a,i){var o;return function(t){return e.enter(r),e.enter(a),e.consume(t),e.exit(a),o=40===t?41:t,s};function s(n){return n===o?(e.enter(a),e.consume(n),e.exit(a),e.exit(r),t):(e.enter(i),u(n))}function u(t){return t===o?(e.exit(i),s(o)):null===t?n(t):Ku(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),el(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),l(t))}function l(t){return t===o||null===t||Ku(t)?(e.exit("chunkString"),u(t)):(e.consume(t),92===t?c:l)}function c(t){return t===o||92===t?(e.consume(t),l):l(t)}}function El(e,t){var n;return function r(a){if(Ku(a))return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r;if(Zu(a))return el(e,r,n?"linePrefix":"lineSuffix")(a);return t(a)}}function Tl(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}var Il={name:"definition",tokenize:function(e,t,n){var r,a=this;return function(t){return e.enter("definition"),_l.call(a,e,i,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function i(t){return r=Tl(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),El(e,Sl(e,e.attempt(Al,el(e,o,"whitespace"),el(e,o,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function o(i){return null===i||Ku(i)?(e.exit("definition"),a.parser.defined.includes(r)||a.parser.defined.push(r),t(i)):n(i)}}},Al={tokenize:function(e,t,n){return function(t){return Yu(t)?El(e,r)(t):n(t)};function r(t){return 34===t||39===t||40===t?Cl(e,el(e,a,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function a(e){return null===e||Ku(e)?t(e):n(e)}},partial:!0};var Nl={name:"codeIndented",tokenize:function(e,t,n){var r=this;return function(t){return e.enter("codeIndented"),el(e,a,"linePrefix",5)(t)};function a(e){var t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?i(e):n(e)}function i(t){return null===t?s(t):Ku(t)?e.attempt(Rl,i,s)(t):(e.enter("codeFlowValue"),o(t))}function o(t){return null===t||Ku(t)?(e.exit("codeFlowValue"),i(t)):(e.consume(t),o)}function s(n){return e.exit("codeIndented"),t(n)}}},Rl={tokenize:function(e,t,n){var r=this;return a;function a(t){return r.parser.lazy[r.now().line]?n(t):Ku(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a):el(e,i,"linePrefix",5)(t)}function i(e){var i=r.events[r.events.length-1];return i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(e):Ku(e)?a(e):n(e)}},partial:!0};var Ml={name:"headingAtx",tokenize:function(e,t,n){var r=this,a=0;return function(t){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),i(t)};function i(s){return 35===s&&a++<6?(e.consume(s),i):null===s||Yu(s)?(e.exit("atxHeadingSequence"),r.interrupt?t(s):o(s)):n(s)}function o(n){return 35===n?(e.enter("atxHeadingSequence"),s(n)):null===n||Ku(n)?(e.exit("atxHeading"),t(n)):Zu(n)?el(e,o,"whitespace")(n):(e.enter("atxHeadingText"),u(n))}function s(t){return 35===t?(e.consume(t),s):(e.exit("atxHeadingSequence"),o(t))}function u(t){return null===t||35===t||Yu(t)?(e.exit("atxHeadingText"),o(t)):(e.consume(t),u)}},resolve:function(e,t){var n,r,a=e.length-2,i=3;"whitespace"===e[i][1].type&&(i+=2);a-2>i&&"whitespace"===e[a][1].type&&(a-=2);"atxHeadingSequence"===e[a][1].type&&(i===a-1||a-4>i&&"whitespace"===e[a-2][1].type)&&(a-=i+1===a?2:4);a>i&&(n={type:"atxHeadingText",start:e[i][1].start,end:e[a][1].end},r={type:"chunkText",start:e[i][1].start,end:e[a][1].end,contentType:"text"},Lu(e,i,a-i+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e}};var Ol={name:"setextUnderline",tokenize:function(e,t,n){var r,a,i=this,o=i.events.length;for(;o--;)if("lineEnding"!==i.events[o][1].type&&"linePrefix"!==i.events[o][1].type&&"content"!==i.events[o][1].type){a="paragraph"===i.events[o][1].type;break}return function(t){if(!i.parser.lazy[i.now().line]&&(i.interrupt||a))return e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),r=t,s(t);return n(t)};function s(t){return t===r?(e.consume(t),s):(e.exit("setextHeadingLineSequence"),el(e,u,"lineSuffix")(t))}function u(r){return null===r||Ku(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){var n,r,a,i=e.length;for(;i--;)if("enter"===e[i][0]){if("content"===e[i][1].type){n=i;break}"paragraph"===e[i][1].type&&(r=i)}else"content"===e[i][1].type&&e.splice(i,1),a||"definition"!==e[i][1].type||(a=i);var o={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",a?(e.splice(r,0,["enter",o,t]),e.splice(a+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[a][1].end)):e[n][1]=o;return e.push(["exit",o,t]),e}};var Dl=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ll=["pre","script","style","textarea"],jl={name:"htmlFlow",tokenize:function(e,t,n){var r,a,i,o,s,u=this;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),l};function l(o){return 33===o?(e.consume(o),c):47===o?(e.consume(o),h):63===o?(e.consume(o),r=3,u.interrupt?t:D):Uu(o)?(e.consume(o),i=String.fromCharCode(o),a=!0,p):n(o)}function c(a){return 45===a?(e.consume(a),r=2,f):91===a?(e.consume(a),r=5,i="CDATA[",o=0,d):Uu(a)?(e.consume(a),r=4,u.interrupt?t:D):n(a)}function f(r){return 45===r?(e.consume(r),u.interrupt?t:D):n(r)}function d(r){return r===i.charCodeAt(o++)?(e.consume(r),o===i.length?u.interrupt?t:E:d):n(r)}function h(t){return Uu(t)?(e.consume(t),i=String.fromCharCode(t),p):n(t)}function p(o){return null===o||47===o||62===o||Yu(o)?47!==o&&a&&Ll.includes(i.toLowerCase())?(r=1,u.interrupt?t(o):E(o)):Dl.includes(i.toLowerCase())?(r=6,47===o?(e.consume(o),v):u.interrupt?t(o):E(o)):(r=7,u.interrupt&&!u.parser.lazy[u.now().line]?n(o):a?g(o):m(o)):45===o||Vu(o)?(e.consume(o),i+=String.fromCharCode(o),p):n(o)}function v(r){return 62===r?(e.consume(r),u.interrupt?t:E):n(r)}function m(t){return Zu(t)?(e.consume(t),m):_(t)}function g(t){return 47===t?(e.consume(t),_):58===t||95===t||Uu(t)?(e.consume(t),y):Zu(t)?(e.consume(t),g):_(t)}function y(t){return 45===t||46===t||58===t||95===t||Vu(t)?(e.consume(t),y):b(t)}function b(t){return 61===t?(e.consume(t),x):Zu(t)?(e.consume(t),b):g(t)}function x(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),s=t,w):Zu(t)?(e.consume(t),x):(s=null,k(t))}function w(t){return null===t||Ku(t)?n(t):t===s?(e.consume(t),S):(e.consume(t),w)}function k(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t||Yu(t)?b(t):(e.consume(t),k)}function S(e){return 47===e||62===e||Zu(e)?g(e):n(e)}function _(t){return 62===t?(e.consume(t),C):n(t)}function C(t){return Zu(t)?(e.consume(t),C):null===t||Ku(t)?E(t):n(t)}function E(t){return 45===t&&2===r?(e.consume(t),N):60===t&&1===r?(e.consume(t),R):62===t&&4===r?(e.consume(t),L):63===t&&3===r?(e.consume(t),D):93===t&&5===r?(e.consume(t),O):!Ku(t)||6!==r&&7!==r?null===t||Ku(t)?T(t):(e.consume(t),E):e.check(Pl,L,T)(t)}function T(t){return e.exit("htmlFlowData"),I(t)}function I(t){return null===t?j(t):Ku(t)?e.attempt({tokenize:A,partial:!0},I,j)(t):(e.enter("htmlFlowData"),E(t))}function A(e,t,n){return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r};function r(e){return u.parser.lazy[u.now().line]?n(e):t(e)}}function N(t){return 45===t?(e.consume(t),D):E(t)}function R(t){return 47===t?(e.consume(t),i="",M):E(t)}function M(t){return 62===t&&Ll.includes(i.toLowerCase())?(e.consume(t),L):Uu(t)&&i.length<8?(e.consume(t),i+=String.fromCharCode(t),M):E(t)}function O(t){return 93===t?(e.consume(t),D):E(t)}function D(t){return 62===t?(e.consume(t),L):45===t&&2===r?(e.consume(t),D):E(t)}function L(t){return null===t||Ku(t)?(e.exit("htmlFlowData"),j(t)):(e.consume(t),L)}function j(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){var t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},Pl={tokenize:function(e,t,n){return function(r){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),e.attempt(al,t,n)}},partial:!0};var Fl={name:"codeFenced",tokenize:function(e,t,n){var r,a=this,i={tokenize:function(e,t,n){var a=0;return el(e,i,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function i(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),o(t)}function o(t){return t===r?(e.consume(t),a++,o):a<l?n(t):(e.exit("codeFencedFenceSequence"),el(e,s,"whitespace")(t))}function s(r){return null===r||Ku(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0},o={tokenize:function(e,t,n){var r=this;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i}function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},s=this.events[this.events.length-1],u=s&&"linePrefix"===s[1].type?s[2].sliceSerialize(s[1],!0).length:0,l=0;return function(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),r=t,c(t)};function c(t){return t===r?(e.consume(t),l++,c):(e.exit("codeFencedFenceSequence"),l<3?n(t):el(e,f,"whitespace")(t))}function f(t){return null===t||Ku(t)?v(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(t))}function d(t){return null===t||Yu(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),el(e,h,"whitespace")(t)):96===t&&t===r?n(t):(e.consume(t),d)}function h(t){return null===t||Ku(t)?v(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(t))}function p(t){return null===t||Ku(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),v(t)):96===t&&t===r?n(t):(e.consume(t),p)}function v(n){return e.exit("codeFencedFence"),a.interrupt?t(n):m(n)}function m(t){return null===t?y(t):Ku(t)?e.attempt(o,e.attempt(i,y,u?el(e,m,"linePrefix",u+1):m),y)(t):(e.enter("codeFlowValue"),g(t))}function g(t){return null===t||Ku(t)?(e.exit("codeFlowValue"),m(t)):(e.consume(t),g)}function y(n){return e.exit("codeFenced"),t(n)}},concrete:!0};var Bl=document.createElement("i");function zl(e){var t="&"+e+";";Bl.innerHTML=t;var n=Bl.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}var Ul={name:"characterReference",tokenize:function(e,t,n){var r,a,i=this,o=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),r=31,a=Vu,l(t))}function u(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),r=6,a=Gu,l):(e.enter("characterReferenceValue"),r=7,a=Wu,l(t))}function l(s){var u;return 59===s&&o?(u=e.exit("characterReferenceValue"),a!==Vu||zl(i.sliceSerialize(u))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)):a(s)&&o++<r?(e.consume(s),l):n(s)}}};var Wl={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return Hu(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};var Gl={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),el(e,t,"linePrefix")}}};var Vl={name:"labelEnd",tokenize:function(e,t,n){var r,a,i=this,o=i.events.length;for(;o--;)if(("labelImage"===i.events[o][1].type||"labelLink"===i.events[o][1].type)&&!i.events[o][1]._balanced){r=i.events[o][1];break}return function(t){if(!r)return n(t);return r._inactive?u(t):(a=i.parser.defined.includes(Tl(i.sliceSerialize({start:r.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s)};function s(n){return 40===n?e.attempt(Hl,t,a?t:u)(n):91===n?e.attempt(ql,t,a?e.attempt(Xl,t,u):u)(n):a?t(n):u(n)}function u(e){return r._balanced=!0,n(e)}},resolveTo:function(e,t){var n,r,a,i,o=e.length,s=0;for(;o--;)if(n=e[o][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[o][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(a){if("enter"===e[o][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=o,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(a=o);var u={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[a][1].end)},c={type:"labelText",start:Object.assign({},e[r+s+2][1].end),end:Object.assign({},e[a-2][1].start)};return i=ju(i=[["enter",u,t],["enter",l,t]],e.slice(r+1,r+s+3)),i=ju(i,[["enter",c,t]]),i=ju(i,ml(t.parser.constructs.insideSpan.null,e.slice(r+s+4,a-3),t)),i=ju(i,[["exit",c,t],e[a-2],e[a-1],["exit",l,t]]),i=ju(i,e.slice(a+1)),i=ju(i,[["exit",u,t]]),Lu(e,r,e.length,i),e},resolveAll:function(e){var t,n=-1;for(;++n<e.length;)"labelImage"!==(t=e[n][1]).type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e}},Hl={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),El(e,r)};function r(t){return 41===t?o(t):Sl(e,a,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function a(t){return Yu(t)?El(e,i)(t):o(t)}function i(t){return 34===t||39===t||40===t?Cl(e,El(e,o),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):o(t)}function o(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},ql={tokenize:function(e,t,n){var r=this;return function(t){return _l.call(r,e,a,n,"reference","referenceMarker","referenceString")(t)};function a(e){return r.parser.defined.includes(Tl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}}},Xl={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};var Yl={name:"labelStartImage",tokenize:function(e,t,n){var r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),a};function a(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),i):n(t)}function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:Vl.resolveAll};function Kl(e){return null===e||Yu(e)||Qu(e)?1:$u(e)?2:void 0}var Zl={name:"attention",tokenize:function(e,t){var n,r=this.parser.constructs.attentionMarkers.null,a=this.previous,i=Kl(a);return function(t){return e.enter("attentionSequence"),n=t,o(t)};function o(s){if(s===n)return e.consume(s),o;var u=e.exit("attentionSequence"),l=Kl(s),c=!l||2===l&&i||r.includes(s),f=!i||2===i&&l||r.includes(a);return u._open=Boolean(42===n?c:c&&(i||!f)),u._close=Boolean(42===n?f:f&&(l||!c)),t(s)}},resolveAll:function(e,t){var n,r,a,i,o,s,u,l,c=-1;for(;++c<e.length;)if("enter"===e[c][0]&&"attentionSequence"===e[c][1].type&&e[c][1]._close)for(n=c;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[c][1]).charCodeAt(0)){if((e[n][1]._close||e[c][1]._open)&&(e[c][1].end.offset-e[c][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[c][1].end.offset-e[c][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[c][1].end.offset-e[c][1].start.offset>1?2:1;var f=Object.assign({},e[n][1].end),d=Object.assign({},e[c][1].start);Ql(f,-s),Ql(d,s),i={type:s>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[n][1].end)},o={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[c][1].start),end:d},a={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[c][1].start)},r={type:s>1?"strong":"emphasis",start:Object.assign({},i.start),end:Object.assign({},o.end)},e[n][1].end=Object.assign({},i.start),e[c][1].start=Object.assign({},o.end),u=[],e[n][1].end.offset-e[n][1].start.offset&&(u=ju(u,[["enter",e[n][1],t],["exit",e[n][1],t]])),u=ju(u,[["enter",r,t],["enter",i,t],["exit",i,t],["enter",a,t]]),u=ju(u,ml(t.parser.constructs.insideSpan.null,e.slice(n+1,c),t)),u=ju(u,[["exit",a,t],["enter",o,t],["exit",o,t],["exit",r,t]]),e[c][1].end.offset-e[c][1].start.offset?(l=2,u=ju(u,[["enter",e[c][1],t],["exit",e[c][1],t]])):l=0,Lu(e,n-1,c-n+3,u),c=n+u.length-l-2;break}c=-1;for(;++c<e.length;)"attentionSequence"===e[c][1].type&&(e[c][1].type="data");return e}};function Ql(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}var $l={name:"autolink",tokenize:function(e,t,n){var r=1;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a};function a(t){return Uu(t)?(e.consume(t),i):qu(t)?u(t):n(t)}function i(e){return 43===e||45===e||46===e||Vu(e)?o(e):u(e)}function o(t){return 58===t?(e.consume(t),s):(43===t||45===t||46===t||Vu(t))&&r++<32?(e.consume(t),o):u(t)}function s(t){return 62===t?(e.exit("autolinkProtocol"),d(t)):null===t||32===t||60===t||Xu(t)?n(t):(e.consume(t),s)}function u(t){return 64===t?(e.consume(t),r=0,l):qu(t)?(e.consume(t),u):n(t)}function l(e){return Vu(e)?c(e):n(e)}function c(t){return 46===t?(e.consume(t),r=0,l):62===t?(e.exit("autolinkProtocol").type="autolinkEmail",d(t)):f(t)}function f(t){return(45===t||Vu(t))&&r++<63?(e.consume(t),45===t?f:c):n(t)}function d(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}}};var Jl={name:"htmlText",tokenize:function(e,t,n){var r,a,i,o,s=this;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),u};function u(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),k):63===t?(e.consume(t),x):Uu(t)?(e.consume(t),C):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),a="CDATA[",i=0,v):Uu(t)?(e.consume(t),b):n(t)}function c(t){return 45===t?(e.consume(t),f):n(t)}function f(t){return null===t||62===t?n(t):45===t?(e.consume(t),d):h(t)}function d(e){return null===e||62===e?n(e):h(e)}function h(t){return null===t?n(t):45===t?(e.consume(t),p):Ku(t)?(o=h,O(t)):(e.consume(t),h)}function p(t){return 45===t?(e.consume(t),L):h(t)}function v(t){return t===a.charCodeAt(i++)?(e.consume(t),i===a.length?m:v):n(t)}function m(t){return null===t?n(t):93===t?(e.consume(t),g):Ku(t)?(o=m,O(t)):(e.consume(t),m)}function g(t){return 93===t?(e.consume(t),y):m(t)}function y(t){return 62===t?L(t):93===t?(e.consume(t),y):m(t)}function b(t){return null===t||62===t?L(t):Ku(t)?(o=b,O(t)):(e.consume(t),b)}function x(t){return null===t?n(t):63===t?(e.consume(t),w):Ku(t)?(o=x,O(t)):(e.consume(t),x)}function w(e){return 62===e?L(e):x(e)}function k(t){return Uu(t)?(e.consume(t),S):n(t)}function S(t){return 45===t||Vu(t)?(e.consume(t),S):_(t)}function _(t){return Ku(t)?(o=_,O(t)):Zu(t)?(e.consume(t),_):L(t)}function C(t){return 45===t||Vu(t)?(e.consume(t),C):47===t||62===t||Yu(t)?E(t):n(t)}function E(t){return 47===t?(e.consume(t),L):58===t||95===t||Uu(t)?(e.consume(t),T):Ku(t)?(o=E,O(t)):Zu(t)?(e.consume(t),E):L(t)}function T(t){return 45===t||46===t||58===t||95===t||Vu(t)?(e.consume(t),T):I(t)}function I(t){return 61===t?(e.consume(t),A):Ku(t)?(o=I,O(t)):Zu(t)?(e.consume(t),I):E(t)}function A(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),r=t,N):Ku(t)?(o=A,O(t)):Zu(t)?(e.consume(t),A):(e.consume(t),r=void 0,M)}function N(t){return t===r?(e.consume(t),R):null===t?n(t):Ku(t)?(o=N,O(t)):(e.consume(t),N)}function R(e){return 62===e||47===e||Yu(e)?E(e):n(e)}function M(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||Yu(t)?E(t):(e.consume(t),M)}function O(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),el(e,D,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function D(t){return e.enter("htmlTextData"),o(t)}function L(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}}};var ec={name:"labelStartLink",tokenize:function(e,t,n){var r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),a};function a(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:Vl.resolveAll};var tc={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),r};function r(r){return Ku(r)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(r)):n(r)}}};var nc,rc,ac,ic,oc,sc={name:"codeText",tokenize:function(e,t,n){var r,a,i=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),o(t)};function o(t){return 96===t?(e.consume(t),i++,o):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):96===t?(a=e.enter("codeTextSequence"),r=0,l(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):Ku(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),u(t))}function u(t){return null===t||32===t||96===t||Ku(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),u)}function l(n){return 96===n?(e.consume(n),r++,l):r===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(a.type="codeTextData",u(n))}},resolve:function(e){var t,n,r=e.length-4,a=3;if(("lineEnding"===e[a][1].type||"space"===e[a][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type))for(t=a;++t<r;)if("codeTextData"===e[t][1].type){e[a][1].type="codeTextPadding",e[r][1].type="codeTextPadding",a+=2,r-=2;break}t=a-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};var uc=(N(nc={},42,bl),N(nc,43,bl),N(nc,45,bl),N(nc,48,bl),N(nc,49,bl),N(nc,50,bl),N(nc,51,bl),N(nc,52,bl),N(nc,53,bl),N(nc,54,bl),N(nc,55,bl),N(nc,56,bl),N(nc,57,bl),N(nc,62,kl),nc),lc=N({},91,Il),cc=(N(rc={},-2,Nl),N(rc,-1,Nl),N(rc,32,Nl),rc),fc=(N(ac={},35,Ml),N(ac,42,yl),N(ac,45,[Ol,yl]),N(ac,60,jl),N(ac,61,Ol),N(ac,95,yl),N(ac,96,Fl),N(ac,126,Fl),ac),dc=(N(ic={},38,Ul),N(ic,92,Wl),ic),hc=(N(oc={},-5,Gl),N(oc,-4,Gl),N(oc,-3,Gl),N(oc,33,Yl),N(oc,38,Ul),N(oc,42,Zl),N(oc,60,[$l,Jl]),N(oc,91,ec),N(oc,92,[tc,Wl]),N(oc,93,Vl),N(oc,95,Zl),N(oc,96,sc),oc),pc={null:[Zl,cl]},vc={null:[42,95]},mc={null:[]};var gc=/[\0\t\n\r]/g;function yc(e,t){var n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCharCode(n)}var bc=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function xc(e){return e.replace(bc,wc)}function wc(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){var r=n.charCodeAt(1),a=120===r||88===r;return yc(n.slice(a?2:1),a?16:10)}return zl(n)||e}var kc={}.hasOwnProperty,Sc=function(t,n,r){return"string"!==typeof n&&(r=n,n=void 0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=_c({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(re),autolinkProtocol:I,autolinkEmail:I,atxHeading:u(J),blockQuote:u(Y),characterEscape:I,characterReference:I,codeFenced:u(K),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:u(K,l),codeText:u(Z,l),codeTextData:I,data:I,codeFlowValue:I,definition:u(Q),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:u($),hardBreakEscape:u(ee),hardBreakTrailing:u(ee),htmlFlow:u(te,l),htmlFlowData:I,htmlText:u(te,l),htmlTextData:I,image:u(ne),label:l,link:u(re),listItem:u(ie),listItemValue:v,listOrdered:u(ae,p),listUnordered:u(ae),paragraph:u(oe),reference:W,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:u(J),strong:u(se),thematicBreak:u(le)},exit:{atxHeading:f(),atxHeadingSequence:_,autolink:f(),autolinkEmail:X,autolinkProtocol:q,blockQuote:f(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:V,characterReferenceMarkerNumeric:V,characterReferenceValue:H,codeFenced:f(b),codeFencedFence:y,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:A,codeIndented:f(x),codeText:f(D),codeTextData:A,data:A,definition:f(),definitionDestinationString:S,definitionLabelString:w,definitionTitleString:k,emphasis:f(),hardBreakEscape:f(R),hardBreakTrailing:f(R),htmlFlow:f(M),htmlFlowData:A,htmlText:f(O),htmlTextData:A,image:f(j),label:F,labelText:P,lineEnding:N,link:f(L),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:G,resourceDestinationString:B,resourceTitleString:z,resource:U,setextHeading:f(T),setextHeadingLineSequence:E,setextHeadingText:C,strong:f(),thematicBreak:f()}},e.mdastExtensions||[]),n={};return r;function r(e){for(var n={type:"root",children:[]},r=[],u=[],f={stack:[n],tokenStack:r,config:t,enter:c,exit:d,buffer:l,resume:h,setData:i,getData:o},p=-1;++p<e.length;){if("listOrdered"===e[p][1].type||"listUnordered"===e[p][1].type)if("enter"===e[p][0])u.push(p);else p=a(e,u.pop(),p)}for(p=-1;++p<e.length;){var v=t[e[p][0]];kc.call(v,e[p][1].type)&&v[e[p][1].type].call(Object.assign({sliceSerialize:e[p][2].sliceSerialize},f),e[p][1])}if(r.length>0){var m=r[r.length-1];(m[1]||Ec).call(f,void 0,m[0])}for(n.position={start:s(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:s(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},p=-1;++p<t.transforms.length;)n=t.transforms[p](n)||n;return n}function a(e,t,n){for(var r,a,i,o,s=t-1,u=-1,l=!1;++s<=n;){var c=e[s];if("listUnordered"===c[1].type||"listOrdered"===c[1].type||"blockQuote"===c[1].type?("enter"===c[0]?u++:u--,o=void 0):"lineEndingBlank"===c[1].type?"enter"===c[0]&&(!r||o||u||i||(i=s),o=void 0):"linePrefix"===c[1].type||"listItemValue"===c[1].type||"listItemMarker"===c[1].type||"listItemPrefix"===c[1].type||"listItemPrefixWhitespace"===c[1].type||(o=void 0),!u&&"enter"===c[0]&&"listItemPrefix"===c[1].type||-1===u&&"exit"===c[0]&&("listUnordered"===c[1].type||"listOrdered"===c[1].type)){if(r){var f=s;for(a=void 0;f--;){var d=e[f];if("lineEnding"===d[1].type||"lineEndingBlank"===d[1].type){if("exit"===d[0])continue;a&&(e[a][1].type="lineEndingBlank",l=!0),d[1].type="lineEnding",a=f}else if("linePrefix"!==d[1].type&&"blockQuotePrefix"!==d[1].type&&"blockQuotePrefixWhitespace"!==d[1].type&&"blockQuoteMarker"!==d[1].type&&"listItemIndent"!==d[1].type)break}i&&(!a||i<a)&&(r._spread=!0),r.end=Object.assign({},a?e[a][1].start:c[1].end),e.splice(a||s,0,["exit",r,c[2]]),s++,n++}"listItemPrefix"===c[1].type&&(r={type:"listItem",_spread:!1,start:Object.assign({},c[1].start)},e.splice(s,0,["enter",r,c[2]]),s++,n++,i=void 0,o=!0)}}return e[t][1]._spread=l,n}function i(e,t){n[e]=t}function o(e){return n[e]}function s(e){return{line:e.line,column:e.column,offset:e.offset}}function u(e,t){return n;function n(n){c.call(this,e(n),n),t&&t.call(this,n)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(e,t,n){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:s(t.start)},e}function f(e){return t;function t(t){e&&e.call(this,t),d.call(this,t)}}function d(e,t){var n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+nu({start:e.start,end:e.end})+"): it\u2019s not open");return r[0].type!==e.type&&(t?t.call(this,e,r[0]):(r[1]||Ec).call(this,e,r[0])),n.position.end=s(e.end),n}function h(){return Mu(this.stack.pop())}function p(){i("expectingFirstListItemValue",!0)}function v(e){o("expectingFirstListItemValue")&&(this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),i("expectingFirstListItemValue"))}function m(){var e=this.resume();this.stack[this.stack.length-1].lang=e}function g(){var e=this.resume();this.stack[this.stack.length-1].meta=e}function y(){o("flowCodeInside")||(this.buffer(),i("flowCodeInside",!0))}function b(){var e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),i("flowCodeInside")}function x(){var e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function w(e){var t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Tl(this.sliceSerialize(e)).toLowerCase()}function k(){var e=this.resume();this.stack[this.stack.length-1].title=e}function S(){var e=this.resume();this.stack[this.stack.length-1].url=e}function _(e){var t=this.stack[this.stack.length-1];if(!t.depth){var n=this.sliceSerialize(e).length;t.depth=n}}function C(){i("setextHeadingSlurpLineEnding",!0)}function E(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2}function T(){i("setextHeadingSlurpLineEnding")}function I(e){var t=this.stack[this.stack.length-1],n=t.children[t.children.length-1];n&&"text"===n.type||((n=ue()).position={start:s(e.start)},t.children.push(n)),this.stack.push(n)}function A(e){var t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=s(e.end)}function N(e){var n=this.stack[this.stack.length-1];if(o("atHardBreak"))return n.children[n.children.length-1].position.end=s(e.end),void i("atHardBreak");!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(n.type)&&(I.call(this,e),A.call(this,e))}function R(){i("atHardBreak",!0)}function M(){var e=this.resume();this.stack[this.stack.length-1].value=e}function O(){var e=this.resume();this.stack[this.stack.length-1].value=e}function D(){var e=this.resume();this.stack[this.stack.length-1].value=e}function L(){var e=this.stack[this.stack.length-1];o("inReference")?(e.type+="Reference",e.referenceType=o("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),i("referenceType")}function j(){var e=this.stack[this.stack.length-1];o("inReference")?(e.type+="Reference",e.referenceType=o("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),i("referenceType")}function P(e){var t=this.stack[this.stack.length-2],n=this.sliceSerialize(e);t.label=xc(n),t.identifier=Tl(n).toLowerCase()}function F(){var e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];i("inReference",!0),"link"===n.type?n.children=e.children:n.alt=t}function B(){var e=this.resume();this.stack[this.stack.length-1].url=e}function z(){var e=this.resume();this.stack[this.stack.length-1].title=e}function U(){i("inReference")}function W(){i("referenceType","collapsed")}function G(e){var t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Tl(this.sliceSerialize(e)).toLowerCase(),i("referenceType","full")}function V(e){i("characterReferenceType",e.type)}function H(e){var t,n=this.sliceSerialize(e),r=o("characterReferenceType");r?(t=yc(n,"characterReferenceMarkerNumeric"===r?10:16),i("characterReferenceType")):t=zl(n);var a=this.stack.pop();a.value+=t,a.position.end=s(e.end)}function q(e){A.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function X(e){A.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function Y(){return{type:"blockquote",children:[]}}function K(){return{type:"code",lang:null,meta:null,value:""}}function Z(){return{type:"inlineCode",value:""}}function Q(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function $(){return{type:"emphasis",children:[]}}function J(){return{type:"heading",depth:void 0,children:[]}}function ee(){return{type:"break"}}function te(){return{type:"html",value:""}}function ne(){return{type:"image",title:null,url:"",alt:null}}function re(){return{type:"link",title:null,url:"",children:[]}}function ae(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function ie(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function oe(){return{type:"paragraph",children:[]}}function se(){return{type:"strong",children:[]}}function ue(){return{type:"text",value:""}}function le(){return{type:"thematicBreak"}}}(r)(function(e){for(;!il(e););return e}(function(){var t={defined:[],lazy:{},constructs:Fu([e].concat((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).extensions||[])),content:n(tl),document:n(nl),flow:n(ll),string:n(fl),text:n(dl)};return t;function n(e){return function(n){return gl(t,e,n)}}}(r).document().write(function(){var e,t=1,n="",r=!0;return function(a,i,o){var s,u,l,c,f,d=[];for(a=n+a.toString(i),l=0,n="",r&&(65279===a.charCodeAt(0)&&l++,r=void 0);l<a.length;){if(gc.lastIndex=l,c=(s=gc.exec(a))&&void 0!==s.index?s.index:a.length,f=a.charCodeAt(c),!s){n=a.slice(l);break}if(10===f&&l===c&&e)d.push(-3),e=void 0;else switch(e&&(d.push(-5),e=void 0),l<c&&(d.push(a.slice(l,c)),t+=c-l),f){case 0:d.push(65533),t++;break;case 9:for(u=4*Math.ceil(t/4),d.push(-2);t++<u;)d.push(-1);break;case 10:d.push(-4),t=1;break;default:e=!0,t=1}l=c+1}return o&&(e&&d.push(-5),n&&d.push(n),d.push(null)),d}}()(t,n,!0))))};function _c(e,t){for(var n=-1;++n<t.length;){var r=t[n];Array.isArray(r)?_c(e,r):Cc(e,r)}return e}function Cc(e,t){var n;for(n in t)if(kc.call(t,n)){var r="canContainEols"===n||"transforms"===n,a=(kc.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),i=t[n];i&&(r?e[n]=[].concat(f(a),f(i)):Object.assign(a,i))}}function Ec(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+nu({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+nu({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+nu({start:t.start,end:t.end})+") is still open")}var Tc=function(e){var t=this;Object.assign(this,{Parser:function(n){var r=t.data("settings");return Sc(n,Object.assign({},r,e,{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}})},Ic=function(e,t,n){var r={type:String(e)};return void 0!==n&&null!==n||"string"!==typeof t&&!Array.isArray(t)?Object.assign(r,t):n=t,Array.isArray(n)?r.children=n:void 0!==n&&null!==n&&(r.value=String(n)),r},Ac=function(e){if(void 0===e||null===e)return Mc;if("string"===typeof e)return function(e){return Rc(t);function t(t){return t&&t.type===e}}(e);if("object"===typeof e)return Array.isArray(e)?Nc(e):function(e){return Rc(t);function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"===typeof e)return Rc(e);throw new Error("Expected function, string, or object as test")};function Nc(e){for(var t=[],n=-1;++n<e.length;)t[n]=Ac(e[n]);return Rc((function(){for(var e=-1,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];for(;++e<t.length;){var i;if((i=t[e]).call.apply(i,[this].concat(r)))return!0}return!1}))}function Rc(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Boolean(e.call.apply(e,[this].concat(n)))}}function Mc(){return!0}var Oc=function(e,t,n,r){"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null);var a=Ac(t),i=r?-1:1;!function e(o,s,u){var l,c="object"===typeof o&&null!==o?o:{};"string"===typeof c.type&&(l="string"===typeof c.tagName?c.tagName:"string"===typeof c.name?c.name:void 0,Object.defineProperty(f,"name",{value:"node ("+c.type+(l?"<"+l+">":"")+")"}));return f;function f(){var l,c,f,d=[];if((!t||a(o,s,u[u.length-1]||null))&&(d=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[true,e];return[e]}(n(o,u)),false===d[0]))return d;if(o.children&&"skip"!==d[0])for(c=(r?o.children.length:-1)+i,f=u.concat(o);c>-1&&c<o.children.length;){if(l=e(o.children[c],c,f)(),false===l[0])return l;c="number"===typeof l[1]?l[1]:c+i}return d}}(e,null,[])()};var Dc=function(e,t,n,r){"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null),Oc(e,t,(function(e,t){var r=t[t.length-1];return n(e,r?r.children.indexOf(e):null,r)}),r)},Lc=Pc("start"),jc=Pc("end");function Pc(e){return function(t){var n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:n.offset>-1?n.offset:null}}}var Fc={}.hasOwnProperty;function Bc(e){return String(e||"").toUpperCase()}var zc={}.hasOwnProperty;function Uc(e,t){var n=t.data||{};return"value"in t&&!(zc.call(n,"hName")||zc.call(n,"hProperties")||zc.call(n,"hChildren"))?e.augment(t,Ic("text",t.value)):e(t,"div",Vc(e,t))}function Wc(e,t,n){var r,a=t&&t.type;if(!a)throw new Error("Expected node, got `"+t+"`");return("function"===typeof(r=zc.call(e.handlers,a)?e.handlers[a]:e.passThrough&&e.passThrough.includes(a)?Gc:e.unknownHandler)?r:Uc)(e,t,n)}function Gc(e,t){return"children"in t?eu(eu({},t),{},{children:Vc(e,t)}):t}function Vc(e,t){var n=[];if("children"in t)for(var r=t.children,a=-1;++a<r.length;){var i=Wc(e,r[a],t);if(i){if(a&&"break"===r[a-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=i.value.replace(/^\s+/,"")),!Array.isArray(i)&&"element"===i.type)){var o=i.children[0];o&&"text"===o.type&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(i)?n.push.apply(n,f(i)):n.push(i)}}return n}function Hc(e){for(var t=[],n=-1,r=0,a=0;++n<e.length;){var i=e.charCodeAt(n),o="";if(37===i&&Vu(e.charCodeAt(n+1))&&Vu(e.charCodeAt(n+2)))a=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){var s=e.charCodeAt(n+1);i<56320&&s>56319&&s<57344?(o=String.fromCharCode(i,s),a=1):o="\ufffd"}else o=String.fromCharCode(i);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+a+1,o=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function qc(e,t){var n=[],r=-1;for(t&&n.push(Ic("text","\n"));++r<e.length;)r&&n.push(Ic("text","\n")),n.push(e[r]);return t&&e.length>0&&n.push(Ic("text","\n")),n}function Xc(e,t){var n,r=String(t.identifier),a=Hc(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);-1===i?(e.footnoteOrder.push(r),e.footnoteCounts[r]=1,n=e.footnoteOrder.length):(e.footnoteCounts[r]++,n=i+1);var o=e.footnoteCounts[r];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+a,id:e.clobberPrefix+"fnref-"+a+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[Ic("text",String(n))])])}function Yc(e,t){var n=t.referenceType,r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return Ic("text","!["+t.alt+r);var a=Vc(e,t),i=a[0];i&&"text"===i.type?i.value="["+i.value:a.unshift(Ic("text","["));var o=a[a.length-1];return o&&"text"===o.type?o.value+=r:a.push(Ic("text",r)),a}function Kc(e){var t=e.spread;return void 0===t||null===t?e.children.length>1:t}function Zc(e,t,n){var r=0,a=e.length;if(t)for(var i=e.codePointAt(r);9===i||32===i;)r++,i=e.codePointAt(r);if(n)for(var o=e.codePointAt(a-1);9===o||32===o;)a--,o=e.codePointAt(a-1);return a>r?e.slice(r,a):""}var Qc={blockquote:function(e,t){return e(t,"blockquote",qc(Vc(e,t),!0))},break:function(e,t){return[e(t,"br"),Ic("text","\n")]},code:function(e,t){var n=t.value?t.value+"\n":"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),a={};r&&(a.className=["language-"+r]);var i=e(t,"code",a,[Ic("text",n)]);return t.meta&&(i.data={meta:t.meta}),e(t.position,"pre",[i])},delete:function(e,t){return e(t,"del",Vc(e,t))},emphasis:function(e,t){return e(t,"em",Vc(e,t))},footnoteReference:Xc,footnote:function(e,t){for(var n=e.footnoteById,r=1;r in n;)r++;var a=String(r);return n[a]={type:"footnoteDefinition",identifier:a,children:[{type:"paragraph",children:t.children}],position:t.position},Xc(e,{type:"footnoteReference",identifier:a,position:t.position})},heading:function(e,t){return e(t,"h"+t.depth,Vc(e,t))},html:function(e,t){return e.dangerous?e.augment(t,Ic("raw",t.value)):null},imageReference:function(e,t){var n=e.definition(t.identifier);if(!n)return Yc(e,t);var r={src:Hc(n.url||""),alt:t.alt};return null!==n.title&&void 0!==n.title&&(r.title=n.title),e(t,"img",r)},image:function(e,t){var n={src:Hc(t.url),alt:t.alt};return null!==t.title&&void 0!==t.title&&(n.title=t.title),e(t,"img",n)},inlineCode:function(e,t){return e(t,"code",[Ic("text",t.value.replace(/\r?\n|\r/g," "))])},linkReference:function(e,t){var n=e.definition(t.identifier);if(!n)return Yc(e,t);var r={href:Hc(n.url||"")};return null!==n.title&&void 0!==n.title&&(r.title=n.title),e(t,"a",r,Vc(e,t))},link:function(e,t){var n={href:Hc(t.url)};return null!==t.title&&void 0!==t.title&&(n.title=t.title),e(t,"a",n,Vc(e,t))},listItem:function(e,t,n){var r,a=Vc(e,t),i=n?function(e){var t=e.spread,n=e.children,r=-1;for(;!t&&++r<n.length;)t=Kc(n[r]);return Boolean(t)}(n):Kc(t),o={},s=[];"boolean"===typeof t.checked&&(a[0]&&"element"===a[0].type&&"p"===a[0].tagName?r=a[0]:(r=e(null,"p",[]),a.unshift(r)),r.children.length>0&&r.children.unshift(Ic("text"," ")),r.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),o.className=["task-list-item"]);for(var u=-1;++u<a.length;){var l=a[u];(i||0!==u||"element"!==l.type||"p"!==l.tagName)&&s.push(Ic("text","\n")),"element"!==l.type||"p"!==l.tagName||i?s.push(l):s.push.apply(s,f(l.children))}var c=a[a.length-1];return!c||!i&&"tagName"in c&&"p"===c.tagName||s.push(Ic("text","\n")),e(t,"li",o,s)},list:function(e,t){var n={},r=t.ordered?"ol":"ul",a=Vc(e,t),i=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++i<a.length;){var o=a[i];if("element"===o.type&&"li"===o.tagName&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,qc(a,!0))},paragraph:function(e,t){return e(t,"p",Vc(e,t))},root:function(e,t){return e.augment(t,Ic("root",qc(Vc(e,t))))},strong:function(e,t){return e(t,"strong",Vc(e,t))},table:function(e,t){for(var n=t.children,r=-1,a=t.align||[],i=[];++r<n.length;){for(var o=n[r].children,s=0===r?"th":"td",u=[],l=-1,c=t.align?a.length:o.length;++l<c;){var f=o[l];u.push(e(f,s,{align:a[l]},f?Vc(e,f):[]))}i[r]=e(n[r],"tr",qc(u,!0))}return e(t,"table",qc([e(i[0].position,"thead",qc([i[0]],!0))].concat(i[1]?e({start:Lc(i[1]),end:jc(i[i.length-1])},"tbody",qc(i.slice(1),!0)):[]),!0))},text:function(e,t){return e.augment(t,Ic("text",function(e){for(var t=String(e),n=/\r?\n|\r/g,r=n.exec(t),a=0,i=[];r;)i.push(Zc(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return i.push(Zc(t.slice(a),a>0,!1)),i.join("")}(String(t.value))))},thematicBreak:function(e,t){return e(t,"hr")},toml:$c,yaml:$c,definition:$c,footnoteDefinition:$c};function $c(){return null}var Jc={}.hasOwnProperty;function ef(e,t){var n=t||{},r=n.allowDangerousHtml||!1,a={};return o.dangerous=r,o.clobberPrefix=void 0===n.clobberPrefix||null===n.clobberPrefix?"user-content-":n.clobberPrefix,o.footnoteLabel=n.footnoteLabel||"Footnotes",o.footnoteLabelTagName=n.footnoteLabelTagName||"h2",o.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},o.footnoteBackLabel=n.footnoteBackLabel||"Back to content",o.definition=function(e){var t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return Dc(e,"definition",(function(e){var n=Bc(e.identifier);n&&!Fc.call(t,n)&&(t[n]=e)})),function(e){var n=Bc(e);return n&&Fc.call(t,n)?t[n]:null}}(e),o.footnoteById=a,o.footnoteOrder=[],o.footnoteCounts={},o.augment=i,o.handlers=eu(eu({},Qc),n.handlers),o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,Dc(e,"footnoteDefinition",(function(e){var t=String(e.identifier).toUpperCase();Jc.call(a,t)||(a[t]=e)})),o;function i(e,t){if(e&&"data"in e&&e.data){var n=e.data;n.hName&&("element"!==t.type&&(t={type:"element",tagName:"",properties:{},children:[]}),t.tagName=n.hName),"element"===t.type&&n.hProperties&&(t.properties=eu(eu({},t.properties),n.hProperties)),"children"in t&&t.children&&n.hChildren&&(t.children=n.hChildren)}if(e){var r="type"in e?e:{position:e};(a=r)&&a.position&&a.position.start&&a.position.start.line&&a.position.start.column&&a.position.end&&a.position.end.line&&a.position.end.column&&(t.position={start:Lc(r),end:jc(r)})}var a;return t}function o(e,t,n,r){return Array.isArray(n)&&(r=n,n={}),i(e,{type:"element",tagName:t,properties:n||{},children:r||[]})}}function tf(e,t){var n=ef(e,t),r=Wc(n,e,null),a=function(e){for(var t=-1,n=[];++t<e.footnoteOrder.length;){var r=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(r){for(var a=Vc(e,r),i=String(r.identifier),o=Hc(i.toLowerCase()),s=0,u=[];++s<=e.footnoteCounts[i];){var l={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+o+(s>1?"-"+s:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:"\u21a9"}]};s>1&&l.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(s)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(l)}var c=a[a.length-1];if(c&&"element"===c.type&&"p"===c.tagName){var f,d=c.children[c.children.length-1];d&&"text"===d.type?d.value+=" ":c.children.push({type:"text",value:" "}),(f=c.children).push.apply(f,u)}else a.push.apply(a,u);var h={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+o},children:qc(a,!0)};r.position&&(h.position=r.position),n.push(h)}}return 0===n.length?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:eu(eu({},JSON.parse(JSON.stringify(e.footnoteLabelProperties))),{},{id:"footnote-label"}),children:[Ic("text",e.footnoteLabel)]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:qc(n,!0)},{type:"text",value:"\n"}]}}(n);return a&&r.children.push(Ic("text","\n"),a),Array.isArray(r)?{type:"root",children:r}:r}var nf=function(e,t){return e&&"run"in e?function(e,t){return function(n,r,a){e.run(tf(n,t),r,(function(e){a(e)}))}}(e,t):function(e){return function(t){return tf(t,e)}}(e||t)};var rf=n(2007),af=p((function e(t,n,r){d(this,e),this.property=t,this.normal=n,r&&(this.space=r)}));function of(e,t){for(var n={},r={},a=-1;++a<e.length;)Object.assign(n,e[a].property),Object.assign(r,e[a].normal);return new af(n,r,t)}function sf(e){return e.toLowerCase()}af.prototype.property={},af.prototype.normal={},af.prototype.space=null;var uf=p((function e(t,n){d(this,e),this.property=t,this.attribute=n}));uf.prototype.space=null,uf.prototype.boolean=!1,uf.prototype.booleanish=!1,uf.prototype.overloadedBoolean=!1,uf.prototype.number=!1,uf.prototype.commaSeparated=!1,uf.prototype.spaceSeparated=!1,uf.prototype.commaOrSpaceSeparated=!1,uf.prototype.mustUseProperty=!1,uf.prototype.defined=!1;var lf=0,cf=gf(),ff=gf(),df=gf(),hf=gf(),pf=gf(),vf=gf(),mf=gf();function gf(){return Math.pow(2,++lf)}var yf=Object.keys(t),bf=function(e){m(r,e);var n=k(r);function r(e,a,i,o){var s;d(this,r);var u=-1;if(xf(x(s=n.call(this,e,a)),"space",o),"number"===typeof i)for(;++u<yf.length;){var l=yf[u];xf(x(s),yf[u],(i&t[l])===t[l])}return s}return p(r)}(uf);function xf(e,t,n){n&&(e[t]=n)}bf.prototype.defined=!0;var wf={}.hasOwnProperty;function kf(e){var t,n={},r={};for(t in e.properties)if(wf.call(e.properties,t)){var a=e.properties[t],i=new bf(t,e.transform(e.attributes||{},t),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(t)&&(i.mustUseProperty=!0),n[t]=i,r[sf(t)]=t,r[sf(i.attribute)]=t}return new af(n,r,e.space)}var Sf=kf({space:"xlink",transform:function(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),_f=kf({space:"xml",transform:function(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Cf(e,t){return t in e?e[t]:t}function Ef(e,t){return Cf(e,t.toLowerCase())}var Tf=kf({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Ef,properties:{xmlns:null,xmlnsXLink:null}}),If=kf({transform:function(e,t){return"role"===t?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ff,ariaAutoComplete:null,ariaBusy:ff,ariaChecked:ff,ariaColCount:hf,ariaColIndex:hf,ariaColSpan:hf,ariaControls:pf,ariaCurrent:null,ariaDescribedBy:pf,ariaDetails:null,ariaDisabled:ff,ariaDropEffect:pf,ariaErrorMessage:null,ariaExpanded:ff,ariaFlowTo:pf,ariaGrabbed:ff,ariaHasPopup:null,ariaHidden:ff,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:pf,ariaLevel:hf,ariaLive:null,ariaModal:ff,ariaMultiLine:ff,ariaMultiSelectable:ff,ariaOrientation:null,ariaOwns:pf,ariaPlaceholder:null,ariaPosInSet:hf,ariaPressed:ff,ariaReadOnly:ff,ariaRelevant:null,ariaRequired:ff,ariaRoleDescription:pf,ariaRowCount:hf,ariaRowIndex:hf,ariaRowSpan:hf,ariaSelected:ff,ariaSetSize:hf,ariaSort:null,ariaValueMax:hf,ariaValueMin:hf,ariaValueNow:hf,ariaValueText:null,role:null}}),Af=kf({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Ef,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:vf,acceptCharset:pf,accessKey:pf,action:null,allow:null,allowFullScreen:cf,allowPaymentRequest:cf,allowUserMedia:cf,alt:null,as:null,async:cf,autoCapitalize:null,autoComplete:pf,autoFocus:cf,autoPlay:cf,capture:cf,charSet:null,checked:cf,cite:null,className:pf,cols:hf,colSpan:null,content:null,contentEditable:ff,controls:cf,controlsList:pf,coords:hf|vf,crossOrigin:null,data:null,dateTime:null,decoding:null,default:cf,defer:cf,dir:null,dirName:null,disabled:cf,download:df,draggable:ff,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:cf,formTarget:null,headers:pf,height:hf,hidden:cf,high:hf,href:null,hrefLang:null,htmlFor:pf,httpEquiv:pf,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:cf,itemId:null,itemProp:pf,itemRef:pf,itemScope:cf,itemType:pf,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:cf,low:hf,manifest:null,max:null,maxLength:hf,media:null,method:null,min:null,minLength:hf,multiple:cf,muted:cf,name:null,nonce:null,noModule:cf,noValidate:cf,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:cf,optimum:hf,pattern:null,ping:pf,placeholder:null,playsInline:cf,poster:null,preload:null,readOnly:cf,referrerPolicy:null,rel:pf,required:cf,reversed:cf,rows:hf,rowSpan:hf,sandbox:pf,scope:null,scoped:cf,seamless:cf,selected:cf,shape:null,size:hf,sizes:null,slot:null,span:hf,spellCheck:ff,src:null,srcDoc:null,srcLang:null,srcSet:null,start:hf,step:null,style:null,tabIndex:hf,target:null,title:null,translate:null,type:null,typeMustMatch:cf,useMap:null,value:ff,width:hf,wrap:null,align:null,aLink:null,archive:pf,axis:null,background:null,bgColor:null,border:hf,borderColor:null,bottomMargin:hf,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:cf,declare:cf,event:null,face:null,frame:null,frameBorder:null,hSpace:hf,leftMargin:hf,link:null,longDesc:null,lowSrc:null,marginHeight:hf,marginWidth:hf,noResize:cf,noHref:cf,noShade:cf,noWrap:cf,object:null,profile:null,prompt:null,rev:null,rightMargin:hf,rules:null,scheme:null,scrolling:ff,standby:null,summary:null,text:null,topMargin:hf,valueType:null,version:null,vAlign:null,vLink:null,vSpace:hf,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:cf,disableRemotePlayback:cf,prefix:null,property:null,results:hf,security:null,unselectable:null}}),Nf=kf({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Cf,properties:{about:mf,accentHeight:hf,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:hf,amplitude:hf,arabicForm:null,ascent:hf,attributeName:null,attributeType:null,azimuth:hf,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:hf,by:null,calcMode:null,capHeight:hf,className:pf,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:hf,diffuseConstant:hf,direction:null,display:null,dur:null,divisor:hf,dominantBaseline:null,download:cf,dx:null,dy:null,edgeMode:null,editable:null,elevation:hf,enableBackground:null,end:null,event:null,exponent:hf,externalResourcesRequired:null,fill:null,fillOpacity:hf,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:vf,g2:vf,glyphName:vf,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:hf,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:hf,horizOriginX:hf,horizOriginY:hf,id:null,ideographic:hf,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:hf,k:hf,k1:hf,k2:hf,k3:hf,k4:hf,kernelMatrix:mf,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:hf,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:hf,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:hf,overlineThickness:hf,paintOrder:null,panose1:null,path:null,pathLength:hf,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:pf,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:hf,pointsAtY:hf,pointsAtZ:hf,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:mf,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:mf,rev:mf,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:mf,requiredFeatures:mf,requiredFonts:mf,requiredFormats:mf,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:hf,specularExponent:hf,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:hf,strikethroughThickness:hf,string:null,stroke:null,strokeDashArray:mf,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:hf,strokeOpacity:hf,strokeWidth:null,style:null,surfaceScale:hf,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:mf,tabIndex:hf,tableValues:null,target:null,targetX:hf,targetY:hf,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:mf,to:null,transform:null,u1:null,u2:null,underlinePosition:hf,underlineThickness:hf,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:hf,values:null,vAlphabetic:hf,vMathematical:hf,vectorEffect:null,vHanging:hf,vIdeographic:hf,version:null,vertAdvY:hf,vertOriginX:hf,vertOriginY:hf,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:hf,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Rf=of([_f,Sf,Tf,If,Af],"html"),Mf=of([_f,Sf,Tf,If,Nf],"svg");function Of(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return function(t){Dc(t,"element",(function(t,n,r){var a,i=r;if(e.allowedElements?a=!e.allowedElements.includes(t.tagName):e.disallowedElements&&(a=e.disallowedElements.includes(t.tagName)),!a&&e.allowElement&&"number"===typeof n&&(a=!e.allowElement(t,n,i)),a&&"number"===typeof n){var o;if(e.unwrapDisallowed&&t.children)(o=i.children).splice.apply(o,[n,1].concat(f(t.children)));else i.children.splice(n,1);return n}}))}}var Df=["http","https","mailto","tel"];var Lf=n(8599);function jf(e){var t=e&&"object"===typeof e&&"text"===e.type?e.value||"":e;return"string"===typeof t&&""===t.replace(/[ \t\n\f\r]/g,"")}var Pf=/^data[-\w.:]+$/i,Ff=/-[a-z]/g,Bf=/[A-Z]/g;function zf(e){return"-"+e.toLowerCase()}function Uf(e){return e.charAt(1).toUpperCase()}var Wf={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var Gf=n(6426),Vf={}.hasOwnProperty,Hf=new Set(["table","thead","tbody","tfoot","tr"]);function qf(e,t){for(var n,r=[],a=-1;++a<t.children.length;)"element"===(n=t.children[a]).type?r.push(Xf(e,n,a,t)):"text"===n.type?"element"===t.type&&Hf.has(t.tagName)&&jf(n)||r.push(n.value):"raw"!==n.type||e.options.skipHtml||r.push(n.value);return r}function Xf(e,t,n,r){var a,o=e.options,s=e.schema,u=t.tagName,l={},c=s;if("html"===s.space&&"svg"===u&&(c=Mf,e.schema=c),t.properties)for(a in t.properties)Vf.call(t.properties,a)&&Kf(l,a,t.properties[a],e);"ol"!==u&&"ul"!==u||e.listDepth++;var f=qf(e,t);"ol"!==u&&"ul"!==u||e.listDepth--,e.schema=s;var d,h=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},p=o.components&&Vf.call(o.components,u)?o.components[u]:u,v="string"===typeof p||p===i.Fragment;if(!Lf.isValidElementType(p))throw new TypeError("Component for name `".concat(u,"` not defined or is not renderable"));if(l.key=[u,h.start.line,h.start.column,n].join("-"),"a"===u&&o.linkTarget&&(l.target="function"===typeof o.linkTarget?o.linkTarget(String(l.href||""),t.children,"string"===typeof l.title?l.title:null):o.linkTarget),"a"===u&&o.transformLinkUri&&(l.href=o.transformLinkUri(String(l.href||""),t.children,"string"===typeof l.title?l.title:null)),v||"code"!==u||"element"!==r.type||"pre"===r.tagName||(l.inline=!0),v||"h1"!==u&&"h2"!==u&&"h3"!==u&&"h4"!==u&&"h5"!==u&&"h6"!==u||(l.level=Number.parseInt(u.charAt(1),10)),"img"===u&&o.transformImageUri&&(l.src=o.transformImageUri(String(l.src||""),String(l.alt||""),"string"===typeof l.title?l.title:null)),!v&&"li"===u&&"element"===r.type){var m=function(e){var t=-1;for(;++t<e.children.length;){var n=e.children[t];if("element"===n.type&&"input"===n.tagName)return n}return null}(t);l.checked=m&&m.properties?Boolean(m.properties.checked):null,l.index=Yf(r,t),l.ordered="ol"===r.tagName}return v||"ol"!==u&&"ul"!==u||(l.ordered="ol"===u,l.depth=e.listDepth),"td"!==u&&"th"!==u||(l.align&&(l.style||(l.style={}),l.style.textAlign=l.align,delete l.align),v||(l.isHeader="th"===u)),v||"tr"!==u||"element"!==r.type||(l.isHeader=Boolean("thead"===r.tagName)),o.sourcePos&&(l["data-sourcepos"]=[(d=h).start.line,":",d.start.column,"-",d.end.line,":",d.end.column].map((function(e){return String(e)})).join("")),!v&&o.rawSourcePos&&(l.sourcePosition=t.position),!v&&o.includeElementIndex&&(l.index=Yf(r,t),l.siblingCount=Yf(r)),v||(l.node=t),f.length>0?i.createElement(p,l,f):i.createElement(p,l)}function Yf(e,t){for(var n=-1,r=0;++n<e.children.length&&e.children[n]!==t;)"element"===e.children[n].type&&r++;return r}function Kf(e,t,n,r){var a=function(e,t){var n=sf(t),r=t,a=uf;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&Pf.test(t)){if("-"===t.charAt(4)){var i=t.slice(5).replace(Ff,Uf);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{var o=t.slice(4);if(!Ff.test(o)){var s=o.replace(Bf,zf);"-"!==s.charAt(0)&&(s="-"+s),t="data"+s}}a=bf}return new a(r,t)}(r.schema,t),i=n;null!==i&&void 0!==i&&i===i&&(Array.isArray(i)&&(i=a.commaSeparated?function(e,t){var n=t||{};return""===e[e.length-1]&&(e=e.concat("")),e.join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(i):function(e){return e.join(" ").trim()}(i)),"style"===a.property&&"string"===typeof i&&(i=function(e){var t={};try{Gf(e,n)}catch(r){}return t;function n(e,n){var r="-ms-"===e.slice(0,4)?"ms-".concat(e.slice(4)):e;t[r.replace(/-([a-z])/g,Zf)]=n}}(i)),a.space&&a.property?e[Vf.call(Wf,a.property)?Wf[a.property]:a.property]=i:a.attribute&&(e[a.attribute]=i))}function Zf(e,t){return t.toUpperCase()}var Qf={}.hasOwnProperty,$f={plugins:{to:"plugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function Jf(e){for(var t in $f)if(Qf.call($f,t)&&Qf.call(e,t)){var n=$f[t];console.warn("[react-markdown] Warning: please ".concat(n.to?"use `".concat(n.to,"` instead of"):"remove"," `").concat(t,"` (see <").concat("https://github.com/remarkjs/react-markdown/blob/main/changelog.md","#").concat(n.id,"> for more info)")),delete $f[t]}var r=Su().use(Tc).use(e.remarkPlugins||[]).use(nf,eu(eu({},e.remarkRehypeOptions),{},{allowDangerousHtml:!0})).use(e.rehypePlugins||[]).use(Of,e),a=new pu;"string"===typeof e.children?a.value=e.children:void 0!==e.children&&null!==e.children&&console.warn("[react-markdown] Warning: please pass a string as `children` (not: `".concat(e.children,"`)"));var o=r.runSync(r.parse(a),a);if("root"!==o.type)throw new TypeError("Expected a `root` node");var s=i.createElement(i.Fragment,{},qf({options:e,schema:Rf,listDepth:0},o));return e.className&&(s=i.createElement("div",{className:e.className},s)),s}Jf.defaultProps={transformLinkUri:function(e){var t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;var r=t.indexOf(":");if(-1===r)return t;for(var a=-1;++a<Df.length;){var i=Df[a];if(r===i.length&&t.slice(0,i.length).toLowerCase()===i)return t}return-1!==(a=t.indexOf("?"))&&r>a||-1!==(a=t.indexOf("#"))&&r>a?t:"javascript:void(0)"}},Jf.propTypes={children:rf.string,className:rf.string,allowElement:rf.func,allowedElements:rf.arrayOf(rf.string),disallowedElements:rf.arrayOf(rf.string),unwrapDisallowed:rf.bool,remarkPlugins:rf.arrayOf(rf.oneOfType([rf.object,rf.func,rf.arrayOf(rf.oneOfType([rf.bool,rf.string,rf.object,rf.func,rf.arrayOf(rf.any)]))])),rehypePlugins:rf.arrayOf(rf.oneOfType([rf.object,rf.func,rf.arrayOf(rf.oneOfType([rf.bool,rf.string,rf.object,rf.func,rf.arrayOf(rf.any)]))])),sourcePos:rf.bool,rawSourcePos:rf.bool,skipHtml:rf.bool,includeElementIndex:rf.bool,transformLinkUri:rf.oneOfType([rf.func,rf.bool]),linkTarget:rf.oneOfType([rf.func,rf.string]),transformImageUri:rf.func,components:rf.object};var ed=i.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.color,o=void 0===a?"primary":a,s=e.value,u=e.valueBuffer,l=e.variant,c=void 0===l?"indeterminate":l,f=Mt(e,["classes","className","color","value","valueBuffer","variant"]),d=Wn()||to,h={},p={bar1:{},bar2:{}};if("determinate"===c||"buffer"===c)if(void 0!==s){h["aria-valuenow"]=Math.round(s),h["aria-valuemin"]=0,h["aria-valuemax"]=100;var v=s-100;"rtl"===d.direction&&(v=-v),p.bar1.transform="translateX(".concat(v,"%)")}else 0;if("buffer"===c)if(void 0!==u){var m=(u||0)-100;"rtl"===d.direction&&(m=-m),p.bar2.transform="translateX(".concat(m,"%)")}else 0;return i.createElement("div",Ot({className:so(n.root,n["color".concat(uo(o))],r,{determinate:n.determinate,indeterminate:n.indeterminate,buffer:n.buffer,query:n.query}[c]),role:"progressbar"},h,{ref:t},f),"buffer"===c?i.createElement("div",{className:so(n.dashed,n["dashedColor".concat(uo(o))])}):null,i.createElement("div",{className:so(n.bar,n["barColor".concat(uo(o))],("indeterminate"===c||"query"===c)&&n.bar1Indeterminate,{determinate:n.bar1Determinate,buffer:n.bar1Buffer}[c]),style:p.bar1}),"determinate"===c?null:i.createElement("div",{className:so(n.bar,("indeterminate"===c||"query"===c)&&n.bar2Indeterminate,"buffer"===c?[n["color".concat(uo(o))],n.bar2Buffer]:n["barColor".concat(uo(o))]),style:p.bar2}))})),td=no((function(e){var t=function(t){return"light"===e.palette.type?en(t,.62):Jt(t,.5)},n=t(e.palette.primary.main),r=t(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4,"@media print":{colorAdjust:"exact"}},colorPrimary:{backgroundColor:n},colorSecondary:{backgroundColor:r},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(n," 0%, ").concat(n," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0 -23px"},"50%":{opacity:0,backgroundPosition:"0 -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(ed),nd=i.forwardRef((function(e,t){var n=e.activeStep,r=void 0===n?0:n,a=e.backButton,o=e.classes,s=e.className,u=e.LinearProgressProps,l=e.nextButton,c=e.position,d=void 0===c?"bottom":c,h=e.steps,p=e.variant,v=void 0===p?"dots":p,m=Mt(e,["activeStep","backButton","classes","className","LinearProgressProps","nextButton","position","steps","variant"]);return i.createElement(co,Ot({square:!0,elevation:0,className:so(o.root,o["position".concat(uo(d))],s),ref:t},m),a,"text"===v&&i.createElement(i.Fragment,null,r+1," / ",h),"dots"===v&&i.createElement("div",{className:o.dots},f(new Array(h)).map((function(e,t){return i.createElement("div",{key:t,className:so(o.dot,t===r&&o.dotActive)})}))),"progress"===v&&i.createElement(td,Ot({className:o.progress,variant:"determinate",value:Math.ceil(r/(h-1)*100)},u)),l)})),rd=no((function(e){return{root:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:e.palette.background.default,padding:8},positionBottom:{position:"fixed",bottom:0,left:0,right:0,zIndex:e.zIndex.mobileStepper},positionTop:{position:"fixed",top:0,left:0,right:0,zIndex:e.zIndex.mobileStepper},positionStatic:{},dots:{display:"flex",flexDirection:"row"},dot:{backgroundColor:e.palette.action.disabled,borderRadius:"50%",width:8,height:8,margin:"0 2px"},dotActive:{backgroundColor:e.palette.primary.main},progress:{width:"50%"}}}),{name:"MuiMobileStepper"})(nd),ad=i.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,o=e.color,s=void 0===o?"default":o,u=e.component,l=void 0===u?"button":u,c=e.disabled,f=void 0!==c&&c,d=e.disableElevation,h=void 0!==d&&d,p=e.disableFocusRipple,v=void 0!==p&&p,m=e.endIcon,g=e.focusVisibleClassName,y=e.fullWidth,b=void 0!==y&&y,x=e.size,w=void 0===x?"medium":x,k=e.startIcon,S=e.type,_=void 0===S?"button":S,C=e.variant,E=void 0===C?"text":C,T=Mt(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),I=k&&i.createElement("span",{className:so(r.startIcon,r["iconSize".concat(uo(w))])},k),A=m&&i.createElement("span",{className:so(r.endIcon,r["iconSize".concat(uo(w))])},m);return i.createElement(Ms,Ot({className:so(r.root,r[E],a,"inherit"===s?r.colorInherit:"default"!==s&&r["".concat(E).concat(uo(s))],"medium"!==w&&[r["".concat(E,"Size").concat(uo(w))],r["size".concat(uo(w))]],h&&r.disableElevation,f&&r.disabled,b&&r.fullWidth),component:l,disabled:f,focusRipple:!v,focusVisibleClassName:so(r.focusVisible,g),ref:t,type:_},T),i.createElement("span",{className:r.label},I,n,A))})),id=no((function(e){return{root:Ot({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:$t(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:$t(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:$t(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat($t(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:$t(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat($t(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:$t(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(ad),od=i.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,o=e.color,s=void 0===o?"inherit":o,u=e.component,l=void 0===u?"svg":u,c=e.fontSize,f=void 0===c?"medium":c,d=e.htmlColor,h=e.titleAccess,p=e.viewBox,v=void 0===p?"0 0 24 24":p,m=Mt(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return i.createElement(l,Ot({className:so(r.root,a,"inherit"!==s&&r["color".concat(uo(s))],"default"!==f&&"medium"!==f&&r["fontSize".concat(uo(f))]),focusable:"false",viewBox:v,color:d,"aria-hidden":!h||void 0,role:h?"img":void 0,ref:t},m),n,h?i.createElement("title",null,h):null)}));od.muiName="SvgIcon";var sd=no((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(od);function ud(e,t){var n=function(t,n){return i.createElement(sd,Ot({ref:n},t),e)};return n.muiName=sd.muiName,i.memo(i.forwardRef(n))}var ld=ud(i.createElement("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),cd=ud(i.createElement("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),fd=n(1065);function dd(e){var t=Wn(),n=So(t),r=C((0,i.useState)(0),2),a=r[0],o=r[1],s=e.content,u=s.length;return(0,_o.jsxs)($o,{className:n.slideBox,children:[(0,_o.jsx)(fd.ZP,{axis:"rtl"===t.direction?"x-reverse":"x",index:a,onChangeIndex:function(e){o(e)},enableMouseEvents:!0,children:s.map((function(e,t){return(0,_o.jsxs)(as,{container:!0,className:n.slide,component:Us,children:[Math.abs(a-t)<=2?"image"===e.type&&(0,_o.jsx)(as,{item:!0,sm:12,xs:12,md:4,lg:4,children:(0,_o.jsx)(qs,{className:n.slideImage,component:"img",src:"data:image/png;base64, ".concat(e.image)})}):null,(0,_o.jsx)(as,{item:!0,sm:12,xs:12,md:6,lg:6,children:(0,_o.jsx)(Ys,{elevation:0,className:n.slideText,children:(0,_o.jsx)(Jf,{children:e.text.join(" ")})})})]},"".concat(e.type," ").concat(t))}))}),(0,_o.jsx)(rd,{steps:u,position:"static",activeStep:a,nextButton:(0,_o.jsxs)(id,{size:"small",onClick:function(){o((function(e){return e+1}))},disabled:a===u-1,children:["Next","rtl"===t.direction?(0,_o.jsx)(ld,{}):(0,_o.jsx)(cd,{})]}),backButton:(0,_o.jsxs)(id,{size:"small",onClick:function(){o((function(e){return e-1}))},disabled:0===a,children:["rtl"===t.direction?(0,_o.jsx)(cd,{}):(0,_o.jsx)(ld,{}),"Back"]})})]})}function hd(e){var t=C((0,i.useState)({notebook:null,isLoading:!0}),2),n=t[0],r=t[1];function a(){return a=A(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.ipynb).then((function(e){return e.text()})).then(function(){var e=A(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=JSON.parse(t),r({notebook:n,isLoading:!1})}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)}))),a.apply(this,arguments)}if((0,i.useEffect)((function(){!function(){a.apply(this,arguments)}()}),[]),n.isLoading)return(0,_o.jsx)("p",{children:" Loading... "});var o=function(e){var t=[],n=!1,r=!1;return e.forEach((function(e){var a,i={type:null,image:null,text:null};if("markdown"===e.cell_type)if(n){var o=t.pop();o.text=e.source,t.push(o),n=!1}else if(e.source[0].startsWith("#"))i.type="title",i.text=e.source,r=!1,t.push(i);else if(r){var s=t.pop(),u=s.text.concat(["\n"]).concat(e.source);s.text=u,t.push(s)}else i.type="text",i.text=e.source,t.push(i),r=!0;else 1===e.outputs.length&&(a=C(e.outputs,1)[0],i.type="image",i.image=a.data["image/png"],t.push(i),n=!0,r=!1)})),t}(n.notebook.cells),s=o.shift();return(0,_o.jsxs)(_o.Fragment,{children:[(0,_o.jsx)(go,{children:(0,_o.jsx)(Jf,{children:s.text.join(" ")})}),(0,_o.jsx)(go,{children:(0,_o.jsx)(dd,{content:o})})]})}var pd=n(7721),vd=n.n(pd),md=function(){function e(t,n){d(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return p(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),gd=function(){function e(){d(this,e)}return p(e,[{key:"refCount",value:function(e){return yd("refCount")}},{key:"incRef",value:function(e){return yd("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return yd("time")}},{key:"read",value:function(e){return yd("read")}},{key:"readSync",value:function(e){return yd("readSync")}},{key:"readToGPU",value:function(e,t){return yd("readToGPU")}},{key:"numDataIds",value:function(){return yd("numDataIds")}},{key:"disposeData",value:function(e,t){return yd("disposeData")}},{key:"write",value:function(e,t,n){return yd("write")}},{key:"move",value:function(e,t,n,r,a){return yd("move")}},{key:"createTensorFromTexture",value:function(e,t,n){return yd("createTensorFromTexture")}},{key:"memory",value:function(){return yd("memory")}},{key:"floatPrecision",value:function(){return yd("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return yd("dispose")}}]),e}();function yd(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function bd(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,kd(e,--t,n)}function xd(e,t,n){return Math.max(e,Math.min(t,n))}function wd(e){return e%2===0?e:e+1}function kd(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Sd(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function _d(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function Cd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";_d(Ad(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function Ed(e){_d(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Td(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||zd(e)&&!n)for(var r=0;r<e.length;++r)Td(e[r],t,n);else t.push(e);return t}function Id(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Ad(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Nd(e){return e%1===0}function Rd(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Md(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Od(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise((function(a,i){var o=0;!function s(){if(e())a();else{o++;var u=t(o);null!=n&&o>=n?i():null!=r?r(s,u):setTimeout(s,u)}}()}))}function Dd(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function Ld(e,t){var n=t.length;return _d((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),_d(e.every((function(e){return Nd(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function jd(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:Ld(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Pd(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function Fd(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Bd(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function zd(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function Ud(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function Wd(e){return"string"===typeof e||e instanceof String}function Gd(e){return"number"===typeof e}function Vd(e){return Array.isArray(e)?Vd(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":Gd(e)?"float32":Wd(e)?"string":"boolean"===typeof e?"bool":"float32"}function Hd(e){return!!(e&&e.constructor&&e.call&&e.apply)}function qd(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function Xd(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Yd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),l=u.reduce((function(e,t){return e*t}))*(r?2:1),c=0;c<s;c++)a[c]=Yd(e+c*l,u,n,r);return a}function Kd(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return Yd(0,e,t,n)}function Zd(e,t){for(var n=Qd(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Qd(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function $d(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return Kd(e,new Float32Array(n));if("int32"===t)return Kd(e,new Int32Array(n));if("bool"===t)return Kd(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function Jd(e){e.forEach((function(t){_d(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function eh(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function th(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function nh(e){return e&&e.then&&"function"===typeof e.then}var rh="tfjsflags",ah=function(){function e(t){d(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=ih,this.populateURLFlags()}return p(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(sh().getBool("IS_TEST")||sh().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];sh().getBool("IS_TEST")||sh().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(nh(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(rh in t)t.tfjsflags.split(",").forEach((function(t){var n=C(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}}]),e}();function ih(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return oh(t,r[0],r[1]),r.join("=")})),t}function oh(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function sh(){return lh}var uh,lh=null;function ch(){if(null==uh){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}uh=e}return uh}function fh(e,t){var n=function(){var e=ch();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var dh="Abs",hh="Acos",ph="Acosh",vh="Add",mh="AddN",gh="All",yh="Any",bh="ArgMax",xh="ArgMin",wh="Asin",kh="Asinh",Sh="Atan",_h="Atanh",Ch="Atan2",Eh="AvgPool",Th="AvgPoolGrad",Ih="AvgPool3D",Ah="AvgPool3DGrad",Nh="BatchMatMul",Rh="BatchToSpaceND",Mh="Bincount",Oh="BroadcastArgs",Dh="Cast",Lh="Ceil",jh="ClipByValue",Ph="Complex",Fh="ComplexAbs",Bh="Concat",zh="Conv2D",Uh="Conv2DBackpropFilter",Wh="Conv2DBackpropInput",Gh="Conv3D",Vh="Conv3DBackpropFilterV2",Hh="Conv3DBackpropInputV2",qh="Cos",Xh="Cosh",Yh="Cumprod",Kh="Cumsum",Zh="CropAndResize",Qh="DenseBincount",$h="DepthToSpace",Jh="DepthwiseConv2dNative",ep="DepthwiseConv2dNativeBackpropFilter",tp="DepthwiseConv2dNativeBackpropInput",np="Diag",rp="Dilation2D",ap="Dilation2DBackpropInput",ip="Dilation2DBackpropFilter",op="RealDiv",sp="Einsum",up="Elu",lp="EluGrad",cp="Erf",fp="Equal",dp="Exp",hp="ExpandDims",pp="Expm1",vp="FFT",mp="Fill",gp="FlipLeftRight",yp="Floor",bp="FloorDiv",xp="FusedBatchNorm",wp="GatherV2",kp="GatherNd",Sp="Greater",_p="GreaterEqual",Cp="Identity",Ep="IFFT",Tp="Imag",Ip="IsFinite",Ap="IsInf",Np="IsNan",Rp="LeakyRelu",Mp="Less",Op="LessEqual",Dp="LinSpace",Lp="Log",jp="Log1p",Pp="LogicalAnd",Fp="LogicalNot",Bp="LogicalOr",zp="LRN",Up="LRNGrad",Wp="Max",Gp="Maximum",Vp="MaxPool",Hp="MaxPoolGrad",qp="MaxPool3D",Xp="MaxPool3DGrad",Yp="MaxPoolWithArgmax",Kp="Mean",Zp="Min",Qp="Minimum",$p="MirrorPad",Jp="Mod",ev="Multinomial",tv="Multiply",nv="Neg",rv="NotEqual",av="NonMaxSuppressionV3",iv="NonMaxSuppressionV4",ov="NonMaxSuppressionV5",sv="OnesLike",uv="OneHot",lv="Pack",cv="PadV2",fv="Pow",dv="Prelu",hv="Prod",pv="RaggedGather",vv="RaggedRange",mv="RaggedTensorToTensor",gv="Range",yv="Real",bv="Reciprocal",xv="Relu",wv="Reshape",kv="ResizeNearestNeighbor",Sv="ResizeNearestNeighborGrad",_v="ResizeBilinear",Cv="ResizeBilinearGrad",Ev="Relu6",Tv="Reverse",Iv="Round",Av="Rsqrt",Nv="ScatterNd",Rv="SearchSorted",Mv="Select",Ov="Selu",Dv="Slice",Lv="Sin",jv="Sinh",Pv="Sign",Fv="Sigmoid",Bv="Softplus",zv="Sqrt",Uv="Sum",Wv="SpaceToBatchND",Gv="SplitV",Vv="Softmax",Hv="SparseFillEmptyRows",qv="SparseReshape",Xv="SparseSegmentMean",Yv="SparseSegmentSum",Kv="SparseToDense",Zv="SquaredDifference",Qv="Square",$v="StridedSlice",Jv="StringNGrams",em="StringSplit",tm="StringToHashBucketFast",nm="Sub",rm="Tan",am="Tanh",im="Tile",om="TopK",sm="Transform",um="Transpose",lm="Unique",cm="Unpack",fm="UnsortedSegmentSum",dm="ZerosLike",hm="Step",pm="RotateWithOffset",vm="_FusedMatMul",mm="FusedConv2D",gm="FusedDepthwiseConv2D";function ym(){var e;sh().getBool("IS_TEST")||sh().getBool("PROD")||(e=console).warn.apply(e,arguments)}var bm=fh("kernelRegistry",(function(){return new Map})),xm=fh("gradRegistry",(function(){return new Map}));function wm(e,t){var n=Em(e,t);return bm.get(n)}function km(e){return xm.get(e)}function Sm(e){for(var t=bm.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=C(i,2),s=o[0],u=o[1];C(s.split("_"),1)[0]===e&&n.push(u)}return n}function _m(e){var t=e.kernelName,n=e.backendName,r=Em(t,n);bm.has(r)&&ym("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),bm.set(r,e)}function Cm(e){var t=e.kernelName;xm.has(t)&&sh().getBool("DEBUG")&&ym("Overriding the gradient for '".concat(t,"'")),xm.set(t,e)}function Em(e,t){return"".concat(t,"_").concat(e)}var Tm=n(8987),Im=n.n(Tm)()||Tm;function Am(e){return Im.fromString(e,!0,16)}var Nm=Am("c3a5c85c97cb3127"),Rm=Am("b492b66fbe98f273"),Mm=Am("9ae16a3b2f90404f");function Om(e){return e.xor(e.shru(47))}function Dm(e,t,n){var r=e.slice(t,t+n);return Im.fromBytes(Array.from(r),!0,!0)}function Lm(e,t){return Dm(e,t,8)}function jm(e,t){return Dm(e,t,4)}function Pm(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function Fm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Am("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function Bm(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=Pm(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(Pm(a,44)),[a.add(r),i.add(o)]}(Lm(e,t),Lm(e,t+8),Lm(e,t+16),Lm(e,t+24),n,r)}function zm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=Mm.add(2*t),r=Lm(e,0).add(Mm),a=Lm(e,t-8),i=Pm(a,37).mul(n).add(r),o=Pm(r,25).add(a).mul(n);return Fm(i,o,n)}if(t>=4){var s=Mm.add(2*t),u=jm(e,0);return Fm(u.shl(3).add(t),jm(e,t-4),s)}if(t>0){var l=e[0],c=e[t>>1],f=e[t-1],d=l+(c<<8),h=t+(f<<2);return Om(Mm.mul(d).xor(Nm.mul(h))).mul(Mm)}return Mm}function Um(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Mm.add(2*t),r=Lm(e,0).mul(Rm),a=Lm(e,8),i=Lm(e,t-8).mul(n),o=Lm(e,t-16).mul(Mm);return Fm(Pm(r.add(a),43).add(Pm(i,30)).add(o),r.add(Pm(a.add(Mm),18)).add(i),n)}function Wm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Mm.add(2*t),r=Lm(e,0).mul(Mm),a=Lm(e,8),i=Lm(e,t-8).mul(n),o=Lm(e,t-16).mul(Mm),s=Pm(r.add(a),43).add(Pm(i,30)).add(o),u=Fm(s,r.add(Pm(a.add(Mm),18)).add(i),n),l=Lm(e,16).mul(n),c=Lm(e,24),f=s.add(Lm(e,t-32)).mul(n),d=u.add(Lm(e,t-24)).mul(n);return Fm(Pm(l.add(c),43).add(Pm(f,30)).add(d),l.add(Pm(c.add(r),18)).add(f),n)}function Gm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Im.fromNumber(81,!0);if(t<=32)return t<=16?zm(e,t):Um(e,t);if(t<=64)return Wm(e,t);var r=n,a=n.mul(Rm).add(113),i=Om(a.mul(Mm).add(113)).mul(Mm),o=[Im.UZERO,Im.UZERO],s=[Im.UZERO,Im.UZERO];r=r.mul(Mm).add(Lm(e,0));var u=0,l=64*(t-1>>6),c=l+(t-1&63)-63;do{r=Pm(r.add(a).add(o[0]).add(Lm(e,u+8)),37).mul(Rm),a=Pm(a.add(o[1]).add(Lm(e,u+48)),42).mul(Rm),r=r.xor(s[1]),a=a.add(o[0]).add(Lm(e,u+40)),i=Pm(i.add(s[0]),33).mul(Rm),o=Bm(e,u,o[1].mul(Rm),r.add(s[0])),s=Bm(e,u+32,i.add(s[1]),a.add(Lm(e,u+16)));var f=[r,i];i=f[0],r=f[1],u+=64}while(u!==l);var d=Rm.add(i.and(255).shl(1));u=c,s[0]=s[0].add(t-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=Pm(r.add(a).add(o[0]).add(Lm(e,u+8)),37).mul(d),a=Pm(a.add(o[1]).add(Lm(e,u+48)),42).mul(d),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(Lm(e,u+40))),i=Pm(i.add(s[0]),33).mul(d),o=Bm(e,u,o[1].mul(d),r.add(s[0])),s=Bm(e,u+32,i.add(s[1]),a.add(Lm(e,u+16)));var h=[r,i];return i=h[0],r=h[1],Fm(Fm(o[0],s[0],d).add(Om(a).mul(Nm)).add(i),Fm(o[1],s[1],d).add(r),d)}function Vm(e,t){return"string"===t?Xm(e):Hm([e],t)}function Hm(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Td(e)),sh().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function qm(){return sh().platform.now()}function Xm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",sh().platform.encode(e,t)}function Ym(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",sh().platform.decode(e,t)}var Km=function(){function e(t,n){d(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new Zm)}return p(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=qm();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=E(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(f){u.e(f)}finally{u.f()}a=Promise.resolve({kernelMs:qm()-o})}if(sh().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var l=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},c=0;c<r.length;c++)l(c);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var Zm=function(){function e(){d(this,e)}return p(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?Md("".concat(r,"ms"),9):r.error,s=Md(e,25),u=t.rank,l=t.size,c=Md(t.shape.toString(),14),f="";for(var d in a){var h=a[d];if(null!=h){var p=h.shape||t.shape,v=p.length;f+="".concat(d,": ").concat(v,"D ").concat(v>0?p:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(c,"\t%c").concat(l,"\t%c").concat(f,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function Qm(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var l in u){for(var c=u[l],f=!1,d=0;d<t.length;d++)if(r[c.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),f=!0,a[s.id]=!0;break}if(f)break}}var h={};h[n.id]=!0;for(var p={},v=e.length-1;v>=0;v--)for(var m=e[v],g=m.inputs,y=0;y<m.outputs.length;y++)if(h[m.outputs[y].id]){for(var b in g)h[g[b].id]=!0,p[m.id]=!0;break}for(var x=[],w=0;w<e.length;w++){var k=e[w];if(a[k.id]&&p[k.id]){var S={};for(var _ in k.inputs){var C=k.inputs[_];r[C.id]&&(S[_]=C)}var E=Object.assign({},k);E.inputs=S,E.outputs=k.outputs,x.push(E)}}return x}function $m(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!Ad(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var l in i.inputs)u(l)},i=t.length-1;i>=0;i--)a(i)}function Jm(e,t,n,r){var a=Xd(t),i=function(e,t,n,r){var a=Id(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?rg(e):e;if(s>1)for(var l=0;l<a/i;l++)for(var c=l*i,f=0;f<i;f++)o[f]=Math.max(o[f],eg(u[c+f],0,n).length);return o}(e,t,n,a),o=t.length,s=ng(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function eg(e,t,n){return Md(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):Wd(e)?"'".concat(e,"'"):"bool"===n?tg(e):parseFloat(e.toFixed(7)).toString(),t)}function tg(e){return 0===e?"false":"true"}function ng(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var l=rg(e);return[eg(l[0],0,n)]}return"bool"===n?[tg(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var c=3*o,d=Array.from(e.slice(0,c)),h=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(d=rg(d),h=rg(h)),["["+d.map((function(e,t){return eg(e,a[t],n)})).join(", ")+", ..., "+h.map((function(e,t){return eg(e,a[s-3+t],n)})).join(", ")+"]"]}var p="complex64"===n?rg(e):Array.from(e);return["["+p.map((function(e,t){return eg(e,a[t],n)})).join(", ")+"]"]}var v=t.slice(1),m=r.slice(1),g=r[0]*o,y=[];if(s>20){for(var b=0;b<3;b++){var x=b*g,w=x+g;y.push.apply(y,f(ng(e.slice(x,w),v,n,m,a,!1)))}y.push("...");for(var k=s-3;k<s;k++){var S=k*g,_=S+g;y.push.apply(y,f(ng(e.slice(S,_),v,n,m,a,k===s-1)))}}else for(var C=0;C<s;C++){var E=C*g,T=E+g;y.push.apply(y,f(ng(e.slice(E,T),v,n,m,a,C===s-1)))}var I=2===u?",":"";y[0]="["+y[0]+I;for(var A=1;A<y.length-1;A++)y[A]=" "+y[A]+I;for(var N=",\n",R=2;R<u;R++)N+="\n";return y[y.length-1]=" "+y[y.length-1]+"]"+(i?"":N),y}function rg(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var ag=function(){function e(t,n,r){var a=this;if(d(this,e),this.dtype=n,this.shape=t.slice(),this.size=Id(t),null!=r){var i=r.length;_d(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Fd(n,this.size),this.strides=Xd(t)}return p(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),_d(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],l=0;l<t.length-1;++l)u+=this.strides[l]*t[l];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return ig().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),ig=null,og=null;var sg=function(){function e(t,n,r,a){d(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Id(t),this.strides=Xd(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return p(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=A(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",og.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return og.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=A(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Kd(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Kd(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=A(T().mark((function e(){var t,n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=ig().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return Ym(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),ig().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=ig().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Ym(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=A(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,ig().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(ig().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return og.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),og.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return Jm(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),og.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),ig().makeVariable(this,e,t,n)}}]),e}();function ug(){return fh("Tensor",(function(){return sg}))}Object.defineProperty(sg,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),ug();var lg,cg,fg,dg,hg,pg=function(e){m(n,e);var t=k(n);function n(e,r,a,i){var o;return d(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return p(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Ad(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));ig().disposeTensor(this),this.dataId=e.dataId,ig().incRef(this,null)}},{key:"dispose",value:function(){ig().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(sg);Object.defineProperty(pg,Symbol.hasInstance,{value:function(e){return e instanceof sg&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(lg||(lg={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(cg||(cg={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(fg||(fg={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(dg||(dg={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(hg||(hg={}));var vg={float32:dg,int32:cg,bool:fg,complex64:hg};function mg(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return vg[e][t]}function gg(e){return mg(e,"int32")}function yg(e,t){if(e.dtype===t.dtype)return[e,t];var n=mg(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function bg(e,t){return t.some((function(t){return t.id===e.id}))}function xg(e){var t=[];return wg(e,t,new Set),t}function wg(e,t,n){if(null!=e)if(e instanceof sg)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),wg(o,t,n))}}}function kg(e){return null!=e.kernelName}var Sg=function(){function e(){d(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return p(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),_g=function(){function e(t){d(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Sg}return p(e,[{key:"ready",value:function(){var e=A(T().mark((function e(){var t,n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(ym("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=A(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Km(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;Sm(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;Sm(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof gd||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,ym("Initialization of backend ".concat(e," failed")),ym(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return ym("Initialization of backend ".concat(e," failed")),ym(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=Ig.runKernel(Cp,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return Ig.runKernel(Dh,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=wm(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var l=kg(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(kg(e)){var c=e.kernelName,f=e.inputs,d=e.attrs;null==this.backendName&&this.backend;var h=wm(c,this.backendName);_d(null!=h,(function(){return"Cannot find registered kernel '".concat(c,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=h.kernelFunc({inputs:f,attrs:d,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(o){var s=a.getTensorsForGradient(c,f,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var p=e.forwardFunc,v=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return p(a.backend,v)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t),t}}var m,g=e.inputs,y=e.attrs,b=kg(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(m=a.profiler.profileKernel(l,g,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(m),t=m.outputs):t=n()})),o&&this.addTapeNode(l,g,t,b,i,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map((function(e){return null!=g[e]?g[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=km(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(_d(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&Wd(e[0])&&(a=e.map((function(e){return Xm(e)})));var i=r.write(a,t,n),o=new sg(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new sg(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new pg(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Ud(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof pg||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*Ud(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=A(T().mark((function e(t){var n,r,a,i,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,f(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=E(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=24;break}return o=i.value,e.next=18,o.kernelTimeMs;case 18:return o.kernelTimeMs=e.sent,e.next=21,o.extraInfo;case 21:o.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=km(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Qd(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=xg(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(_d(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));_d(i instanceof sg,(function(){return"The result y returned by f() must be a tensor."}));var o=Qm(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?Cg(i.shape):n,$m(e,o,(function(e){return r.tidy(e)}),Ag);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=E(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return _d(Hd(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;_d(r.every((function(e){return e instanceof sg})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return _d((i=e.apply(void 0,[].concat(r,[n]))).value instanceof sg,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),_d(Hd(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];_d(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),_d(a.every((function(e){return e instanceof sg})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=A(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qm(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=qm()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Sg,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function Cg(e){var t=Zd(Id(e),"float32");return Ig.makeTensor(t,e,"float32")}function Eg(){var e=ch();if(null==e._tfengine){var t=new ah(e);e._tfengine=new _g(t)}return function(e){lh=e}(e._tfengine.ENV),ig=function(){return e._tfengine},e._tfengine}_g.nextTensorId=0,_g.nextVariableId=0;var Tg,Ig=Eg();function Ag(e,t){var n={a:e,b:t};return Ig.runKernel(vh,n)}function Ng(e){if(void 0!==Tg)return Tg;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Rg(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var Mg=sh();function Og(e,t){var n=e;if(zd(e))return"string"===t?[]:[e.length];if("object"===typeof e&&"texture"in e){var r=e.channels||"RGBA";return[e.height,e.width*r.length]}if(!Array.isArray(e))return[];for(var a=[];Array.isArray(n)||zd(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&sh().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Dg(e,a,[]),a}function Dg(e,t,n){if(n=n||[],Array.isArray(e)||zd(e)){_d(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),_d(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)Dg(e[a],r,n.concat(a))}else _d(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function Lg(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function jg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof sg)return Lg(r,e.dtype,t,n),e;var a=Vd(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Lg(r,a,t,n),null==e||!zd(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=Og(e,a);zd(e)||Array.isArray(e)||(e=[e]);var s=!0,u="string"!==a?Hm(e,a):Td(e,[],s);return Ig.makeTensor(u,o,a)}function Pg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return jg(e,"".concat(t,"[").concat(a,"]"),n,r)}))}Mg.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Mg.registerFlag("IS_BROWSER",(function(){return Rg()})),Mg.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),Mg.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Mg.registerFlag("PROD",(function(){return!1})),Mg.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Mg.getBool("DEBUG")})),Mg.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Mg.registerFlag("IS_TEST",(function(){return!1})),Mg.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),Mg.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),Mg.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1})),Mg.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(function(){return!1})),Mg.registerFlag("USE_SETTIMEOUTCUSTOM",(function(){return!1}));function Fg(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";var a=function(){Ig.startScope(n);try{var e=r.apply(void 0,arguments);return nh(e)&&console.error("Cannot return a Promise inside of tidy."),Ig.endScope(e),e}catch(t){throw Ig.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var Bg=Fg({complex_:function(e,t){var n=jg(e,"real","complex"),r=jg(t,"imag","complex");Cd(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return Ig.runKernel(Ph,a)}});function zg(e,t,n,r){if(null==r&&(r=Vd(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if("object"===typeof e&&"texture"in e){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from texture only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return e.channels=e.channels||"RGBA",Ig.backend.createTensorFromTexture(e,t||n,r)}if(!zd(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Jd(t);var a=Id(t),i=Id(n);_d(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==Id(t.slice(o));_d(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return zd(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?Hm(e,r):Td(e,[],!0),Ig.makeTensor(e,t,r)}function Ug(e,t,n){return zg(e,t,Og(e,n),n)}var Wg={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function Gg(e,t){return Vg.apply(this,arguments)}function Vg(){return Vg=A(T().mark((function e(t,n){var r,a,i,o,s,u;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=function(e){var o=i[e],s=Array.isArray(t)?t[e].tensor:t[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s.dtype));var u={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var l=new Promise(function(){var e=A(T().mark((function e(t){var n,r,a,i,o,u,l;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)u=n[o],l=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(l,i),i+=4,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(l)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<i.length;++s)o(s);return e.next=7,Promise.all(a);case 7:return u=e.sent,e.abrupt("return",{data:qg(u),specs:r});case 9:case"end":return e.stop()}}),e)}))),Vg.apply(this,arguments)}function Hg(e,t){var n,r,a={},i=0,o=E(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,l=s.dtype,c=s.shape,f=Id(c),d=void 0;if("quantization"in s){var h=s.quantization;if("uint8"===h.dtype||"uint16"===h.dtype){if(!("min"in h)||!("scale"in h))throw new Error("Weight ".concat(s.name," with quantization ").concat(h.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==h.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(h.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==l)throw new Error("Weight ".concat(s.name," is quantized with ").concat(h.dtype," ")+"which only supports weights of type float32 not ".concat(l,"."))}var p=Wg[h.dtype],v=e.slice(i,i+f*p),m="uint8"===h.dtype?new Uint8Array(v):new Uint16Array(v);if("float32"===l)if("uint8"===h.dtype||"uint16"===h.dtype){d=new Float32Array(m.length);for(var g=0;g<m.length;g++){var y=m[g];d[g]=y*h.scale+h.min}}else{if("float16"!==h.dtype)throw new Error("Unsupported quantization type ".concat(h.dtype," ")+"for weight type float32.");void 0===n&&(n=iy()),d=n(m)}else{if("int32"!==l)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(l));if("uint8"!==h.dtype&&"uint16"!==h.dtype)throw new Error("Unsupported quantization type ".concat(h.dtype," ")+"for weight type int32.");d=new Int32Array(m.length);for(var b=0;b<m.length;b++){var x=m[b];d[b]=Math.round(x*h.scale+h.min)}}i+=f*p}else if("string"===l){var w=Id(s.shape);d=[];for(var k=0;k<w;k++){var S=new Uint32Array(e.slice(i,i+4))[0];i+=4;var _=new Uint8Array(e.slice(i,i+S));d.push(_),i+=S}}else{var C=Wg[l],T=e.slice(i,i+f*C);if("float32"===l)d=new Float32Array(T);else if("int32"===l)d=new Int32Array(T);else if("bool"===l)d=new Uint8Array(T);else{if("complex64"!==l)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(l));d=new Float32Array(T);for(var I=new Float32Array(d.length/2),A=new Float32Array(d.length/2),N=0;N<I.length;N++)I[N]=d[2*N],A[N]=d[2*N+1];var R=Ug(I,c,"float32"),M=Ug(A,c,"float32");a[u]=Bg(R,M),R.dispose(),M.dispose()}i+=f*C}"complex64"!==l&&(a[u]=Ug(d,c,l))}}catch(O){o.e(O)}finally{o.f()}return a}function qg(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var Xg="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function Yg(e){return Xg?Buffer.byteLength(e):new Blob([e]).size}function Kg(e){if(Xg)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function Zg(e){if(Xg){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function Qg(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function $g(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Jg(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function ey(e,t,n){var r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}function ty(e,t){return ny.apply(this,arguments)}function ny(){return ny=A(T().mark((function e(t,n){var r,a,i,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.weightsManifest){e.next=7;break}return e.next=3,n(t.weightsManifest);case 3:i=e.sent,o=C(i,2),r=o[0],a=o[1];case 7:return e.abrupt("return",ey(t,r,a));case 8:case"end":return e.stop()}}),e)}))),ny.apply(this,arguments)}function ry(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Yg(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Yg(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function ay(e){var t,n=[],r=E(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push.apply(n,f(a.weights))}}catch(i){r.e(i)}finally{r.f()}return n}function iy(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var oy=function(){function e(){d(this,e),this.saveRouters=[],this.loadRouters=[]}return p(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),sy=function(e){return oy.registerSaveRouter(e)},uy=function(e){return oy.registerLoadRouter(e)},ly=function(e){return oy.getSaveHandlers(e)},cy=function(e,t){return oy.getLoadHandlers(e,t)},fy="tensorflowjs",dy="models_store",hy="model_info_store";function py(){if(!sh().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function vy(e){var t=e.result;t.createObjectStore(dy,{keyPath:"modelPath"}),t.createObjectStore(hy,{keyPath:"modelPath"})}var my=function(){function e(t){if(d(this,e),this.indexedDB=py(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return p(e,[{key:"save",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(fy,1);a.onupgradeneeded=function(){return vy(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(dy,"readonly"),s=o.objectStore(dy).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,l=ry(t),c=i.transaction(hy,"readwrite"),f=c.objectStore(hy),d=f.put({modelPath:n.modelPath,modelArtifactsInfo:l});d.onsuccess=function(){var a=(u=i.transaction(dy,"readwrite")).objectStore(dy).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(f=c.objectStore(hy)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},d.onerror=function(e){return i.close(),r(d.error)},c.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();my.URL_SCHEME="indexeddb://";var gy=function(e){return sh().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(my.URL_SCHEME)?(t=e.slice(my.URL_SCHEME.length),new my(t)):null;var t};function yy(e){return e.startsWith(my.URL_SCHEME)?e.slice(my.URL_SCHEME.length):e}oy.registerSaveRouter(gy),oy.registerLoadRouter(gy);var by=function(){function e(){d(this,e),this.indexedDB=py()}return p(e,[{key:"listModels",value:function(){var e=A(T().mark((function e(){var t=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(fy,1);r.onupgradeneeded=function(){return vy(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(hy,"readonly"),i=a.objectStore(hy).getAll();i.onsuccess=function(){var t,n={},r=E(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=A(T().mark((function e(t){var n=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=yy(t),e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(fy,1);a.onupgradeneeded=function(){return vy(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(hy,"readwrite"),s=o.objectStore(hy),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(dy,"readwrite")).objectStore(dy).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),xy="/",wy="tensorflowjs_models",ky="info",Sy="model_topology",_y="weight_specs",Cy="weight_data",Ey="model_metadata";function Ty(e){return{info:[wy,e,ky].join(xy),topology:[wy,e,Sy].join(xy),weightSpecs:[wy,e,_y].join(xy),weightData:[wy,e,Cy].join(xy),modelMetadata:[wy,e,Ey].join(xy)}}function Iy(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function Ay(e){var t=e.split(xy);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(xy)}function Ny(e){return e.startsWith(Ry.URL_SCHEME)?e.slice(Ry.URL_SCHEME.length):e}var Ry=function(){function e(t){if(d(this,e),!sh().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Ty(this.modelPath)}return p(e,[{key:"save",value:function(){var e=A(T().mark((function e(t){var n,r,a,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=ry(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Kg(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,initializerSignature:null!=t.initializerSignature?t.initializerSignature:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),Iy(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=A(T().mark((function e(){var t,n,r,a,i,o,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.initializerSignature&&(n.initializerSignature=o.initializerSignature),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=Zg(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();Ry.URL_SCHEME="localstorage://";var My=function(e){return sh().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ry.URL_SCHEME)?(t=e.slice(Ry.URL_SCHEME.length),new Ry(t)):null;var t};oy.registerSaveRouter(My),oy.registerLoadRouter(My);var Oy=function(){function e(){d(this,e),_d(sh().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),_d("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return p(e,[{key:"listModels",value:function(){var e=A(T().mark((function e(){var t,n,r,a,i,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=wy+xy,r=xy+ky,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=Ay(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=A(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ny(t),n=Ty(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),Iy(n),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Dy="://",Ly=function(){function e(){d(this,e),this.managers={}}return p(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){_d(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Dy)&&(t=t.slice(0,t.indexOf(Dy))),_d(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();_d(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(t){var n=e.getInstance().managers[t];if(null==n)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return n}},{key:"getSchemes",value:function(){return Object.keys(e.getInstance().managers)}}]),e}();function jy(e){if(-1===e.indexOf(Dy))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(Ly.getSchemes().join(",")));return{scheme:e.split(Dy)[0],path:e.split(Dy)[1]}}function Py(e,t){return Fy.apply(this,arguments)}function Fy(){return Fy=A(T().mark((function e(t,n){var r,a,i,o,s,u,l,c,f,d,h=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]&&h[2],_d(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),_d((a=oy.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),_d(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],_d((o=oy.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),_d(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],u=jy(t).scheme,l=jy(t).path,c=u===jy(t).scheme,e.next=15,i.load();case 15:if(f=e.sent,!r||!c){e.next=19;break}return e.next=19,Ly.getManager(u).removeModel(l);case 19:return e.next=21,s.save(f);case 21:if(d=e.sent,!r||c){e.next=25;break}return e.next=25,Ly.getManager(u).removeModel(l);case 25:return e.abrupt("return",d.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),Fy.apply(this,arguments)}function By(){return zy.apply(this,arguments)}function zy(){return zy=A(T().mark((function e(){var t,n,r,a,i,o,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ly.getSchemes(),n={},r=E(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,Ly.getManager(i).listModels();case 9:for(s in o=e.sent)n[i+Dy+s]=o[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])}))),zy.apply(this,arguments)}function Uy(e){return Wy.apply(this,arguments)}function Wy(){return(Wy=A(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=jy(t),r=Ly.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gy(e,t){return Vy.apply(this,arguments)}function Vy(){return(Vy=A(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",Py(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hy(e,t){return qy.apply(this,arguments)}function qy(){return(qy=A(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",Py(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xy=function(){function e(){d(this,e),this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}return p(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}},{key:"setTimeoutCustom",value:function(e,t){var n=this;"undefined"!==typeof window&&sh().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((function(){window.postMessage({name:n.messageName,index:n.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(function(e){e.source===window&&e.data.name===n.messageName&&(e.stopPropagation(),(0,n.functionRefs[e.data.index])(),n.handledMessageCount++,n.handledMessageCount===n.functionRefs.length&&(n.functionRefs=[],n.handledMessageCount=0))}),!0))):setTimeout(e,t)}}]),e}();if(sh().get("IS_BROWSER")){sh().setPlatform("browser",new Xy);try{Ly.registerManager(Ry.URL_SCHEME,new Oy)}catch(cZ){}try{Ly.registerManager(my.URL_SCHEME,new by)}catch(cZ){}}var Yy,Ky=function(){return n(5410)};var Zy=function(){function e(){d(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return p(e,[{key:"fetch",value:function(e,t){return null!=sh().global.fetch?sh().global.fetch(e,t):(null==Yy&&(Yy=Ky()),Yy(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function Qy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",Jd(e),new ag(e,t,n)}sh().get("IS_NODE")&&!sh().get("IS_BROWSER")&&sh().setPlatform("node",new Zy);var $y=Fg({cast_:function(e,t){var n=jg(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return Ig.runKernel(Dh,r,a)}});var Jy=Fg({clone_:function(e){var t={x:jg(e,"x","clone","string_or_numeric")};return Ig.runKernel(Cp,t)}});Eg();var eb={buffer:Qy,cast:$y,clone:Jy,print:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};og=eb;function tb(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var nb=function(){function e(t){if(d(this,e),!sh().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return p(e,[{key:"save",value:function(){var e=A(T().mark((function e(t){var n,r,a,i,o,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Jg(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,tb((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,tb((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:ry(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();nb.URL_SCHEME="downloads://";var rb=function(){function e(t){if(d(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return p(e,[{key:"load",value:function(){var e=A(T().mark((function e(){var t=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=ty(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=E(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,f(o.weights)),a.push.apply(a,f(o.paths))}}catch(cZ){i.e(cZ)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,Qg(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return $g(e.name)})),i={},o=E(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=$g(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(cZ){o.e(cZ)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return i}}]),e}();function ab(e){return new rb(e)}function ib(e,t,n,r){!function(e){_d(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){_d(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),_d(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),_d(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function ob(e,t){return sb.apply(this,arguments)}function sb(){return(sb=A(T().mark((function e(t,n){var r,a,i,o,s,u,l,c,f;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?sh().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,ib(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),l=.5,c=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,ib(u,n.onProgress,l,c);case 26:e.t1=e.sent;case 27:return f=e.t1,e.abrupt("return",f);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ub(e){return lb.apply(this,arguments)}function lb(){return lb=A(T().mark((function e(t){var n,r,a,i,o=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=cb((function(e){return ob(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)}))),lb.apply(this,arguments)}function cb(e){return function(){var t=A(T().mark((function t(n){var r,a,i,o,s,u,l,c,f,d,h,p,v=arguments;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=v.length>1&&void 0!==v[1]?v[1]:"",a=v.length>2?v[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,l=Wg[r]*Id(e.shape),c=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=a?a.forEach((function(t,n){t===e.name&&(c(),s[n]=!0)})):c(),u.push(e.name),n+=l}))})),s.every((function(e){return e}))){t.next=10;break}throw l=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(l.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return c=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),f=[],c.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;f.push(t)}))})),t.next=15,e(f);case 15:return d=t.sent,h={},p=0,c.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=d[p+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,l=0;l<t;l++){var c=new Uint8Array(d[p+l]);s.set(c,u),u+=c.byteLength}o[e].forEach((function(e){var t=Hg(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)h[n]=t[n]})),p+=t})),t.abrupt("return",h);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}oy.registerSaveRouter((function(e){return sh().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(nb.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new nb(e)}(e.slice(nb.URL_SCHEME.length)):null}));var fb=function(){function e(t,n){if(d(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(_d("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=sh().platform.fetch,_d(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&_d(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return p(e,[{key:"save",value:function(){var e=A(T().mark((function e(t){var n,r,a,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=Jg(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:ry(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=A(T().mark((function e(){var t,n,r,a,i,o=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",ty(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=A(T().mark((function e(t){var n,r,a,i,o,s,u,l,c,d,h,p,v,m,g,y;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=db(n),a=C(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=ay(t),l=[],c=[],d=E(t);try{for(d.s();!(h=d.n()).done;){p=h.value,v=E(p.paths);try{for(v.s();!(m=v.n()).done;)g=m.value,null!=this.weightUrlConverter?c.push(this.weightUrlConverter(g)):l.push(s+g+o)}catch(cZ){v.e(cZ)}finally{v.f()}}}catch(cZ){d.e(cZ)}finally{d.f()}if(!this.weightUrlConverter){e.next=17;break}return e.t0=l.push,e.t1=l,e.t2=f,e.next=14,Promise.all(c);case 14:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 17:return e.next=19,ob(l,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 19:return y=e.sent,e.abrupt("return",[u,Qg(y)]);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function db(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function hb(e){return null!=e.match(fb.URL_SCHEME_REGEX)}fb.URL_SCHEME_REGEX=/^https?:\/\//;var pb=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return hb(e)})):hb(e))?vb(e,t):null};function vb(e,t){return new fb(e,t)}function mb(e,t){return vb(e,t)}oy.registerSaveRouter(pb),oy.registerLoadRouter(pb);var gb=function(){function e(t){d(this,e),this.modelArtifacts=t}return p(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),yb=function(){function e(t){d(this,e),this.saveHandler=t}return p(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),bb=p((function e(t){d(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function xb(e,t,n,r){var a=arguments;return new bb(wb.apply(void 0,f(a)))}function wb(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new gb(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new gb({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new gb({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function kb(e){return new yb(e)}function Sb(e){return new yb(e)}function _b(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function Cb(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function Eb(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}function Tb(e,t,n){var r=e.shape.length;_d(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),_d(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){_d(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function Ib(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function Ab(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function Nb(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Rb(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat(f(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){_d(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat(f(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(_d(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function Mb(e,t,n,r,a,i,o,s,u){var l;if(null==r?(l=new Array(t.length)).fill(1):l=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var c=!1,f={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:l.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},d=0;d<f.dims;d++)c&&0!==(1<<d&s)&&f.numAddAxisAfterEllipsis++,1<<d&o&&(c=!0);c||(f.ellipsisMask|=1<<f.dims,f.dims++);var h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(f,h);for(var p=!0,v=!0,m=!0,g=[],y=[],b=0;b<e.length;++b){if(0===h.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(h.shrinkAxisMask&1<<b),w=e[b];if(-1!==w){var k=[h.beginMask&1<<b,h.endMask&1<<b],S=[h.strides[b]>0?0:-1,h.strides[b]>0?w:w-1];if(x&&h.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===h.strides[b];var _=!!(h.beginMask&1<<b&&h.endMask&1<<b);if(h.beginValid&&h.endValid){if(x){var C=h.begin[b]<0?w+h.begin[b]:h.begin[b];if(h.begin[b]=C,h.end[b]=h.begin[b]+1,C<0||C>=w)throw Error("slice index ".concat(h.begin[b]," of dimension ").concat(b," out of bounds."))}else h.begin[b]=Ob(h.begin[b],0,h.strides[b],w,k,S),h.end[b]=Ob(h.end[b],1,h.strides[b],w,k,S);var E=1===h.strides[b]&&0===h.begin[b]&&h.end[b]===w;p=p&&E,v=v&&(0===b&&1===h.strides[b]||E)}else p=p&&1===h.strides[b]&&_,v=v&&(0===b&&1===h.strides[b]||_);var T=void 0,I=!1;if(h.beginValid&&h.endValid?(T=h.end[b]-h.begin[b],I=!0):x?(T=1,I=!0):_&&w>=0&&(T=h.strides[b]<0?-w:w,I=!0),I){var A=void 0;A=0===T||T<0!==h.strides[b]<0?0:Math.trunc(T/h.strides[b])+(T%h.strides[b]!==0?1:0),g.push(A)}else g.push(-1)}else g.push(x?1:-1)}for(var N=0;N<h.finalShapeGatherIndices.length;++N){var R=h.finalShapeGatherIndices[N];R>=0?y.push(g[R]):-2===R&&y.push(1)}var M=y.filter((function(e,t){return-2!==h.finalShapeGatherIndices[t]}));return{finalShapeSparse:M,finalShape:y,isIdentity:p,sliceDim0:v,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function Ob(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var Db=function(){function e(){d(this,e)}return p(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),Lb=function(){function e(){d(this,e),this.classNameMap={}}return p(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function jb(e){_d(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),_d("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),_d(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Lb.register(e)}function Pb(){return Ig}function Fb(){return Ig.memory()}function Bb(e,t){return Ig.tidy(e,t)}function zb(e){xg(e).forEach((function(e){return e.dispose()}))}function Ub(e){return Ig.keep(e)}function Wb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Ig.registerBackend(e,t,n)}function Gb(e){return Ig.customGrad(e)}function Vb(e,t){if((zd(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&zd(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return zg(e,[],[],t)}var Hb=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return zb(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return function(e,t){_d(Hd(e),(function(){return"The f passed in variableGrads(f) must be a function"})),_d(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof pg})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Ig.registeredVariables)t.push(Ig.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;t=t.filter((function(e){return e.trainable})),_d(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."}));var o=Ig.gradients(e,t,null,!0),s=o.value,u=o.grads;_d(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),_d(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var l={};return t.forEach((function(e,t){null!=u[t]&&(l[e.name]=u[t])})),null!=a&&a.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&zb(this.iterations_)}},{key:"saveIterations",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:Vb(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Db);Object.defineProperty(Hb,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var qb=Fg({abs_:function(e){var t=jg(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return Ig.runKernel(Fh,n)}var r={x:t};return Ig.runKernel(dh,r)}});var Xb=Fg({add_:function(e,t){var n=jg(e,"a","add"),r=jg(t,"b","add"),a=C(yg(n,r),2),i={a:n=a[0],b:r=a[1]};return Ig.runKernel(vh,i)}});var Yb=Fg({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=jg(e,"x","all","bool"),a={x:r},i={axis:t,keepDims:n};return Ig.runKernel(gh,a,i)}});var Kb=Fg({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=jg(e,"x","any","bool"),a={x:r},i={axis:t,keepDims:n};return Ig.runKernel(yh,a,i)}});var Zb=Fg({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=jg(e,"x","argMax"),r={x:n},a={axis:t};return Ig.runKernel(bh,r,a)}});function Qb(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3],s=[].concat(f(t),[o]),u=fx(a);return ex(e,s,n,i,r,null,null,u)}function $b(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=rx(t),l=C(u,2),c=l[0],f=l[1];if("channelsLast"===s)o=[c,f,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[c,f,e[1],e[1]]}return ex(e,o,n,r,a,i,!1,s)}function Jb(e,t,n,r,a,i){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",l=ax(t),c=C(l,3),f=c[0],d=c[1],h=c[2];if("NDHWC"===u)s="channelsLast",o=[f,d,h,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",o=[f,d,h,e[1],e[1]]}return tx(e,o,n,r,a,!1,s,i)}function ex(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,l=-1,c=-1,f=-1;if("channelsLast"===s){var d=C(e,4);u=d[0],l=d[1],c=d[2],f=d[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var h=C(e,4);u=h[0],f=h[1],l=h[2],c=h[3]}var p,v=C(t,4),m=v[0],g=v[1],y=v[3],b=rx(n),x=C(b,2),w=x[0],k=x[1],S=rx(r),_=C(S,2),E=_[0],T=_[1],I=ix(m,E),A=ix(g,T),N=ox(a,l,c,w,k,I,A,i,s),R=N.padInfo,M=N.outHeight,O=N.outWidth,D=o?y*f:y;return"channelsFirst"===s?p=[u,D,M,O]:"channelsLast"===s&&(p=[u,M,O,D]),{batchSize:u,dataFormat:s,inHeight:l,inWidth:c,inChannels:f,outHeight:M,outWidth:O,outChannels:D,padInfo:R,strideHeight:w,strideWidth:k,filterHeight:m,filterWidth:g,effectiveFilterHeight:I,effectiveFilterWidth:A,dilationHeight:E,dilationWidth:T,inShape:e,outShape:p,filterShape:t}}function tx(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,l=-1,c=-1,f=-1,d=-1;if("channelsLast"===o){var h=C(e,5);u=h[0],l=h[1],c=h[2],f=h[3],d=h[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var p=C(e,5);u=p[0],d=p[1],l=p[2],c=p[3],f=p[4]}var v,m=C(t,5),g=m[0],y=m[1],b=m[2],x=m[4],w=ax(n),k=C(w,3),S=k[0],_=k[1],E=k[2],T=ax(r),I=C(T,3),A=I[0],N=I[1],R=I[2],M=ix(g,A),O=ix(y,N),D=ix(b,R),L=sx(a,l,c,f,S,_,E,M,O,D,s),j=L.padInfo,P=L.outDepth,F=L.outHeight,B=L.outWidth,z=i?x*d:x;return"channelsFirst"===o?v=[u,z,P,F,B]:"channelsLast"===o&&(v=[u,P,F,B,z]),{batchSize:u,dataFormat:o,inDepth:l,inHeight:c,inWidth:f,inChannels:d,outDepth:P,outHeight:F,outWidth:B,outChannels:z,padInfo:j,strideDepth:S,strideHeight:_,strideWidth:E,filterDepth:g,filterHeight:y,filterWidth:b,effectiveFilterDepth:M,effectiveFilterHeight:O,effectiveFilterWidth:D,dilationDepth:A,dilationHeight:N,dilationWidth:R,inShape:e,outShape:v,filterShape:t}}function nx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=ix(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function rx(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function ax(e){return"number"===typeof e?[e,e,e]:e}function ix(e,t){return t<=1?e:e+(e-1)*(t-1)}function ox(e,t,n,r,a,i,o,s,u){var l,c,f;if("number"===typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,a){null==r&&(r=nx(e,t,n));var i=e[0],o=e[1];return[ux((i-t+2*r)/n+1,a),ux((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);c=d[0],f=d[1]}else if("same"===e){c=Math.ceil(t/r),f=Math.ceil(n/a);var h=Math.max(0,(c-1)*r+i-t),p=Math.max(0,(f-1)*a+o-n),v=Math.floor(h/2),m=h-v,g=Math.floor(p/2);l={top:v,bottom:m,left:g,right:p-g,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),f=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],w="channelsLast"===u?e[2][1]:e[3][1];l={top:y,bottom:b,left:x,right:w,type:0===y&&0===b&&0===x&&0===w?"VALID":"EXPLICIT"},c=ux((t-i+y+b)/r+1,s),f=ux((n-o+x+w)/a+1,s)}return{padInfo:l,outHeight:c,outWidth:f}}function sx(e,t,n,r,a,i,o,s,u,l,c){var f,d,h,p;if("number"===typeof e){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,a,i){null==a&&(a=nx(e,t,r));var o=e[0],s=e[1],u=e[2];return[ux((o-t+2*a)/r+1,i),ux((s-t+2*a)/r+1,i),ux((u-t+2*a)/r+1,i),n]}([t,n,r,1],s,1,a,e,c);d=v[0],h=v[1],p=v[2]}else if("same"===e){var m=((d=Math.ceil(t/a))-1)*a+s-t,g=((h=Math.ceil(n/i))-1)*i+u-n,y=((p=Math.ceil(r/o))-1)*o+l-r,b=Math.floor(m/2),x=m-b,w=Math.floor(g/2),k=g-w,S=Math.floor(y/2);f={top:w,bottom:k,left:S,right:y-S,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-s+1)/a),h=Math.ceil((n-u+1)/i),p=Math.ceil((r-l+1)/o)}return{padInfo:f,outDepth:d,outHeight:h,outWidth:p}}function ux(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function lx(e){var t=C(rx(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function cx(e,t){return lx(e)||lx(t)}function fx(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function dx(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)_d(Nd(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){_d(Nd(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var hx=Fg({reshape_:function(e,t){var n={x:jg(e,"x","reshape","string_or_numeric")},r={shape:t};return Ig.runKernel(wv,n,r)}});var px=Fg({avgPool_:function(e,t,n,r,a){var i=jg(e,"x","avgPool","float32");_d(cx(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=hx(i,[1,i.shape[0],i.shape[1],i.shape[2]])),_d(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),dx("avgPool",r,a);var u={x:o},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=Ig.runKernel(Eh,u,l);return c=$y(c,i.dtype),s?hx(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var vx=Fg({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=jg(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=hx(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),_d(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),_d("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),dx("avgPool3d",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},f=Ig.runKernel(Ih,l,c);return f=$y(f,s.dtype),u?hx(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var mx=Fg({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=jg(e,"x","batchNorm"),l=jg(t,"mean","batchNorm"),c=jg(n,"variance","batchNorm");null!=a&&(o=jg(a,"scale","batchNorm")),null!=r&&(s=jg(r,"offset","batchNorm")),_d(l.rank===c.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),_d(null==s||l.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),_d(null==o||l.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var f=function(e){return 0===e.rank||1===e.rank?hx(e,[1,1,1,e.size]):2===e.rank?hx(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?hx(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),d={x:f,scale:o,offset:s,mean:l,variance:c},h={varianceEpsilon:i},p=Ig.runKernel(xp,d,h);return hx(p,u.shape)}});var gx=Fg({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=jg(e,"x","batchNorm"),l=jg(t,"mean","batchNorm"),c=jg(n,"variance","batchNorm");return null!=a&&(o=jg(a,"scale","batchNorm")),null!=r&&(s=jg(r,"offset","batchNorm")),_d(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),_d(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(l.rank,".")})),_d(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&_d(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&_d(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),mx(u,l,c,s,o,i)}});var yx=Fg({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=jg(e,"x","batchNorm"),l=jg(t,"mean","batchNorm"),c=jg(n,"variance","batchNorm");return null!=a&&(o=jg(a,"scale","batchNorm")),null!=r&&(s=jg(r,"offset","batchNorm")),_d(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),_d(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(l.rank,".")})),_d(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&_d(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&_d(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),mx(u,l,c,s,o,i)}});var bx=Fg({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=jg(e,"x","batchNorm"),l=jg(t,"mean","batchNorm"),c=jg(n,"variance","batchNorm");return null!=a&&(o=jg(a,"scale","batchNorm")),null!=r&&(s=jg(r,"offset","batchNorm")),_d(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),_d(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(l.rank,".")})),_d(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&_d(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&_d(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),mx(u,l,c,s,o,i)}});var xx=Fg({broadcastTo_:function(e,t){var n=jg(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=hx(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return Jy(n);var l={x:n},c={reps:o};return Ig.runKernel(im,l,c)}});function wx(e,t,n){var r={shape:e,value:t,dtype:n};return Ig.runKernel(mp,{},r)}var kx=Fg({clipByValue_:function(e,t,n){var r=jg(e,"x","clipByValue");if(_d(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")})),t===n)return wx(r.shape,t,r.dtype);var a={x:r},i={clipValueMin:t,clipValueMax:n};return Ig.runKernel(jh,a,i)}});var Sx=Fg({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_d(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Pg(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return Jy(n[0]);var r=n,a={axis:t};return Ig.runKernel(Bh,r,a)}});var _x=Fg({concat1d_:function(e){return Sx(e,0)}});var Cx=Fg({concat2d_:function(e,t){return Sx(e,t)}});var Ex=Fg({concat3d_:function(e,t){return Sx(e,t)}});var Tx=Fg({concat4d_:function(e,t){return Sx(e,t)}});var Ix=Fg({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=jg(e,"x","conv2d","float32"),u=jg(t,"filter","conv2d","float32"),l=s,c=!1;3===s.rank&&(c=!0,l=hx(s,[1,s.shape[0],s.shape[1],s.shape[2]])),_d(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(l.rank,".")})),_d(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),dx("conv2d",r,o);var f="NHWC"===a?l.shape[3]:l.shape[1];_d(f===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(f,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),_d(cx(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}));var d={x:l,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=Ig.runKernel(zh,d,h);return c?hx(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Ax=Fg({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=jg(e,"x","conv1d"),u=jg(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=hx(s,[1,s.shape[0],s.shape[1]])),_d(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(l.rank,".")})),_d(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),dx("conv1d",r,o),_d(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(l.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),_d(cx(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),_d("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var f=hx(u,[1,u.shape[0],u.shape[1],u.shape[2]]),d=hx(l,[l.shape[0],1,l.shape[1],l.shape[2]]),h=[1,n],p=[1,i],v="NHWC",m=Ix(d,f,h,r,v,p,o);return hx(m,c?[m.shape[2],m.shape[3]]:[m.shape[0],m.shape[2],m.shape[3]])}});var Nx=Fg({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;_d(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,l=!1;3===t.rank&&(l=!0,u=hx(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),_d(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),_d(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),_d(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var c="NHWC"===i?s[3]:s[1],f="NHWC"===i?u.shape[3]:u.shape[1];_d(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),_d(f===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(f,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),dx("conv2dDerInput",a,o);var d={dy:u,filter:n},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},p=Ig.runKernel(Wh,d,h);return l?hx(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Rx=Fg({conv2dTranspose_:function(e,t,n,r,a,i){var o=jg(e,"x","conv2dTranspose"),s=jg(t,"filter","conv2dTranspose");return Nx(n,o,s,r,a,"NHWC",i)}});var Mx=Fg({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=jg(e,"x","conv3d"),s=jg(t,"filter","conv3d"),u=o,l=!1;4===o.rank&&(l=!0,u=hx(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),_d(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),_d(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),_d(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),_d(cx(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),_d("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var c={x:u,filter:s},f={strides:n,pad:r,dataFormat:a,dilations:i},d=Ig.runKernel(Gh,c,f);return l?hx(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var Ox=Fg({conv3DBackpropInput_:function(e,t,n,r,a){_d(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=hx(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],l=o.shape[4];_d(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),_d(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),_d(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),_d(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),_d(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(l,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var c={dy:o,filter:n},f={pad:a,strides:r,inputShape:i},d=Ig.runKernel(Hh,c,f);return s?hx(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var Dx=Fg({conv3dTranspose_:function(e,t,n,r,a){var i=jg(e,"x","conv3dTranspose"),o=jg(t,"filter","conv3dTranspose");return Ox(n,i,o,r,a)}});var Lx=Fg({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=jg(e,"x","denseBincount"),i=jg(t,"weights","denseBincount");_d("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),_d(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),_d(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),_d(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")}));var o={x:a,weights:i},s={size:n,binaryOutput:r};return Ig.runKernel(Qh,o,s)}});var jx=Fg({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=jg(e,"x","depthwiseConv2d","float32"),u=jg(t,"filter","depthwiseConv2d","float32"),l=s,c=!1;3===s.rank&&(c=!0,l=hx(s,[1,s.shape[0],s.shape[1],s.shape[2]])),_d(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),_d(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")}));var f="NHWC"===a?l.shape[3]:l.shape[1];_d(f===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(f,") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),dx("depthwiseConv2d",r,o);var d={x:l,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=Ig.runKernel(Jh,d,h);return c?hx(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Px=Fg({floorDiv_:function(e,t){var n=jg(e,"a","floorDiv"),r=jg(t,"b","floorDiv"),a=C(yg(n,r),2),i={a:n=a[0],b:r=a[1]};return Ig.runKernel(bp,i)}});var Fx=Fg({div_:function(e,t){var n=jg(e,"a","div"),r=jg(t,"b","div"),a=C(yg(n,r),2);if(n=a[0],r=a[1],"int32"===n.dtype&&"int32"===r.dtype)return Px(n,r);var i={a:n,b:r};return Ig.runKernel(op,i,{})}});var Bx=Fg({elu_:function(e){var t={x:jg(e,"x","elu","float32")};return Ig.runKernel(up,t)}});var zx=Fg({equal_:function(e,t){var n=jg(e,"a","equal","string_or_numeric"),r=jg(t,"b","equal","string_or_numeric"),a=C(yg(n,r),2);n=a[0],r=a[1],Eb(n.shape,r.shape);var i={a:n,b:r};return Ig.runKernel(fp,i)}});var Ux=Fg({exp_:function(e){var t={x:jg(e,"x","exp")};return Ig.runKernel(dp,t)}});var Wx=Fg({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=jg(e,"x","expandDims","string_or_numeric");_d(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return Ig.runKernel(hp,r,a)}});var Gx=Fg({tile_:function(e,t){var n=jg(e,"x","tile","string_or_numeric");_d(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return Ig.runKernel(im,r,a)}});var Vx=Fg({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=Qy([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=hx(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return Gx(Wx(s,0),[n[0],1,1]);if(2===n.length)return Gx(Wx(Wx(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Gx(Wx(Wx(Wx(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});var Hx=Fg({floor_:function(e){var t={x:jg(e,"x","floor","float32")};return Ig.runKernel(yp,t)}});var qx=Fg({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=jg(e,"x","gather"),i=jg(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return Ig.runKernel(wp,o,s)}});var Xx=Fg({greater_:function(e,t){var n=jg(e,"a","greater","string_or_numeric"),r=jg(t,"b","greater","string_or_numeric"),a=C(yg(n,r),2);n=a[0],r=a[1],Eb(n.shape,r.shape);var i={a:n,b:r};return Ig.runKernel(Sp,i)}});var Yx=Fg({greaterEqual_:function(e,t){var n=jg(e,"a","greaterEqual","string_or_numeric"),r=jg(t,"b","greaterEqual","string_or_numeric"),a=C(yg(n,r),2);n=a[0],r=a[1],Eb(n.shape,r.shape);var i={a:n,b:r};return Ig.runKernel(_p,i)}});var Kx=Fg({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=jg(e,"x","leakyRelu"),r={x:n},a={alpha:t};return Ig.runKernel(Rp,r,a)}});var Zx=Fg({log_:function(e){var t={x:jg(e,"x","log","float32")};return Ig.runKernel(Lp,t)}});var Qx=Fg({log1p_:function(e){var t={x:jg(e,"x","log1p")};return Ig.runKernel(jp,t)}});var $x=Fg({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=jg(e,"x","max"),a={x:r},i={reductionIndices:t,keepDims:n};return Ig.runKernel(Wp,a,i)}});var Jx=Fg({mul_:function(e,t){var n=jg(e,"a","mul"),r=jg(t,"b","mul"),a=C(yg(n,r),2),i={a:n=a[0],b:r=a[1]};return Ig.runKernel(tv,i)}});var ew=Fg({sub_:function(e,t){var n=jg(e,"a","sub"),r=jg(t,"b","sub"),a=C(yg(n,r),2),i={a:n=a[0],b:r=a[1]};return Ig.runKernel(nm,i)}});var tw=Fg({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=jg(e,"x","sum");"bool"===r.dtype&&(r=$y(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return Ig.runKernel(Uv,a,i)}});var nw=Fg({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=jg(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=Gb((function(e,n){var r=$x(e,t,!0),a=ew(e,r),i=ew($y(a,"float32"),Zx(tw(Ux(a),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var r=C(n,1)[0],a=Ux(r);return ew(e,Jx(tw(e,t,!0),a))}}}));return r(n)}});var rw=Fg({logicalAnd_:function(e,t){var n=jg(e,"a","logicalAnd","bool"),r=jg(t,"b","logicalAnd","bool");Eb(n.shape,r.shape);var a={a:n,b:r};return Ig.runKernel(Pp,a)}});var aw=Fg({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=jg(e,"a","matMul"),i=jg(t,"b","matMul"),o=yg(a,i),s=C(o,2),u={a:a=s[0],b:i=s[1]},l={transposeA:n,transposeB:r};return Ig.runKernel(Nh,u,l)}});var iw=Fg({maxPool_:function(e,t,n,r,a){var i=jg(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=hx(i,[1,i.shape[0],i.shape[1],i.shape[2]])),_d(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),_d(cx(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),dx("maxPool",r,a);var u={x:o},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=Ig.runKernel(Vp,u,l);return s?hx(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var ow=Fg({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=jg(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=hx(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),_d(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),_d("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),dx("maxPool3d",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},f=Ig.runKernel(qp,l,c);return u?hx(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var sw=Fg({maximum_:function(e,t){var n=jg(e,"a","maximum"),r=jg(t,"b","maximum"),a=C(yg(n,r),2);n=a[0],r=a[1],"bool"===n.dtype&&(n=$y(n,"int32"),r=$y(r,"int32")),Eb(n.shape,r.shape);var i={a:n,b:r};return Ig.runKernel(Gp,i)}});var uw=Fg({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=jg(e,"x","mean"),a={x:r},i={axis:t,keepDims:n};return Ig.runKernel(Kp,a,i)}});var lw=Fg({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=jg(e,"x","min"),a={x:r},i={axis:t,keepDims:n};return Ig.runKernel(Zp,a,i)}});var cw=Fg({minimum_:function(e,t){var n=jg(e,"a","minimum"),r=jg(t,"b","minimum"),a=C(yg(n,r),2);n=a[0],r=a[1],"bool"===n.dtype&&(n=$y(n,"int32"),r=$y(r,"int32")),Eb(n.shape,r.shape);var i={a:n,b:r};return Ig.runKernel(Qp,i)}});function fw(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function dw(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function hw(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}(e,t.map((function(e){return 1})),t)}function pw(e,t,n){_d(fw(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function vw(e,t){if(fw(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function mw(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function gw(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var yw=Fg({square_:function(e){var t=jg(e,"x","square");return Ig.runKernel("Square",{x:t},{})}});var bw=Fg({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ld(t,(e=jg(e,"x","moments")).shape),a=uw(e,r,n),i=a.shape;n||(i=hw(a.shape,r));var o=yw(ew($y(e,"float32"),hx(a,i))),s=uw(o,r,n);return{mean:a,variance:s}}});var xw=Fg({neg_:function(e){var t={x:jg(e,"x","neg")};return Ig.runKernel(nv,t)}});var ww=Fg({notEqual_:function(e,t){var n=jg(e,"a","notEqual","string_or_numeric"),r=jg(t,"b","notEqual","string_or_numeric"),a=C(yg(n,r),2);n=a[0],r=a[1],Eb(n.shape,r.shape);var i={a:n,b:r};return Ig.runKernel(rv,i)}});var kw=Fg({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var i=jg(e,"indices","oneHot","int32"),o={indices:i},s={dtype:a,depth:t,onValue:n,offValue:r};return Ig.runKernel(uv,o,s)}});function Sw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=Sw(e,"float32"),r=Sw(e,"float32");return Bg(n,r)}var a=Qd(Id(e),t);return Ig.makeTensor(a,e,t)}function _w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=_w(e,"float32"),r=Sw(e,"float32");return Bg(n,r)}var a=Zd(Id(e),t);return Ig.makeTensor(a,e,t)}var Cw=Fg({onesLike_:function(e){var t={x:jg(e,"x","onesLike")};return Ig.runKernel(sv,t)}});var Ew=Fg({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=jg(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return Ig.runKernel(cv,i,a)}});var Tw=Fg({prelu_:function(e,t){var n={x:jg(e,"x","prelu"),alpha:jg(t,"alpha","prelu")};return Ig.runKernel(dv,n)}}),Iw=n(6699),Aw=function(){function e(t,n,r,a,i){d(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=Iw.alea(o.toString())}return p(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),Nw=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(d(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=Iw.alea(i)}return p(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var Rw=Fg({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new Aw(t,n,r,!1,a),o=Qy(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var Mw=Fg({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,i=Qy(e,r),o=new Nw(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var Ow=Fg({relu_:function(e){var t={x:jg(e,"x","relu")};return Ig.runKernel(xv,t)}});var Dw=Fg({reverse_:function(e,t){var n={x:jg(e,"x","reverse")},r={dims:t};return Ig.runKernel(Tv,n,r)}});var Lw=Fg({selu_:function(e){var t={x:jg(e,"x","selu")};return Ig.runKernel(Ov,t)}});var jw=Fg({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=jg(e,"x","separableConv2d"),u=jg(t,"depthwiseFilter","separableConv2d"),l=jg(n,"pointwiseFilter","separableConv2d"),c=s,f=!1;if(3===s.rank&&(f=!0,c=hx(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");_d(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),_d(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),_d(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),_d(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(l.shape[0],".")})),_d(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(l.shape[1],".")}));var d=u.shape[2],h=u.shape[3];_d(l.shape[2]===d*h,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(d*h,", ")+"but got ".concat(l.shape[2],".")}));var p=jx(c,u,r,a,o,i),v=1,m=Ix(p,l,v,"valid",o);return f?hx(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});var Pw=Fg({sigmoid_:function(e){var t={x:jg(e,"x","sigmoid","float32")};return Ig.runKernel(Fv,t)}});var Fw=Fg({slice_:function(e,t,n){var r=jg(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return Ig.runKernel(Dv,a,i)}});var Bw=Fg({slice1d_:function(e,t,n){var r=jg(e,"x","slice1d");return _d(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),Fw(r,[t],[n])}});var zw=Fg({slice2d_:function(e,t,n){var r=jg(e,"x","slice2d");return _d(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),Fw(r,t,n)}});var Uw=Fg({slice3d_:function(e,t,n){var r=jg(e,"x","slice3d");return _d(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),Fw(r,t,n)}});var Ww=Fg({slice4d_:function(e,t,n){var r=jg(e,"x","slice4d");return _d(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),Fw(r,t,n)}});var Gw=Fg({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=jg(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return Ig.runKernel(Vv,r,a)}});var Vw=Fg({softplus_:function(e){var t={x:jg(e,"x","softplus")};return Ig.runKernel(Bv,t)}});var Hw=Fg({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=jg(e,"x","split"),a={x:r},i={numOrSizeSplits:t,axis:n};return Ig.runKernel(Gv,a,i)}});var qw=Fg({sqrt_:function(e){var t={x:jg(e,"x","sqrt","float32")};return Ig.runKernel(zv,t)}});var Xw=Fg({squeeze_:function(e,t){var n=jg(e,"x","squeeze","string_or_numeric");return hx(n,jd(n.shape,t).newShape)}});var Yw=Fg({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Pg(e,"tensors","stack","string_or_numeric");_d(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&_d(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return Ig.runKernel(lv,r,a)}});var Kw=Fg({tanh_:function(e){var t={x:jg(e,"x","tanh","float32")};return Ig.runKernel(am,t)}});function Zw(e,t){Ed(e);var n=Og(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return zg(e,null,n,t)}function Qw(e,t,n){if(Ed(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Og(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return zg(e,t,r,n)}var $w=Fg({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new Aw(t,n,r,!0,a),o=Qy(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var Jw=Fg({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=jg(e,"x","unstack","string_or_numeric");_d(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return Ig.runKernel(cm,r,a)}});function ek(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return Ig.makeVariable(e,t,n,r)}var tk=Fg({where_:function(e,t,n){var r=jg(t,"a","where"),a=jg(n,"b","where"),i=jg(e,"condition","where","bool"),o=Eb(Eb(i.shape,r.shape),a.shape),s={condition:xx(i,o),t:xx(r,o),e:xx(a,o)};return Ig.runKernel(Mv,s)}});var nk=Fg({zerosLike_:function(e){var t={x:jg(e,"x","zerosLike")};return Ig.runKernel(dm,t)}});var rk=Fg({imag_:function(e){var t={input:jg(e,"input","imag")};return Ig.runKernel(Tp,t)}});var ak=Fg({real_:function(e){var t={input:jg(e,"input","real")};return Ig.runKernel(yv,t)}});var ik=Fg({transpose_:function(e,t,n){var r=jg(e,"x","transpose");if(null==t&&(t=r.shape.map((function(e,t){return t})).reverse()),_d(r.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){_d(e>=0&&e<r.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)}))})),r.rank<=1)return r.clone();var a={x:r},i={perm:t};return"complex64"===r.dtype?Bb((function(){var e=ak(r),t=rk(r);return e=Ig.runKernel(um,{x:e},i),t=Ig.runKernel(um,{x:t},i),n&&(t=xw(t)),Bg(e,t)})):Ig.runKernel(um,a,i)}});var ok=Fg({dropout_:function(e,t,n,r){var a=jg(e,"x","dropout");if(_d("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),_d(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof sg?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(Ad(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=Fx(Hx(Xb(Mw(i,0,1,"float32",r),o)),o);return Jx(a,s)}});var sk=Fg({fft_:function(e){_d("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return Ig.runKernel(vp,t)}});var uk=Fg({rfft_:function(e,t){_d("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=Fw(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=Sx([e,Sw(s)],e.shape.length-1),r=t}else n=e;var u=nk(n),l=hx(Bg(n,u),[a,r]),c=sk(l),f=Math.floor(r/2)+1,d=ak(c),h=rk(c),p=Hw(d,[f,r-f],d.shape.length-1),v=Hw(h,[f,r-f],h.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=f,hx(Bg(p[0],v[0]),m)}});var lk=Fg({ifft_:function(e){_d("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return Ig.runKernel(Ep,t)}});var ck=Fg({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=hx(e,[r,n]);t=lk(a)}else{var i=[r,2*(n-1)],o=hx(ak(e),[r,n]),s=hx(rk(e),[r,n]),u=Dw(Fw(o,[0,1],[r,n-2]),1),l=Jx(Dw(Fw(s,[0,1],[r,n-2]),1),Vb(-1)),c=Sx([o,u],1),f=Sx([s,l],1),d=hx(Bg(c,f),[i[0],i[1]]);t=lk(d)}if(t=ak(t),3===e.rank&&0!==e.shape[0]){var h=t,p=e.shape[0];t=hx(t,[p,t.shape[0]/p,t.shape[1]]),h.dispose()}return t}});var fk=Fg({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=hx(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=hx(t,[1,t.shape[0],t.shape[1],t.shape[2]])),_d(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),_d(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),_d(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var l="NHWC"===i?s.shape[3]:s.shape[1],c="NHWC"===i?u.shape[3]:u.shape[1];_d(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(l,") must ")+"match input depth in filter (".concat(n[2],".")})),_d(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(c,") must ")+"match output depth for filter (".concat(n[3],").")})),dx("conv2dDerFilter",a,o);var f={x:s,dy:u},d={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return Ig.runKernel(Uh,f,d)}});var dk=Fg({relu6_:function(e){var t={x:jg(e,"x","relu6")};return Ig.runKernel(Ev,t)}});var hk=Fg({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=jg(e,"x","step"),r={x:n},a={alpha:t};return Ig.runKernel(hm,r,a)}});function pk(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Jx(e,hk(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function vk(e,t){var n=t,r=Cb(e.shape,t.shape);return r.length>0&&(n=tw(n,r)),hx(n,e.shape)}function mk(e,t,n,r){if("linear"===t)return e;if("relu"===t)return Ow(e);if("elu"===t)return Bx(e);if("relu6"===t)return dk(e);if("prelu"===t)return Tw(e,n);if("leakyrelu"===t)return Kx(e,r);if("sigmoid"===t)return Pw(e);throw new Error("Unknown fused activation ".concat(t,"."))}var gk=function(e,t){return!(e>0)||"linear"===t};var yk=Fg({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,f=e.activation,d=void 0===f?"linear":f,h=e.preluActivationWeights,p=e.leakyreluAlpha;if(d=d||"linear",!1===gk(Ig.state.gradientDepth,d)){_d("NHWC"===o,(function(){return"Error in fused conv2d: got dataFormat of ".concat(o," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."}));var v=Ix(t,n,r,a,o,u,l);return null!=c&&(v=Xb(v,c)),mk(v,d,h,p)}var m=jg(t,"x","conv2d","float32"),g=jg(n,"filter","conv2d","float32"),y=m,b=!1;3===m.rank&&(b=!0,y=hx(m,[1,m.shape[0],m.shape[1],m.shape[2]])),_d(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(y.rank,".")})),_d(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(g.rank,".")})),dx("fused conv2d",a,l);var x="NHWC"===o?y.shape[3]:y.shape[1];_d(g.shape[2]===x,(function(){return"Error in conv2d: depth of input (".concat(x,") must match ")+"input depth for filter ".concat(g.shape[2],".")})),_d(cx(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(u,"'")}));var w,k,S=ex(y.shape,g.shape,r,u,a,l);if(null!=c){var _=C(yg(w=jg(c,"bias","fused conv2d"),m),1);w=_[0],"NHWC"===o?Eb(S.outShape,w.shape):(_d(w.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(w.shape.length,".")})),_d(0===w.shape.length||w.shape[0]===S.outChannels||1===w.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(w.shape,") is not ")+"compatible with the number of output channels "+"(".concat(S.outChannels,")")})))}if(null!=h){var E=h.shape;if(_d(E.length<=1||3===E.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(E.length,".")})),1===E.length)_d(1===E[0]||E[0]===S.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(E,") is not compatible with the number of output ")+"channels (".concat(S.outChannels,").")}));else if(3===E.length)try{Eb(E,S.outShape)}catch(O){var T="Error in fused conv2d: PReLU activation weights (".concat(E,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(S.outShape,").");throw Error(T)}k=jg(h,"prelu weights","fused conv2d")}var I=function(e,t){_d("NHWC"===o,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var n=C(t,4),i=n[0],s=n[1],l=n[2],c=n[3],f=pk(e,l,d);_d(lx(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")}));var h=[Nx(s.shape,f,i,r,a),fk(s,f,i.shape,r,a)];if(null!=c){var p=vk(c,f);h.push(p)}return h},A={x:y,filter:g,bias:w,preluActivationWeights:k},N={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:l,activation:d,leakyreluAlpha:p};if(null==c){var R=Gb((function(e,t,n){var r=Ig.runKernel(mm,A,N);return n([t,e,r]),b&&(r=hx(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:I}}));return R(y,g)}var M=Gb((function(e,t,n,r){var a=Ig.runKernel(mm,A,N);return r([t,e,a,n]),b&&(a=hx(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:I}}));return M(y,g,w)}});var bk=Fg({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=hx(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=hx(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={x:s,dy:u},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return Ig.runKernel(ep,l,c)}});var xk=Fg({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=hx(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},f=Ig.runKernel(tp,l,c);return u?hx(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});Fg({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,f=e.activation,d=void 0===f?"linear":f,h=e.preluActivationWeights,p=e.leakyreluAlpha;if(!1===gk(Ig.state.gradientDepth,d)){var v=jx(t,n,r,a,o,u,l);return null!=c&&(v=Xb(v,c)),mk(v,d,h,p)}var m=jg(t,"x","depthwiseConv2d","float32"),g=jg(n,"filter","depthwiseConv2d","float32"),y=m,b=!1;3===m.rank&&(b=!0,y=hx(m,[1,m.shape[0],m.shape[1],m.shape[2]])),_d(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(y.rank,".")})),_d(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(g.rank,".")})),_d(y.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(y.shape[3],") must match the inChannels dimension in ")+"filter ".concat(g.shape[2],".")})),null==u&&(u=[1,1]),_d(cx(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),dx("fused depthwiseConv2d",a,l);var x,w,k=ex(y.shape,g.shape,r,u,a,l,!0);if(null!=c){var S=C(yg(x=jg(c,"bias","fused conv2d"),m),1);x=S[0],Eb(k.outShape,x.shape)}null!=h&&(w=jg(h,"prelu weights","fused depthwiseConv2d"));var _=function(e,t){_d(lx(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var n=C(t,4),i=n[0],o=n[1],s=n[2],c=n[3],f=pk(e,s,d),h=xk(o.shape,f,i,r,a,u,l),p=bk(o,f,i.shape,r,a,u,l);return null!=c?[h,p,vk(x,f)]:[h,p]},E={x:y,filter:g,bias:x,preluActivationWeights:w},T={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:l,activation:d,leakyreluAlpha:p};if(null==c){var I=Gb((function(e,t,n){var r=Ig.runKernel(gm,E,T);return n([t,e,r]),b&&(r=hx(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:_}}));return I(y,g)}var A=Gb((function(e,t,n,r){var a=Ig.runKernel(gm,E,T);return r([t,e,a,n]),b&&(a=hx(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:_}}));return A(y,g,x)}});var wk=Fg({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,u=e.activation,l=void 0===u?"linear":u,c=e.preluActivationWeights,f=e.leakyreluAlpha,d=void 0===f?.2:f;if(!1===gk(Ig.state.gradientDepth,l)){var h=aw(t,n,a,o);return null!=s&&(h=Xb(h,s)),mk(h,l,c,d)}var p=jg(t,"a","fused matMul"),v=jg(n,"b","fused matMul"),m=C(yg(p,v),2);p=m[0],v=m[1];var g=a?p.shape[p.rank-2]:p.shape[p.rank-1],y=o?v.shape[v.rank-1]:v.shape[v.rank-2],b=a?p.shape[p.rank-1]:p.shape[p.rank-2],x=o?v.shape[v.rank-2]:v.shape[v.rank-1],w=p.shape.slice(0,-2),k=v.shape.slice(0,-2),S=Id(w),_=Id(k);_d(g===y,(function(){return"Error in fused matMul: inner shapes (".concat(g,") and (")+"".concat(y,") of Tensors with shapes ").concat(p.shape," and ")+"".concat(v.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var E,T,I=Eb(p.shape.slice(0,-2),v.shape.slice(0,-2)).concat([b,x]),A=hx(p,a?[S,g,b]:[S,b,g]),N=hx(v,o?[_,x,y]:[_,y,x]);null!=s&&(E=C(yg(E=jg(s,"bias","fused matMul"),p),1)[0],Eb(I,E.shape)),null!=c&&(T=jg(c,"prelu weights","fused matMul"));var R=function(e,t){var n,r,i=C(t,4),u=i[0],c=i[1],f=i[2],d=i[3],h=pk(hx(e,f.shape),f,l);return a||o?!a&&o?(n=aw(h,c,!1,!1),r=aw(h,u,!0,!1)):a&&!o?(n=aw(c,h,!1,!0),r=aw(u,h,!1,!1)):(n=aw(c,h,!0,!0),r=aw(h,u,!0,!0)):(n=aw(h,c,!1,!0),r=aw(u,h,!0,!1)),null!=s?[n,r,vk(d,h)]:[n,r]},M={a:A,b:N,bias:E,preluActivationWeights:T},O={transposeA:a,transposeB:o,activation:l,leakyreluAlpha:d};if(null==s){var D=Gb((function(e,t,n){var r=Ig.runKernel(vm,M,O);return n([e,t,r]),{value:hx(r,I),gradFunc:R}}));return D(A,N)}var L=Gb((function(e,t,n,r){var a=Ig.runKernel(vm,M,O);return r([e,t,a,n]),{value:hx(a,I),gradFunc:R}}));return L(A,N,E)}});function kk(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Sk(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return Zw(a,"float32")}Fg({hammingWindow_:function(e){return Sk(e,.54,.46)}});var _k=Fg({hannWindow_:function(e){return Sk(e,.5,.5)}});var Ck=Fg({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(Fw(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=Sx([Fw(e,i,t-s),wx([s],a)]);o.push(u),i+=n}return 0===o.length?Qw([],[0,t]):hx(Sx(o),[o.length,t])}});Fg({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_k;null==r&&(r=kk(t));var i=Ck(e,t,n),o=Jx(i,a(t));return uk(o,r)}});var Ek=Fg({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=jg(e,"image","cropAndResize"),s=jg(t,"boxes","cropAndResize","float32"),u=jg(n,"boxInd","cropAndResize","int32"),l=s.shape[0];_d(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),_d(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(l,",4] ")+"but had shape ".concat(s.shape,".")})),_d(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(l,"] ")+"but had shape ".concat(s.shape,".")})),_d(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),_d(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),_d("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var c={image:o,boxes:s,boxInd:u},f={method:a,extrapolationValue:i,cropSize:r},d=Ig.runKernel(Zh,c,f);return d}});var Tk=Fg({flipLeftRight_:function(e){var t=jg(e,"image","flipLeftRight","float32");_d(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return Ig.runKernel(gp,n,{})}});var Ik=Fg({grayscaleToRGB_:function(e){var t=jg(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];_d(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),_d(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,Gx(t,a)}});var Ak=Fg({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=jg(e,"image","rotateWithOffset","float32");_d(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},s=Ig.runKernel(pm,i,o);return s}});function Nk(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),_d(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),_d(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),_d(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),_d(1===t.rank,(function(){return"scores must be a 1D tensor"})),_d(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),_d(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var Rk=Fg({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=jg(e,"boxes","nonMaxSuppression","float32"),o=jg(t,"scores","nonMaxSuppression","float32"),s=Nk(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return Ig.runKernel(av,{boxes:i,scores:o},u)}});function Mk(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||Ok)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Ok(e,t){return e>t?1:e<t?-1:0}function Dk(e,t,n,r,a){return Pk(e,t,n,r,a,0)}function Lk(e,t,n,r,a,i){return Pk(e,t,n,r,a,0,!1,i,!0)}function jk(e,t,n,r,a,i){return Pk(e,t,n,r,a,i,!0)}function Pk(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],l=[],c=0;c<t.length;c++)t[c]>a&&l.push({score:t[c],boxIndex:c,suppressBeginIndex:0});l.sort(zk);for(var d=i>0?-.5/i:0,h=[],p=[];h.length<n&&l.length>0;){var v=l.pop(),m=v.score,g=v.boxIndex,y=v.suppressBeginIndex;if(m<a)break;for(var b=!1,x=h.length-1;x>=y;--x){var w=Fk(e,g,h[x]);if(w>=r){b=!0;break}if(v.score=v.score*Bk(r,d,w),v.score<=a)break}v.suppressBeginIndex=h.length,b||(v.score===m?(h.push(g),p.push(v.score)):v.score>a&&Mk(l,v,zk))}var k=h.length,S=n-k;s&&S>0&&(h.push.apply(h,f(new Array(S).fill(0))),p.push.apply(p,f(new Array(S).fill(0))));var _={selectedIndices:h};return o&&(_.selectedScores=p),u&&(_.validOutputs=k),_}function Fk(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),h=(s-i)*(u-o),p=(f-l)*(d-c);if(h<=0||p<=0)return 0;var v=Math.max(i,l),m=Math.max(o,c),g=Math.min(s,f),y=Math.min(u,d),b=Math.max(g-v,0)*Math.max(y-m,0);return b/(h+p-b)}function Bk(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function zk(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Uk(){return Uk=A(T().mark((function e(t,n,r){var a,i,o,s,u,l,c,f,d,h,p=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:.5,i=p.length>4&&void 0!==p[4]?p[4]:Number.NEGATIVE_INFINITY,o=jg(t,"boxes","nonMaxSuppressionAsync"),s=jg(n,"scores","nonMaxSuppressionAsync"),u=Nk(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return l=e.sent,c=l[0],f=l[1],d=Dk(c,f,r,a,i),h=d.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",Zw(h,"int32"));case 17:case"end":return e.stop()}}),e)}))),Uk.apply(this,arguments)}var Wk=function(e,t,n){return Uk.apply(this,arguments)};var Gk=Fg({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=jg(e,"boxes","nonMaxSuppression"),s=jg(t,"scores","nonMaxSuppression"),u=Nk(o,s,n,r,a,i),l={boxes:o,scores:s},c={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},f=Ig.runKernel(ov,l,c);return{selectedIndices:f[0],selectedScores:f[1]}}});function Vk(){return Vk=A(T().mark((function e(t,n,r){var a,i,o,s,u,l,c,f,d,h,p,v,m=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:.5,i=m.length>4&&void 0!==m[4]?m[4]:Number.NEGATIVE_INFINITY,o=m.length>5&&void 0!==m[5]?m[5]:0,s=jg(t,"boxes","nonMaxSuppressionAsync"),u=jg(n,"scores","nonMaxSuppressionAsync"),l=Nk(s,u,r,a,i,o),r=l.maxOutputSize,a=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return c=e.sent,f=c[0],d=c[1],h=jk(f,d,r,a,i,o),p=h.selectedIndices,v=h.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:Zw(p,"int32"),selectedScores:Zw(v)});case 19:case"end":return e.stop()}}),e)}))),Vk.apply(this,arguments)}var Hk=function(e,t,n){return Vk.apply(this,arguments)};var qk=Fg({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=jg(e,"boxes","nonMaxSuppression"),s=jg(t,"scores","nonMaxSuppression"),u=Nk(o,s,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,f=u.scoreThreshold,d={boxes:o,scores:s},h={maxOutputSize:l,iouThreshold:c,scoreThreshold:f,padToMaxOutputSize:i},p=Ig.runKernel(iv,d,h);return{selectedIndices:p[0],validOutputs:p[1]}}});function Xk(){return Xk=A(T().mark((function e(t,n,r){var a,i,o,s,u,l,c,f,d,h,p,v,m,g,y,b,x=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>3&&void 0!==x[3]?x[3]:.5,i=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,o=x.length>5&&void 0!==x[5]&&x[5],s=jg(t,"boxes","nonMaxSuppressionAsync"),u=jg(n,"scores","nonMaxSuppressionAsync"),l=Nk(s,u,r,a,i,null),c=l.maxOutputSize,f=l.iouThreshold,d=l.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return h=e.sent,p=C(h,2),v=p[0],m=p[1],g=Lk(v,m,c,f,d,o),y=g.selectedIndices,b=g.validOutputs,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:Zw(y,"int32"),validOutputs:Vb(b,"int32")});case 19:case"end":return e.stop()}}),e)}))),Xk.apply(this,arguments)}var Yk=function(e,t,n){return Xk.apply(this,arguments)};var Kk=Fg({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=jg(e,"images","resizeBilinear");_d(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),_d(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),_d(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=hx(a,[1,a.shape[0],a.shape[1],a.shape[2]])),yu(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=Ig.runKernel(_v,s,u);return o?hx(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var Zk=Fg({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=jg(e,"images","resizeNearestNeighbor");_d(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),_d(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),_d("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),_d(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=hx(a,[1,a.shape[0],a.shape[1],a.shape[2]])),yu(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=Ig.runKernel(kv,s,u);return o?hx(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var Qk=Fg({bincount_:function(e,t,n){var r=jg(e,"x","bincount"),a=jg(t,"weights","bincount");_d("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),_d(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),_d(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return Ig.runKernel(Mh,i,o)}});var $k=Fg({lessEqual_:function(e,t){var n=jg(e,"a","lessEqual","string_or_numeric"),r=jg(t,"b","lessEqual","string_or_numeric"),a=C(yg(n,r),2);n=a[0],r=a[1],Eb(n.shape,r.shape);var i={a:n,b:r};return Ig.runKernel(Op,i)}});var Jk=Fg({round_:function(e){var t={x:jg(e,"x","round")};return Ig.runKernel(Iv,t)}});function eS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return Ig.runKernel(gv,{},a)}function tS(e,t){for(var n,r,a,i,o,s,u=Zw([-1]),l=Zw([0]),c=Zw([0]),f=0;f<e.size-1;f++){n=Fw(e,0,f+1),r=Fw(e,f+1),o=Fx(tw(n),t),s=Fx(tw(r),t);var d=tw(Jx(n,eS(0,n.size)));a=Fx(d,tw(n));var h=wx(r.shape,n.size),p=Xb(eS(0,r.size),h),v=Jx(r,p);i=Fx(tw(v),tw(r));var m=ew(a,i),g=ew(a,i),y=Jx(o,s);c=Jx(Jx(y,m),g);var b=Xx(c,l);l=tk(b,c,l),u=tk(b,Zw([f]),u)}return u}var nS=Fg({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=jg(e,"image","threshold"),l=.2989,c=.587,f=.114,d=u.shape[0]*u.shape[1],h=Jx(Zw([s]),255);if(_d(3===u.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(u.rank,".")})),_d(3===u.shape[2]||1===u.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(u.shape[2],".")})),_d("int32"===u.dtype||"float32"===u.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(u.dtype,".")})),_d("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===u.shape[2]){var p=Hw(u,[1,1,1],-1),v=C(p,3);t=v[0],n=v[1],r=v[2];var m=Jx(t,l),g=Jx(n,c),y=Jx(r,f);a=Xb(Xb(m,g),y)}else a=e;if("otsu"===i){var b=Qk($y(Jk(a),"int32"),Ug([]),256);h=tS(b,d)}var x=o?$k(a,h):Xx(a,h),w=$y(Jx(x,255),"int32");return w}});var rS=Fg({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=jg(e,"image","transform","float32"),s=jg(t,"transforms","transform","float32");_d(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),_d(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),_d(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var u={image:o,transforms:s},l={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return Ig.runKernel(sm,u,l)}});var aS=Fg({bandPart_:function(e,t,n){_d(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),_d(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=jg(e,"a","bandPart");_d(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=C(r.shape.slice(-2),2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,")."));t<0&&(t=o),n<0&&(n=s);var u=hx(eS(0,o,1,"int32"),[-1,1]),l=eS(0,s,1,"int32"),c=ew(u,l),f=rw($k(c,Vb(+t,"int32")),Yx(c,Vb(-n,"int32"))),d=Sw([o,s],r.dtype);return hx(Yw(Jw(hx(r,[-1,o,s])).map((function(e){return tk(f,e,d)}))),a)}});var iS=Fg({pow_:function(e,t){var n=jg(e,"base","pow"),r=jg(t,"exp","pow"),a=C(yg(n,r),2),i={a:n=a[0],b:r=a[1]};return Ig.runKernel(fv,i)}});function oS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return qb(e);if(1!==e.rank&&null===n)return oS(hx(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return tw(qb(e),n);if(t===1/0)return $x(qb(e),n);if(t===-1/0)return lw(qb(e),n);if("euclidean"===t||2===t)return qw(tw(iS(qb(e),Vb(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return $x(tw(qb(e),n[0]),n[1]-1);if(t===1/0)return $x(tw(qb(e),n[1]),n[0]);if(t===-1/0)return lw(tw(qb(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return qw(tw(yw(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var sS=Fg({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=oS(e=jg(e,"x","norm"),t,n),i=a.shape;if(r){var o=Ld(n,e.shape);i=hw(a.shape,o)}return hx(a,i)}});var uS=Fg({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,_d(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){_d(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=Hw(e,e.shape[0],0).map((function(e){return Xw(e,[0])}))),_d(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(Ig.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=Jx(tw(Jx(n[a],t)),n[a]);t=ew(t,i)}return Fx(t,sS(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?Yw(n,0):n}});function lS(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ig.tidy((function(){_d(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=Vx(n),i=Jy(e),o=Qw([[1]],[1,1]),s=Jy(o),u=n>=r?r:n,l=function(e){var t=i,u=s,l=a,c=C(Ig.tidy((function(){var t=Fw(i,[e,e],[n-e,1]),u=sS(t),l=Fw(i,[e,e],[1,1]),c=tk(Xx(l,0),Qw([[-1]]),Qw([[1]])),f=ew(l,Jx(c,u)),d=Fx(t,f);s=1===d.shape[0]?Jy(o):Sx([o,Fw(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);var h=xw(Fx(aw(c,f),u)),p=Fw(i,[e,0],[n-e,r]),v=Jx(h,s),m=ik(s);if(0===e)i=ew(p,aw(v,aw(m,p)));else{var g=ew(p,aw(v,aw(m,p)));i=Sx([Fw(i,[0,0],[e,r]),g],0)}var y=ik(v),b=Fw(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=ew(b,aw(aw(b,s),y));else{var x=ew(b,aw(aw(b,s),y));a=Sx([Fw(a,[0,0],[n,e]),x],1)}return[s,i,a]})),3);s=c[0],i=c[1],a=c[2],zb([t,u,l])},c=0;c<u;++c)l(c);return!t&&n>r&&(a=Fw(a,[0,0],[n,r]),i=Fw(i,[0,0],[r,r])),[a,i]}))}var cS,fS=Fg({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(_d(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return lS(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Jw(hx(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=C(lS(e,t),2),r=n[0],o=n[1];a.push(r),i.push(o)}));var o=hx(Yw(a,0),e.shape),s=hx(Yw(i,0),e.shape);return[o,s]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(cS||(cS={}));var dS=Fg({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cS.SUM_BY_NONZERO_WEIGHTS,r=jg(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=jg(t,"weights","computeWeightedLoss"));var i=null==a?r:Jx(r,a);if(n===cS.NONE)return i;if(n===cS.SUM)return tw(i);if(n===cS.MEAN){if(null==a)return uw(i);var o=r.size/a.size,s=Fx(tw(i),tw(a));return o>1?Fx(s,Vb(o)):s}if(n===cS.SUM_BY_NONZERO_WEIGHTS){if(null==a)return Fx(tw(i),Vb(r.size));var u=Jx(a,_w(r.shape)),l=$y(tw(ww(u,Vb(0))),"float32");return Fx(tw(i),l)}throw Error("Unknown reduction: ".concat(n))}});Fg({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:cS.SUM_BY_NONZERO_WEIGHTS,a=jg(e,"labels","absoluteDifference"),i=jg(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=jg(n,"weights","absoluteDifference")),Cd(a.shape,i.shape,"Error in absoluteDifference: ");var s=qb(ew(a,i));return dS(s,o,r)}});Fg({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cS.SUM_BY_NONZERO_WEIGHTS,i=jg(e,"labels","cosineDistance"),o=jg(t,"predictions","cosineDistance"),s=null;null!=r&&(s=jg(r,"weights","cosineDistance")),Cd(i.shape,o.shape,"Error in cosineDistance: ");var u=Vb(1),l=ew(u,tw(Jx(i,o),n,!0));return dS(l,s,a)}});Fg({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:cS.SUM_BY_NONZERO_WEIGHTS,a=jg(e,"labels","hingeLoss"),i=jg(t,"predictions","hingeLoss"),o=null;null!=n&&(o=jg(n,"weights","hingeLoss")),Cd(a.shape,i.shape,"Error in hingeLoss: ");var s=Vb(1);a=ew(Jx(Vb(2),a),s);var u=Ow(ew(s,Jx(a,i)));return dS(u,o,r)}});Fg({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cS.SUM_BY_NONZERO_WEIGHTS,i=jg(e,"labels","huberLoss"),o=jg(t,"predictions","huberLoss"),s=null;null!=n&&(s=jg(n,"weights","huberLoss")),Cd(i.shape,o.shape,"Error in huberLoss: ");var u=Vb(r),l=qb(ew(o,i)),c=cw(l,u),f=ew(l,c),d=Xb(Jx(Vb(.5),yw(c)),Jx(u,f));return dS(d,s,a)}});Fg({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cS.SUM_BY_NONZERO_WEIGHTS,i=jg(e,"labels","logLoss"),o=jg(t,"predictions","logLoss"),s=null;null!=n&&(s=jg(n,"weights","logLoss")),Cd(i.shape,o.shape,"Error in logLoss: ");var u=Vb(1),l=Vb(r),c=xw(Jx(i,Zx(Xb(o,l)))),f=Jx(ew(u,i),Zx(Xb(ew(u,o),l))),d=ew(c,f);return dS(d,s,a)}});var hS=Fg({squaredDifference_:function(e,t){var n=jg(e,"a","squaredDifference"),r=jg(t,"b","squaredDifference"),a=C(yg(n,r),2);n=a[0],r=a[1],Eb(n.shape,r.shape);var i={a:n,b:r};return Ig.runKernel(Zv,i,{})}});Fg({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:cS.SUM_BY_NONZERO_WEIGHTS,a=jg(e,"labels","meanSquaredError"),i=jg(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=jg(n,"weights","meanSquaredError")),Cd(a.shape,i.shape,"Error in meanSquaredError: ");var s=hS(a,i);return dS(s,o,r)}});function pS(e,t){var n=jg(e,"labels","sigmoidCrossEntropyWithLogits"),r=jg(t,"logits","sigmoidCrossEntropyWithLogits");Cd(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=Ow(r),i=Jx(r,n),o=Qx(Ux(xw(qb(r))));return Xb(ew(a,i),o)}Fg({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cS.SUM_BY_NONZERO_WEIGHTS,i=jg(e,"multiClassLabels","sigmoidCrossEntropy"),o=jg(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=jg(n,"weights","sigmoidCrossEntropy")),Cd(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Vb(r),l=Vb(1),c=Vb(.5);i=Xb(Jx(i,ew(l,u)),Jx(c,u))}var f=pS(i,o);return dS(f,s,a)}});var vS=Fg({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=jg(e,"x","logSumExp"),a=Ld(t,r.shape),i=$x(r,a,!0),o=ew(r,i),s=Ux(o),u=tw(s,a),l=Zx(u),c=Xb(hx(i,l.shape),l);if(n){var f=hw(c.shape,a);return hx(c,f)}return c}});function mS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=Gb((function(e,t,r){var a=vS(t,[n],!0),i=ew($y(t,"float32"),a);r([e,i]);var o=xw(Jx(i,e));return{value:tw(o,[n]),gradFunc:function(e,t){var r=C(t,2),a=r[0],i=r[1],o=hw(e.shape,[n]);return[Jx(hx(e,o),ew($y(a,"float32"),Ux(i))),Jx(hx(e,o),ew(Ux(i),$y(a,"float32")))]}}}));return r(e,t)}Fg({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cS.SUM_BY_NONZERO_WEIGHTS,i=jg(e,"onehotLabels","softmaxCrossEntropy"),o=jg(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=jg(n,"weights","softmaxCrossEntropy")),Cd(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Vb(r),l=Vb(1),c=Vb(i.shape[1]);i=Xb(Jx(i,ew(l,u)),Fx(u,c))}var f=mS(i,o);return dS(f,s,a)}});Fg({sparseFillEmptyRows_:function(e,t,n,r){var a=jg(e,"indices","sparseFillEmptyRows","int32"),i=jg(t,"values","sparseFillEmptyRows"),o=jg(n,"denseShape","sparseFillEmptyRows","int32"),s=jg(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},l=Ig.runKernel(Hv,u);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}});Fg({sparseReshape_:function(e,t,n){var r=jg(e,"inputIndices","sparseReshape","int32"),a=jg(t,"inputShape","sparseReshape","int32"),i=jg(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=Ig.runKernel(qv,o);return{outputIndices:s[0],outputShape:s[1]}}});Fg({sparseSegmentMean_:function(e,t,n){var r=jg(e,"data","sparseSegmentMean"),a=jg(t,"indices","sparseSegmentMean","int32"),i=jg(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return Ig.runKernel(Xv,o)}});Fg({sparseSegmentSum_:function(e,t,n){var r=jg(e,"data","sparseSegmentSum"),a=jg(t,"indices","sparseSegmentSum","int32"),i=jg(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return Ig.runKernel(Yv,o)}});Fg({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=jg(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var l=jg(t,"dataSplits","stringNGrams");if("int32"!==l.dtype)throw new Error("Data splits must be of datatype int32");var c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},f={data:u,dataSplits:l},d=Ig.runKernel(Jv,f,c);return{nGrams:d[0],nGramsSplits:d[1]}}});Fg({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=jg(e,"input","stringSplit","string"),a=jg(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=Ig.runKernel(em,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});Fg({stringToHashBucketFast_:function(e,t){var n=jg(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return Ig.runKernel(tm,a,r)}});var gS={flipLeftRight:Tk,grayscaleToRGB:Ik,resizeNearestNeighbor:Zk,resizeBilinear:Kk,rotateWithOffset:Ak,cropAndResize:Ek,nonMaxSuppression:Rk,nonMaxSuppressionAsync:Wk,nonMaxSuppressionWithScore:Gk,nonMaxSuppressionWithScoreAsync:Hk,nonMaxSuppressionPadded:qk,nonMaxSuppressionPaddedAsync:Yk,threshold:nS,transform:rS},yS={bandPart:aS,gramSchmidt:uS,qr:fS},bS=function(e){m(n,e);var t=k(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return d(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=Ig.backend.epsilon()),a}return p(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Ig.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:Bb((function(){return nk(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:Bb((function(){return nk(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;Bb((function(){var e=Xb(Jx(o,t.rho),Jx(yw(i),1-t.rho)),n=Jx(Fx(qw(Xb(s,t.epsilon)),qw(Xb(o,t.epsilon))),i),r=Xb(Jx(s,t.rho),Jx(yw(n),1-t.rho));o.assign(e),s.assign(r);var u=Xb(Jx(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(zb(this.accumulatedGrads.map((function(e){return e.variable}))),zb(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=A(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(f(this.accumulatedGrads),f(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=A(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(Hb);bS.className="Adadelta",jb(bS);var xS=function(e){m(n,e);var t=k(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return d(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return p(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Ig.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:Bb((function(){return wx(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;Bb((function(){var e=Xb(o,yw(i));o.assign(e);var n=Xb(Jx(Fx(i,qw(Xb(e,Ig.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&zb(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(Hb);xS.className="Adagrad",jb(xS);var wS=function(e){m(n,e);var t=k(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],Bb((function(){i.accBeta1=Vb(r).variable(),i.accBeta2=Vb(a).variable()})),null==o&&(i.epsilon=Ig.backend.epsilon()),i}return p(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Bb((function(){var r=ew(1,t.accBeta1),a=ew(1,t.accBeta2);n.forEach((function(n,i){var o=Ig.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Bb((function(){return nk(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:Bb((function(){return nk(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,l=t.accumulatedSecondMoment[i].variable,c=Xb(Jx(u,t.beta1),Jx(s,1-t.beta1)),f=Xb(Jx(l,t.beta2),Jx(yw(s),1-t.beta2)),d=Fx(c,r),h=Fx(f,a);u.assign(c),l.assign(f);var p=Xb(Jx(Fx(d,Xb(qw(h),t.epsilon)),-t.learningRate),o);o.assign(p)}})),t.accBeta1.assign(Jx(t.accBeta1,t.beta1)),t.accBeta2.assign(Jx(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&zb(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&zb(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=A(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(f(this.accumulatedFirstMoment),f(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=A(T().mark((function e(t){var n,r=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,Bb((function(){r.accBeta1.assign(iS(r.beta1,r.iterations_+1)),r.accBeta2.assign(iS(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(Hb);wS.className="Adam",jb(wS);var kS=function(e){m(n,e);var t=k(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return d(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],Bb((function(){i.iteration=Vb(0).variable(),i.accBeta1=Vb(r).variable()})),null==o&&(i.epsilon=Ig.backend.epsilon()),i}return p(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Bb((function(){var r=ew(1,t.accBeta1),a=Fx(-t.learningRate,Xb(Jx(t.iteration,t.decay),1));n.forEach((function(n,i){var o=Ig.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:nk(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:nk(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,l=t.accumulatedWeightedInfNorm[i].variable,c=Xb(Jx(u,t.beta1),Jx(s,1-t.beta1)),f=Jx(l,t.beta2),d=qb(s),h=sw(f,d);u.assign(c),l.assign(h);var p=Xb(Jx(Fx(a,r),Fx(c,Xb(h,t.epsilon))),o);o.assign(p)}})),t.iteration.assign(Xb(t.iteration,1)),t.accBeta1.assign(Jx(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&zb(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&zb(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(Hb);kS.className="Adamax",jb(kS);var SS=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return p(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=Ig.registeredVariables[n];Bb((function(){var e=Xb(Jx(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Ub(Vb(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(Hb);SS.className="SGD",jb(SS);var _S=function(e){m(n,e);var t=k(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=Vb(a.momentum),a}return p(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Ig.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:Bb((function(){return nk(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&Bb((function(){var e,n=Xb(Jx(t.m,i),o);e=t.useNesterov?Xb(Jx(t.c,Xb(o,Jx(n,t.m))),a):Xb(Jx(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&zb(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(SS);_S.className="Momentum",jb(_S);var CS=function(e){m(n,e);var t=k(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(d(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==o&&(r.epsilon=Ig.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return p(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Ig.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:Bb((function(){return nk(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:Bb((function(){return nk(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:Bb((function(){return nk(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;Bb((function(){var e=Xb(Jx(s,t.decay),Jx(yw(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=Xb(Jx(n,t.decay),Jx(o,1-t.decay)),l=Fx(Jx(o,t.learningRate),qw(ew(e,Xb(yw(i),t.epsilon)))),c=Xb(Jx(u,t.momentum),l);s.assign(e),n.assign(i),u.assign(c);var f=ew(a,c);a.assign(f)}else{var d=Xb(Jx(s,t.decay),Jx(yw(o),1-t.decay)),h=Xb(Jx(u,t.momentum),Fx(Jx(o,t.learningRate),qw(Xb(d,t.epsilon))));s.assign(d),u.assign(h);var p=ew(a,h);a.assign(p)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&zb(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&zb(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&zb(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=A(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(f(this.accumulatedMeanSquares),f(this.accumulatedMoments)),this.centered&&t.push.apply(t,f(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=A(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(Hb);CS.className="RMSProp",jb(CS);var ES,TS=function(){function e(){d(this,e)}return p(e,null,[{key:"sgd",value:function(e){return new SS(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new _S(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new CS(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new wS(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new bS(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new kS(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new xS(e,t)}}]),e}(),IS={sgd:TS.sgd,momentum:TS.momentum,adadelta:TS.adadelta,adagrad:TS.adagrad,rmsprop:TS.rmsprop,adamax:TS.adamax,adam:TS.adam},AS="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function NS(){return new Promise((function(e){return AS((function(){return e()}))}))}function RS(e,t){var n=e[0].length;e.forEach((function(e,t){_d(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),_d(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)_d(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function MS(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(ES||(ES={}));function OS(e){return e<=30?e:qd(e,Math.floor(Math.sqrt(e)))}function DS(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function LS(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function jS(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function PS(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function FS(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function BS(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function zS(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===Id(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,l=a.slice();l.pop();for(var c=1,d=i;d<n;++d)c*=u[d],l.push(u[d]);var h=[].concat(f(Xd(e.shape).map((function(e){return e/c}))),[1]).slice(0,i);return[l,o,c,h]}function US(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:Id(t.shape)/u,sliceSize:o,strides:[].concat(f(Xd(n.slice(0,a))),[1]),outputSize:Id(n)}}var WS=1.7580993408473768,GS=1.0507009873554805,VS=.3275911,HS=.254829592,qS=-.284496736,XS=1.421413741,YS=-1.453152027,KS=1.061405429;function ZS(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function QS(e,t){return{real:e[2*t],imag:e[2*t+1]}}function $S(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function JS(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var e_="->",t_=/->/g;function n_(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(t_,"").length)/e_.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(e_,'").'));var r=C(e.split(e_),2),a=r[0],i=r[1];_d(-1===a.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var o=a.split(","),s=o.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var u=[],l=function(e){var t=i[e];if(!o.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===u.indexOf(t)&&u.push(t)},c=0;c<i.length;++c)l(c);for(var f=0;f<a.length;++f){var d=a[f];-1===u.indexOf(d)&&","!==d&&u.push(d)}for(var h=new Array(o.length),p=0;p<s;++p){if(new Set(o[p].split("")).size!==o[p].length)throw new Error("Found duplicate axes in input component ".concat(o[p],". ")+"Support for duplicate axes in input is not implemented yet.");h[p]=[];for(var v=0;v<o[p].length;++v)h[p].push(u.indexOf(o[p][v]))}for(var m=u.length,g=[],y=i.length;y<m;++y)g.push(y);return{allDims:u,summedDims:g,idDims:h}}function r_(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function a_(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:_d(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function i_(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,l=E(s_(t,r[s]));try{for(l.s();!(u=l.n()).done;){var c=u.value;-1===o.indexOf(c)&&(a[s].push(c),o.push(c))}}catch(cZ){l.e(cZ)}finally{l.f()}}return{path:r,steps:a}}function o_(e){return e.every((function(e,t){return e===t}))}function s_(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function u_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)_d(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);_d(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}_d(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function l_(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function c_(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function f_(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function d_(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function h_(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],l=1,c=1,f=1,d=0;d<r;++d)u.push(e.shape[d]),l*=e.shape[d];for(var h=r;h<n;h++)u.push(e.shape[h]),c*=e.shape[h];for(var p=r;p<a;p++)u.push(t.shape[p]);for(var v=n+1;v<i;v++)u.push(e.shape[v]),f*=e.shape[v];return{batchSize:l,sliceSize:f,outerSize:c,dimSize:s,outputShape:u}}function p_(e){try{return e.map((function(e){return Ym(e)}))}catch(cZ){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(cZ))}}function v_(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=Qy(e,"int32"),i=Qy([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}var m_={kernelName:dh,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Jx(e,hk($y(n,"float32"),-1))}}}},g_={kernelName:hh,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){var t=yw($y(n,"float32")),r=qw(ew(Vb(1),t));return xw(Fx(e,r))}}}},y_={kernelName:ph,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){var t=qw(ew(yw($y(n,"float32")),1));return Fx(e,t)}}}},b_={kernelName:vh,inputsToSave:["a","b"],gradFunc:function(e,t){var n=C(t,2),r=n[0],a=n[1],i=Eb(r.shape,a.shape);return{a:function(){var t=e,n=Cb(r.shape,i);return n.length>0&&(t=tw(t,n)),hx(t,r.shape)},b:function(){var t=e,n=Cb(a.shape,i);return n.length>0&&(t=tw(t,n)),hx(t,a.shape)}}}},x_={kernelName:mh,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},w_={kernelName:bh,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return nk(n)}}}},k_={kernelName:xh,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return nk(n)}}}},S_={kernelName:wh,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Fx(e,qw(ew(Vb(1),yw($y(n,"float32")))))}}}},__={kernelName:kh,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){var t=qw(Xb(Vb(1),yw($y(n,"float32"))));return Fx(e,t)}}}},C_={kernelName:Ch,inputsToSave:["a","b"],gradFunc:function(e,t){var n=C(t,2),r=n[0],a=n[1],i=Eb(r.shape,a.shape);return{a:function(){var t=Xb(yw(r),yw(a)),n=Jx(e,Fx(a,t)),o=Cb(r.shape,i);return o.length>0&&(n=tw(n,o)),hx(n,r.shape)},b:function(){var t=Xb(yw(r),yw(a)),n=xw(Jx(e,Fx(r,t))),o=Cb(a.shape,i);return o.length>0&&(n=tw(n,o)),hx(n,a.shape)}}}},E_={kernelName:Sh,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Fx(e,Xb(yw($y(n,"float32")),1))}}}},T_={kernelName:_h,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Fx(e,ew(Vb(1),yw($y(n,"float32"))))}}}};var I_=Fg({avgPool3dGrad_:function(e,t,n,r,a,i){var o=jg(e,"dy","avgPool3dGrad"),s=jg(t,"input","avgPool3dGrad"),u=o,l=s,c=!1;4===s.rank&&(c=!0,u=hx(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),l=hx(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),_d(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),_d(5===l.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(l.rank,".")})),dx("avgPool3dGrad",a,i);var f={dy:u,input:l},d={filterSize:n,strides:r,pad:a,dimRoundingMode:i},h=Ig.runKernel(Ah,f,d);return c?hx(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),A_={kernelName:Ih,inputsToSave:["x"],gradFunc:function(e,t,n){var r=C(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad,s=n.dimRoundingMode;return{x:function(){return I_(e,r,a,i,o,s)}}}};var N_=Fg({avgPoolGrad_:function(e,t,n,r,a){var i=jg(e,"dy","avgPoolGrad"),o=jg(t,"input","avgPoolGrad");_d(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,u=i,l=!1;3===o.rank&&(l=!0,s=hx(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=hx(i,[1,i.shape[0],i.shape[1],i.shape[2]])),_d(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),_d(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var c={dy:u,input:s},f={filterSize:n,strides:r,pad:a},d=Ig.runKernel(Th,c,f);return l?hx(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),R_={kernelName:Eh,inputsToSave:["x"],gradFunc:function(e,t,n){var r=C(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return N_(e,r,a,i,o)}}}},M_={kernelName:Nh,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=C(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return aw(e,i,!1,!1)},b:function(){return aw(e,a,!0,!1)}}:o&&!s?{a:function(){return aw(i,e,!1,!0)},b:function(){return aw(a,e,!1,!1)}}:{a:function(){return aw(i,e,!0,!0)},b:function(){return aw(e,a,!0,!0)}}:{a:function(){return aw(e,i,!1,!0)},b:function(){return aw(a,e,!0,!1)}}}};var O_=Fg({spaceToBatchND_:function(e,t,n){var r=jg(e,"x","spaceToBatchND");_d(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),_d(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),_d(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return Ig.runKernel(Wv,a,i)}}),D_={kernelName:Rh,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return O_(e,r,a)}}}},L_={kernelName:"BroadcastTo",gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var u=[],l=0;l<o.length;l++)o[l]>1&&u.push(l);return{x:function(){return tw(e,u,!0)}}}},j_={kernelName:Dh,gradFunc:function(e){return{x:function(){return e.clone()}}}},P_={kernelName:Lh,gradFunc:function(e){return{x:function(){return nk(e)}}}},F_={kernelName:jh,inputsToSave:["x"],gradFunc:function(e,t,n){var r=C(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return tk(rw(Yx(r,a),$k(r,i)),e,nk(e))}}}},B_={kernelName:Fh,inputsToSave:["x"],gradFunc:m_.gradFunc},z_={kernelName:Bh,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=Ld(n.axis,t[0].shape)[0],i=r.map((function(e){return e[a]}));return Hw(e,i,a).map((function(e){return function(){return e}}))}},U_={kernelName:zh,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=C(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,u=n.pad,l=n.dataFormat;return _d(lx(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return Nx(a.shape,e,i,s,u,l)},filter:function(){return fk(a,e,i.shape,s,u,l)}}}},W_={kernelName:Wh,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=C(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,u=n.dataFormat,l=n.dimRoundingMode;return{dy:function(){return Ix(e,i,o,s,u,1,l)},filter:function(){return fk(e,a,i.shape,o,s,u,l)}}}};var G_=Fg({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=hx(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=hx(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),_d(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),_d(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")})),_d(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),_d(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),_d(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:i,dy:o},u={strides:r,pad:a,filterShape:n};return Ig.runKernel(Vh,s,u)}}),V_={kernelName:Gh,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;_d(lx(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=C(t,2),s=o[0],u=o[1];return{x:function(){return Ox(s.shape,e,u,a,i)},filter:function(){return G_(s,e,u.shape,a,i)}}}};var H_=Fg({sin_:function(e){var t={x:jg(e,"x","sin","float32")};return Ig.runKernel(Lv,t)}}),q_={kernelName:qh,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Jx(xw(H_($y(n,"float32"))),e)}}}};var X_=Fg({sinh_:function(e){var t={x:jg(e,"x","sinh")};return Ig.runKernel(jv,t)}}),Y_={kernelName:Xh,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Jx(X_($y(n,"float32")),e)}}}};var K_=Fg({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=jg(e,"x","cumsum"),i={x:a},o={axis:t,exclusive:n,reverse:r};return Ig.runKernel(Kh,i,o)}}),Z_={kernelName:Kh,inputsToSave:["x"],gradFunc:function(e,t,n){var r=C(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=vw([a],r.rank),n=K_(e,a,i,!o);return null!=t&&(n=ik(n,t)),n}}}},Q_={kernelName:Jh,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==r?[1,1]:r;_d(lx(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var u=C(t,2),l=u[0],c=u[1];return _d(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,".")})),_d(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(c.rank,".")})),_d(l.shape[3]===c.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(c.shape[2],".")})),_d(cx(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),dx("depthwiseConv2d",i,o),{x:function(){return xk(l.shape,e,c,a,i,s,o)},filter:function(){return bk(l,e,c.shape,a,i,s,o)}}}},$_={kernelName:rp,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=C(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},s={x:a,filter:i,dy:e};return{x:function(){return Ig.runKernel(ap,o,n)},filter:function(){return Ig.runKernel(ip,s,n)}}}},J_={kernelName:up,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:C(t,1)[0]};return{x:function(){return Ig.runKernel(lp,n)}}}},eC={kernelName:cp,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0],r=Jx(Ux(xw(yw(n))),2/Math.sqrt(Math.PI));return{x:function(){return Jx(e,r)}}}},tC={kernelName:dp,outputsToSave:[!0],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Jx(e,n)}}}},nC={kernelName:hp,inputsToSave:["input"],gradFunc:function(e,t){var n=C(t,1)[0];return{input:function(){return hx(e,n.shape)}}}},rC={kernelName:pp,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Jx(e,Ux(n))}}}},aC={kernelName:yp,gradFunc:function(e){return{x:function(){return nk(e)}}}},iC={kernelName:bp,inputsToSave:["a","b"],gradFunc:function(e,t){var n=C(t,2),r=n[0],a=n[1],i=Eb(r.shape,a.shape);return{a:function(){var t=Fx(e,$y(a,"float32")),n=Cb(r.shape,i);return n.length>0?hx(tw(t,n),r.shape):t},b:function(){var t=Jx(e,$y(r,"float32")),n=Cb(a.shape,i);n.length>0&&(t=hx(tw(t,n),a.shape));var o=yw(a);return xw(Fx(t,$y(o,"float32")))}}}};var oC=Fg({rsqrt_:function(e){var t={x:jg(e,"x","rsqrt","float32")};return Ig.runKernel(Av,t)}}),sC={kernelName:xp,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=C(t,4),i=a[0],o=a[1],s=a[2],u=a[3],l=null==u?Vb(1):u,c=Cb(o.shape,i.shape),f=[];if(1===o.rank){for(var d=0;d<i.shape.length-1;++d)f.push(i.shape[d]);f.push(1)}var h=ew(i,o),p=Jx(e,l),v=oC(Xb(s,Vb(r))),m=Jx(Jx(Jx(v,v),v),Vb(-.5));return{x:function(){return 1===o.rank?hx(Jx(Jx(e,Gx(hx(v,[1,1,1,o.shape[0]]),f)),l),i.shape):hx(Jx(Jx(e,v),l),i.shape)},mean:function(){var e=Jx(Jx(v,Vb(-1)),p);return 1===o.rank&&(e=tw(e,c)),hx(e,o.shape)},variance:function(){var e=Jx(Jx(m,h),p);return 1===o.rank&&(e=tw(e,c)),hx(e,o.shape)},scale:function(){var t=Jx(h,v),n=Jx(e,t);return 1===o.rank&&(n=tw(n,c)),hx(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=tw(t,c)),hx(t,o.shape)}}}};var uC=Fg({unsortedSegmentSum_:function(e,t,n){var r=jg(e,"x","unsortedSegmentSum"),a=jg(t,"segmentIds","unsortedSegmentSum","int32");_d(Nd(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return Ig.runKernel(fm,i,o)}}),lC={kernelName:wp,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=C(t,2),a=r[0],i=r[1],o=n.axis,s=Ld(o,a.shape)[0];return{x:function(){var t=a.shape,n=i.size,r=t.slice(0,s),u=r.length,l=t.slice(o,t.length).slice(1),c=l.length,f=cC(0,u),d=cC(u+1,u+1+c),h=fC([r,[n],l]),p=hx(e,h),v=hx(i,[n]),m=fC([[u],f,d]),g=ik(p,m),y=uC(g,v,a.shape[s]),b=mw(m);return y=ik(y,b)},indices:function(){return i}}}};function cC(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function fC(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var dC={kernelName:_p,inputsToSave:["a","b"],gradFunc:function(e,t){var n=C(t,2),r=n[0],a=n[1];return{a:function(){return nk(r)},b:function(){return nk(a)}}}},hC={kernelName:Cp,gradFunc:function(e){return{x:function(){return $y(e,"float32")}}}},pC={kernelName:Ip,gradFunc:function(e){return{x:function(){return nk(e)}}}},vC={kernelName:Ap,gradFunc:function(e){return{x:function(){return nk(e)}}}},mC={kernelName:Np,gradFunc:function(e){return{x:function(){return nk(e)}}}},gC={kernelName:Rp,inputsToSave:["x"],gradFunc:function(e,t,n){var r=C(t,1)[0],a=n.alpha,i=Xx(r,0);return{x:function(){return tk(i,e,Jx(e,a))}}}},yC={kernelName:jp,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Fx(e,Xb(n,1))}}}},bC={kernelName:Lp,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Fx(e,$y(n,"float32"))}}}},xC={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=C(t,1)[0],a=n.axis;return{logits:function(){var t=Ux(r);return ew(e,Jx(tw(e,a,!0),t))}}}};var wC=Fg({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},u={depthRadius:r,bias:a,alpha:i,beta:o};return Ig.runKernel(Up,s,u)}}),kC={kernelName:zp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=C(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,u=n.alpha,l=n.beta;return{x:function(){return wC(a,i,e,o,s,u,l)}}}};function SC(e,t,n,r){return t.rank<n.rank&&(t=hx(t,hw(t.shape,r))),e.rank<n.rank&&(e=hx(e,hw(e.shape,r))),{x:function(){return Jx(e,$y(zx(n,t),e.dtype))}}}var _C={kernelName:Wp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=SC(e,t[1],a,Ld(r,a.shape));return{x:function(){return i.x()}}}};var CC=Fg({less_:function(e,t){var n=jg(e,"a","less","string_or_numeric"),r=jg(t,"b","less","string_or_numeric"),a=C(yg(n,r),2);n=a[0],r=a[1],Eb(n.shape,r.shape);var i={a:n,b:r};return Ig.runKernel(Mp,i)}}),EC={kernelName:Gp,inputsToSave:["a","b"],gradFunc:function(e,t){var n=C(t,2),r=n[0],a=n[1];return{a:function(){return Jx(e,$y(Yx(r,a),"float32"))},b:function(){return Jx(e,$y(CC(r,a),"float32"))}}}};var TC=Fg({maxPool3dGrad_:function(e,t,n,r,a,i,o){var s=jg(e,"dy","maxPool3dGrad"),u=jg(t,"input","maxPool3dGrad"),l=jg(n,"output","maxPool3dGrad"),c=s,f=u,d=l,h=!1;4===u.rank&&(h=!0,c=hx(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),f=hx(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),d=hx(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),_d(5===c.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(c.rank,".")})),_d(5===f.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(f.rank,".")})),_d(5===d.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(d.rank,".")})),dx("maxPool3dGrad",i,o);var p={dy:c,input:f,output:d},v={filterSize:r,strides:a,pad:i,dimRoundingMode:o},m=Ig.runKernel(Xp,p,v);return h?hx(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),IC={kernelName:qp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=C(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad,l=n.dimRoundingMode;return{x:function(){return TC(e,a,i,o,s,u,l)}}}};var AC=Fg({maxPoolGrad_:function(e,t,n,r,a,i,o){var s=jg(e,"dy","maxPoolGrad"),u=jg(t,"input","maxPoolGrad"),l=jg(n,"output","maxPoolGrad");_d(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),_d(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),_d(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")})),dx("maxPoolGrad",i,o);var c={dy:s,input:u,output:l},f={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return Ig.runKernel(Hp,c,f)}}),NC={kernelName:Vp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=C(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad;return{x:function(){return AC(e,a,i,o,s,u)}}}},RC={kernelName:Kp,inputsToSave:["x"],gradFunc:function(e,t,n){var r=C(t,1)[0],a=Ld(n.axis,r.shape),i=Id(dw(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=hx(e,t);return Fx(Jx(n,_w(r.shape,"float32")),i)}}}},MC={kernelName:Zp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=C(t,2),i=a[0],o=SC(e,a[1],i,Ld(r,i.shape));return{x:function(){return o.x()}}}},OC={kernelName:Qp,inputsToSave:["a","b"],gradFunc:function(e,t){var n=C(t,2),r=n[0],a=n[1];return{a:function(){return Jx(e,$y($k(r,a),"float32"))},b:function(){return Jx(e,$y(Xx(r,a),"float32"))}}}},DC={kernelName:$p,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Fw(e,a,r.shape)}}}},LC={kernelName:Jp,inputsToSave:["a","b"],gradFunc:function(e,t){var n=C(t,2),r=n[0],a=n[1],i=Eb(r.shape,a.shape);return{a:function(){var t=Cb(r.shape,i);return t.length>0?hx(tw(e,t),r.shape):e},b:function(){var t=Jx(e,xw(Hx(Fx(r,a)))),n=Cb(a.shape,i);return n.length>0?hx(tw(t,n),a.shape):t}}}},jC={kernelName:tv,inputsToSave:["a","b"],gradFunc:function(e,t){var n=C(t,2),r=n[0],a=n[1],i=Eb(r.shape,a.shape);return{a:function(){var t=Jx(e,$y(a,"float32")),n=Cb(r.shape,i);return n.length>0?hx(tw(t,n),r.shape):t},b:function(){var t=Jx(e,$y(r,"float32")),n=Cb(a.shape,i);return n.length>0?hx(tw(t,n),a.shape):t}}}},PC={kernelName:nv,gradFunc:function(e){return{x:function(){return xw(e)}}}},FC={kernelName:uv,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return Sw(n.shape,"float32")}}}},BC={kernelName:sv,gradFunc:function(e){return{x:function(){return nk(e)}}}},zC={kernelName:lv,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return Jw(e,r).map((function(e){return function(){return e}}))}},UC={kernelName:cv,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Fw(e,a,r.shape)}}}},WC={kernelName:fv,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=C(t,3),r=n[0],a=n[1],i=n[2],o=r,s=a,u=Eb(o.shape,s.shape);return{a:function(){var t=$y(s,"float32"),n=Jx(e,Jx(t,iS(o,ew(t,Vb(1))))),r=Cb(o.shape,u);return r.length>0&&(n=tw(n,r)),hx(n,o.shape)},b:function(){var t=Xx(o,0),n=tk(t,Zx(o),nk(o)),r=Jx(e,Jx(i,n)),a=Cb(s.shape,u);return a.length>0&&(r=tw(r,a)),hx(r,s.shape)}}}},GC={kernelName:dv,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=C(t,2),r=n[0],a=n[1],i=Xx(r,0);return{x:function(){return tk(i,e,Jx(e,a))},alpha:function(){var t=tk(i,nk(e),Jx(e,r)),n=Cb(a.shape,e.shape);return n.length>0&&(t=tw(t,n)),hx(t,a.shape)}}}};var VC=Fg({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=jg(e,"x","cumprod"),i={x:a},o={axis:t,exclusive:n,reverse:r};return Ig.runKernel(Yh,i,o)}});function HC(e,t,n){var r=e.shape.length,a=r-n.length,i=vw(n,r),o=e;null!=i&&(o=ik(e,i));var s=o.shape.slice(),u=s.splice(r-n.length,n.length).reduce((function(e,t){return e*t}),1);s.push(u);var l=function(e,t,n){var r=e.shape.slice();r[n]=1;var a=hx(t,r),i=VC(e,n,!0,!1),o=VC(e,n,!0,!0),s=Jx(i,o);return Jx(a,s)}(o.reshape(s),t,a);if(l=l.reshape(o.shape),null!=i){var c=mw(i);l=ik(l,c)}return l}var qC={kernelName:hv,inputsToSave:["x"],gradFunc:function(e,t,n){var r=C(t,1)[0],a=n.axis,i=[];return i=void 0===a||null===a?r.shape.map((function(e,t){return t})):"number"===typeof a?[a]:a,{x:function(){return HC(r,e,i)}}}},XC={kernelName:op,inputsToSave:["a","b"],gradFunc:function(e,t){var n=C(t,2),r=n[0],a=n[1],i=Eb(r.shape,a.shape);return{a:function(){var t=Fx(e,$y(a,"float32")),n=Cb(r.shape,i);return n.length>0?hx(tw(t,n),r.shape):t},b:function(){var t=Jx(e,$y(r,"float32")),n=Cb(a.shape,i);n.length>0&&(t=hx(tw(t,n),a.shape));var o=yw(a);return xw(Fx(t,$y(o,"float32")))}}}},YC={kernelName:bv,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Fx(e,xw(yw(n)))}}}},KC={kernelName:Ev,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0],r=Jx($k(n,6),hk(n));return{x:function(){return Jx(e,$y(r,"float32"))}}}},ZC={kernelName:xv,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Jx(e,$y(hk(n),"float32"))}}}},QC={kernelName:wv,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return hx(e,n.shape)}}}},$C={kernelName:_v,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:C(t,1)[0]};return{images:function(){return Ig.runKernel(Cv,r,n)}}}},JC={kernelName:kv,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:C(t,1)[0]};return{images:function(){return Ig.runKernel(Sv,r,n)}}}},eE={kernelName:Tv,gradFunc:function(e,t,n){var r=Ld(n.dims,e.shape);return{x:function(){return Dw(e,r)}}}},tE={kernelName:Iv,gradFunc:function(e){return{x:function(){return nk(e)}}}},nE={kernelName:Av,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return xw(Fx(e,Jx(iS(n,1.5),2)))}}}};var rE=Fg({logicalNot_:function(e){var t={x:jg(e,"x","logicalNot","bool")};return Ig.runKernel(Fp,t)}}),aE={kernelName:Mv,inputsToSave:["condition"],gradFunc:function(e,t){var n=C(t,1)[0];return{condition:function(){return $y(nk(n),"float32")},t:function(){return Jx(e,$y(n,e.dtype))},e:function(){return Jx(e,$y(rE(n),e.dtype))}}}},iE={kernelName:Ov,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){var t=Xx(n,Vb(0)),r=Vb(WS),a=Vb(GS),i=Jx(e,a),o=Jx(Jx(e,r),Ux($y(n,"float32")));return tk(t,i,o)}}}},oE={kernelName:Fv,outputsToSave:[!0],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Jx(e,Jx(n,ew(Vb(1),n)))}}}},sE={kernelName:Pv,gradFunc:function(e){return{x:function(){return nk(e)}}}};var uE=Fg({cos_:function(e){var t={x:jg(e,"x","cos","float32")};return Ig.runKernel(qh,t)}}),lE={kernelName:Lv,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Jx(uE($y(n,"float32")),e)}}}};var cE=Fg({cosh_:function(e){var t={x:jg(e,"x","cosh","float32")};return Ig.runKernel(Xh,t)}}),fE={kernelName:jv,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Jx(cE($y(n,"float32")),e)}}}},dE={kernelName:Dv,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=C(t,1)[0],a=n.begin,i=n.size,o=r.shape,s=C(Rb(r,a,i),2),u=s[0],l=s[1],c=[],f=0;f<e.rank;f++)c.push([u[f],o[f]-u[f]-l[f]]);return{x:function(){return Ew(e,c)}}}},hE={kernelName:Vv,outputsToSave:[!0],gradFunc:function(e,t,n){var r=C(t,1)[0],a=n.dim,i=Jx(e,r);return{logits:function(){return ew(i,Jx(tw(i,[a],true),r))}}}},pE={kernelName:Bv,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Jx(e,Pw(n))}}}};var vE=Fg({batchToSpaceND_:function(e,t,n){var r=jg(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));_d(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),_d(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),_d(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return Ig.runKernel(Rh,i,o)}}),mE={kernelName:Wv,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return vE(e,r,a)}}}},gE={kernelName:Gv,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return Sx(e,r)}}}},yE={kernelName:im,inputsToSave:["x"],gradFunc:function(e,t,n){var r=C(t,1)[0],a=n.reps;return{x:function(){var t=nk(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=Xb(t,Fw(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=Xb(t,Fw(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var l=0;l<a[2];++l)t=Xb(t,Fw(e,[s*r.shape[0],u*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var c=0;c<a[0];++c)for(var f=0;f<a[1];++f)for(var d=0;d<a[2];++d)for(var h=0;h<a[3];++h)t=Xb(t,Fw(e,[c*r.shape[0],f*r.shape[1],d*r.shape[2],h*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}};for(var bE=0,xE=[m_,g_,y_,b_,x_,w_,k_,S_,__,C_,E_,T_,A_,R_,M_,D_,L_,j_,P_,F_,B_,z_,W_,U_,V_,q_,Y_,Z_,Q_,$_,XC,J_,eC,tC,nC,rC,iC,aC,sC,lC,dC,hC,pC,vC,mC,gC,yC,bC,xC,kC,_C,_C,EC,IC,NC,RC,MC,OC,DC,LC,jC,PC,FC,BC,zC,UC,UC,WC,GC,qC,YC,KC,ZC,QC,$C,JC,eE,tE,nE,aE,iE,oE,sE,lE,fE,dE,hE,pE,mE,mE,gE,gE,{kernelName:zv,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Fx(e,Jx(qw($y(n,"float32")),2))}}}},{kernelName:Zv,inputsToSave:["a","b"],gradFunc:function(e,t){var n=C(t,2),r=n[0],a=n[1],i=Vb(2);return{a:function(){return Jx(e,Jx(i,ew(r,a)))},b:function(){return Jx(e,Jx(i,ew(a,r)))}}}},{kernelName:Qv,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Jx(e,Jx($y(n,"float32"),2))}}}},{kernelName:hm,gradFunc:function(e){return{x:function(){return nk(e)}}}},{kernelName:nm,inputsToSave:["a","b"],gradFunc:function(e,t){var n=C(t,2),r=n[0],a=n[1],i=Eb(r.shape,a.shape);return{a:function(){var t=e,n=Cb(r.shape,i);return n.length>0&&(t=tw(t,n)),hx(t,r.shape)},b:function(){var t=e,n=Cb(a.shape,i);return n.length>0&&(t=tw(t,n)),hx(xw(t),a.shape)}}}},{kernelName:Uv,inputsToSave:["x"],gradFunc:function(e,t,n){var r=C(t,1)[0],a=r.shape.slice();Ld(n.axis,r.shape).forEach((function(e){a[e]=1}));var i=hx(e,a),o=Jx(i,_w(r.shape,"float32"));return{x:function(){return o}}}},{kernelName:rm,inputsToSave:["x"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Fx(e,yw(uE(n)))}}}},{kernelName:am,outputsToSave:[!0],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return Jx(ew(Vb(1),yw(n)),e)}}}},yE,{kernelName:um,gradFunc:function(e,t,n){var r=mw(n.perm);return{x:function(){return ik(e,r)}}}},{kernelName:cm,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return Yw(e,r)}}}},{kernelName:fm,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=C(t,1)[0];return{x:function(){return function(e,t){for(var n=sw(t,nk(t)),r=qx(e,n),a=Yx(t,Vb(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=Wx(a,o+1);a=rw(a,_w(r.shape,"bool"));var s=nk(r);return tk(a,r,s)}(e,n)}}}},{kernelName:dm,gradFunc:function(e){return{x:function(){return nk(e)}}}}];bE<xE.length;bE++){Cm(xE[bE])}ug().prototype.abs=function(){return this.throwIfDisposed(),qb(this)};var wE=Fg({acos_:function(e){var t={x:jg(e,"x","acos")};return Ig.runKernel(hh,t)}});ug().prototype.acos=function(){return this.throwIfDisposed(),wE(this)};var kE=Fg({acosh_:function(e){var t={x:jg(e,"x","acosh")};return Ig.runKernel(ph,t)}});ug().prototype.acosh=function(){return this.throwIfDisposed(),kE(this)},ug().prototype.add=function(e){return this.throwIfDisposed(),Xb(this,e)},ug().prototype.all=function(e,t){return this.throwIfDisposed(),Yb(this,e,t)},ug().prototype.any=function(e,t){return this.throwIfDisposed(),Kb(this,e,t)},ug().prototype.argMax=function(e){return this.throwIfDisposed(),Zb(this,e)};var SE=Fg({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=jg(e,"x","argMin"),r={x:n},a={axis:t};return Ig.runKernel(xh,r,a)}});ug().prototype.argMin=function(e){return this.throwIfDisposed(),SE(this,e)},ug().prototype.asScalar=function(){return this.throwIfDisposed(),_d(1===this.size,(function(){return"The array must have only 1 element."})),hx(this,[])},ug().prototype.asType=function(e){return this.throwIfDisposed(),$y(this,e)},ug().prototype.as1D=function(){return this.throwIfDisposed(),hx(this,[this.size])},ug().prototype.as2D=function(e,t){return this.throwIfDisposed(),hx(this,[e,t])},ug().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),hx(this,[e,t,n])},ug().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),hx(this,[e,t,n,r])},ug().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),hx(this,[e,t,n,r,a])};var _E=Fg({asin_:function(e){var t={x:jg(e,"x","asin")};return Ig.runKernel(wh,t)}});ug().prototype.asin=function(){return this.throwIfDisposed(),_E(this)};var CE=Fg({asinh_:function(e){var t={x:jg(e,"x","asinh")};return Ig.runKernel(kh,t)}});ug().prototype.asinh=function(){return this.throwIfDisposed(),CE(this)};var EE=Fg({atan_:function(e){var t={x:jg(e,"x","atan")};return Ig.runKernel(Sh,t)}});ug().prototype.atan=function(){return this.throwIfDisposed(),EE(this)};var TE=Fg({atan2_:function(e,t){var n=jg(e,"a","atan2"),r=jg(t,"b","atan2"),a=C(yg(n,r),2),i={a:n=a[0],b:r=a[1]};return Ig.runKernel(Ch,i)}});ug().prototype.atan2=function(e){return this.throwIfDisposed(),TE(this,e)};var IE=Fg({atanh_:function(e){var t={x:jg(e,"x","atanh")};return Ig.runKernel(_h,t)}});ug().prototype.atanh=function(){return this.throwIfDisposed(),IE(this)},ug().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),px(this,e,t,n,r)},ug().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),vE(this,e,t)},ug().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),mx(this,e,t,n,r,a)},ug().prototype.broadcastTo=function(e){return this.throwIfDisposed(),xx(this,e)},ug().prototype.cast=function(e){return this.throwIfDisposed(),$y(this,e)};var AE=Fg({ceil_:function(e){var t={x:jg(e,"x","ceil","float32")};return Ig.runKernel(Lh,t)}});ug().prototype.ceil=function(){return this.throwIfDisposed(),AE(this)},ug().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),kx(this,e,t)},ug().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof sg&&(e=[e]),Sx([this].concat(f(e)),t)},ug().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Ax(this,e,t,n,r,a,i)},ug().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Rx(this,e,t,n,r,a)},ug().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Ix(this,e,t,n,r,a,i)},ug().prototype.cos=function(){return this.throwIfDisposed(),uE(this)},ug().prototype.cosh=function(){return this.throwIfDisposed(),cE(this)},ug().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),VC(this,e,t,n)},ug().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),K_(this,e,t,n)};var NE=Fg({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=jg(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];_d(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),_d(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),_d(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),_d(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return Ig.runKernel($h,s,u)}});ug().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),NE(this,e,t)},ug().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),jx(this,e,t,n,r,a,i)};var RE=Fg({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=jg(e,"x","dilation2d"),s=jg(t,"filter","dilation2d");_d(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")})),_d(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),_d("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)}));var u=o,l=!1;3===o.rank&&(u=hx(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0);var c={x:u,filter:s},f={strides:n,pad:r,dilations:a},d=Ig.runKernel(rp,c,f);return l?hx(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});ug().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),RE(this,e,t,n,r,a)};var ME=Fg({divNoNan_:function(e,t){var n=jg(e,"a","div"),r=jg(t,"b","div"),a=C(yg(n,r),2);n=a[0],r=a[1];var i=Fx(n,r),o=nk(i),s=zx(r,o);return tk(s,o,i)}});ug().prototype.divNoNan=function(e){return this.throwIfDisposed(),ME(this,e)},ug().prototype.div=function(e){return this.throwIfDisposed(),Fx(this,e)};var OE=Fg({dot_:function(e,t){var n=jg(e,"t1","dot"),r=jg(t,"t2","dot");_d((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(_d(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=hx(n,[1,-1]),s=hx(r,[-1,1]),u=aw(o,s);return hx(u,[])}if(1===n.rank&&2===r.rank){var l=hx(n,[1,-1]),c=hx(r,[r.shape[0],r.shape[1]]),f=aw(l,c);return hx(f,[f.size])}if(2===n.rank&&1===r.rank){var d=hx(r,[-1,1]),h=aw(n,d);return hx(h,[h.size])}var p=hx(r,[r.shape[0],r.shape[1]]);return aw(n,p)}});ug().prototype.dot=function(e){return this.throwIfDisposed(),OE(this,e)},ug().prototype.elu=function(){return this.throwIfDisposed(),Bx(this)},ug().prototype.equal=function(e){return this.throwIfDisposed(),zx(this,e)};var DE=Fg({erf_:function(e){var t=jg(e,"x","erf");_d("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=$y(t,"float32"));var n={x:t};return Ig.runKernel(cp,n)}});ug().prototype.erf=function(){return this.throwIfDisposed(),DE(this)};var LE=Fg({euclideanNorm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return sS(e,"euclidean",t,n)}});ug().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),LE(this,e,t)},ug().prototype.exp=function(){return this.throwIfDisposed(),Ux(this)},ug().prototype.expandDims=function(e){return this.throwIfDisposed(),Wx(this,e)};var jE=Fg({expm1_:function(e){var t={x:jg(e,"x","expm1")};return Ig.runKernel(pp,t)}});ug().prototype.expm1=function(){return this.throwIfDisposed(),jE(this)},ug().prototype.fft=function(){return this.throwIfDisposed(),sk(this)},ug().prototype.flatten=function(){return this.throwIfDisposed(),hx(this,[this.size])},ug().prototype.floor=function(){return this.throwIfDisposed(),Hx(this)},ug().prototype.floorDiv=function(e){return this.throwIfDisposed(),Px(this,e)},ug().prototype.gather=function(e,t){return this.throwIfDisposed(),qx(this,e,t)},ug().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Yx(this,e)},ug().prototype.greater=function(e){return this.throwIfDisposed(),Xx(this,e)},ug().prototype.ifft=function(){return this.throwIfDisposed(),lk(this)},ug().prototype.irfft=function(){return this.throwIfDisposed(),ck(this)};var PE=Fg({isFinite_:function(e){var t={x:jg(e,"x","isFinite")};return Ig.runKernel(Ip,t)}});ug().prototype.isFinite=function(){return this.throwIfDisposed(),PE(this)};var FE=Fg({isInf_:function(e){var t={x:jg(e,"x","isInf")};return Ig.runKernel(Ap,t)}});ug().prototype.isInf=function(){return this.throwIfDisposed(),FE(this)};var BE=Fg({isNaN_:function(e){var t={x:jg(e,"x","isNaN")};return Ig.runKernel(Np,t)}});ug().prototype.isNaN=function(){return this.throwIfDisposed(),BE(this)},ug().prototype.leakyRelu=function(e){return this.throwIfDisposed(),Kx(this,e)},ug().prototype.lessEqual=function(e){return this.throwIfDisposed(),$k(this,e)},ug().prototype.less=function(e){return this.throwIfDisposed(),CC(this,e)};var zE=Fg({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=jg(e,"x","localResponseNormalization");_d(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),_d(Nd(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=hx(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},l={depthRadius:t,bias:n,alpha:r,beta:a},c=Ig.runKernel(zp,u,l);return s?hx(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});ug().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),zE(this,e,t,n,r)};var UE=Fg({logSigmoid_:function(e){var t=jg(e,"x","logSigmoid"),n=Gb((function(e){return{value:xw(Vw(xw(e))),gradFunc:function(t){return Jx(t,Pw(xw(e)))}}}));return n(t)}});ug().prototype.logSigmoid=function(){return this.throwIfDisposed(),UE(this)},ug().prototype.logSoftmax=function(e){return this.throwIfDisposed(),nw(this,e)},ug().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),vS(this,e,t)},ug().prototype.log=function(){return this.throwIfDisposed(),Zx(this)},ug().prototype.log1p=function(){return this.throwIfDisposed(),Qx(this)},ug().prototype.logicalAnd=function(e){return this.throwIfDisposed(),rw(this,e)},ug().prototype.logicalNot=function(){return this.throwIfDisposed(),rE(this)};var WE=Fg({logicalOr_:function(e,t){var n=jg(e,"a","logicalOr","bool"),r=jg(t,"b","logicalOr","bool");Eb(n.shape,r.shape);var a={a:n,b:r};return Ig.runKernel(Bp,a)}});ug().prototype.logicalOr=function(e){return this.throwIfDisposed(),WE(this,e)};var GE=Fg({logicalXor_:function(e,t){var n=jg(e,"a","logicalXor","bool"),r=jg(t,"b","logicalXor","bool");return Eb(n.shape,r.shape),rw(WE(e,t),rE(rw(e,t)))}});ug().prototype.logicalXor=function(e){return this.throwIfDisposed(),GE(this,e)},ug().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),aw(this,e,t,n)},ug().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),iw(this,e,t,n,r)},ug().prototype.max=function(e,t){return this.throwIfDisposed(),$x(this,e,t)},ug().prototype.maximum=function(e){return this.throwIfDisposed(),sw(this,e)},ug().prototype.mean=function(e,t){return this.throwIfDisposed(),uw(this,e,t)},ug().prototype.min=function(e,t){return this.throwIfDisposed(),lw(this,e,t)},ug().prototype.minimum=function(e){return this.throwIfDisposed(),cw(this,e)};var VE=Fg({mirrorPad_:function(e,t,n){_d("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=jg(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");_d(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){_d(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),_d(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return Ig.runKernel($p,u,s)}});ug().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),VE(this,e,t)};var HE=Fg({mod_:function(e,t){var n=jg(e,"a","mod"),r=jg(t,"b","mod"),a=C(yg(n,r),2),i={a:n=a[0],b:r=a[1]};return Ig.runKernel(Jp,i)}});ug().prototype.mod=function(e){return this.throwIfDisposed(),HE(this,e)},ug().prototype.mul=function(e){return this.throwIfDisposed(),Jx(this,e)},ug().prototype.neg=function(){return this.throwIfDisposed(),xw(this)},ug().prototype.norm=function(e,t,n){return this.throwIfDisposed(),sS(this,e,t,n)},ug().prototype.notEqual=function(e){return this.throwIfDisposed(),ww(this,e)},ug().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),kw(this,e,t,n)},ug().prototype.onesLike=function(){return this.throwIfDisposed(),Cw(this)},ug().prototype.pad=function(e,t){return this.throwIfDisposed(),Ew(this,e,t)};var qE=Fg({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var s=jg(e,"x","maxPool"),u=s,l=!1;3===s.rank&&(l=!0,u=hx(s,[1,s.shape[0],s.shape[1],s.shape[2]])),_d(cx(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var c,f=$b(u.shape,t,i,a,r),d=[f.dilationHeight,f.dilationWidth];c="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([f.filterHeight,f.filterWidth],d):[[0,0],[0,0]];var h=1===d[0]&&1===d[1],p=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),l=t.map((function(e,t){return[0,o[t]]}));return[u,l]}([f.inHeight,f.inWidth],d,c),v=C(p,2),m=v[0],g=v[1],y=h?r:"valid",b=h?u:O_(u,d,m),x=("avg"===n?function(){return px(b,t,i,y,o)}:function(){return iw(b,t,i,y,o)})(),w=h?x:vE(x,d,g);return l?hx(w,[w.shape[1],w.shape[2],w.shape[3]]):w}});ug().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),qE(this,e,t,n,r,a,i)},ug().prototype.pow=function(e){return this.throwIfDisposed(),iS(this,e)},ug().prototype.prelu=function(e){return this.throwIfDisposed(),Tw(this,e)};var XE=Fg({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=jg(e,"x","prod");"bool"===r.dtype&&(r=$y(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return Ig.runKernel(hv,a,i)}});ug().prototype.prod=function(e,t){return this.throwIfDisposed(),XE(this,e,t)};var YE=Fg({reciprocal_:function(e){var t={x:jg(e,"x","reciprocal")};return Ig.runKernel(bv,t)}});ug().prototype.reciprocal=function(){return this.throwIfDisposed(),YE(this)},ug().prototype.relu=function(){return this.throwIfDisposed(),Ow(this)},ug().prototype.relu6=function(){return this.throwIfDisposed(),dk(this)},ug().prototype.reshapeAs=function(e){return this.throwIfDisposed(),hx(this,e.shape)},ug().prototype.reshape=function(e){return this.throwIfDisposed(),hx(this,e)},ug().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),Kk(this,e,t,n)},ug().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),Zk(this,e,t,n)},ug().prototype.reverse=function(e){return this.throwIfDisposed(),Dw(this,e)},ug().prototype.rfft=function(){return this.throwIfDisposed(),uk(this)},ug().prototype.round=function(){return this.throwIfDisposed(),Jk(this)},ug().prototype.rsqrt=function(){return this.throwIfDisposed(),oC(this)},ug().prototype.selu=function(){return this.throwIfDisposed(),Lw(this)},ug().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),jw(this,e,t,n,r,a,i)},ug().prototype.sigmoid=function(){return this.throwIfDisposed(),Pw(this)};var KE=Fg({sign_:function(e){var t={x:jg(e,"x","sign")};return Ig.runKernel(Pv,t)}});ug().prototype.sign=function(){return this.throwIfDisposed(),KE(this)},ug().prototype.sin=function(){return this.throwIfDisposed(),H_(this)},ug().prototype.sinh=function(){return this.throwIfDisposed(),X_(this)},ug().prototype.slice=function(e,t){return this.throwIfDisposed(),Fw(this,e,t)},ug().prototype.softmax=function(e){return this.throwIfDisposed(),Gw(this,e)},ug().prototype.softplus=function(){return this.throwIfDisposed(),Vw(this)},ug().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),O_(this,e,t)},ug().prototype.split=function(e,t){return this.throwIfDisposed(),Hw(this,e,t)},ug().prototype.sqrt=function(){return this.throwIfDisposed(),qw(this)},ug().prototype.square=function(){return this.throwIfDisposed(),yw(this)},ug().prototype.squaredDifference=function(e){return this.throwIfDisposed(),hS(this,e)},ug().prototype.squeeze=function(e){return this.throwIfDisposed(),Xw(this,e)},ug().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof sg?[this,e]:[this].concat(f(e));return Yw(n,t)},ug().prototype.step=function(e){return this.throwIfDisposed(),hk(this,e)};var ZE=Fg({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=jg(e,"x","stridedSlice","string_or_numeric"),c={x:l},f={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return Ig.runKernel($v,c,f)}});ug().prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),ZE(this,e,t,n,r,a,i,o,s)},ug().prototype.sub=function(e){return this.throwIfDisposed(),ew(this,e)},ug().prototype.sum=function(e,t){return this.throwIfDisposed(),tw(this,e,t)};var QE=Fg({tan_:function(e){var t={x:jg(e,"x","tan","float32")};return Ig.runKernel(rm,t)}});ug().prototype.tan=function(){return this.throwIfDisposed(),QE(this)},ug().prototype.tanh=function(){return this.throwIfDisposed(),Kw(this)},ug().prototype.tile=function(e){return this.throwIfDisposed(),Gx(this,e)},ug().prototype.toBool=function(){return this.throwIfDisposed(),$y(this,"bool")},ug().prototype.toFloat=function(){return this.throwIfDisposed(),$y(this,"float32")},ug().prototype.toInt=function(){return this.throwIfDisposed(),$y(this,"int32")};var $E=Fg({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=jg(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=Ig.runKernel(om,i,o),u=C(s,2),l=u[0],c=u[1];return{values:l,indices:c}}});ug().prototype.topk=function(e,t){return this.throwIfDisposed(),$E(this,e,t)},ug().prototype.transpose=function(e){return this.throwIfDisposed(),ik(this,e)};var JE=Fg({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=jg(e,"x","unique","string_or_numeric");_d(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=Ig.runKernel(lm,r,a),o=C(i,2),s=o[0],u=o[1];return{values:s,indices:u}}});ug().prototype.unique=function(e){return this.throwIfDisposed(),JE(this,e)},ug().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),uC(this,e,t)},ug().prototype.unstack=function(e){return this.throwIfDisposed(),Jw(this,e)},ug().prototype.where=function(e,t){return this.throwIfDisposed(),tk(e,this,t)},ug().prototype.zerosLike=function(){return this.throwIfDisposed(),nk(this)};var eT=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),r=t.call(this,e),Object.setPrototypeOf(x(r),n.prototype),r}return p(n)}(M(Error)),tT=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),r=t.call(this,e),Object.setPrototypeOf(x(r),n.prototype),r}return p(n)}(M(Error)),nT=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),r=t.call(this,e),Object.setPrototypeOf(x(r),n.prototype),r}return p(n)}(M(Error)),rT=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),r=t.call(this,e),Object.setPrototypeOf(x(r),n.prototype),r}return p(n)}(M(Error)),aT=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),r=t.call(this,e),Object.setPrototypeOf(x(r),n.prototype),r}return p(n)}(M(Error)),iT=(Error,function(){function e(t){d(this,e),this.maxEntries=t||100,this.cache=new Map}return p(e,[{key:"get",value:function(e){var t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}},{key:"put",value:function(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(var t=0;t<this.maxEntries-e;t++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}]),e}());function oT(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function sT(e,t){if(!e)throw new aT(t)}function uT(e,t){var n,r=0,a=E(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(cZ){a.e(cZ)}finally{a.f()}return r}function lT(e){return 1===e.length?e[0]:e}function cT(e){return Array.isArray(e)?e:[e]}function fT(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function dT(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var hT={};function pT(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function vT(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return vT(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?vT(a):e[r]=a.value)}}function mT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var i,o=e;if(o in n)i=n[o];else if(o in hT)i=hT[o];else if(null==(i=t[o]))throw new nT("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var s=e;if(null==s.className||null==s.config)throw new nT("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");var u,l,c=s.className;if(c in n){var f=C(n[c],2);u=f[0],l=f[1]}else if(c in hT){var d=C(hT.className,2);u=d[0],l=d[1]}else if(c in t){var h=C(t[c],2);u=h[0],l=h[1]}if(null==u)throw new nT("Unknown ".concat(r,": ").concat(c,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){for(var p={},v=0,m=Object.keys(hT);v<m.length;v++){var g=m[v];p[g]=hT[g]}for(var y=0,b=Object.keys(n);y<b.length;y++){var x=b[y];p[x]=n[x]}var w=s.config;w.customObjects=p;for(var k=Object.assign({},hT),S=0,_=Object.keys(n);S<_.length;S++){var E=_[S];hT[E]=n[E]}vT(s.config);var T=l(u,s.config,n,a);return hT=Object.assign({},k),T}for(var I=Object.assign({},hT),A=0,N=Object.keys(n);A<N.length;A++){var R=N[A];hT[R]=n[R]}var M=new u(s.config);return hT=Object.assign({},I),M}function gT(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function yT(e){if(null==e)return e;var t,n=[],r=E(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(cZ){r.e(cZ)}finally{r.f()}return n}function bT(e){if(null==e)throw new nT("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function xT(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new nT("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function wT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return sT(n>=0),sT(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function kT(e,t){Array.isArray(e)?(_d(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return kT(e,"element ".concat(n+1," of ").concat(t))}))):_d(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(ST(e),".")}))}function ST(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return ST(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function _T(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var CT=0;function ET(){return CT++}var TT={};function IT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in TT||(TT[e]=0),TT[e]+=1,e+TT[e].toString()}var AT=["channelsFirst","channelsLast"],NT=["nearest","bilinear"],RT=["valid","same","causal"],MT=["max","avg"],OT=["sum","mul","concat","ave"],DT=new Map;function LT(e){xT(AT,"DataFormat",e)}function jT(e){xT(RT,"PaddingMode",e)}function PT(e){xT(MT,"PoolMode",e)}var FT=[];function BT(e,t){FT.push(e);try{var n=t();return FT.pop(),n}catch(r){throw FT.pop(),r}}function zT(e){if(!VT(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===FT.length?"":FT.join("/")+"/")+e}function UT(e){if(!VT(e))throw new Error("Not a valid tensor name: '"+e+"'");DT.has(e)||DT.set(e,0);var t=DT.get(e);if(DT.set(e,DT.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return DT.set(n,1),n}return e}var WT,GT=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function VT(e){return!!e.match(GT)}function HT(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function qT(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function XT(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function YT(e,t){if(t<e)throw new nT("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function KT(){return null==WT&&(WT=Ig.backend.epsilon()),WT}function ZT(e,t){return $y(e,t)}function QT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),hx(e,n)}function $T(e){var t=[HT(e.shape)];return hx(e,t)}function JT(e,t,n){return Bb((function(){switch(e.rank){case 1:return Bw(e,t,n);case 2:return zw(e,[t,0],[n,e.shape[1]]);case 3:return Uw(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Ww(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Fw(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Fw(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new nT("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function eI(e,t,n){return Bb((function(){switch(e.rank){case 1:return Bw(e,t,n);case 2:return zw(e,[0,t],[e.shape[0],n]);case 3:return Uw(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Ww(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new nT("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function tI(e,t,n,r){return Bb((function(){switch(e.rank){case 1:return Bw(e,t,n);case 2:switch(r){case 1:return JT(e,t,n);case 2:return eI(e,t,n);default:throw new nT("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return JT(e,t,n);case 2:return Uw(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return eI(e,t,n);default:throw new nT("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return JT(e,t,n);case 2:return Ww(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Ww(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return eI(e,t,n);default:throw new nT("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new nT("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function nI(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),Sx(e,n)}function rI(e,t){switch(e.rank){case 1:return _x([e,t]);case 2:return Cx([e,t],0);case 3:return Ex([e,t],0);case 4:return Tx([e,t],0);default:throw new nT("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function aI(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new nT("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return Gx(e,t)}function iI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return Rw(e,t,n,r,a)}function oI(e,t,n,r){if(e.rank<2||t.rank<2)throw new rT("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new rT("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return wk({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?lI(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),i=a.pop();e=hx(e,[-1,i]);var o=t.shape.slice(),s=o.pop(),u=o.pop(),l=[].concat(f(o),[s]),c=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=hx(ik(t,c),[u,-1]);var d=[].concat(f(a),f(l));return hx(wk({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?lI(e.rank,r,"channelsLast"):null,activation:n}),d)}function sI(e,t,n){return Bb((function(){return t=Array.isArray(t)?Zw(t,"int32"):$y(t,"int32"),qx(e,t,n)}))}function uI(e){return Jx(e,e)}function lI(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new nT("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?hx(t,[1,r[0],1,1,1]):hx(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?hx(t,[1,1,1,1,r[0]]):hx(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?hx(t,[1,r[0],1,1]):hx(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?hx(t,[1,1,1,r[0]]):hx(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?hx(t,[1,r[0],1]):hx(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?hx(t,[1,1,r[0]]):hx(t,[1].concat(r))}else if(e<3)return t;throw new nT("Unsupported input rank by biasAdd: ".concat(t.rank))}function cI(e,t,n){return Bb((function(){return null==n&&(n="channelsLast"),LT(n),Xb(e,lI(e.rank,t,n))}))}function fI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new rT("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return Bx(e)}function dI(e,t,n,r){return Bb((function(){return ok(e,t,n,r)}))}function hI(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var pI=["fanIn","fanOut","fanAvg"],vI=["normal","uniform","truncatedNormal"];var mI=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(Db),gI=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e,t){return Sw(e,t)}}]),n}(mI);gI.className="Zeros",jb(gI);var yI=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e,t){return _w(e,t)}}]),n}(mI);yI.className="Ones",jb(yI);var bI=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),r=t.call(this),"object"!==typeof e)throw new nT("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new nT("config must have value set but got ".concat(e));return r.value=e.value,r}return p(n,[{key:"apply",value:function(e,t){var n=this;return Bb((function(){return Jx(Vb(n.value),_w(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(mI);bI.className="Constant",jb(bI);var xI=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return p(n,[{key:"apply",value:function(e,t){return Mw(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(mI);xI.className="RandomUniform",jb(xI);var wI=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return p(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new rT("randomNormal does not support dType ".concat(t,"."));return iI(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(mI);wI.className="RandomNormal",jb(wI);var kI=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return p(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new rT("truncatedNormal does not support dType ".concat(t,"."));return $w(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(mI);kI.className="TruncatedNormal",jb(kI);var SI=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return p(n,[{key:"apply",value:function(e,t){var n=this;return Bb((function(){if(2!==e.length||e[0]!==e[1])throw new nT("Identity matrix initializer can only be used for 2D square matrices.");return Jx(n.gain,Vx(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(mI);SI.className="Identity",jb(SI);var _I=function(e){m(n,e);var t=k(n);function n(e){var r,a;if(d(this,n),r=t.call(this),e.scale<0)throw new nT("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,a=r.mode,xT(pI,"FanMode",a),r.distribution=null==e.distribution?"normal":e.distribution,function(e){xT(vI,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return p(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(LT(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=HT(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=HT(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=HT(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new rT("".concat(this.getClassName()," does not support dType ").concat(t,"."));return $w(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return Mw(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(mI);_I.className="VarianceScaling",jb(_I);var CI=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return p(n,[{key:"getClassName",value:function(){return _I.className}}]),n}(_I);CI.className="GlorotUniform",jb(CI);var EI=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return p(n,[{key:"getClassName",value:function(){return _I.className}}]),n}(_I);EI.className="GlorotNormal",jb(EI);var TI=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return p(n,[{key:"getClassName",value:function(){return _I.className}}]),n}(_I);TI.className="HeNormal",jb(TI);var II=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return p(n,[{key:"getClassName",value:function(){return _I.className}}]),n}(_I);II.className="HeUniform",jb(II);var AI=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return p(n,[{key:"getClassName",value:function(){return _I.className}}]),n}(_I);AI.className="LeCunNormal",jb(AI);var NI=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return p(n,[{key:"getClassName",value:function(){return _I.className}}]),n}(_I);NI.className="LeCunNormal",jb(NI);var RI=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new rT("Random seed is not implemented for Orthogonal Initializer yet.");return r}return p(n,[{key:"apply",value:function(e,t){var n=this;return Bb((function(){if(e.length<2)throw new rT("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=iI(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=yS.gramSchmidt(t);return e[0]>e[1]&&(r=ik(r)),Jx(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(mI);RI.className="Orthogonal",jb(RI);var MI={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function OI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return mT(e,Lb.getMap().classNameMap,t,"initializer")}function DI(e){return pT(e)}function LI(e){if("string"===typeof e){var t=e in MI?MI[e]:e;if("GlorotNormal"===t)return new EI;if("GlorotUniform"===t)return new CI;if("HeNormal"===t)return new TI;if("HeUniform"===t)return new II;if("LeCunNormal"===t)return new AI;if("LeCunUniform"===t)return new NI;var n={};return n.className=t,n.config={},OI(n)}return e instanceof mI?e:OI(e)}function jI(e){return Array.isArray(e)&&Array.isArray(e[0])}function PI(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function FI(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new nT("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function BI(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new nT("Expected exactly 1 Shape; got ".concat(e.length))}return e}function zI(e){var t,n=0,r=E(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(cZ){r.e(cZ)}finally{r.f()}return n}var UI="Variable",WI=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:UI,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;d(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=ET(),r=null==r?UI:r,this.originalName=zT(r),this.name=UT(this.originalName),this.trainable_=a,this.constraint=i,this.val=ek(t,this.trainable_,this.name,this.dtype)}return p(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function GI(e){return e.map((function(e){return e.read()}))}function VI(e){e.forEach((function(e){e[0].write(e[1])}))}var HI=p((function e(t){d(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),qI=p((function e(t,n,r,a,i,o,s){d(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=ET(),null!=o&&(this.originalName=zT(o),this.name=UT(this.originalName)),this.rank=n.length})),XI=0,YI=function(){function e(t,n){d(this,e),this.callArgs=n,this.id=XI++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=E(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(cZ){a.e(cZ)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return p(e,[{key:"getConfig",value:function(){var e,t=[],n=E(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(cZ){n.e(cZ)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),KI=0,ZI=function(e){m(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=KI++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=fT(i)+"_"+IT(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return p(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new tT("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new nT("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return lT(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return lT(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new eT("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new eT("Layer ".concat(this.name)+" is not connected, no input to return.");return lT(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new eT("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new eT("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return lT(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=cT(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=cT(this.inputSpec);if(e.length!==t.length)throw new nT("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new nT("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new nT("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new nT("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new nT("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),l=a.axes[s],c=u>=0?o[u]:o[o.length+u];if(null!=l&&-1===[l,null].indexOf(c))throw new nT("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(u," of input shape to ")+"have value ".concat(l," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var f=0;f<a.shape.length;++f){var d=a.shape[f],h=r.shape[f];if(null!=d&&null!=h&&d!==h)throw new nT("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=cT(e),i=!0,o=E(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof qI)){i=!1;break}}}catch(cZ){o.e(cZ)}finally{o.f()}var s,u=!0,l=E(a);try{for(l.s();!(s=l.n()).done;){if(s.value instanceof qI){u=!1;break}}}catch(cZ){l.e(cZ)}finally{l.f()}if(i===u)throw new nT("Arguments to apply() must be all SymbolicTensors or all Tensors");return BT(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=E(cT(e));try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push(s.shape)}}catch(cZ){o.e(cZ)}finally{o.f()}n.build(lT(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var l,c=n.call(e,t),f=[],d=E(cT(c));try{for(d.s();!(l=d.n()).done;){var h=l.value;-1!==a.indexOf(h)&&(h=h.clone()),f.push(h)}}catch(cZ){d.e(cZ)}finally{d.f()}if(c=lT(f),null!=n.activityRegularizer)throw new rT("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return c}var p,v=function(e){e=cT(e);var t,n=[],r=E(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(cZ){r.e(cZ)}finally{r.f()}return lT(n)}(e),m=n.computeOutputShape(v),g="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?v[0]:v),p=null!=m&&m.length>0&&Array.isArray(m[0])?m.map((function(r,a){return new qI(g,r,n,cT(e),t,n.name,a)})):new qI(g,m,n,cT(e),t,n.name),n.addInboundNode(e,p,null,null,v,m,t),n._refCount++,null!=n.activityRegularizer)throw new rT("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return p}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new eT("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=E(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(cZ){n.e(cZ)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new eT("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new tT("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return zI(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return GI(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;Bb((function(){var n=t.weights;if(n.length!==e.length)throw new nT('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=GI(n),i=0;i<a.length;++i){var o=a[i],s=n[i],u=e[i];if(!Ad(o.shape,u.shape))throw new nT("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(u.shape));r.push([s,u])}VI(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new nT("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():LI("zeros"));var u=r.apply(t,n),l=new WI(u,n,e,i,o);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(l.read())})),null==i&&(i=!0),i?this._trainableWeights.push(l):this._nonTrainableWeights.push(l),l}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=cT(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,f(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=cT(e);t=cT(t),n=cT(n),r=cT(r),a=PI(a),i=PI(i);var u,l=[],c=[],f=[],d=E(s);try{for(d.s();!(u=d.n()).done;){var h=u.value;l.push(h.sourceLayer),c.push(h.nodeIndex),f.push(h.tensorIndex)}}catch(cZ){d.e(cZ)}finally{d.f()}new YI({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:f,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(Db);function QI(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,s=E(QI(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]));try{for(s.s();!(o=s.n()).done;){var u=o.value;-1===a.indexOf(u)&&a.push(u)}}catch(cZ){s.e(cZ)}finally{s.f()}}return a}var $I=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:IT("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new nT("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new nT("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new nT("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new qI(r.dtype,r.batchInputShape,x(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new YI({outboundLayer:x(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return p(n,[{key:"apply",value:function(e,t){throw new nT("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(ZI);function JI(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new nT("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new $I({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}$I.className="InputLayer",jb($I);var eA=function(){function e(t){if(d(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=E(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(cZ){a.e(cZ)}finally{a.f()}}}return p(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new nT("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return $y(t,e.dtype)}catch(cZ){throw new nT("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof qI){if(null==this.id2Value[e.id])throw new nT("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new nT("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof qI){if(null==this.id2Value[e.id])throw new nT("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new nT("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&zb(this.id2Mask)}}]),e}(),tA=new iT,nA=new iT;function rA(e,t,n,r){var a,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],u=s.map((function(e){return e.name})),l=[],c=t.names(),f=E(u);try{for(f.s();!(a=f.n()).done;){var d=a.value;-1!==c.indexOf(d)?l.push(t.getValue(d)):l.push(null)}}catch(cZ){f.e(cZ)}finally{f.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var h,p=u.join(",")+"|"+t.names().sort().join(","),v=tA.get(p);if(null==v){var m=function(e,t){_d(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=iA(e[0],t);n=a.sorted,r=a.recipientMap}else{var i,o=new Set,s=E(e);try{for(s.s();!(i=s.n()).done;){var u,l=iA(i.value,t),c=l.sorted,f=l.recipientMap,d=E(c);try{for(d.s();!(u=d.n()).done;){var h=u.value;o.has(h.name)||(n.push(h),o.add(h.name))}}catch(cZ){d.e(cZ)}finally{d.f()}var p=function(e){null==r[e]&&(r[e]=new Set),f[e].forEach((function(t){return r[e].add(t)}))};for(var v in f)p(v)}}catch(cZ){s.e(cZ)}finally{s.f()}}return{sorted:n,recipientCounts:aA(r)}}(s,t);v=m.sorted,h=m.recipientCounts,tA.put(p,v),nA.put(p,h)}h={},i||Object.assign(h,nA.get(p));for(var g=new eA(t),y=0;y<v.length;++y){if(null!=r){var b=Fb().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=v[y],w=x.sourceLayer;if(!(w instanceof $I)){var k,S=[],_=[],C=[],T=!1,I=E(x.inputs);try{for(I.s();!(k=I.n()).done;){var A=k.value,N=g.getValue(A),R=g.getMask(A);S.push(N),_.push(R),null!=R&&(T=!0),i||(h[A.name]--,0!==h[A.name]||t.hasKey(A)||-1!==u.indexOf(A.name)||N.isDisposed||!0===A.sourceLayer.stateful||C.push(N))}}catch(cZ){I.e(cZ)}finally{I.f()}T&&((n=n||{}).mask=_[0]);var M=cT(w.apply(S,n)),O=null;w.supportsMasking&&(O=w.computeMask(S,_));for(var D=oA(x),L=Array.isArray(D)?D:[D],j=0;j<L.length;++j){g.hasKey(L[j])||g.add(L[j],M[j],Array.isArray(O)?O[0]:O);var P=u.indexOf(L[j].name);-1!==P&&(l[P]=M[j])}i||zb(C)}}return g.disposeMasks(),o?l:l[0]}function aA(e){var t={};for(var n in e)t[n]=e[n].size;return t}function iA(e,t){var n,r=new Set,a=[],i={},o=E(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(cZ){o.e(cZ)}finally{o.f()}var u=[],l=[];for(u.push(e);u.length>0;){var c=u[u.length-1];if(r.has(c.name))u.pop();else{var f=l[l.length-1]===u.length-1;if(0===c.inputs.length||f)u.pop(),a.push(c),r.add(c.name),f&&l.pop();else{l.push(u.length-1);var d,h=E(c.inputs);try{for(h.s();!(d=h.n()).done;){var p=d.value;null==i[p.name]&&(i[p.name]=new Set),i[p.name].add(c.name),r.has(p.name)||u.push(p)}}catch(cZ){h.e(cZ)}finally{h.f()}}}}return{sorted:a,recipientMap:i}}function oA(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=E(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(cZ){i.e(cZ)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function sA(e,t){return Bb((function(){return qw(tw(Jx(e,e),t,!0))}))}sh().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),(function(e){null!=tA&&tA.setMaxEntries(e),null!=nA&&nA.setMaxEntries(e)}));var uA=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getConfig",value:function(){return{}}}]),n}(Db),lA=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return p(n,[{key:"apply",value:function(e){var t=this;return Bb((function(){var n=sA(e,t.axis),r=kx(n,0,t.maxValue);return Jx(e,Fx(r,Xb(KT(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(uA);lA.className="MaxNorm",jb(lA);var cA=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return p(n,[{key:"apply",value:function(e){var t=this;return Bb((function(){return Fx(e,Xb(KT(),sA(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(uA);cA.className="UnitNorm",jb(cA);var fA=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return Ow(e)}}]),n}(uA);fA.className="NonNeg",jb(fA);var dA=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return p(n,[{key:"apply",value:function(e){var t=this;return Bb((function(){var n=sA(e,t.axis),r=Xb(Jx(t.rate,kx(n,t.minValue,t.maxValue)),Jx(1-t.rate,n));return Jx(e,Fx(r,Xb(KT(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(uA);dA.className="MinMaxNorm",jb(dA);var hA,pA={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function vA(e){return pT(e)}function mA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return mT(e,Lb.getMap().classNameMap,t,"constraint")}function gA(e){return null==e?null:"string"===typeof e?mA({className:e in pA?pA[e]:e,config:{}}):e instanceof uA?e:mA(e)}function yA(e){return bA.apply(this,arguments)}function bA(){return bA=A(T().mark((function e(t){var n,r,a,i,o,s,u,l;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!==typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(u=e.sent,l=0;l<u.length;++l)t[r[l]]=u[l][0];zb(a);case 12:case"end":return e.stop()}}),e)}))),bA.apply(this,arguments)}function xA(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(hA||(hA={}));var wA=function(){function e(){d(this,e),this.validationData=null}return p(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=A(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=A(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=A(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=A(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),kA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;d(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return p(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=E(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(cZ){n.e(cZ)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=E(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(cZ){n.e(cZ)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=A(T().mark((function e(t,n){var r,a,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=E(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=A(T().mark((function e(t,n){var r,a,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=E(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=A(T().mark((function e(t,n){var r,a,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=E(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=A(T().mark((function e(t,n){var r,a,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=E(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=A(T().mark((function e(t){var n,r,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=E(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=A(T().mark((function e(t){var n,r,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=E(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),SA=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.call(this)}return p(n,[{key:"onEpochBegin",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=A(T().mark((function e(t,n){var r,a,i,o=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"===typeof t)o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+t*r;else{var a;e in o.totals?a=o.totals[e]:o.totals[e]=0;var i=Bb((function(){return Xb(o.totals[e],Jx(t,r))}));o.totals[e]=i,null!=a&&a.dispose()}},n)a(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=A(T().mark((function e(t,n){var r,a,i,o=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=19;break}r=E(this.params.metrics),e.prev=2,i=function(){var e=a.value;if(null==o.totals[e])return"continue";"number"===typeof o.totals[e]?n[e]=o.totals[e]/o.seen:Bb((function(){var t=Jx(Fx(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),Ub(n[e])}))},r.s();case 5:if((a=r.n()).done){e.next=11;break}if("continue"!==i()){e.next=9;break}return e.abrupt("continue",9);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(wA),_A=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"onTrainBegin",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=A(T().mark((function e(t,n){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=A(T().mark((function e(){var t,n,r,a,i,o,s,u,l;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!==typeof i[o]&&(s=i[o],t.push(s.data()),n.push(a),r.push(o));return e.next=6,Promise.all(t);case 6:for(u=e.sent,l=0;l<u.length;++l)this.history[n[l]][r[l]].dispose(),this.history[n[l]][r[l]]=u[l][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(wA),CA=function(e){m(n,e);var t=k(n);function n(e,r){var a;if(d(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||NS,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return Gd(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():qm();return function(){var i=null!=n?n():qm();return i-a<t?r:(a=i,r=e.apply(void 0,arguments))}}(a.maybeWait.bind(x(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return p(n,[{key:"maybeWait",value:function(){var e=A(T().mark((function e(t,n,r){var a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,yA(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=A(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,yA(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=A(T().mark((function e(t,n){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,yA(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=A(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,yA(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=A(T().mark((function e(t,n){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,yA(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):Gd(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,yA(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,yA(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(wA);function EA(e,t){return null==e&&(e={}),e instanceof wA?[e]:Array.isArray(e)&&e[0]instanceof wA?e:cT(e).map((function(e){return new CA(e,t)}))}var TA=function(){function e(){d(this,e)}return p(e,null,[{key:"registerCallbackConstructor",value:function(t,n){_d(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new nT("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,f(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function IA(e,t,n,r,a,i,o,s,u){var l=new _A,c=[new SA].concat(f(TA.createCallbacks(t)));null!=e&&c.push.apply(c,f(e)),c.push(l);var d=new kA(c);return d.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:d,history:l}}function AA(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function NA(){return NA="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=AA(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},NA.apply(this,arguments)}function RA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return mT(e,Lb.getMap().classNameMap,t,"layer",n)}function MA(e,t){return Bb((function(){"float32"!==e.dtype&&(e=$y(e,"float32"));var n=tw(uI(e),t,!0),r=wx(n.shape,KT()),a=qw(sw(n,r));return Fx(e,a)}))}function OA(e,t){return Bb((function(){return uw(uI(ew(t,e)),-1)}))}function DA(e,t){return Bb((function(){return uw(qb(ew(t,e)),-1)}))}function LA(e,t){return Bb((function(){var n=ew(e,t),r=kx(qb(e),KT(),Number.MAX_VALUE),a=qb(Fx(n,r));return Jx(100,uw(a,-1))}))}function jA(e,t){return Bb((function(){var n=kx(t,KT(),Number.MAX_VALUE),r=Zx(Xb(1,n)),a=kx(e,KT(),Number.MAX_VALUE),i=Zx(Xb(1,a));return uw(uI(ew(r,i)),-1)}))}function PA(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Bb((function(){if(n)t=Gw(t);else{var r=tw(t,t.shape.length-1,!0);t=Fx(t,r)}return t=kx(t,KT(),1-KT()),xw(tw(Jx($y(e,"float32"),Zx(t)),t.shape.length-1))}))}function FA(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Bb((function(){var r=$y(Hx($T(e)),"int32"),a=(t=kx(t,KT(),1-KT())).shape;return PA(hx(kw(r,a[a.length-1]),a),t,n)}))}function BA(e,t){return Bb((function(){var n;return n=kx(t,KT(),1-KT()),n=Zx(Fx(n,ew(1,n))),uw(function(e,t){if(!Ad(e.shape,t.shape))throw new nT("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return Bb((function(){var n=Ow(t),r=xw(qb(t));return Xb(ew(n,Jx(t,e)),Qx(Ux(r)))}))}(e,n),-1)}))}function zA(e,t){return Bb((function(){var n=kx(e,KT(),1),r=kx(t,KT(),1);return tw(Jx(e,Zx(Fx(n,r))),-1)}))}function UA(e,t){return Bb((function(){var n=MA(e,-1),r=MA(t,-1),a=Jx(n,r);return xw(tw(a,-1))}))}TA.constructors={};var WA={meanSquaredError:OA,meanAbsoluteError:DA,meanAbsolutePercentageError:LA,meanSquaredLogarithmicError:jA,squaredHinge:function(e,t){return Bb((function(){var n=sw(0,ew(1,Jx(e,t)));return uw(uI(n),-1)}))},hinge:function(e,t){return Bb((function(){var n=sw(0,ew(1,Jx(e,t)));return uw(n,-1)}))},categoricalHinge:function(e,t){return Bb((function(){var n=tw(Jx(e,t),-1),r=$x(Jx(ew(1,e),t),-1);return sw(0,Xb(1,ew(r,n)))}))},logcosh:function(e,t){return Bb((function(){var n=Math.log(2),r=ew(t,e),a=ew(Xb(r,Vw(Jx(-2,r))),n);return uw(a,-1)}))},categoricalCrossentropy:PA,sparseCategoricalCrossentropy:FA,binaryCrossentropy:BA,kullbackLeiblerDivergence:zA,poisson:function(e,t){return Bb((function(){var n=Zx(Xb(KT(),t));return uw(ew(t,Jx(e,n)),-1)}))},cosineProximity:UA};function GA(e){if("string"===typeof e){if(e in WA)return WA[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new nT(t)}return e}function VA(e,t){return Bb((function(){var n=Jx(.5,Cw(t)),r=ZT(Xx(t,n),e.dtype);return uw(zx(e,r),-1)}))}function HA(e,t){return Bb((function(){return ZT(zx(Zb(e,-1),Zb(t,-1)),"float32")}))}function qA(e,t){return Bb((function(){return $y(tw(rw(zx(e,1),zx(t,1))),"float32")}))}function XA(e,t){return BA(e,t)}function YA(e,t){return e.rank===t.rank&&(e=Xw(e,[e.rank-1])),(t=Zb(t,-1)).dtype!==e.dtype&&(t=$y(t,e.dtype)),$y(zx(e,t),"float32")}var KA=PA,ZA=FA,QA={binaryAccuracy:VA,categoricalAccuracy:HA,precision:function(e,t){return Bb((function(){var n=qA(e,t),r=function(e,t){return Bb((function(){return $y(tw(rw(zx(e,0),zx(t,1))),"float32")}))}(e,t),a=Xb(n,r);return $y(tk(Xx(a,0),Fx(n,a),0),"float32")}))},categoricalCrossentropy:KA,sparseCategoricalCrossentropy:ZA,mse:OA,MSE:OA,mae:DA,MAE:DA,mape:LA,MAPE:LA,cosine:UA};function $A(e){if("string"===typeof e&&e in QA)return QA[e];if("string"!==typeof e&&null!=e)return e;throw new nT("Unknown metric ".concat(e))}function JA(e){if(sT(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(WA);n<r.length;n++){var a=r[n];if(WA[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(QA);i<o.length;i++){var s=o[i];if(QA[s]===e){t=s;break}}return void 0!==t?t:e.name}var eN=1048576;function tN(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!nN(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>eN&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(eN,"."))}}function nN(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!nN(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=E(e);try{for(i.s();!(a=i.n()).done;){if(!nN(a.value))return!1}}catch(cZ){i.e(cZ)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function rN(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=iN(e),o=["Layer (type)","Input Shape","Output shape","Param #"];if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,f(e.nodesByDepth[s]))}a("_".repeat(t)),oN(o,n,a),a("=".repeat(t));for(var l=e.layers,c=0;c<l.length;++c)i?sN(l[c],n,a):uN(l[c],n,r,a),a((c===l.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var d=aN(e),h=zI(e.nonTrainableWeights);a("Total params: ".concat(d+h)),a("Trainable params: ".concat(d)),a("Non-trainable params: ".concat(h)),a("_".repeat(t))}function aN(e){return null!=e.collectedTrainableWeights?zI(e.collectedTrainableWeights):zI(e.trainableWeights)}function iN(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,f(s))}if(t){var u,l=E(e.layers);try{for(l.s();!(u=l.n()).done;){var c,d=u.value,h=!1,p=E(d.inboundNodes);try{for(p.s();!(c=p.n()).done;){var v=c.value;if(-1!==r.indexOf(v)){if(h){t=!1;break}h=!0}}}catch(cZ){p.e(cZ)}finally{p.f()}if(!t)break}}catch(cZ){l.e(cZ)}finally{l.f()}}return t}function oN(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function sN(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(cZ){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(cZ){r="multiple"}var i=e.name,o=e.getClassName();oN(["".concat(i," (").concat(o,")"),a,r,e.countParams().toString()],t,n)}function uN(e,t,n,r){var a,i;try{i=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(cZ){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(cZ){a="multiple"}var o,s=[],u=E(e.inboundNodes);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(l)))for(var c=0;c<l.inboundLayers.length;++c){var f=l.inboundLayers[c].name,d=l.nodeIndices[c],h=l.tensorIndices[c];s.push("".concat(f,"[").concat(d,"][").concat(h,"]"))}}}catch(cZ){u.e(cZ)}finally{u.f()}var p=e.name,v=e.getClassName(),m=0===s.length?"":s[0];oN(["".concat(p," (").concat(v,")"),i,a,e.countParams().toString(),m],t,r);for(var g=1;g<s.length;++g)oN(["","","","",s[g]],t,r)}function lN(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function cN(e,t){if(null===e)return null;if("string"===typeof e)return dT(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];lN(t,a,i)?n.push(i):n.push(cN(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],c=e[l];if("name"===l&&"string"===typeof c)o[l]=c;else{var f=dT(l);o[f]=cN(c,f)}}return o}function fN(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return fT(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];lN(t,a,i)?n.push(i):n.push(fN(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],c=e[l],f=fT(l);o[f]="name"!==l&&"className"!==l||"string"!==typeof c?fN(c,l):c}return o}var dN="4.0.0",hN=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=IT(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],yT(r.inputs).length!==r.inputs.length)throw new nT("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));yT(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=E(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.sourceLayer,l=s.nodeIndex,c=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(l),r.outputLayersTensorIndices.push(c)}}catch(cZ){o.e(cZ)}finally{o.f()}var f,h=E(r.inputs);try{for(h.s();!(f=h.n()).done;){var p=f.value,v=p.sourceLayer,m=p.nodeIndex,g=p.tensorIndex;sT(0===m,"input layer has >1 nodes"),sT(0===g,"input layer has >1 tensors"),r.inputLayers.push(v),r.inputLayersNodeIndices.push(m),r.inputLayersTensorIndices.push(g)}}catch(cZ){h.e(cZ)}finally{h.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var y=0;y<r.inputLayers.length;y++){var b=r.inputLayers[y];if(!(b instanceof $I))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(y," (0-based) originates ")+"from layer type ".concat(b.getClassName(),"."));r.inputNames.push(b.name),r.feedInputShapes.push(b.batchInputShape),r.feedInputNames.push(b.name)}var w,k=E(r.outputLayers);try{for(k.s();!(w=k.n()).done;){var S=w.value;r.outputNames.push(S.name)}}catch(cZ){k.e(cZ)}finally{k.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var _,C={},T={},I={},A={},N={},R=[],M=function e(t,a,i,o,s,u){null!=o&&null!=s&&null!=u||(o=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var l=o.inboundNodes[s];if(-1!==i.indexOf(l))throw new tT("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(l)){r.containerNodes.add(n.nodeKey(o,s)),o.id in N||(N[o.id]=Object.keys(N).length),-1===i.indexOf(l)&&i.push(l);for(var c=l.inboundLayers.length,f=0;f<c;f++){e(l.inputTensors[f],a,i,l.inboundLayers[f],l.nodeIndices[f],l.tensorIndices[f])}for(a.push(l);i.indexOf(l)>=0;)i.splice(i.indexOf(l),1);R.push(l)}},O=[],D=[],L=E(r.outputs);try{for(L.s();!(_=L.n()).done;){M(_.value,O,D)}}catch(cZ){L.e(cZ)}finally{L.f()}var j,P=E(R.slice().reverse());try{for(P.s();!(j=P.n()).done;){var F=j.value;T[F.id]=F,F.id in C||(C[F.id]=0);var B=C[F.id],z=null==I[F.outboundLayer.id]?0:I[F.outboundLayer.id];B=Math.max(B,z),I[F.outboundLayer.id]=B,A[F.outboundLayer.id]=F.outboundLayer,C[F.id]=B;for(var U=0;U<F.inboundLayers.length;U++){var W=F.inboundLayers[U],G=F.nodeIndices[U],V=W.inboundNodes[G],H=null==C[V.id]?0:C[V.id];C[V.id]=Math.max(B+1,H),T[V.id]=V}}}catch(cZ){P.e(cZ)}finally{P.f()}var q={};for(var X in C){var Y=C[X];Y in q||(q[Y]=[]),q[Y].push(T[X])}var K={};for(var Z in I){var Q=I[Z];Q in K||(K[Q]=[]),K[Q].push(A[Z])}var $=Object.keys(K).map((function(e){return parseInt(e,10)})).sort(gT);r.layers=[];var J,ee=E($);try{for(ee.s();!(J=ee.n()).done;){var te=K[J.value];te.sort((function(e,t){var n=N[e.id],r=N[t.id];return n<r?-1:n>r?1:0}));var ne,re=E(te);try{for(re.s();!(ne=re.n()).done;){var ae=ne.value;ae instanceof n&&r.internalContainerRefs.push(ae),r.layers.push(ae)}}catch(cZ){re.e(cZ)}finally{re.f()}}}catch(cZ){ee.e(cZ)}finally{ee.f()}r.layersByDepth=K,$=Object.keys(q).map((function(e){return parseInt(e,10)})).sort(gT);var ie,oe=r.inputs.slice(),se=[],ue=E($);try{for(ue.s();!(ie=ue.n()).done;){var le,ce=E(q[ie.value]);try{for(ce.s();!(le=ce.n()).done;){var fe=le.value,de=fe.outboundLayer;if(null!=de){var he,pe=E(fe.inputTensors);try{for(pe.s();!(he=pe.n()).done;){var ve=he.value;if(-1===oe.indexOf(ve))throw new tT("Graph disconnected: cannot obtain value for tensor ".concat(ve)+' at layer "'.concat(de.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(se))}}catch(cZ){pe.e(cZ)}finally{pe.f()}var me,ge=E(fe.outputTensors);try{for(ge.s();!(me=ge.n()).done;){var ye=me.value;oe.push(ye)}}catch(cZ){ge.e(cZ)}finally{ge.f()}se.push(de.name)}}}catch(cZ){ce.e(cZ)}finally{ce.f()}}}catch(cZ){ue.e(cZ)}finally{ue.f()}r.nodesByDepth=q;var be,xe=r.layers.map((function(e){return e.name})),we=E(xe);try{var ke=function(){var e=be.value,t=xe.filter((function(t){return t===e})).length;if(1!==t)throw new tT('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(xe))};for(we.s();!(be=we.n()).done;)ke()}catch(cZ){we.e(cZ)}finally{we.f()}return r.outboundNodes=[],r.inboundNodes=[],new YI({outboundLayer:x(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return p(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=E(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(cZ){n.e(cZ)}finally{n.f()}var a,i=E(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(cZ){i.e(cZ)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new nT("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=E(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(cZ){n.e(cZ)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=E(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,f(r.nonTrainableWeights))}}catch(cZ){n.e(cZ)}finally{n.f()}if(!this.trainable){var a,i=[],o=E(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,f(s.trainableWeights))}}catch(cZ){o.e(cZ)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=E(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=t.value,u=E(s.weights);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(null!=r[l.originalName])throw new nT("Duplicate weight name: ".concat(l.originalName));r[l.originalName]=l,a++}}catch(cZ){u.e(cZ)}finally{u.f()}}}catch(cZ){i.e(cZ)}finally{i.f()}var c=[];for(var f in e){var d=f;if(null==r[f]){var h=f.split("/"),p=h.slice(0,-2).concat([h[h.length-1]]);d=p.join("/")}if(null!=r[d])c.push([r[d],e[f]]);else if(n)throw new nT("Provided weight data has no target variable: ".concat(f));delete r[d]}if(n){var v=[];for(var m in r)v.push(m);if(v.length>0)throw new nT("".concat(v.length," of ").concat(a," weights are not set: ")+"".concat(v))}VI(c)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(dN),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=fN(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return Bb((function(){e=cT(e);for(var r=new eA,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return rA(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return Bb((function(){var r;return e=cT(e),r=null==t?oT(null,e.length):cT(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=PI(e);if(t.length!==this.inputLayers.length)throw new nT("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(gT);if(o.length>1){var s,u=E(o);try{for(u.s();!(s=u.n()).done;){var l,c=s.value,f=E(this.nodesByDepth[c]);try{for(f.s();!(l=f.n()).done;){var d=l.value,h=d.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(h.id)){for(var p=[],v=0;v<d.inboundLayers.length;v++){var m=d.inboundLayers[v],g=d.nodeIndices[v],y=d.tensorIndices[v],b=n["".concat(m.name,"_").concat(g,"_").concat(y)];p.push(b)}for(var x=PI(h.computeOutputShape(lT(p))),w=h.inboundNodes.indexOf(d),k=0;k<x.length;k++){n["".concat(h.name,"_").concat(w,"_").concat(k)]=x[k]}}}}catch(cZ){f.e(cZ)}finally{f.f()}}}catch(cZ){u.e(cZ)}finally{u.f()}}for(var S=[],_=[],C=0;C<this.outputLayers.length;C++){var T=this.outputLayers[C],I=this.outputLayersNodeIndices[C],A=this.outputLayersTensorIndices[C],N="".concat(T.name,"_").concat(I,"_").concat(A);_.push(N)}for(var R=0;R<_.length;R++){var M=_[R];sT(M in n),S.push(n[M])}return lT(S)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=oT(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}var s,u=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(gT),l=E(u);try{for(l.s();!(s=l.n()).done;){var c,f=s.value,d=E(this.nodesByDepth[f]);try{for(d.s();!(c=d.n()).done;){var h,p=c.value,v=p.outboundLayer,m=p.inputTensors,g=p.outputTensors,y=new Array,b=E(m);try{for(b.s();!(h=b.n()).done;){var x=h.value;x.id in n&&y.push(n[x.id])}}catch(cZ){b.e(cZ)}finally{b.f()}if(y.length===m.length){var w={},k=void 0,S=void 0,_=void 0,T=void 0;if(null!=p.callArgs&&(w=p.callArgs),1===y.length){var I=C(y[0],2),A=I[0],N=I[1];null==w.mask&&(w.mask=N),_=cT(v.call(A,w)),T=cT(v.computeMask(A,N)),k=[A],S=[N]}else k=y.map((function(e){return e[0]})),S=y.map((function(e){return e[1]})),null==w.mask&&(w.mask=S),_=cT(v.call(k,w)),T=cT(v.computeMask(k,S));if(v.activityRegularizer)throw new rT("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var R=0;R<g.length;++R){var M=g[R],O=_[R],D=T[R];n[M.id]=[O,D]}}}}catch(cZ){d.e(cZ)}finally{d.f()}}}catch(cZ){l.e(cZ)}finally{l.f()}var L,j=[],P=[],F=[],B=E(this.outputs);try{for(B.s();!(L=B.n()).done;){var z=L.value;sT(z.id in n,"Could not compute output ".concat(z.name," : ").concat(z.id));var U=C(n[z.id],2),W=U[0],G=U[1];F.push(W.shape),j.push(W),P.push(G)}}catch(cZ){B.e(cZ)}finally{B.f()}return[j,P,F]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=E(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=n.nodeKey(o,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(cZ){i.e(cZ)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new nT("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new nT("Provide either a layer name or layer index");var n,r=E(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(cZ){r.e(cZ)}finally{r.f()}throw new nT("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return Bb((function(){var t,r=[],a=E(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,f(i.calculateLosses()))}}catch(cZ){a.e(cZ)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=E(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),u=o.getConfig(),l=[],c=0;c<o.inboundNodes.length;c++){var f=o.inboundNodes[c],d=n.nodeKey(o,c),h={};if(this.containerNodes.has(d)){if(f.callArgs)try{JSON.stringify(f.callArgs),h=f.callArgs}catch(cZ){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(f.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),h={}}if(f.inboundLayers.length>0){for(var p=[],v=0;v<f.inboundLayers.length;v++){var m=f.inboundLayers[v],g=f.nodeIndices[v],y=f.tensorIndices[v],b=r[n.nodeKey(m,g)];null==b&&(b=0),p.push([m.name,b,y,h])}l.push(p)}}}var x={};x.name=o.name,x.className=s,x.config=u,x.inboundNodes=l,a.push(x)}}catch(cZ){i.e(cZ)}finally{i.f()}t.layers=a;for(var w=[],k=0;k<this.inputLayers.length;k++){var S=this.inputLayers[k],_=this.inputLayersNodeIndices[k],C=n.nodeKey(S,_);if(this.containerNodes.has(C)){var T=r[C];null!==T&&void 0!==T||(T=0);var I=this.inputLayersTensorIndices[k];w.push([S.name,T,I])}}t.inputLayers=w;for(var A=[],N=0;N<this.outputLayers.length;N++){var R=this.outputLayers[N],M=this.outputLayersNodeIndices[N],O=n.nodeKey(R,M);if(this.containerNodes.has(O)){var D=r[O];null!==D&&void 0!==D||(D=0);var L=this.outputLayersTensorIndices[N];A.push([R.name,D,L])}}return t.outputLayers=A,t}},{key:"stateful",get:function(){if(this._stateful)throw new nT("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=E(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(cZ){t.e(cZ)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;Bb((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=E(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=u[0],c=u[1],f=u[2];if(n=null==u[3]?{}:u[3],!(l in r))return void i(e,t);var d=r[l];if(d.inboundNodes.length<=c)return void i(e,t);var h=d.inboundNodes[c];o.push(h.outputTensors[f])}}catch(cZ){s.e(cZ)}finally{s.f()}o.length>0&&e.apply(lT(o),n)}function s(e){var a=e.name,o=RA(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new nT("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var u,l=t.name,c=t.layers,f=E(c);try{for(f.s();!(u=f.n()).done;){var d=u.value;s(d)}}catch(cZ){f.e(cZ)}finally{f.f()}for(;!bT(a);){var h,p=E(c);try{for(p.s();!(h=p.n()).done;){var v=h.value,m=r[v.name];if(m.name in a){var g=a[m.name];delete a[m.name];var y,b=E(g);try{for(b.s();!(y=b.n()).done;){var x=y.value;o(m,x)}}catch(cZ){b.e(cZ)}finally{b.f()}}}}catch(cZ){p.e(cZ)}finally{p.f()}}var w,k=[],S=[],_=t.inputLayers,C=E(_);try{for(C.s();!(w=C.n()).done;){var T=w.value,I=T[0],A=T[1],N=T[2];sT(I in r);var R=r[I],M=R.inboundNodes[A].outputTensors;k.push(M[N])}}catch(cZ){C.e(cZ)}finally{C.f()}var O,D=t.outputLayers,L=E(D);try{for(L.s();!(O=L.n()).done;){var j=O.value,P=j[0],F=j[1],B=j[2];sT(P in r);var z=r[P],U=z.inboundNodes[F].outputTensors;S.push(U[B])}}catch(cZ){L.e(cZ)}finally{L.f()}return new e({inputs:k,outputs:S,name:l})}}]),n}(ZI);function pN(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function vN(e,t){return pN(e,t,"classWeight")}function mN(e,t,n,r){return gN.apply(this,arguments)}function gN(){return(gN=A(T().mark((function e(t,n,r,a){var i,o,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return i=Bb((function(){if(1===t.shape.length)return Jy(t);if(2===t.shape.length){if(t.shape[1]>1){return Zb(t,1)}if(1===t.shape[1])return hx(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),zb(i),s=[],o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",Zw(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yN(e,t){return Jx(e,t)}function bN(e,t){var n,r,a=t;n=a.xs,r=a.ys,_d(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var i=xN("input",e.inputNames,n),o=xN("output",e.outputNames,r),s=i[0].shape[0];_d(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),_d(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){_d(i[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},l=0;l<i.length;l++)u(l);for(var c=function(t){_d(o[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},f=0;f<o.length;f++)c(f);return{xs:i,ys:o}}function xN(e,t,n){if(n instanceof sg)return[n];if(Array.isArray(n))return _d(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],i=E(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null==n[o])throw new nT("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));a.push(n[o])}}catch(cZ){i.e(cZ)}finally{i.f()}return a}function wN(e){if(3===e.length)throw new rT("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function kN(e,t,n){return SN.apply(this,arguments)}function SN(){return SN=A(T().mark((function e(t,n,r){var a,i,o,s,u,l,c,f,d,h,p,v,m,g,y,b,x,w,k,S,_,C,E,I,A,N,R,M,O,D,L,j,P;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,_d(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),_d(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),_d(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),_d(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),_d(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(i=null!=r.validationData)&&(CN(r.validationData)?_d(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(u=wN(r.validationData),o=u.xs,s=u.ys)),l=t.makeTrainFunction(),c=t.getDedupedMetricsNames(),f=i?c.slice().concat(c.map((function(e){return"val_"+e}))):c.slice(),d=EA(r.callbacks,r.yieldEvery),h=null==r.verbose?1:r.verbose,p=IA(d,h,r.epochs,null,null,_N(n,r),null,i,f),v=p.callbackList,m=p.history,v.setModel(t),t.history=m,e.next=22,v.onTrainBegin();case 22:return t.stopTraining_=!1,g=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:y=e.sent;case 27:if(!(g<r.epochs)){e.next=98;break}return b={},e.next=31,v.onEpochBegin(g);case 31:if(x=0,w=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:y=e.sent;case 37:if(a&&!(x<r.batchesPerEpoch)){e.next=91;break}return e.next=40,y.next();case 40:if(k=e.sent,!a||!k.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(x," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==k.value){e.next=73;break}return S=bN(t,k.value),_=S.xs,C=S.ys,(E={}).batch=w,E.size=_[0].shape[0],e.next=51,v.onBatchBegin(w,E);case 51:if(I=[],null==r.classWeight){e.next=64;break}A=vN(r.classWeight,t.outputNames),N=0;case 55:if(!(N<A.length)){e.next=64;break}return e.t0=I,e.next=59,mN(C[N],null,A[N]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++N,e.next=55;break;case 64:for(R=_.concat(C).concat(I),M=l(R),zb(R),O=0;O<c.length;++O)D=c[O],L=M[O],E[D]=L,Ub(L);return e.next=70,v.onBatchEnd(w,E);case 70:xA(E),w++,x++;case 73:if(!(a?x>=r.batchesPerEpoch:k.done)){e.next=87;break}if(!i){e.next=86;break}if(j=void 0,!CN(r.validationData)){e.next=84;break}return e.t2=cT,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,j=(0,e.t2)(e.t3),e.next=85;break;case 84:j=cT(t.evaluate(o,s,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 85:for(P=0;P<t.metricsNames.length;++P)b["val_".concat(t.metricsNames[P])]=j[P];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,v.onEpochEnd(g,b);case 93:if(g++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,v.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),SN.apply(this,arguments)}function _N(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function CN(e){return"function"===typeof e.iterator}function EN(e){return"function"===typeof e.next}function TN(e,t,n){return IN.apply(this,arguments)}function IN(){return IN=A(T().mark((function e(t,n,r){var a,i,o,s,u,l,c,f,d;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,o=[],!(r.verbose>0)){e.next=6;break}throw new rT("Verbose mode is not implemented yet.");case 6:if(_d(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),!EN(n)){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,u=0,l=0,c=T().mark((function e(){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,o=Bb((function(){return n.value&&function(){var e=bN(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),c=Bb((function(){return i(s)}));if(zb(s),0===l)for(var f=0;f<c.length;++f)o.push(Vb(0));for(var d=s[0].shape[0],h=function(e){var t=c[e],n=o[e];o[e]=Bb((function(){return Xb(o[e],Jx(d,t))})),l>0&&zb(n)},p=0;p<c.length;++p)h(p);zb(c),u+=d,++l}(),o})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(l<r.batches)){e.next=25;break}return e.delegateYield(c(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(f=0;f<o.length;++f)d=o[f],o[f]=Fx(o[f],u),zb(d);return e.abrupt("return",lT(o));case 27:case"end":return e.stop()}}),e)}))),IN.apply(this,arguments)}function AN(e){_d(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function NN(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return JT(e,t,n-t)})):JT(e,t,n-t)}function RN(e,t){return Bb((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return RN(e,t)})):sI(e,"int32"===t.dtype?t:$y(t,"int32"))}))}function MN(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function ON(e,t,n,r,a,i,o,s,u,l,c,f,d,h,p){return DN.apply(this,arguments)}function DN(){return DN=A(T().mark((function e(t,n,r,a,i,o,s,u,l,c,f,d,h,p,v){var m,g,y,b,x,w,k,S;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==i&&(i=32),null==o&&(o=1),null==f&&(f=!0),null==h&&(h=0),m=!1,null!=l&&null!=c&&(m=!0),null==v){e.next=10;break}if(m=!0,null!=p){e.next=10;break}throw new nT("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(g=t.checkNumSamples(r,i,p,"steps_per_epoch"))&&(y=YT(0,g)),null==s&&(s=1),b=IA(u,s,o,h,g,p,i,m,d),x=b.callbackList,w=b.history,x.setModel(t),t.history=w,e.next=18,x.onTrainBegin();case 18:t.stopTraining_=!1,k=T().mark((function e(o){var s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.onEpochBegin(o);case 2:if(s={},null==p){e.next=7;break}throw new rT("stepsPerEpoch mode is not implemented yet.");case 7:return e.delegateYield(T().mark((function e(){var o,u,d,h;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==f){e.next=4;break}throw new rT("batch shuffling is not implemneted yet");case 4:f&&bd(y);case 5:o=Zw(y),u=MN(g,i),d=T().mark((function e(f){var d;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d={},e.next=3,x.onBatchBegin(f,d);case 3:return Bb((function(){var e=u[f][0],h=u[f][1],p=JT(o,e,h-e);d.batch=f,d.size=h-e;for(var v=RN(r,p),g=n(v),y=0;y<a.length;++y){var b=a[y],x=g[y];d[b]=x,Ub(x)}if(f===u.length-1&&m)for(var w=t.testLoop(l,c,i),k=0;k<a.length;++k){var S=a[k],_=w[k];Ub(_),s["val_"+S]=_}})),e.next=6,x.onBatchEnd(f,d);case 6:if(xA(d),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),h=0;case 9:if(!(h<u.length)){e.next=17;break}return e.delegateYield(d(h),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",17);case 14:++h,e.next=9;break;case 17:o.dispose();case 18:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:return e.next=10,x.onEpochEnd(o,s);case 10:if(!t.stopTraining_){e.next=12;break}return e.abrupt("return","break");case 12:case"end":return e.stop()}}),e)})),S=h;case 21:if(!(S<o)){e.next=29;break}return e.delegateYield(k(S),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++S,e.next=21;break;case 29:return e.next=31,x.onTrainEnd();case 31:return e.next=33,t.history.syncData();case 33:return e.abrupt("return",t.history);case 34:case"end":return e.stop()}}),e)}))),DN.apply(this,arguments)}function LN(e,t,n){return jN.apply(this,arguments)}function jN(){return jN=A(T().mark((function e(t,n,r){var a,i,o,s,u,l,c,f,d,h,p,v,m,g,y,b,x,w,k,S,_,C,E,I,A,N,R=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=R.length>3&&void 0!==R[3]?R[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,AN(p=null==a.batchSize?32:a.batchSize),v=!1,e.next=10,t.standardizeUserData(n,r,a.sampleWeight,a.classWeight,v,p);case 10:if(m=e.sent,i=m[0],o=m[1],h=m[2],g=!1,!(null!=a.validationData&&a.validationData.length>0)){e.next=36;break}if(g=!0,2!==a.validationData.length){e.next=22;break}l=a.validationData[0],c=a.validationData[1],e.next=27;break;case 22:if(3!==a.validationData.length){e.next=26;break}throw new rT("validationData including sample weights is not supported yet.");case 26:throw new nT("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(a.validationData," is invalid."));case 27:return b=!0,e.next=30,t.standardizeUserData(l,c,null,null,b,p);case 30:x=e.sent,f=x[0],d=x[1],y=f.concat(d),e.next=37;break;case 36:null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1?(g=!0,w=Math.floor(i[0].shape[0]*(1-a.validationSplit)),k=i[0].shape[0],f=NN(i,w,k),s=i,i=NN(i,0,w),d=NN(o,w,k),u=o,o=NN(o,0,w),y=f.concat(d)):null!=a.validationSteps&&(g=!0);case 37:return S=i.concat(o).concat(h),t.checkTrainableWeightsConsistency(),_=t.makeTrainFunction(),C=t.getDedupedMetricsNames(),g?(t.makeTestFunction(),E=t.testFunction,I=C.slice().concat(C.map((function(e){return"val_"+e})))):(E=null,y=[],I=C.slice()),A=EA(a.callbacks,a.yieldEvery),e.next=45,ON(t,_,S,C,p,a.epochs,a.verbose,A,E,y,a.shuffle,I,a.initialEpoch,null,null);case 45:return N=e.sent,e.abrupt("return",N);case 47:return e.prev=47,t.isTraining=!1,FN(i,n),FN(o,r),FN(s,n),FN(u,r),FN(f,l),FN(d,c),null!=h&&zb(h),e.finish(47);case 57:case"end":return e.stop()}}),e,null,[[4,,47,57]])}))),jN.apply(this,arguments)}function PN(e){var t=[];e instanceof sg&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(QT(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function FN(e,t){if(null!=e){var n=[];if(t instanceof sg)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof sg)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function BN(e){return Array.isArray(e)}function zN(e){return!function(e){return e instanceof sg}(e)&&!BN(e)}function UN(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(BN(e)&&e.length>0)o=!0;else if(zN(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new nT("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(zN(e)){r=[];var u,l=E(t);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(null==e[c])throw new nT('No data provided for "'.concat(c,'". Need data for each key in: ')+"".concat(t));r.push(e[c])}}catch(cZ){l.e(cZ)}finally{l.f()}}else if(BN(e)){if(e.length!==t.length)throw new nT("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new nT("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=PN(r),null!=n)for(var f=0;f<t.length;++f)if(null!=n[f]){var d=r[f];if(d.shape.length!==n[f].length)throw new nT("Error when checking ".concat(i,": expected ").concat(t[f]," ")+"to have ".concat(n[f].length," dimension(s). but got array with ")+"shape ".concat(d.shape));for(var h=0;h<n[f].length;++h)if(0!==h||a){var p=d.shape[h],v=n[f][h];if(null!=v&&v>=0&&p!==v)throw new nT("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[f].slice(1,n[f].length),"] ")+"(i.e.,tensor shape [*,".concat(n[f].slice(1,n[f].length),"])")+" but the ".concat(i," received an input with ").concat(d.shape[0])+" examples, each with shape [".concat(d.shape.slice(1,d.shape.length),"]")+" (tensor shape [".concat(d.shape,"])"))}}return r}function WN(e,t,n){var r=yT(e.map((function(e){return e.shape[0]})));r.sort();var a=yT(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new nT("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new nT("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!Ad(r,a))throw new nT("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}function GN(e,t,n){for(var r=[OA,BA,PA],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===PA&&1===i.shape[i.shape.length-1])throw new nT("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var f=u[c],d=l[c];if(null!=d&&f!==d)throw new nT("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function VN(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new nT("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new nT("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new nT("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(0!==u||a){var l=s.shape[u],c=n[o][u];if(null!=c&&c!==l)throw new nT("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var HN=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).isTraining=!1,r}return p(n,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new nT("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");rN(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return IS.adagrad(.01)},Adadelta:function(){return IS.adadelta(1,.95,KT())},Adam:function(){return IS.adam(.001,.9,.999,KT())},Adamax:function(){return IS.adamax(.002,.9,.999,KT(),0)},RMSProp:function(){return IS.rmsprop(.001,.9,0,KT())},SGD:function(){return IS.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new nT("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Hb))throw new nT("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new nT("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return GA(e)}))}else{var a=GA(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var i in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(i))throw new nT('Unknown entry in loss dictionary: "'.concat(i,'". ')+"Only expected the following keys: ".concat(this.outputNames));var o,s=E(this.outputNames);try{for(s.s();!(o=s.n()).done;){var u=o.value;null==e.loss[u]&&console.warn('Output "'.concat(u,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(u," during training")),n.push(GA(e.loss[u]))}}catch(cZ){s.e(cZ)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var l=0;l<this.outputs.length;++l){var c=this.internalOutputShapes[l],f=this.outputNames[l];this.feedOutputNames.push(f),this.feedOutputShapes.push(c),this.feedLossFns.push(this.lossFunctions[l])}var d=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],BT("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===d.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var h=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=E(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(cZ){i.e(cZ)}finally{i.f()}return a}(e.metrics,this.outputNames),p=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};BT("metric",(function(){for(var e=function(e){if(-1!==d.indexOf(e))return"continue";!function(n){var r,a,i,o,s=E(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if("string"===typeof u&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(u)){var l=t.internalOutputShapes[e];1===l[l.length-1]||t.lossFunctions[e]===BA?-1!==["accuracy","acc"].indexOf(u)?a=VA:-1!==["crossentropy","ce"].indexOf(u)&&(a=XA):t.lossFunctions[e]===FA?-1!==["accuracy","acc"].indexOf(u)?a=YA:-1!==["crossentropy","ce"].indexOf(u)&&(a=ZA):-1!==["accuracy","acc"].indexOf(u)?a=HA:-1!==["crossentropy","ce"].indexOf(u)&&(a=KA);var c=void 0;-1!==["accuracy","acc"].indexOf(u)?c="acc":-1!==["crossentropy","ce"].indexOf(u)&&(c="ce"),i=a,r=""+c}else{var f=$A(u);i=f,r=""+JA(u)}var d=void 0;BT(r,(function(){d=i})),p(e,r,d)}}catch(cZ){s.e(cZ)}finally{s.f()}}(h[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;AN(r);var a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{var o=i[0].concat(i[1]);this.makeTestFunction();var s=this.testFunction,u=this.testLoop(s,o,r,n.verbose,n.steps);return lT(u)}finally{FN(i[0],e),FN(i[1],t)}}},{key:"evaluateDataset",value:function(){var e=A(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",TN(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new nT("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new nT("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new nT("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new eA;if(e instanceof sg&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new nT("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var s,u=E(this.inputs);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=e[l.name];if(null==c)throw new nT("No value is provided for the model's input ".concat(l.name));i.add(l,c)}}catch(cZ){u.e(cZ)}finally{u.f()}}var f=rA(a,i);return n?f:f[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=oT(null,e.length),r=e.length,a=E(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var l=s.indexOf(e[u]);if(-1!==l&&(n[u]=o[l],r--),0===r)break}if(0===r)break}}catch(cZ){a.e(cZ)}finally{a.f()}if(r>0){var c=[];throw n.forEach((function(t,n){null==t&&c.push(e[n])})),new nT("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(c)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Bb((function(){var a=t.checkNumSamples(e);if(r)throw new rT("Verbose predictLoop() is not implemented yet.");for(var i=MN(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){Bb((function(){var r=i[n][0],a=i[n][1],o=NN(e,r,a),s=[];if(Array.isArray(o))for(var u=0;u<o.length;++u)s.push({key:t.inputs[u],value:o[u]});else s.push({key:t.inputs[0],value:o});var l=new eA(s);return rA(t.outputs,l)})).forEach((function(e,t){return o[t].push(e)}))},u=0;u<i.length;++u)s(u);return lT(o.map((function(e){return Sx(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=PN(e);VN(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return AN(r),this.predictLoop(n,r)}finally{FN(n,e)}}},{key:"predictOnBatch",value:function(e){VN(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new tT("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a],o=this.feedLossFns[a];o===FA?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(WN(e=UN(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=UN(t,this.feedOutputNames,r,!1,"target")),GN(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new nT("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=A(T().mark((function e(t,n,r,a){var i,o,s,u,l,c,f,d,h,p=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(p.length>4&&void 0!==p[4])||p[4],o=p.length>5?p[5]:void 0,s=this.standardizeUserDataXY(t,n,i,o),u=C(s,2),l=u[0],c=u[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(f=null,null==a){e.next=19;break}d=vN(a,this.outputNames),f=[],h=0;case 10:if(!(h<d.length)){e.next=19;break}return e.t0=f,e.next=14,mN(c[h],null,d[h]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++h,e.next=10;break;case 19:return e.abrupt("return",[l,c,f]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return Bb((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new rT("Verbose mode is not implemented yet.");if(null!=i)throw new rT("steps mode in testLoop() is not implemented yet");for(var u=MN(o,n),l=Zw(YT(0,o)),c=0;c<u.length;++c){var f=u[c][0],d=u[c][1],h=JT(l,f,d-f),p=RN(t,h),v=e(p);if(0===c)for(var m=0;m<v.length;++m)s.push(Vb(0));for(var g=0;g<v.length;++g){var y=v[g];s[g]=Xb(s[g],Jx(d-f,y))}}for(var b=0;b<s.length;++b)s[b]=Fx(s[b],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(uT(e,r)>1){var i=uT(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,l=new eA(t),c=rA(e.outputs,l,{training:!0}),f=0;f<e.lossFunctions.length;++f){var d=(0,e.lossFunctions[f])(a[f],c[f]);null!=i[f]&&(d=yN(d,i[f]));var h=uw(d);n.push(h),u=0===f?d:Xb(u,d)}for(var p=0;p<e.metricsTensors.length;++p){var v=void 0;if(e.outputs.length>1&&p<e.outputs.length)v=n[p];else{var m=e.metricsTensors[p][0],g=e.metricsTensors[p][1];v=uw(m(a[g],c[g]))}Ub(v),o.push(v)}return u=uw(u),e.calculateLosses().forEach((function(e){u=Xb(u,e)})),u}),!0,s)].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return Bb((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var u=new eA(o),l=rA(e.outputs,u),c=0;c<e.lossFunctions.length;++c){var f=e.lossFunctions[c],d=uw(f(i[c],l[c]));n=0===c?d:Xb(n,d),r.push(n)}for(var h=0;h<e.metricsTensors.length;++h){var p=e.metricsTensors[h][0],v=e.metricsTensors[h][1],m=uw(p(i[v],l[v]));r.push(m)}return r}))}}},{key:"fit",value:function(){var e=A(T().mark((function e(t,n){var r,a=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",LN(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=A(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kN(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=A(T().mark((function e(t,n){var r,a,i,o,s,u,l,c,f,d;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction(),s=o(a.concat(i)),u=[],l=E(s),e.prev=9,l.s();case 11:if((c=l.n()).done){e.next=19;break}return f=c.value,e.next=15,f.data();case 15:d=e.sent,u.push(d[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),l.e(e.t0);case 24:return e.prev=24,l.f(),e.finish(24);case 27:return zb(s),FN(r[0],t),FN(r[1],n),e.abrupt("return",lT(u));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=NA(g(n.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=Fb().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-Fb().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=fT(this.loss);else if(Array.isArray(this.loss)){var t,n=E(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(cZ){n.e(cZ)}finally{n.f()}e=this.loss.map((function(e){return fT(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!==typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=fT(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[fT(JA(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return fT(JA(e))}));var e={};for(var t in this.metrics)e[t]=fT(JA(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=RA(cN(e.optimizer_config));if("string"===typeof e.loss)t=dT(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return dT(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=dT(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return dT(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=dT(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var e=A(T().mark((function e(t,n){var a,i,o,s,u,l,c,d,h;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(a=ly(t)).length){e.next=6;break}throw new nT("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(a.length>1)){e.next=8;break}throw new nT("Found more than one (".concat(a.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=a[0];case 9:if(null!=t.save){e.next=11;break}throw new nT("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.next=13,Gg(this.getNamedWeights(n));case 13:if(i=e.sent,!1,null,o=this.toJSON(null,false),s={modelTopology:o,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(dN),convertedBy:null},!(null!=n&&n.includeOptimizer)||null==this.optimizer){e.next=34;break}return s.trainingConfig=this.getTrainingConfig(),l="optimizer",e.t0=r,e.next=25,this.optimizer.getWeights();case 25:return e.t1=e.sent,e.t2=l,e.next=29,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 29:c=e.sent,d=c.data,h=c.specs,(u=i.specs).push.apply(u,f(h)),i.data=Qg([i.data,d]);case 34:return null!=this.userDefinedMetadata&&(!0,tN(this.userDefinedMetadata,this.name,true),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=i.data,s.weightSpecs=i.specs,e.abrupt("return",t.save(s));case 38:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){tN(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),n}(hN);HN.className="Model",jb(HN);var qN=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n)}(HN);qN.className="Functional",jb(qN);var XN=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:IT("sequential_"),null!=e.layers){var a,i=E(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(cZ){i.e(cZ)}finally{i.f()}}return r}return p(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new nT("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof HN;if(r){if(1!==(t=e).outputs.length)throw new nT("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new nT("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new nT("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=JI({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new nT("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new nT("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=QI(this.outputs[0])}this.inboundNodes=[],new YI({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:oT(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(BI(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new HN({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),NA(g(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),NA(g(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new tT("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=A(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new tT("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=A(T().mark((function e(t,n){var r,a=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new tT("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=A(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new tT("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=A(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new nT("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new nT("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=E(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(cZ){n.e(cZ)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new nT("Legacy serialization format not supported yet.");r=t}else _d(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof n))throw new rT("Sequential.fromConfig called on non-Sequential input: ".concat(o));var s,u=E(r);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=void 0,f=RA(l,c,a);a&&f.setFastWeightInitDuringBuild(!0),o.add(f)}}catch(cZ){u.e(cZ)}finally{u.f()}return o}}]),n}(HN);XN.className="Sequential",jb(XN);var YN=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getConfig",value:function(){return{}}}]),n}(Db),KN=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return fI(e,t)}}]),n}(YN);KN.className="elu",jb(KN);var ZN=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return Lw(e)}}]),n}(YN);ZN.className="selu",jb(ZN);var QN=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return Ow(e)}}]),n}(YN);QN.className="relu",jb(QN);var $N=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return Bb((function(){return cw(6,Ow(e))}))}}]),n}(YN);$N.className="relu6",jb($N);var JN=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return e}}]),n}(YN);JN.className="linear",jb(JN);var eR=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return Pw(e)}}]),n}(YN);eR.className="sigmoid",jb(eR);var tR=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return function(e){return Bb((function(){var t=Xb(.5,Jx(.2,e));return kx(t,0,1)}))}(e)}}]),n}(YN);tR.className="hardSigmoid",jb(tR);var nR=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return Vw(e)}}]),n}(YN);nR.className="softplus",jb(nR);var rR=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return function(e){return Bb((function(){return Fx(e,Xb(qb(e),1))}))}(e)}}]),n}(YN);rR.className="softsign",jb(rR);var aR=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return Kw(e)}}]),n}(YN);aR.className="tanh",jb(aR);var iR=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return Gw(e,t)}}]),n}(YN);iR.className="softmax",jb(iR);var oR=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return nw(e,t)}}]),n}(YN);oR.className="logSoftmax",jb(oR);var sR=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Bb((function(){return Jx(Pw(Jx(e,t)),e)}))}}]),n}(YN);sR.className="swish",jb(sR);var uR=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e){return Bb((function(){return Jx(e,Kw(Vw(e)))}))}}]),n}(YN);function lR(e){return e.getClassName()}function cR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return mT(e,Lb.getMap().classNameMap,t,"activation")}function fR(e){if(null==e){var t={className:"linear",config:{}};return cR(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},cR(n)}return e instanceof YN?e:cR(e)}function dR(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}uR.className="mish",jb(uR);var hR=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n)}(Db),pR=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),r=t.call(this),dR(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return p(n,[{key:"apply",value:function(e){var t=this;return Bb((function(){var n=Sw([1]);return t.hasL1&&(n=Xb(n,tw(Jx(t.l1,qb(e))))),t.hasL2&&(n=Xb(n,tw(Jx(t.l2,uI(e))))),hx(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(hR);pR.className="L1L2",jb(pR);var vR={l1l2:"L1L2"};function mR(e){return pT(e)}function gR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return mT(e,Lb.getMap().classNameMap,t,"regularizer")}function yR(e){return null==e?null:"string"===typeof e?gR({className:e in vR?vR[e]:e,config:{}}):e instanceof hR?e:gR(e)}var bR=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return p(n,[{key:"call",value:function(e,t){e=FI(e);var n=Ow(e);return null!=this.maxValue&&(n=kx(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);bR.className="ReLU",jb(bR);var xR=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return p(n,[{key:"call",value:function(e,t){var n=FI(e);return Kx(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);xR.className="LeakyReLU",jb(xR);var wR=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=LI(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=yR(e.alphaRegularizer),r.alphaConstraint=gA(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new nT("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return p(n,[{key:"build",value:function(e){var t=(e=BI(e)).slice(1);if(null!=this.sharedAxes){var n,r=E(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(cZ){r.e(cZ)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new HI({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=FI(e),Tw(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:DI(this.alphaInitializer),alphaRegularizer:mR(this.alphaRegularizer),alphaConstraint:vA(this.alphaConstraint),sharedAxes:this.sharedAxes},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);wR.className="PReLU",jb(wR);var kR=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new rT("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return p(n,[{key:"call",value:function(e,t){var n=FI(e);return Bx(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);kR.className="ELU",jb(kR);var SR=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return p(n,[{key:"call",value:function(e,t){var n=FI(e);return Jx(n,$y(Xx(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);SR.className="ThresholdedReLU",jb(SR);var _R=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new iR).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return p(n,[{key:"call",value:function(e,t){var n=FI(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);function CR(e,t,n){if("number"===typeof e)return oT(e,t);if(e.length!==t)throw new nT("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if((i=a)!==parseInt(i.toString(),10))throw new nT("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e;var i}function ER(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var i,o=t+(t-1)*(a-1);return i="same"===n?e:e-o+1,Math.floor((i+r-1)/r)}function TR(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+XT([n-t,0]);else{if("same"!==r)throw new nT("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function IR(e,t){return Bb((function(){return LT(t),"channelsFirst"===t?ik(e,[0,2,3,1]):e}))}function AR(e,t){return Bb((function(){return LT(t),"channelsFirst"===t?ik(e,[0,2,3,4,1]):e}))}function NR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Bb((function(){if(null==i&&(i="channelsLast"),LT(i),3!==e.shape.length)throw new nT("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new nT("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new nT("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=ik(e,[0,2,1])),"causal"===a)throw new rT("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=Ax(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=cI(s,n)),s}))}function RR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Bb((function(){if(null==i&&(i="channelsLast"),LT(i),3!==e.rank&&4!==e.rank)throw new nT("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new nT("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=IR(e,i);if("causal"===a)throw new rT("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=yk({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=ik(u,[0,3,1,2])),u}))}function MR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return Bb((function(){if(null==i&&(i="channelsLast"),LT(i),4!==e.rank&&5!==e.rank)throw new nT("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new nT("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=AR(e,i);if("causal"===a)throw new rT("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=Mx(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=cI(s,n)),"channelsFirst"===i&&(s=ik(s,[0,4,1,2,3])),s}))}_R.className="Softmax",jb(_R);var OR=function(e){m(n,e);var t=k(n);function n(e,r){var a;if(d(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,kT(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new rT("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=CR(r.kernelSize,e,"kernelSize"),a.strides=CR(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,jT(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,LT(a.dataFormat),a.activation=fR(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=LI(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=gA(r.biasConstraint),a.biasRegularizer=yR(r.biasRegularizer),a.activityRegularizer=yR(r.activityRegularizer),a.dilationRate=CR(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new nT("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new nT("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new nT("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return p(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:lR(this.activation),useBias:this.useBias,biasInitializer:DI(this.biasInitializer),biasRegularizer:mR(this.biasRegularizer),activityRegularizer:mR(this.activityRegularizer),biasConstraint:vA(this.biasConstraint)},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(sT("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!wT(e.kernelSize,"number",1,3))throw new nT("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ZI),DR=function(e){m(n,e);var t=k(n);function n(e,r){var a;return d(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,kT(a.filters,"filters"),a.kernelInitializer=LI(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=gA(r.kernelConstraint),a.kernelRegularizer=yR(r.kernelRegularizer),a}return p(n,[{key:"build",value:function(e){e=BI(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new nT("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:N({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Bb((function(){var t;e=FI(e);var r=null==n.bias?null:n.bias.read(),a=_T(n.activation.getClassName());if(null!=a&&2===n.rank)t=RR(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=NR(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=RR(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new rT("convolutions greater than 3D are not implemented yet.");t=MR(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=BI(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=ER(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:DI(this.kernelInitializer),kernelRegularizer:mR(this.kernelRegularizer),kernelConstraint:vA(this.kernelConstraint)},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new nT("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(OR),LR=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return p(n,[{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!wT(e.kernelSize,"number",1,2))throw new nT("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(DR);LR.className="Conv2D",jb(LR);var jR=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return p(n,[{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new nT("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(DR);jR.className="Conv3D",jb(jR);var PR=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),(r=t.call(this,e)).inputSpec=[new HI({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new nT("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return p(n,[{key:"build",value:function(e){if(4!==(e=BI(e)).length)throw new nT("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new nT("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new HI({ndim:4,axes:N({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Bb((function(){var t=FI(e);if(4!==t.shape.length)throw new nT("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],u=i[a],l=n.kernelSize[0],c=n.kernelSize[1],f=n.strides[0],d=n.strides[1],h=[o,TR(s,f,l,n.padding),TR(u,d,c,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=ik(t,[0,2,3,1]));var p=Rx(t,n.kernel.read(),h,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(p=ik(p,[0,3,1,2])),null!=n.bias&&(p=cI(p,n.bias.read(),n.dataFormat)),null!=n.activation&&(p=n.activation.apply(p)),p}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=BI(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=TR(a[n],s,i,this.padding),a[r]=TR(a[r],u,o,this.padding),a}},{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(LR);PR.className="Conv2DTranspose",jb(PR);var FR=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),(r=t.call(this,e)).inputSpec=[new HI({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new nT("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return p(n,[{key:"build",value:function(e){if(5!==(e=BI(e)).length)throw new nT("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new nT("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new HI({ndim:5,axes:N({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Bb((function(){var t=FI(e);if(5!==t.shape.length)throw new nT("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i,o=t.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,r=3,a=4):(i=1,r=2,a=3);var u=o[i],l=o[r],c=o[a],f=n.kernelSize[0],d=n.kernelSize[1],h=n.kernelSize[2],p=n.strides[0],v=n.strides[1],m=n.strides[2],g=[s,TR(u,p,f,n.padding),TR(l,v,d,n.padding),TR(c,m,h,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=ik(t,[0,2,3,4,1]));var y=Dx(t,n.kernel.read(),g,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=ik(y,[0,4,1,2,3])),null!==n.bias&&(y=cI(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,i=(e=BI(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var o=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],l=this.strides[0],c=this.strides[1],f=this.strides[2];return i[t]=this.filters,i[n]=TR(i[n],l,o,this.padding),i[r]=TR(i[r],c,s,this.padding),i[a]=TR(i[a],f,u,this.padding),i}},{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(jR);FR.className="Conv3DTranspose",jb(FR);var BR=function(e){m(n,e);var t=k(n);function n(e,r){var a;if(d(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new nT("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new nT("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new nT("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=LI(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=yR(r.depthwiseRegularizer),a.depthwiseConstraint=gA(r.depthwiseConstraint),a.pointwiseInitializer=LI(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=yR(r.pointwiseRegularizer),a.pointwiseConstraint=gA(r.pointwiseConstraint),a}return p(n,[{key:"build",value:function(e){if((e=BI(e)).length<this.rank+2)throw new nT("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new nT("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new HI({ndim:this.rank+2,axes:N({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Bb((function(){var t;if(e=FI(e),1===n.rank)throw new rT("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=ik(e,[0,2,3,1])),t=jw(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=cI(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=ik(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=DI(this.depthwiseInitializer),e.pointwiseInitializer=DI(this.pointwiseInitializer),e.depthwiseRegularizer=mR(this.depthwiseRegularizer),e.pointwiseRegularizer=mR(this.pointwiseRegularizer),e.depthwiseConstraint=vA(this.depthwiseConstraint),e.pointwiseConstraint=vA(this.pointwiseConstraint),e}}]),n}(DR);BR.className="SeparableConv";var zR=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,2,e)}return p(n)}(BR);zR.className="SeparableConv2D",jb(zR);var UR=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return p(n,[{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!wT(e.kernelSize,"number",1,1))throw new nT("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(DR);UR.className="Conv1D",jb(UR);var WR=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return p(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return Bb((function(){if(e=FI(e),"channelsLast"===n.dataFormat){var t=tI(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return tI(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=tI(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return tI(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);WR.className="Cropping2D",jb(WR);var GR=function(e){m(n,e);var t=k(n);function n(e){var r,a;return d(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,LT(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,a=r.interpolation,xT(NT,"InterpolationFormat",a),r}return p(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return Bb((function(){var t=FI(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=ik(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?gS.resizeNearestNeighbor(t,[a,i]):gS.resizeBilinear(t,[a,i]);return ik(o,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?gS.resizeNearestNeighbor(t,[s,u]):gS.resizeBilinear(t,[s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);GR.className="UpSampling2D",jb(GR);var VR=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=LI(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=gA(e.depthwiseConstraint),r.depthwiseRegularizer=yR(e.depthwiseRegularizer),r}return p(n,[{key:"build",value:function(e){if((e=BI(e)).length<4)throw new nT("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new nT("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Bb((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return Bb((function(){null==a&&(a="channelsLast"),LT(a);var o=IR(e,a);if(4!==e.rank)throw new nT("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new nT("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=jx(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=ik(o,[0,3,1,2])),o}))}(e=FI(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=cI(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=BI(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=ER(t,this.kernelSize[0],this.padding,this.strides[0]),i=ER(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=DI(this.depthwiseInitializer),e.depthwiseRegularizer=mR(this.depthwiseRegularizer),e.depthwiseConstraint=vA(this.depthwiseRegularizer),e}}]),n}(OR);function HR(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new nT("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function qR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return Bb((function(){var u=t.shape.length;if(u<3)throw new nT("Input should be at least 3D, but is ".concat(u,"D."));var l=[1,0].concat(YT(2,u));if(t=ik(t,l),null!=i)throw new rT("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=$y($y(a,"bool"),"float32")).rank===u-1&&(a=Wx(a,-1)),a=ik(a,l)),r&&(t=Dw(t,0),null!=a&&(a=Dw(a,0)));var c,f,d=[],h=n,p=t.shape[0],v=Jw(t);null!=a&&(f=Jw(a));for(var m,g=function(t){var n=v[t],r=Bb((function(){return e(n,h)}));if(null==a)c=r[0],h=r[1];else{var i=Bb((function(){var e=f[t],n=ew(Cw(e),e);return{output:Xb(Jx(r[0],e),Jx(h[0],n)),newStates:h.map((function(t,a){return Xb(Jx(r[1][a],e),Jx(t,n))}))}}));c=i.output,h=i.newStates}s&&d.push(c)},y=0;y<p;++y)g(y);if(s){m=Yw(d,1)}return[c,m,h]}))}VR.className="DepthwiseConv2D",jb(VR);var XR=function(e){m(n,e);var t=k(n);function n(e){var r,a;if(d(this,n),r=t.call(this,e),null==e.cell)throw new nT("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new tM({cells:e.cell}):e.cell).stateSize)throw new nT("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new HI({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return p(n,[{key:"getStates",value:function(){return null==this.states_?YT(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){jI(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=E(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(cZ){o.e(cZ)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return Bb((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new rT("Constants support is not implemented in RNN yet.");jI(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new HI({shape:[t,null].concat(f(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Ad(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new nT("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new HI({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Bb((function(){if(!t.stateful)throw new eT("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new nT("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return Sw([r,e])})):t.states_=[Sw([r,t.cell.stateSize])];else if(null==e)zb(t.states_),null!=t.keptStates&&(zb(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return Sw([r,e])})):t.states_[0]=Sw([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new nT("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):zb(t.states_);for(var a=0;a<t.states_.length;++a){var i=e[a],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,o];if(!Ad(i.shape,s))throw new nT("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(i.shape));t.states_[a]=i}}t.states_=t.states_.map((function(e){return Ub(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=HR(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var u,l=E(r);try{for(l.s();!(u=l.n()).done;){var c=u.value;this.stateSpec.push(new HI({shape:c.shape}))}}catch(cZ){l.e(cZ)}finally{l.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof qI){var f=[e].concat(o),d=this.inputSpec.concat(s),h=this.inputSpec;this.inputSpec=d;var p=NA(g(n.prototype),"apply",this).call(this,f,t);return this.inputSpec=h,p}return NA(g(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Bb((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=FI(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new nT("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=qR((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),l=u[0],c=u[1],f=u[2];n.stateful&&n.resetStates(f,a);var d=n.returnSequences?c:l;return n.returnState?[d].concat(f):d}))}},{key:"getInitialState",value:function(e){var t=this;return Bb((function(){var n=Sw(e.shape);return n=QT(n=tw(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?aI(n,[1,e]):n})):t.cell.stateSize>1?[aI(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){NA(g(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=RA(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(ZI);XR.className="RNN",jb(XR);var YR=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n)}(ZI),KR=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,kT(r.units,"units"),r.activation=fR(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=LI(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=LI(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=LI(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=yR(e.kernelRegularizer),r.recurrentRegularizer=yR(e.recurrentRegularizer),r.biasRegularizer=yR(e.biasRegularizer),r.kernelConstraint=gA(e.kernelConstraint),r.recurrentConstraint=gA(e.recurrentConstraint),r.biasConstraint=gA(e.biasConstraint),r.dropout=qT([1,XT([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=qT([1,XT([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return p(n,[{key:"build",value:function(e){e=BI(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Bb((function(){if(2!==e.length)throw new nT("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=nM({ones:function(){return Cw(e)},rate:n.dropout,training:i,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=nM({ones:function(){return Cw(r)},rate:n.recurrentDropout,training:i,dropoutFunc:n.dropoutFunc}));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=oI(null!=o?Jx(e,o):e,n.kernel.read()),null!=n.bias&&(a=cI(a,n.bias.read())),null!=s&&(r=Jx(r,s));var u=Xb(a,oI(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:lR(this.activation),useBias:this.useBias,kernelInitializer:DI(this.kernelInitializer),recurrentInitializer:DI(this.recurrentInitializer),biasInitializer:DI(this.biasInitializer),kernelRegularizer:mR(this.kernelRegularizer),recurrentRegularizer:mR(this.recurrentRegularizer),biasRegularizer:mR(this.biasRegularizer),activityRegularizer:mR(this.activityRegularizer),kernelConstraint:vA(this.kernelConstraint),recurrentConstraint:vA(this.recurrentConstraint),biasConstraint:vA(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}]),n}(YR);KR.className="SimpleRNNCell",jb(KR);var ZR=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),e.cell=new KR(e),t.call(this,e)}return p(n,[{key:"call",value:function(e,t){var r=this;return Bb((function(){null!=r.cell.dropoutMask&&(zb(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(zb(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return NA(g(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(XR);ZR.className="SimpleRNN",jb(ZR);var QR=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new nT("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,kT(r.units,"units"),r.activation=fR(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=fR(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=LI(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=LI(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=LI(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=yR(e.kernelRegularizer),r.recurrentRegularizer=yR(e.recurrentRegularizer),r.biasRegularizer=yR(e.biasRegularizer),r.kernelConstraint=gA(e.kernelConstraint),r.recurrentConstraint=gA(e.recurrentConstraint),r.biasConstraint=gA(e.biasConstraint),r.dropout=qT([1,XT([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=qT([1,XT([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return p(n,[{key:"build",value:function(e){var t=(e=BI(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Bb((function(){if(2!==e.length)throw new nT("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=nM({ones:function(){return Cw(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=nM({ones:function(){return Cw(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var i,o,s,u=n.dropoutMask,l=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=Jx(e,u[0]));var c=oI(e,n.kernel.read());n.useBias&&(c=cI(c,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=Jx(a,l[0]));var f=n.recurrentKernel.read(),d=C(Hw(f,[2*n.units,n.units],f.rank-1),2),h=d[0],p=d[1],v=oI(a,h),m=C(Hw(c,3,c.rank-1),3),g=m[0],y=m[1],b=m[2],x=C(Hw(v,2,v.rank-1),2),w=x[0],k=x[1];i=n.recurrentActivation.apply(Xb(g,w)),o=n.recurrentActivation.apply(Xb(y,k));var S=oI(Jx(o,a),p);s=n.activation.apply(Xb(b,S));var _=Xb(Jx(i,a),Jx(Xb(1,xw(i)),s));return[_,_]}))}},{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:lR(this.activation),recurrentActivation:lR(this.recurrentActivation),useBias:this.useBias,kernelInitializer:DI(this.kernelInitializer),recurrentInitializer:DI(this.recurrentInitializer),biasInitializer:DI(this.biasInitializer),kernelRegularizer:mR(this.kernelRegularizer),recurrentRegularizer:mR(this.recurrentRegularizer),biasRegularizer:mR(this.biasRegularizer),activityRegularizer:mR(this.activityRegularizer),kernelConstraint:vA(this.kernelConstraint),recurrentConstraint:vA(this.recurrentConstraint),biasConstraint:vA(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}]),n}(YR);QR.className="GRUCell",jb(QR);var $R=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new QR(e),t.call(this,e)}return p(n,[{key:"call",value:function(e,t){var r=this;return Bb((function(){null!=r.cell.dropoutMask&&(zb(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(zb(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return NA(g(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(XR);$R.className="GRU",jb($R);var JR=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,kT(r.units,"units"),r.activation=fR(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=fR(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=LI(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=LI(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=LI(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=yR(e.kernelRegularizer),r.recurrentRegularizer=yR(e.recurrentRegularizer),r.biasRegularizer=yR(e.biasRegularizer),r.kernelConstraint=gA(e.kernelConstraint),r.recurrentConstraint=gA(e.recurrentConstraint),r.biasConstraint=gA(e.biasConstraint),r.dropout=qT([1,XT([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=qT([1,XT([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return p(n,[{key:"build",value:function(e){var t,n,r=(e=BI(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new yI).apply([i]),o=a.apply([2*i]);return rI(rI(n,r),o)}}]),n}(mI),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return Bb((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new nT("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=nM({ones:function(){return Cw(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=nM({ones:function(){return Cw(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var o,s,u,l,c=n.dropoutMask,f=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=Jx(e,c[0]));var d=oI(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=Jx(a,f[0])),d=Xb(d,oI(a,n.recurrentKernel.read())),n.useBias&&(d=cI(d,n.bias.read()));var h=C(Hw(d,4,d.rank-1),4),p=h[0],v=h[1],m=h[2],g=h[3];o=n.recurrentActivation.apply(p),s=n.recurrentActivation.apply(v),u=Xb(Jx(s,i),Jx(o,n.activation.apply(m))),l=n.recurrentActivation.apply(g);var y=Jx(l,n.activation.apply(u));return[y,y,u]}))}},{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:lR(this.activation),recurrentActivation:lR(this.recurrentActivation),useBias:this.useBias,kernelInitializer:DI(this.kernelInitializer),recurrentInitializer:DI(this.recurrentInitializer),biasInitializer:DI(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:mR(this.kernelRegularizer),recurrentRegularizer:mR(this.recurrentRegularizer),biasRegularizer:mR(this.biasRegularizer),activityRegularizer:mR(this.activityRegularizer),kernelConstraint:vA(this.kernelConstraint),recurrentConstraint:vA(this.recurrentConstraint),biasConstraint:vA(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}]),n}(YR);JR.className="LSTMCell",jb(JR);var eM=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new JR(e),t.call(this,e)}return p(n,[{key:"call",value:function(e,t){var r=this;return Bb((function(){null!=r.cell.dropoutMask&&(zb(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(zb(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return NA(g(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(XR);eM.className="LSTM",jb(eM);var tM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).cells=e.cells,r}return p(n,[{key:"stateSize",get:function(){var e,t=[],n=E(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,f(r.stateSize)):t.push(r.stateSize)}}catch(cZ){n.e(cZ)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return Bb((function(){var r,a=e.slice(1),i=[],o=E(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(cZ){o.e(cZ)}finally{o.f()}i.reverse();for(var u,l=[],c=0;c<n.cells.length;++c){var d=n.cells[c];a=i[c],u=0===c?[e[0]].concat(a):[u[0]].concat(a),u=d.call(u,t),l.push(u.slice(1))}a=[];var h,p=E(l.slice().reverse());try{for(p.s();!(h=p.n()).done;){var v,m=h.value;(v=a).push.apply(v,f(m))}}catch(cZ){p.e(cZ)}finally{p.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;jI(e)&&(e=e[0]),this.cells.forEach((function(n,r){BT("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign(Object.assign({},e),t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=E(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,f(r.trainableWeights))}}catch(cZ){n.e(cZ)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=E(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,f(r.nonTrainableWeights))}}catch(cZ){n.e(cZ)}finally{n.f()}if(!this.trainable){var a,i=[],o=E(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,f(s.trainableWeights))}}catch(cZ){o.e(cZ)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=E(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,f(r.weights))}}catch(cZ){n.e(cZ)}finally{n.f()}return GI(t)}},{key:"setWeights",value:function(e){var t,n=[],r=E(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)n.push([a.weights[s],o[s]])}catch(cZ){r.e(cZ)}finally{r.f()}VI(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=E(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(RA(o,r))}}catch(cZ){i.e(cZ)}finally{i.f()}return new e({cells:a})}}]),n}(YR);function nM(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=e.dropoutFunc,u=function(){return null!=s?s(t(),n):dI(t(),n)},l=function(){return hI(u,t,a)};return!o||o<=1?Ub(l().clone()):Array(o).fill(void 0).map(l).map((function(e){return Ub(e.clone())}))}tM.className="StackedRNNCells",jb(tM);var rM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},aM=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),e.unroll)throw new rT("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new rT("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new HI({ndim:5})],r}return p(n,[{key:"call",value:function(e,t){var r=this;return Bb((function(){if(null!=r.cell.dropoutMask&&(zb(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(zb(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new nT("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return NA(g(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat(f(t.slice(2)))),this.returnState&&(t=[t].concat(f(Array(2).fill([e[0]].concat(f(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return Bb((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=Sw([a[0]].concat(f(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(i):[i]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Bb((function(){if(!t.stateful)throw new eT("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat(f(a.slice(2)));if(null==r[0])throw new nT("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return Sw(i)})):t.states_=[Sw(i)];else if(null==e)zb(t.states_),null!=t.keptStates&&(zb(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return Sw(i)})):t.states_[0]=Sw(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new nT("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):zb(t.states_);for(var o=0;o<t.states_.length;++o){var s=e[o],u=i;if(!Ad(s.shape,u))throw new nT("State ".concat(o," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(u,", received shape=").concat(s.shape));t.states_[o]=s}}t.states_=t.states_.map((function(e){return Ub(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,u="channelsFirst"===n,l=e[u?3:2],c=e[u?4:3],d=ER(l,a[0],i,o[0],s[0]),h=ER(c,a[1],i,o[1],s[1]);return[].concat(f(e.slice(0,2)),f(u?[r,d,h]:[d,h,r]))}}]),n}(XR);aM.className="ConvRNN2D";var iM=function(e){m(n,e);var t=k(n);function n(e){var r;d(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,u=e.dataFormat,l=e.dilationRate;return(r=t.call(this,Object.assign(Object.assign({},e),{units:a}))).filters=a,kT(r.filters,"filters"),r.kernelSize=CR(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return kT(e,"kernelSize")})),r.strides=CR(o||1,2,"strides"),r.strides.forEach((function(e){return kT(e,"strides")})),r.padding=s||"valid",jT(r.padding),r.dataFormat=u||"channelsLast",LT(r.dataFormat),r.dilationRate=CR(l||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return kT(e,"dilationRate")})),r}return p(n,[{key:"build",value:function(e){var t;e=BI(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new nT("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;o=new(t=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"apply",value:function(e,t){return nI([s.apply([u]),_w([u]),s.apply([2*u])])}}]),n}(mI),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return Bb((function(){if(3!==e.length)throw new nT("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=nM({ones:function(){return Cw(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var s=n.dropoutMask,u=function(e,t,n){return t&&t[n]?Jx(t[n],e):e},l=u(a,s,0),c=u(a,s,1),f=u(a,s,2),d=u(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=nM({ones:function(){return Cw(i)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var h=n.recurrentDropoutMask,p=u(i,h,0),v=u(i,h,1),m=u(i,h,2),g=u(i,h,3),y=C(Hw(n.kernel.read(),4,3),4),b=y[0],x=y[1],w=y[2],k=y[3],S=C(n.useBias?Hw(n.bias.read(),4):[null,null,null,null],4),_=S[0],E=S[1],T=S[2],I=S[3];l=n.inputConv(l,b,_,n.padding),c=n.inputConv(c,x,E,n.padding),f=n.inputConv(f,w,T,n.padding),d=n.inputConv(d,k,I,n.padding);var A=C(Hw(n.recurrentKernel.read(),4,3),4),N=A[0],R=A[1],M=A[2],O=A[3];p=n.recurrentConv(p,N),v=n.recurrentConv(v,R),m=n.recurrentConv(m,M),g=n.recurrentConv(g,O);var D=n.recurrentActivation.apply(Xb(l,p)),L=n.recurrentActivation.apply(Xb(c,v)),j=Xb(Jx(L,o),Jx(D,n.activation.apply(Xb(f,m)))),P=Jx(n.recurrentActivation.apply(Xb(d,g)),n.activation.apply(j));return[P,P,j]}))}},{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this),t=(e.units,rM(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},t),r)}},{key:"inputConv",value:function(e,t,n,r){var a=Ix(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?cI(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return Ix(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(JR);iM.className="ConvLSTM2DCell",jb(iM);var oM=function(e){m(n,e);var t=k(n);function n(e){d(this,n);var r=new iM(e);return t.call(this,Object.assign(Object.assign({},e),{cell:r}))}return p(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(aM);oM.className="ConvLSTM2D",jb(oM);var sM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return p(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return Bb((function(){n.invokeCallHook(e,t);var r=FI(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return hI((function(){return dI(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return NA(g(n.prototype),"dispose",this).call(this)}}]),n}(ZI);sM.className="Dropout",jb(sM);var uM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return p(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(sM);uM.className="SpatialDropout1D",jb(uM);var lM=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,kT(r.units,"units"),r.activation=fR(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=LI(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=LI(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=gA(e.kernelConstraint),r.biasConstraint=gA(e.biasConstraint),r.kernelRegularizer=yR(e.kernelRegularizer),r.biasRegularizer=yR(e.biasRegularizer),r.activityRegularizer=yR(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return p(n,[{key:"build",value:function(e){var t=(e=BI(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:N({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=BI(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return Bb((function(){n.invokeCallHook(e,t);var r,a=FI(e),i=_T(n.activation.getClassName());return null!=i?r=oI(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=oI(a,n.kernel.read()),null!=n.bias&&(r=cI(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:lR(this.activation),useBias:this.useBias,kernelInitializer:DI(this.kernelInitializer),biasInitializer:DI(this.biasInitializer),kernelRegularizer:mR(this.kernelRegularizer),biasRegularizer:mR(this.biasRegularizer),activityRegularizer:mR(this.activityRegularizer),kernelConstraint:vA(this.kernelConstraint),biasConstraint:vA(this.biasConstraint)},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);lM.className="Dense",jb(lM);var cM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return p(n,[{key:"computeOutputShape",value:function(e){var t,n=E((e=BI(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new nT('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(cZ){n.e(cZ)}finally{n.f()}return[e[0],HT(e,1)]}},{key:"call",value:function(e,t){var n=this;return Bb((function(){n.invokeCallHook(e,t);var r=FI(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=ik(r,a)}return function(e){if(e.rank<=1)throw new nT("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],HT(e.shape,1)];return hx(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);cM.className="Flatten",jb(cM);var fM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=fR(e.activation),r}return p(n,[{key:"call",value:function(e,t){var n=this;return Bb((function(){n.invokeCallHook(e,t);var r=FI(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:lR(this.activation)},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);fM.className="Activation",jb(fM);var dM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return p(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return Bb((function(){return e=FI(e),t=e,r=n.n,Bb((function(){if(2!==t.shape.length)throw new nT("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return aI(QT(t,1),[1,r,1])}));var t,r}))}},{key:"getConfig",value:function(){var e={n:this.n},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);dM.className="RepeatVector",jb(dM);var hM=function(e){m(n,e);var t=k(n);function n(e){var r;d(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return p(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new nT("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=HT(e);if(null!==i){if(0===a||u%a!==0)throw new nT(n);r[i]=u/a}else if(u!==a)throw new nT(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return Bb((function(){n.invokeCallHook(e,t);var r=FI(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return hx(r,i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);hM.className="Reshape",jb(hM);var pM=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=YT(1,e.dims.length+1);if(!Ad(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new HI({ndim:r.dims.length+1})],r}return p(n,[{key:"computeOutputShape",value:function(e){var t=(e=BI(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return ik(FI(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);pM.className="Permute",jb(pM);var vM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return p(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=FI(e);return Kb(ww(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return Bb((function(){n.invokeCallHook(e,t);var r=FI(e),a=Kb(ww(r,n.maskValue),-1,!0);return Jx(r,$y(a,r.dtype))}))}}]),n}(ZI);vM.className="Masking",jb(vM);var mM=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(cT(e.inputLength))}return r.inputDim=e.inputDim,kT(r.inputDim,"inputDim"),r.outputDim=e.outputDim,kT(r.outputDim,"outputDim"),r.embeddingsInitializer=LI(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=yR(e.embeddingsRegularizer),r.activityRegularizer=yR(e.activityRegularizer),r.embeddingsConstraint=gA(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return p(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return Bb((function(){return n.maskZero?(e=FI(e),ww(e,nk(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=BI(e),null==this.inputLength)return[].concat(f(e),[this.outputDim]);var t=cT(this.inputLength);if(t.length!==e.length-1)throw new nT('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new nT('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat(f(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return Bb((function(){n.invokeCallHook(e,t);var r=FI(e);"int32"!==r.dtype&&(r=ZT(r,"int32"));var a=sI(n.embeddings.read(),hx(r,[r.size]));return hx(a,BI(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:DI(this.embeddingsInitializer),embeddingsRegularizer:mR(this.embeddingsRegularizer),activityRegularizer:mR(this.activityRegularizer),embeddingsConstraint:vA(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);mM.className="Embedding",jb(mM);var gM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return p(n,[{key:"mergeFunction",value:function(e){throw new rT}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new nT("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[BI(e)]),e.length<2)throw new nT("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=E(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(cZ){r.e(cZ)}finally{r.f()}if((n=yT(n)).length>1)throw new nT("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===yT(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return Bb((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=XT(r),o=E(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,u=s.rank,l=0;l<i-u;++l)s=QT(s,1);t.push(s)}}catch(cZ){o.e(cZ)}finally{o.f()}return n.mergeFunction(t)}var c,f=!1,d=E(e);try{for(d.s();!(c=d.n()).done;){var h=c.value,p=h.rank;if(null==p){var v=h.shape,m=v[0],g=v.slice(1).concat([m]),y=hx(h,[m].concat(HT(v.slice(1))));y=ik(y,[1,0]),y=hx(y,g),t.push(y),f=!0}else if(p>1){var b=YT(1,p).concat([0]);t.push(ik(h,b)),f=!0}else t.push(h)}}catch(cZ){d.e(cZ)}finally{d.f()}var x=n.mergeFunction(t),w=x.rank;if(f)if(null==w){var k=x.shape,S=k[k.length-1],_=[S].concat(k.slice(0,k.length-1));x=hx(ik(hx(x,[-1,S]),[1,0]),_)}else if(w>1){var C=[w-1].concat(YT(0,w-1));x=ik(x,C)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=E(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(cZ){o.e(cZ)}finally{o.f()}return t=1===(i=yT(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return Bb((function(){if(null==t)return null;if(!Array.isArray(t))throw new nT("`mask` should be an Array");if(!Array.isArray(e))throw new nT("`inputs` should be an Array");if(t.length!==e.length)throw new nT("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:Wx(e,0)})))[0],r=1;r<t.length-1;++r)n=rw(n,t[r]);return n}))}}]),n}(ZI),yM=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,e)}return p(n,[{key:"mergeFunction",value:function(e){return Bb((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Xb(t,e[n]);return t}))}}]),n}(gM);yM.className="Add",jb(yM);var bM=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,e)}return p(n,[{key:"mergeFunction",value:function(e){return Bb((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Jx(t,e[n]);return t}))}}]),n}(gM);bM.className="Multiply",jb(bM);var xM=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,e)}return p(n,[{key:"mergeFunction",value:function(e){return Bb((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Xb(t,e[n]);return Jx(1/e.length,t)}))}}]),n}(gM);xM.className="Average",jb(xM);var wM=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,e)}return p(n,[{key:"mergeFunction",value:function(e){return Bb((function(){for(var t=e[0],n=1;n<e.length;++n)t=sw(t,e[n]);return t}))}}]),n}(gM);wM.className="Maximum",jb(wM);var kM=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,e)}return p(n,[{key:"mergeFunction",value:function(e){return Bb((function(){for(var t=e[0],n=1;n<e.length;++n)t=cw(t,e[n]);return t}))}}]),n}(gM);kM.className="Minimum",jb(kM);var SM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return p(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new nT("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=E(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(cZ){r.e(cZ)}finally{r.f()}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var s,u=!1,l=E(a);try{for(l.s();!(s=l.n()).done;){if(Ad(s.value,o)){u=!0;break}}}catch(cZ){l.e(cZ)}finally{l.f()}u||a.push(o)}if(a.length>1)throw new nT("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return Bb((function(){return nI(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new nT("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=E(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(cZ){i.e(cZ)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new nT("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new nT("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new nT("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return Bb((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push($y(Cw(e[i]),"bool")):t[i].rank<e[i].rank?a.push(Wx(t[i],-1)):a.push(t[i]);var o=Sx(a,n.axis);return Yb(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gM);function _M(e,t){for(;e<0;)e+=t;return e}SM.className="Concatenate",jb(SM);var CM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return p(n,[{key:"build",value:function(e){_d(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new rT("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new nT("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new nT("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return _M(t,e[n].shape.length)})):[_M(this.axes,n.shape.length),_M(this.axes,r.shape.length)],this.normalize&&(n=MA(n,t[0]),r=MA(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new rT("batchDot is not implemented for tensors of 4D or higher rank yet");if(_d(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),_d(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new rT("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return Bb((function(){var n,o;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=hx(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var l=[],c=0;c<n;++c)l.push(1);e=hx(e,e.shape.concat(l))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?tw(Jx(e,t),i[0]):tw(Jx(ik(e,[1,0]),t),i[1]);else{var f=i[0]!==e.shape.length-1,d=i[1]===t.shape.length-1;o=aw(e,t,f,d)}if(n>0){for(var h,p=[],v=h=r>a?r+a-3:r-1;v<h+n;++v)p.push(v);o=Xw(o,p)}return 1===o.shape.length&&(o=Wx(o,1)),o}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[_M(this.axes,e.length),_M(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){_d(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new rT("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(gM);CM.className="Dot",jb(CM);var EM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return p(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Bb((function(){n.invokeCallHook(e,t);var r=FI(e);return hI((function(){return Xb(iI(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(ZI);EM.className="GaussianNoise",jb(EM);var TM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return p(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Bb((function(){n.invokeCallHook(e,t);var r=FI(e);if(n.rate>0&&n.rate<1){return hI((function(){var e=Math.sqrt(n.rate/(1-n.rate));return Jx(r,iI(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(ZI);TM.className="GaussianDropout",jb(TM);var IM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return p(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||FI(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=NA(g(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Bb((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return hI((function(){var t=FI(e),a=-1.7580993408473766,i=Yx(Mw(r),n.rate);i=ZT(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate,u=Xb(Jx(t,i),Jx(Xb(i,-1),a));return Xb(Jx(u,o),s)}),(function(){return FI(e)}),t.training||!1)}return e}))}}]),n}(ZI);function AM(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=gx(e,t,n,r,a,o);else if(3===e.rank)i=yx(e,t,n,r,a,o);else{if(4!==e.rank)throw new rT("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=bx(e,t,n,r,a,o)}return i}function NM(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Bb((function(){var i=bw(e,r),o=i.mean,s=i.variance;return[AM(e,o,s,n,t,a),o,s]}))}function RM(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Bb((function(){var i,o=bw(e,r),s=o.mean,u=o.variance,l=[],c=E(YT(0,e.rank));try{for(c.s();!(i=c.n()).done;){var f=i.value;-1!==r.indexOf(f)?l.push(1):l.push(e.shape[f])}}catch(cZ){c.e(cZ)}finally{c.f()}var d=hx(s,l),h=hx(u,l),p=null==t?null:hx(t,l),v=null==n?null:hx(n,l);return[AM(e,d,h,v,p,a),s,u]}))}IM.className="AlphaDropout",jb(IM);var MM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=LI(e.betaInitializer||"zeros"),r.gammaInitializer=LI(e.gammaInitializer||"ones"),r.movingMeanInitializer=LI(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=LI(e.movingVarianceInitializer||"ones"),r.betaConstraint=gA(e.betaConstraint),r.gammaConstraint=gA(e.gammaConstraint),r.betaRegularizer=yR(e.betaRegularizer),r.gammaRegularizer=yR(e.gammaRegularizer),r}return p(n,[{key:"build",value:function(e){e=BI(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new nT("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new HI({ndim:e.length,axes:N({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return Bb((function(){var r=null!=t.training&&t.training,a=FI(e),i=a.shape,o=i.length,s=YT(0,o),u=n.axis>=0?n.axis:n.axis+o;s.splice(u,1);var l=oT(1,o);l[u]=i[u];var c=s.slice();c.sort();var f=!Ad(c,YT(0,o).slice(0,o-1));if(!r)return function(){if(f){var e=hx(n.movingMean.read(),l),t=hx(n.movingVariance.read(),l),r=n.center?hx(n.beta.read(),l):null,i=n.scale?hx(n.gamma.read(),l):null;return AM(a,e,t,r,i,n.epsilon)}return AM(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var d=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Ad(r.slice().sort(),YT(0,e.rank-1))?NM(e,t,n,r,a):RM(e,t,n,r,a)}(a,n.gamma.read(),n.beta.read(),s,n.epsilon),h=C(d,3),p=h[0],v=h[1],m=h[2],g=function(e,t,n){Bb((function(){var r=1-n,a=e.read(),i=Jx(ew(a,t),r);e.write(ew(a,i))}))};return g(n.movingMean,v,n.momentum),g(n.movingVariance,m,n.momentum),p}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:DI(this.betaInitializer),gammaInitializer:DI(this.gammaInitializer),movingMeanInitializer:DI(this.movingMeanInitializer),movingVarianceInitializer:DI(this.movingVarianceInitializer),betaRegularizer:mR(this.betaRegularizer),gammaRegularizer:mR(this.gammaRegularizer),betaConstraint:vA(this.betaConstraint),gammaConstraint:vA(this.gammaConstraint)},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);MM.className="BatchNormalization",jb(MM);var OM=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=E(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(cZ){i.e(cZ)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=LI(e.betaInitializer||"zeros"),r.gammaInitializer=LI(e.gammaInitializer||"ones"),r.betaRegularizer=yR(e.betaRegularizer),r.gammaRegularizer=yR(e.gammaRegularizer),r.supportsMasking=!0,r}return p(n,[{key:"build",value:function(e){var t=(e=BI(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=E(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(cZ){a.e(cZ)}finally{a.f()}if(this.axis.length!==yT(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=FI(e),a=r.shape,i=a.length;return Bb((function(){var e,t=bw(r,n.axis,!0),o=t.mean,s=t.variance,u=oT(1,i),l=E(n.axis);try{for(l.s();!(e=l.n()).done;){var c=e.value;u[c]=a[c]}}catch(cZ){l.e(cZ)}finally{l.f()}for(var f=function(e){return null!=e&&e.shape.length!==i?hx(e,u):e},d=n.scale?f(n.gamma.read()):null,h=n.center?f(n.beta.read()):null,p=[],v=[],m=0;m<i;++m)-1!==n.axis.indexOf(m)?(p.push(a[m]),v.push(1)):(p.push(1),v.push(a[m]));return o=Gx(o,p),s=Gx(s,p),null!=d&&(d=Gx(d,v)),null!=h&&(h=Gx(h,v)),AM(r,o,s,h,d,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:DI(this.betaInitializer),gammaInitializer:DI(this.gammaInitializer),betaRegularizer:mR(this.betaRegularizer),gammaRegularizer:mR(this.gammaRegularizer)},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);OM.className="LayerNormalization",jb(OM);var DM=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new nT("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new nT("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new nT("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new HI({ndim:4})],r}return p(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=BI(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return Bb((function(){return t=FI(e),r=n.padding,a=n.dataFormat,Bb((function(){if(4!==t.rank)throw new nT("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new nT("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new nT("Unknown data format: ".concat(a,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var e;return e="channelsFirst"===a?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],Ew(t,e)}));var t,r,a}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI);function LM(e,t,n,r,a,i){return Bb((function(){var o;LT(a),PT(i),jT(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=IR(e,a);var s="same"===r?"same":"valid";return o="max"===i?iw(e,t,n,s):px(e,t,n,s),"channelsFirst"===a&&(o=ik(o,[0,3,1,2])),o}))}function jM(e,t,n,r,a,i){return Bb((function(){var o;LT(a),PT(i),jT(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=AR(e,a);var s="same"===r?"same":"valid";return o="max"===i?ow(e,t,n,s):vx(e,t,n,s),"channelsFirst"===a&&(o=ik(o,[0,4,1,2,3])),o}))}DM.className="ZeroPadding2D",jb(DM);var PM=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new nT("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(kT(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new nT("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return kT(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,jT(r.padding),r.inputSpec=[new HI({ndim:3})],r}return p(n,[{key:"computeOutputShape",value:function(e){var t=ER((e=BI(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return Bb((function(){n.invokeCallHook(e,t),e=QT(FI(e),2);var r=n.poolingFunction(FI(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return Xw(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI),FM=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,e)}return p(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return LT(a),jT(r),LM(e,t,n,r,a,"max")}}]),n}(PM);FM.className="MaxPooling1D",jb(FM);var BM=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,e)}return p(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return LT(a),jT(r),LM(e,t,n,r,a,"avg")}}]),n}(PM);BM.className="AveragePooling1D",jb(BM);var zM=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new nT("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return kT(r.poolSize,"poolSize"),kT(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,LT(r.dataFormat),jT(r.padding),r.inputSpec=[new HI({ndim:4})],r}return p(n,[{key:"computeOutputShape",value:function(e){e=BI(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=ER(t,this.poolSize[0],this.padding,this.strides[0]),n=ER(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return Bb((function(){return n.invokeCallHook(e,t),n.poolingFunction(FI(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI),UM=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,e)}return p(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return LT(a),jT(r),LM(e,t,n,r,a,"max")}}]),n}(zM);UM.className="MaxPooling2D",jb(UM);var WM=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,e)}return p(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return LT(a),jT(r),LM(e,t,n,r,a,"avg")}}]),n}(zM);WM.className="AveragePooling2D",jb(WM);var GM=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new nT("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return kT(r.poolSize,"poolSize"),kT(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,LT(r.dataFormat),jT(r.padding),r.inputSpec=[new HI({ndim:5})],r}return p(n,[{key:"computeOutputShape",value:function(e){e=BI(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=ER(t,this.poolSize[0],this.padding,this.strides[0]),n=ER(n,this.poolSize[1],this.padding,this.strides[1]),r=ER(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return Bb((function(){return n.invokeCallHook(e,t),n.poolingFunction(FI(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI),VM=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,e)}return p(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return LT(a),jT(r),jM(e,t,n,r,a,"max")}}]),n}(GM);VM.className="MaxPooling3D",jb(VM);var HM=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,e)}return p(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return LT(a),jT(r),jM(e,t,n,r,a,"avg")}}]),n}(GM);HM.className="AveragePooling3D",jb(HM);var qM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).inputSpec=[new HI({ndim:3})],r}return p(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new rT}}]),n}(ZI),XM=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,e||{})}return p(n,[{key:"call",value:function(e,t){return Bb((function(){var t=FI(e);return uw(t,1)}))}}]),n}(qM);XM.className="GlobalAveragePooling1D",jb(XM);var YM=function(e){m(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,e||{})}return p(n,[{key:"call",value:function(e,t){return Bb((function(){var t=FI(e);return $x(t,1)}))}}]),n}(qM);YM.className="GlobalMaxPooling1D",jb(YM);var KM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,LT(r.dataFormat),r.inputSpec=[new HI({ndim:4})],r}return p(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new rT}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ZI),ZM=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"call",value:function(e,t){var n=this;return Bb((function(){var t=FI(e);return"channelsLast"===n.dataFormat?uw(t,[1,2]):uw(t,[2,3])}))}}]),n}(KM);ZM.className="GlobalAveragePooling2D",jb(ZM);var QM=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"call",value:function(e,t){var n=this;return Bb((function(){var t=FI(e);return"channelsLast"===n.dataFormat?$x(t,[1,2]):$x(t,[2,3])}))}}]),n}(KM);QM.className="GlobalMaxPooling2D",jb(QM);var $M=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).layer=e.layer,r}return p(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){NA(g(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=RA(r,n);delete t.layer;var i={layer:a};return Object.assign(i,t),new e(i)}}]),n}(ZI),JM=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return p(n,[{key:"build",value:function(e){if((e=BI(e)).length<3)throw new nT("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),NA(g(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=BI(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return Bb((function(){return qR((function(e,r){return[FI(n.layer.call(e,t)),[]]}),e=FI(e),[],!1,null,null,!1,!0)[1]}))}}]),n}($M);JM.className="TimeDistributed",jb(JM);var eO=function(e){m(n,e);var t=k(n);function n(e){var r;d(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=RA(i),a.goBackwards=!0!==a.goBackwards;var o,s={};if(s.className=e.layer.getClassName(),s.config=a,r.backwardLayer=RA(s),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=r.mergeMode,xT(OT,"BidirectionalMergeMode",o),e.weights)throw new rT("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return p(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):lT(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=HR(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return NA(g(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new nT("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,f(r));var l=r.map((function(e){return new HI({shape:e.shape})}));this.forwardLayer.stateSpec=l.slice(0,u/2),this.backwardLayer.stateSpec=l.slice(u/2),s.push.apply(s,f(l))}if(null!=a)throw new rT("Support for constants in Bidirectional layers is not implemented yet.");for(var c=o[0]instanceof qI,d=0,h=o;d<h.length;d++){if(h[d]instanceof qI!==c)throw new nT("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(c){var p=[e].concat(o),v=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=v;var y=NA(g(n.prototype),"apply",this).call(this,p,t);return this.inputSpec=m,y}return NA(g(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Bb((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),l=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:l}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=Dw(a,1)),"concat"===n.mergeMode?o=nI([r,a]):"sum"===n.mergeMode?o=Xb(r,a):"ave"===n.mergeMode?o=Jx(.5,Xb(r,a)):"mul"===n.mergeMode?o=Jx(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;BT(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),BT(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){NA(g(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=RA(t.layer);if(delete t.layer,null!=t.numConstants)throw new rT("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}($M);eO.className="Bidirectional",jb(eO);var tO=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).scale=e.scale,e.offset?r.offset=e.offset:r.offset=0,r}return p(n,[{key:"getConfig",value:function(){var e={scale:this.scale,offset:this.offset},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return Bb((function(){return"float32"!==(e=FI(e)).dtype&&(e=ZT(e,"float32")),Xb(Jx(e,n.scale),n.offset)}))}}]),n}(ZI);tO.className="Rescaling",jb(tO);var nO=new Set(["bilinear","nearest"]),rO=function(e){m(n,e);var t=k(n);function n(e){var r;if(d(this,n),(r=t.call(this,e)).height=e.height,r.width=e.width,e.interpolation){if(!nO.has(e.interpolation))throw new nT("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));r.interpolation=e.interpolation}else r.interpolation="bilinear";return r.cropToAspectRatio=Boolean(e.cropToAspectRatio),r}return p(n,[{key:"computeOutputShape",value:function(e){var t=(e=BI(e))[2];return[this.height,this.width,t]}},{key:"getConfig",value:function(){var e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return Bb((function(){var t=[n.height,n.width];if("bilinear"===n.interpolation)return gS.resizeBilinear(e,t,!n.cropToAspectRatio);if("nearest"===n.interpolation)return gS.resizeNearestNeighbor(e,t,!n.cropToAspectRatio);throw new Error("Interpolation is ".concat(n.interpolation," but only ").concat(f(nO)," are supported"))}))}}]),n}(ZI);rO.className="Resizing",jb(rO);var aO=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).numTokens=e.numTokens,e.outputMode?r.outputMode=e.outputMode:r.outputMode="multiHot",r}return p(n,[{key:"getConfig",value:function(){var e={numTokens:this.numTokens,outputMode:this.outputMode},t=NA(g(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){return null==(e=BI(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}},{key:"call",value:function(e,t){var n=this;return Bb((function(){var r;if("int32"!==(e=FI(e)).dtype&&(e=ZT(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==n.outputMode)throw new nT("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));r=FI(t.countWeights)}var a=$x(e),i=lw(e),o=Xx(n.numTokens,a).bufferSync().get(0),s=Yx(i,0).bufferSync().get(0);if(!o||!s)throw new nT("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(n.numTokens));return function(e,t,n,r){var a=FI(e);if("int32"!==a.dtype&&(a=ZT(a,"int32")),"int"===t)return a;var i=a.shape;if(0===a.rank&&(a=Wx(a,-1)),"oneHot"===t&&1!==a.shape[a.shape.length-1]&&(a=Wx(a,-1)),a.rank>2)throw new nT("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(i)+" which would result in output rank ".concat(a.rank,"."));var o,s=["multiHot","oneHot"].includes(t);if(o=Lx(a,"undefined"!==typeof r&&"count"===t?r:[],n,s),"tfIdf"!==t)return o;if(r)return Jx(o,r);throw new nT("When outputMode is 'tfIdf', weights must be provided.")}(e,n.outputMode,n.numTokens,r)}))}}]),n}(ZI);function iO(e){return new lM(e)}aO.className="CategoryEncoding",jb(aO);var oO,sO;sh().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(oO||(oO={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(sO||(sO={}));function uO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(dO(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=e[o],u=uO(s,t,n,r);i[o]=u}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function lO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fO;return cO(e,t)}function cO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(dO(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=cO(e.map((function(e){return e[r]})),t,n);i[r]=a};for(var s in r)o(s);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function fO(e){return null===e?null:dO(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function dO(e){var t=!1;sh().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof n(4977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof sg)&&!(e instanceof Promise)&&!t)}function hO(e){return function(e,t){return uO(e,t)}(e,pO)}function pO(e){return e instanceof sg?{value:e.clone(),recurse:!1}:dO(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var vO=function(){function e(t){if(d(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return p(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=E(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(cZ){n.e(cZ)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),mO=function(e){m(n,e);var t=k(n);function n(){return d(this,n),t.call(this,n.INITIAL_CAPACITY)}return p(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){NA(g(n.prototype),"isFull",this).call(this)&&this.expand(),NA(g(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){NA(g(n.prototype),"isFull",this).call(this)&&this.expand(),NA(g(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(vO);function gO(e){return new kO(e)}function yO(e,t){return new OO(e,t)}mO.INITIAL_CAPACITY=32;var bO,xO=function(){function e(){d(this,e)}return p(e,[{key:"toArray",value:function(){var e=A(T().mark((function e(){var t,n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=A(T().mark((function e(){var t,n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=A(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=A(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new AO(this,e)}},{key:"filter",value:function(e){return new TO(this,e)}},{key:"map",value:function(e){return new IO(this,e)}},{key:"mapAsync",value:function(e){return new NO(this,e)}},{key:"serialMapAsync",value:function(e){return new NO(this,e).serial()}},{key:"flatmap",value:function(e){return new MO(this,e)}},{key:"forEachAsync",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new EO(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fO,r=this.rowMajorBatch(e,t);return r.map((function(e){return lO(e,n)}))}},{key:"concatenate",value:function(e,t){return new OO(new wO([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new CO(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new _O(this,e)}},{key:"prefetch",value:function(e){return new DO(this,e)}},{key:"shuffle",value:function(e,t){return new LO(this,e,t)}},{key:"serial",value:function(){return new SO(this)}}]),e}(),wO=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).items=e,r.trav=0,r}return p(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=A(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:hO(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xO),kO=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).nextFn=e,r}return p(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(xO),SO=function(e){m(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return p(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=A(T().mark((function e(){var t=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xO),_O=function(e){m(n,e);var t=k(n);function n(e,r){var a;return d(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return p(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=A(T().mark((function e(){var t=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=A(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:zb(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xO),CO=function(e){m(n,e);var t=k(n);function n(e,r){var a;return d(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return p(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xO),EO=function(e){m(n,e);var t=k(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return d(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return p(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=A(T().mark((function e(){var t=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=A(T().mark((function e(){var t,n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xO),TO=function(e){m(n,e);var t=k(n);function n(e,r){var a;return d(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return p(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=A(T().mark((function e(){var t=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=A(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:zb(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xO),IO=function(e){m(n,e);var t=k(n);function n(e,r){var a;return d(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return p(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=A(T().mark((function e(){var t,n,r,a,i,o,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=xg(t.value),r=this.transform(t.value),a=xg(r),i=E(n);try{for(i.s();!(o=i.n()).done;)bg(s=o.value,a)||s.dispose()}catch(cZ){i.e(cZ)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xO),AO=function(e){m(n,e);var t=k(n);function n(e,r){var a;return d(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return p(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=A(T().mark((function e(){var t=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(xO),NO=function(e){m(n,e);var t=k(n);function n(e,r){var a;return d(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return p(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=A(T().mark((function e(){var t,n,r,a,i,o,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=xg(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=xg(r),i=E(n);try{for(i.s();!(o=i.n()).done;)bg(s=o.value,a)||s.dispose()}catch(cZ){i.e(cZ)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xO),RO=function(e){m(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.call(this)).outputQueue=new mO,e.lastRead=Promise.resolve({value:null,done:!1}),e}return p(n,[{key:"next",value:function(){var e=A(T().mark((function e(){var t=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xO),MO=function(e){m(n,e);var t=k(n);function n(e,r){var a;return d(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return p(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=A(T().mark((function e(){var t,n,r,a,i,o,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=xg(t.value),r=this.transform(t.value),a=xg(r),this.outputQueue.pushAll(r),i=E(n);try{for(i.s();!(o=i.n()).done;)bg(s=o.value,a)||s.dispose()}catch(cZ){i.e(cZ)}finally{i.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(RO),OO=function(e){m(n,e);var t=k(n);function n(e,r){var a;return d(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return p(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=A(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(xO);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(bO||(bO={}));var DO=function(e){m(n,e);var t=k(n);function n(e,r){var a;return d(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new vO(r),a}return p(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(xO),LO=function(e){m(n,e);var t=k(n);function n(e,r,a){var i;return d(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=Iw.alea(a||qm().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return p(n,[{key:"next",value:function(){var e=A(T().mark((function e(){var t=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=A(T().mark((function e(){var t,n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(DO),jO=function(){function e(){d(this,e),this.size=null}return p(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return _d(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),PO(A(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,FO));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,PO(A(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,PO(A(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return Bb((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return PO(A(T().mark((function n(){return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return Bb((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return PO(A(T().mark((function n(){return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return PO(A(T().mark((function n(){return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,PO(A(T().mark((function t(){var r;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=gO(A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",yO(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,PO(A(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=Iw.alea(t||qm().toString());return PO(A(T().mark((function t(){var i;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,PO(A(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function PO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){m(a,n);var r=k(a);function a(){var e;return d(this,a),(e=r.apply(this,arguments)).size=t,e}return p(a,[{key:"iterator",value:function(){var t=A(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(jO))}function FO(e){return null===e?null:function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof sg||zd(e);var t}(e[0])?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof sg?Yw(e):Ug(e)}(e),recurse:!1}:{value:null,recurse:!0}}jO.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function BO(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&_d("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var zO=v_,UO=function(e){m(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new md(x(e),Pb()),e}return p(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,sh().get("IS_NODE")&&ym("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Wd(n[0])){var a=n.map((function(e){return Xm(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?ZS(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return Ym(e)}));return Qy(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return Qy(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return Pb().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=A(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qm(),t(),r=qm()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){BO([e],"where");var t=this.readSync(e.dataId);return zO(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return NA(g(n.prototype),"epsilon",this).call(this)}}]),n}(gd);UO.nextDataId=0;function WO(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(BO(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=o,l=u.data.get(s.dataId).values,c=Id(s.shape),f=n||s.dtype,d=Fd(f,c),h=0;h<c;++h)d[h]=t(l[h],i);return u.makeTensorInfo(s.shape,f,d)}}function GO(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(BO(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=o,l=u.data.get(s.dataId).values,c=n||s.dtype,f=t(l,c,i);return u.makeTensorInfo(s.shape,c,f)}}Wb("cpu",(function(){return new UO}),1);var VO=WO(up,(function(e){return e>=0?e:Math.exp(e)-1})),HO={kernelName:up,backendName:"cpu",kernelFunc:VO};function qO(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var XO={kernelName:Cp,backendName:"cpu",kernelFunc:qO};function YO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;BO([a],"leakyRelu");for(var o=Id(a.shape),s=n.data.get(a.dataId).values,u=Pd("float32",o),l=0;l<s.length;l++)u[l]=s[l]<0?i*s[l]:s[l];return n.makeTensorInfo(a.shape,"float32",u)}var KO={kernelName:Rp,backendName:"cpu",kernelFunc:YO};function ZO(e){return function(t,n,r,a,i){var o=Eb(t,n),s=o.length,u=Xd(o),l=Pd(i,Id(o)),c=t.length,f=n.length,d=Xd(t),h=Xd(n),p=_b(t,o),v=_b(n,o);if(p.length+v.length===0)for(var m=0;m<l.length;++m)l[m]=e(r[m%r.length],a[m%a.length]);else for(var g=function(t){var n=th(t,s,u),i=n.slice(-c);p.forEach((function(e){return i[e]=0}));var o=eh(i,c,d),m=n.slice(-f);v.forEach((function(e){return m[e]=0}));var g=eh(m,f,h);l[t]=e(r[o],a[g])},y=0;y<l.length;++y)g(y);return[l,o]}}var QO=ZO((function(e,t){return e<0?t*e:e}));function $O(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;BO([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=C(QO(r.shape,a.shape,i,o,"float32"),2),u=s[0],l=s[1];return n.makeTensorInfo(l,"float32",u)}var JO={kernelName:dv,backendName:"cpu",kernelFunc:$O},eD=WO(xv,(function(e){return Math.max(0,e)})),tD={kernelName:xv,backendName:"cpu",kernelFunc:eD},nD=WO(Ev,(function(e){return Math.min(Math.max(0,e),6)})),rD={kernelName:Ev,backendName:"cpu",kernelFunc:nD};function aD(e){return function(t,n,r){for(var a=Pd(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}var iD=aD((function(e){return 1/(1+Math.exp(-e))})),oD=WO(Fv,(function(e){return 1/(1+Math.exp(-e))})),sD={kernelName:Fv,backendName:"cpu",kernelFunc:oD};function uD(e,t,n,r,a){if("linear"===n)return qO({inputs:{x:t},backend:e});if("relu"===n)return eD({inputs:{x:t},backend:e});if("elu"===n)return VO({inputs:{x:t},backend:e});if("relu6"===n)return nD({inputs:{x:t},backend:e});if("prelu"===n)return $O({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return YO({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return oD({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function lD(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var cD={kernelName:Ph,backendName:"cpu",kernelFunc:lD};function fD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=fD(e,t,"float32"),a=fD(e,t,"float32");return lD({inputs:{real:r,imag:a},backend:e})}var i=Qd(Id(t),n);return e.makeTensorInfo(t,n,i)}function dD(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var hD={kernelName:yv,backendName:"cpu",kernelFunc:dD};function pD(e,t,n,r){if("int32"===r)return[t,"int32",Int32Array.from(e)];if("bool"===r){var a=Hm([0],n),i=C(ZO((function(e,t){return e!==t?1:0}))(t,[],e,a,"bool"),2),o=i[0];return[i[1],"bool",o]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function vD(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return qO({inputs:{x:a},backend:n});var o=fD(n,a.shape,a.dtype),s=vD({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=lD({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var l=dD({inputs:{input:a},backend:n}),c=vD({inputs:{x:l},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(l),c}if(!Bd(a.dtype,i)){var f=qO({inputs:{x:a},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:i}}var d=C(pD(n.data.get(a.dataId).values,a.shape,a.dtype,i),3),h=d[0],p=d[1],v=d[2];return n.makeTensorInfo(h,p,v)}var mD={kernelName:Dh,backendName:"cpu",kernelFunc:vD};function gD(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,u=i;BO([o,s],e);var l=u.data.get(o.dataId).values,c=u.data.get(s.dataId).values,f="string"===o.dtype?p_(l):l,d="string"===o.dtype?p_(c):c,h=r||o.dtype,p=C(t(o.shape,s.shape,f,d,h),2),v=p[0],m=p[1];return u.makeTensorInfo(m,h,v)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,u=i;if("complex64"===o.dtype||"complex64"===s.dtype){var l=vD({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),c=u.data.get(l.dataId),f=c.complexTensorInfos.real,d=c.complexTensorInfos.imag,h=u.data.get(f.dataId).values,p=u.data.get(d.dataId).values,v=vD({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),m=u.data.get(v.dataId),g=m.complexTensorInfos.real,y=m.complexTensorInfos.imag,b=u.data.get(g.dataId).values,x=u.data.get(y.dataId).values,w=C(n(o.shape,s.shape,h,p,b,x),3),k=w[0],S=w[1],_=w[2],E=u.makeTensorInfo(_,"float32",k),T=u.makeTensorInfo(_,"float32",S),I=lD({inputs:{real:E,imag:T},backend:u});return u.disposeIntermediateTensorInfo(l),u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(E),u.disposeIntermediateTensorInfo(T),I}var A=u.data.get(o.dataId).values,N=u.data.get(s.dataId).values,R=r||o.dtype,M=C(t(o.shape,s.shape,A,N,R),2),O=M[0],D=M[1];return u.makeTensorInfo(D,R,O)}}function yD(e){return function(t,n,r,a,i,o){var s=Eb(t,n),u=Id(s),l=s.length,c=Xd(s),f=Pd("float32",u),d=Pd("float32",u),h=_b(t,s),p=_b(n,s),v=ZS(r,a),m=ZS(i,o),g=t.length,y=Xd(t),b=n.length,x=Xd(n);if(h.length+p.length===0)for(var w=0;w<f.length;w++){var k=w%v.length,S=w%m.length,_=e(v[2*k],v[2*k+1],m[2*S],m[2*S+1]);f[w]=_.real,d[w]=_.imag}else for(var C=function(t){var n=th(t,l,c),r=n.slice(-g);h.forEach((function(e){return r[e]=0}));var a=eh(r,g,y),i=n.slice(-b);p.forEach((function(e){return i[e]=0}));var o=eh(i,b,x),s=e(v[2*a],v[2*a+1],m[2*o],m[2*o+1]);f[t]=s.real,d[t]=s.imag},E=0;E<f.length;E++)C(E);return[f,d,s]}}var bD=ZO((function(e,t){return e+t})),xD=yD((function(e,t,n,r){return{real:e+n,imag:t+r}})),wD=gD(vh,bD,xD),kD={kernelName:vh,backendName:"cpu",kernelFunc:wD};function SD(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=Id(a.shape),s=Dd(i,o),u=Id(s);_d(o===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var l=n.data.get(a.dataId);if(null!=l.complexTensorInfos){var c=l.complexTensorInfos.real,f=l.complexTensorInfos.imag;c.shape=s,f.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var _D={kernelName:wv,backendName:"cpu",kernelFunc:SD};function CD(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;BO([a,i],"matMul");var u=a.shape.length,l=i.shape.length,c=o?a.shape[u-2]:a.shape[u-1],f=s?i.shape[l-1]:i.shape[l-2],d=o?a.shape[u-1]:a.shape[u-2],h=s?i.shape[l-2]:i.shape[l-1],p=a.shape.slice(0,-2),v=i.shape.slice(0,-2),m=Id(p),g=Id(v),y=Eb(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([d,h]);_d(c===f,(function(){return"Error in matMul: inner shapes (".concat(c,") and (")+"".concat(f,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")}));for(var b=s?[g,h,f]:[g,f,h],x=SD({inputs:{x:a},backend:n,attrs:{shape:o?[m,c,d]:[m,d,c]}}),w=SD({inputs:{x:i},backend:n,attrs:{shape:b}}),k=o?x.shape[1]:x.shape[2],S=o?x.shape[2]:x.shape[1],_=s?w.shape[1]:w.shape[2],E=Math.max(m,g),T=n.data.get(x.dataId).values,I=n.data.get(w.dataId).values,A=Xd(x.shape),N=Xd(w.shape),R=C(o?[A[0],1,A[1]]:[A[0],A[1],1],3),M=R[0],O=R[1],D=R[2],L=C(s?[1,N[1],N[0]]:[N[1],1,N[0]],3),j=L[0],P=L[1],F=L[2],B=S*_,z=Qy([E,S,_],x.dtype),U=z.values,W=n.blockSize,G=0;G<E;G++)for(var V=0;V<S;V+=W)for(var H=0;H<_;H+=W)for(var q=0;q<k;q+=W)for(var X=Math.min(V+W,S),Y=Math.min(H+W,_),K=Math.min(q+W,k),Z=V;Z<X;Z++)for(var Q=H;Q<Y;Q++){for(var $=0,J=q;J<K;J++){var ee=Math.min(G,m-1)*M,te=Math.min(G,g-1)*F;$+=T[ee+Z*O+J*D]*I[J*j+Q*P+te]}U[G*B+(Z*_+Q)]+=$}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(y,z.dtype,z.values)}var ED={kernelName:Nh,backendName:"cpu",kernelFunc:CD};var TD={kernelName:vm,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,u=a.b,l=a.bias,c=a.preluActivationWeights,f=o.transposeA,d=o.transposeB,h=o.activation,p=o.leakyreluAlpha,v=[];t=CD({inputs:{a:s,b:u},attrs:{transposeA:f,transposeB:d},backend:i}),l&&(n=wD({inputs:{a:t,b:l},backend:i}),v.push(t),t=n),h&&(r=uD(i,t,h,c,p),v.push(t),t=r);for(var m=0,g=v;m<g.length;m++){var y=g[m];i.disposeIntermediateTensorInfo(y)}return t}};function ID(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var AD={kernelName:dh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;BO(t,"abs");var r=new Float32Array(Id(t.shape));return r=ID(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},ND=WO(hh,(function(e){return Math.acos(e)})),RD={kernelName:hh,backendName:"cpu",kernelFunc:ND},MD=WO(ph,(function(e){return Math.acosh(e)})),OD={kernelName:ph,backendName:"cpu",kernelFunc:MD};var DD={kernelName:mh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;BO(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=Qy(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var u=a[s],l=0;l<o.length;l++)o[l]+=u[l];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function LD(e,t,n,r,a){for(var i=t.length,o=Id(t),s=Xd(t),u=Xd(a),l=Pd(n,Id(a)),c=0;c<o;++c){for(var f=th(c,i,s),d=new Array(f.length),h=0;h<d.length;h++)d[h]=f[r[h]];l[eh(d,i,u)]=e[c]}return l}function jD(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;BO(a,"transpose");for(var o=a.shape.length,s=new Array(o),u=0;u<s.length;u++)s[u]=a.shape[i[u]];var l=LD(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(l,s,a.dtype),shape:s,dtype:a.dtype}}var PD={kernelName:um,backendName:"cpu",kernelFunc:jD};var FD={kernelName:gh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;BO(a,"all");var s=Ld(i,a.shape),u=s,l=vw(u,a.shape.length),c=a;null!=l&&(c=jD({inputs:{x:a},backend:n,attrs:{perm:l}}),u=gw(u.length,a.shape.length)),pw("all",u,c.shape.length);for(var f=C(dw(c.shape,u),2),d=f[0],h=Id(f[1]),p=Qd(Id(d),c.dtype),v=n.data.get(c.dataId).values,m=0;m<p.length;++m){for(var g=m*h,y=v[g],b=0;b<h;++b){var x=v[g+b];y=y&&x}p[m]=y}null!=l&&n.disposeIntermediateTensorInfo(c);var w=n.makeTensorInfo(d,c.dtype,p);if(o){var k=SD({inputs:{x:w},backend:n,attrs:{shape:hw(d,s)}});return n.disposeIntermediateTensorInfo(w),k}return w}};var BD={kernelName:yh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;BO(a,"any");var s=Ld(i,a.shape),u=s,l=vw(u,a.shape.length),c=a;null!=l&&(c=jD({inputs:{x:a},backend:n,attrs:{perm:l}}),u=gw(u.length,a.shape.length)),pw("any",u,c.shape.length);for(var f=C(dw(c.shape,u),2),d=f[0],h=Id(f[1]),p=Qd(Id(d),c.dtype),v=n.data.get(c.dataId).values,m=0;m<p.length;++m){for(var g=m*h,y=v[g],b=0;b<h;++b){var x=v[g+b];y=y||x}p[m]=y}null!=l&&n.disposeIntermediateTensorInfo(c);var w=n.makeTensorInfo(d,c.dtype,p);if(o){var k=SD({inputs:{x:w},backend:n,attrs:{shape:hw(d,s)}});return n.disposeIntermediateTensorInfo(w),k}return w}};var zD={kernelName:bh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;BO(a,"argMax");var o=Ld(i,a.shape),s=vw(o,a.shape.length),u=a,l=[];null!=s&&(u=jD({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=gw(o.length,u.shape.length)),pw("argMax",o=[o[0]],u.shape.length);for(var c=C(dw(u.shape,o),2),f=c[0],d=c[1],h=Qd(Id(f),"int32"),p=Id(d),v=n.data.get(u.dataId).values,m=0;m<h.length;++m){for(var g=m*p,y=v[g],b=0,x=0;x<p;++x){var w=v[g+x];w>y&&(y=w,b=x)}h[m]=b}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",h)}};var UD={kernelName:xh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;BO(a,"argMin");var o=Ld(i,a.shape),s=vw(o,a.shape.length),u=a,l=[];null!=s&&(u=jD({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=gw(o.length,u.shape.length)),pw("argMin",o=[o[0]],u.shape.length);for(var c=C(dw(u.shape,o),2),f=c[0],d=c[1],h=Qd(Id(f),"int32"),p=Id(d),v=n.data.get(u.dataId).values,m=0;m<h.length;++m){for(var g=m*p,y=v[g],b=0,x=0;x<p;++x){var w=v[g+x];w<y&&(y=w,b=x)}h[m]=b}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",h)}},WD=WO(wh,(function(e){return Math.asin(e)})),GD={kernelName:wh,backendName:"cpu",kernelFunc:WD},VD=WO(kh,(function(e){return Math.asinh(e)})),HD={kernelName:kh,backendName:"cpu",kernelFunc:VD},qD=WO(Sh,(function(e){return Math.atan(e)})),XD={kernelName:Sh,backendName:"cpu",kernelFunc:qD},YD=ZO((function(e,t){return Math.atan2(e,t)})),KD=gD(Ch,YD),ZD={kernelName:Ch,backendName:"cpu",kernelFunc:KD},QD=WO(_h,(function(e){return Math.atanh(e)})),$D={kernelName:_h,backendName:"cpu",kernelFunc:QD};function JD(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,c=a.effectiveFilterHeight,f=a.effectiveFilterWidth,d=a.padInfo.top,h=a.padInfo.left,p="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Qy(a.outShape,n),m=v.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var w=x*g,k=x*r[0],S=0;S<a.inChannels;++S)for(var _=0;_<a.outHeight;++_)for(var C=_*o-d,E=Math.max(0,C),T=Math.min(a.inHeight,c+C),I=w+_*y,A=0;A<a.outWidth;++A){for(var N=A*s-h,R=Math.max(0,N),M=Math.min(a.inWidth,f+N),O=p,D=0,L=0,j=E;j<T;j+=u){for(var P=k+j*r[1],F=R;F<M;F+=l){var B=e[P+F*r[2]+S];"max"===i&&B>O?O=B:"avg"===i&&(D+=B,L++)}if(isNaN(O))break}m[I+A*b+S]="avg"===i?D/L:O}return v}function eL(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Qy(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,v=Qy(t,n,e),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var b=y*s-h,x=b;x<0;)x+=l;for(var w=Math.min(r.inHeight,f+b),k=0;k<r.outWidth;++k){for(var S=k*u-p,_=S;_<0;)_+=c;for(var C=Math.min(r.inWidth,d+S),E=Number.NEGATIVE_INFINITY,T=-1,I=x;I<w;I+=l)for(var A=I-b,N=_;N<C;N+=c){var R=N-S,M=v.get(m,I,N,g);M>E&&(E=M,T=a?i?((m*r.inHeight+I)*r.inWidth+N)*r.inChannels+g:(I*r.inWidth+N)*r.inChannels+g:A*d+R)}o.set(T,m,y,k,g)}}return o}function tL(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,l=a.dilationDepth,c=a.dilationHeight,f=a.dilationWidth,d=a.effectiveFilterDepth,h=a.effectiveFilterHeight,p=a.effectiveFilterWidth,v=a.padInfo.front,m=a.padInfo.top,g=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Qy(a.outShape,n),x=b.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],S=a.outShape[3]*a.outShape[4],_=a.outShape[4],C=0;C<a.batchSize;++C)for(var E=C*w,T=C*r[0],I=0;I<a.inChannels;++I)for(var A=0;A<a.outDepth;++A){for(var N=A*o-v,R=N;R<0;)R+=l;for(var M=Math.min(a.inDepth,d+N),O=E+A*k,D=0;D<a.outHeight;++D){for(var L=D*s-m,j=L;j<0;)j+=c;for(var P=Math.min(a.inHeight,h+L),F=O+D*S,B=0;B<a.outWidth;++B){for(var z=B*u-g,U=z;U<0;)U+=f;for(var W=Math.min(a.inWidth,p+z),G=F+B*_,V=y,H=0,q=0,X=R;X<M;X+=l){for(var Y=T+X*r[1],K=j;K<P;K+=c){for(var Z=Y+K*r[2],Q=U;Q<W;Q+=f){var $=e[Z+Q*r[3]+I];if("max"===i&&$>V?V=$:"avg"===i&&(H+=$,q++),isNaN(V))break}if(isNaN(V))break}if(isNaN(V))break}x[G+I]="avg"===i?H/q:V}}}return b}var nL={kernelName:Eh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;BO(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;_d(cx(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var l,c=$b(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Ad(c.inShape,c.outShape))l=qO({inputs:{x:a},backend:n});else{var f=n.data.get(a.dataId).values,d=Xd(a.shape),h=JD(f,a.shape,a.dtype,d,c,"avg");l=n.makeTensorInfo(c.outShape,a.dtype,h.values)}return l}};var rL={kernelName:Ih,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat;BO(a,"avgPool3d");var c=Jb(a.shape,i,o,1,s,u,l),f=tL(n.data.get(a.dataId).values,a.shape,a.dtype,Xd(a.shape),c,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}};var aL={kernelName:Ah,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode;BO([a,i],"avgPool3DGrad");for(var c=Jb(i.shape,o,s,1,u,l),f=c.strideDepth,d=c.strideHeight,h=c.strideWidth,p=c.filterDepth,v=c.filterHeight,m=c.filterWidth,g=c.dilationDepth,y=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,k=c.effectiveFilterWidth,S=x-1-c.padInfo.front,_=k-1-c.padInfo.left,C=w-1-c.padInfo.top,E=Qy(i.shape,"float32"),T=1/(p*v*m),I=n.bufferSync(a),A=0;A<c.batchSize;++A)for(var N=0;N<c.inChannels;++N)for(var R=0;R<c.inDepth;++R)for(var M=0;M<c.inHeight;++M)for(var O=0;O<c.inWidth;++O){for(var D=R-S,L=M-C,j=O-_,P=0,F=0;F<x;F+=g){var B=(D+F)/f;if(!(B<0||B>=c.outDepth||Math.floor(B)!==B))for(var z=0;z<w;z+=y){var U=(L+z)/d;if(!(U<0||U>=c.outHeight||Math.floor(U)!==U))for(var W=0;W<k;W+=b){var G=(j+W)/h;if(!(G<0||G>=c.outWidth||Math.floor(G)!==G))P+=I.get(A,B,U,G,N)}}}E.set(P*T,A,R,M,O,N)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};var iL={kernelName:Th,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;BO([a,i],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,l=r.pad,c=$b(o.shape,s,u,1,l),f=c.strideHeight,d=c.strideWidth,h=c.filterHeight,p=c.filterWidth,v=c.dilationHeight,m=c.dilationWidth,g=c.effectiveFilterHeight,y=c.effectiveFilterWidth,b=y-1-c.padInfo.left,x=g-1-c.padInfo.top,w=Qy(o.shape,"float32"),k=1/(h*p),S=n.data.get(a.dataId).values,_=Qy(a.shape,"float32",S),C=0;C<c.batchSize;++C)for(var E=0;E<c.inChannels;++E)for(var T=0;T<c.inHeight;++T)for(var I=0;I<c.inWidth;++I){for(var A=T-x,N=I-b,R=0,M=0;M<g;M+=v){var O=(A+M)/f;if(!(O<0||O>=c.outHeight||Math.floor(O)!==O))for(var D=0;D<y;D+=m){var L=(N+D)/d;if(!(L<0||L>=c.outWidth||Math.floor(L)!==L))R+=_.get(C,O,L,E)}}w.set(R*k,C,T,I,E)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var oL={kernelName:xp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance;_d(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),_d(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),_d(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),BO([a,s,u,i,o],"batchNorm");var l=r.varianceEpsilon;null==l&&(l=.001);for(var c=n.data.get(a.dataId).values,f=n.data.get(s.dataId).values,d=n.data.get(u.dataId).values,h=i?n.data.get(i.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(c.length),m=p.length,g=h.length,y=d.length,b=f.length,x=0,w=0,k=0,S=0,_=0;_<c.length;++_)v[_]=p[x++]+(c[_]-f[w++])*h[k++]/Math.sqrt(d[S++]+l),x>=m&&(x=0),w>=b&&(w=0),k>=g&&(k=0),S>=y&&(S=0);return n.makeTensorInfo(a.shape,a.dtype,v)}};function sL(e,t,n,r,a){var i=Ab(r,t,n),o=Id(n),s=Xd(r);if(i){var u=Nb(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var l=Qy(r,a,"string"===a?p_(e):e),c=Qy(n,a),d=0;d<c.size;++d){var h=c.indexToLoc(d),p=h.map((function(e,n){return e+t[n]}));c.set.apply(c,[l.get.apply(l,f(p))].concat(f(h)))}return"string"===a?c.values.map((function(e){return Xm(e)})):c.values}function uL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;BO(a,"slice");var s=C(Rb(a,i,o),2),u=s[0],l=s[1];Tb(a,u,l);var c=sL(n.data.get(a.dataId).values,u,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,c)}var lL={kernelName:Dv,backendName:"cpu",kernelFunc:uL};var cL={kernelName:Rh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;BO([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),u=LS(a.shape,i,s),l=jS(u.length,i.length),c=PS(a.shape,i,s),f=FS(o,i.length),d=BS(c,o,i.length),h=SD({inputs:{x:a},backend:n,attrs:{shape:u}}),p=jD({inputs:{x:h},backend:n,attrs:{perm:l}}),v=SD({inputs:{x:p},backend:n,attrs:{shape:c}}),m=uL({inputs:{x:v},backend:n,attrs:{begin:f,size:d}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}};function fL(e,t,n,r,a){for(var i=Id(r),o=Qd(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o}function dL(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=Qy([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var l=e.get(s,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?o.set(1,s,l):t.size>0?o.set(o.get(s,l)+t.get(s,u),s,l):o.set(o.get(s,l)+1,s,l))}return o}var hL={kernelName:Mh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=fL(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};var pL={kernelName:Oh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=Eb(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},vL=aD((function(e){return Math.ceil(e)})),mL=GO(Lh,vL),gL={kernelName:Lh,backendName:"cpu",kernelFunc:mL},yL=WO(jh,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),bL={kernelName:jh,backendName:"cpu",kernelFunc:yL},xL={kernelName:Fh,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(Id(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,l=0;l<s.length;l++){var c=s[l],f=u[l];r[l]=Math.hypot(c,f)}return n.makeOutput(r,t.shape,"float32")}};function wL(e,t,n,r){var a=Fd(n,Id(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=Id(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?p_(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,l=0;l<e.shape[1];++l)a[u+l]=r[i++];o+=e.shape[1]}))}return a}function kL(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var SL={kernelName:Tp,backendName:"cpu",kernelFunc:kL};function _L(e){var t=e.inputs,n=e.backend,r=Ld(e.attrs.axis,t[0].shape)[0];RS(t.map((function(e){return e.shape})),r);var a=MS(t.map((function(e){return e.shape})),r);if(0===Id(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return Id(e.shape)>0}));if(1===i.length)return qO({inputs:{x:i[0]},backend:n});if("complex64"===i[0].dtype){var o=i.map((function(e){return dD({inputs:{input:e},backend:n})})),s=i.map((function(e){return kL({inputs:{input:e},backend:n})})),u=_L({inputs:o,backend:n,attrs:{axis:r}}),l=_L({inputs:s,backend:n,attrs:{axis:r}}),c=lD({inputs:{real:u,imag:l},backend:n});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),c}var f=i.map((function(e){var t=Id(e.shape.slice(r));return SD({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),d=f.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=MS(f.map((function(e){return e.shape})),1);var h=1===f[0].shape[0],p=wL(d,a,t[0].dtype,h),v=MS(i.map((function(e){return e.shape})),r),m=n.makeTensorInfo(v,t[0].dtype,p);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}var CL={kernelName:Bh,backendName:"cpu",kernelFunc:_L};function EL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dilations,c=r.dimRoundingMode;BO([a,i],"conv2d");for(var f=fx(u),d=ex(a.shape,i.shape,o,l,s,c,!1,f),h=d.filterHeight,p=d.filterWidth,v=d.dilationHeight,m=d.dilationWidth,g=d.padInfo.left,y=d.padInfo.top,b="channelsLast"===d.dataFormat,x=new ag(d.outShape,a.dtype),w=Xd(a.shape),k=Xd(i.shape),S=w[0],_=b?w[1]:w[2],C=b?w[2]:1,E=b?1:w[1],T=x.strides[0],I=b?x.strides[1]:x.strides[2],A=b?x.strides[2]:1,N=b?1:x.strides[1],R=n.data.get(a.dataId).values,M=n.data.get(i.dataId).values,O=x.values,D=0;D<d.batchSize;++D)for(var L=D*S,j=D*T,P=0;P<d.outHeight;++P)for(var F=j+P*I,B=P*d.strideHeight-y,z=0;z<h;++z){var U=B+z*v;if(!(U<0||U>=d.inHeight))for(var W=z*k[0],G=L+U*_,V=0;V<d.outWidth;++V)for(var H=F+V*A,q=V*d.strideWidth-g,X=0;X<p;++X){var Y=q+X*m;if(!(Y<0||Y>=d.inWidth))for(var K=G+Y*C,Z=W+X*k[1],Q=0;Q<d.inChannels;++Q){for(var $=R[K+Q*E],J=0;J<d.outChannels;++J)O[H+J*N]+=$*M[Z+J];Z+=d.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,O)}var TL={kernelName:zh,backendName:"cpu",kernelFunc:EL};var IL={kernelName:Uh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=r.filterShape;BO([a,i],"conv2dBackpropFilter");for(var f=fx(u),d=ex(a.shape,c,o,1,s,l,!1,f),h=d.strideHeight,p=d.strideWidth,v=d.filterHeight,m=d.filterWidth,g="channelsLast"===d.dataFormat,y=new ag(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,S=new ag(a.shape,a.dtype,w),_=new ag(i.shape,i.dtype,k),C=0;C<v;++C)for(var E=Math.max(0,Math.ceil((x-C)/h)),T=Math.min(d.outHeight,(d.inHeight+x-C)/h),I=0;I<m;++I)for(var A=Math.max(0,Math.ceil((b-I)/p)),N=Math.min(d.outWidth,(d.inWidth+b-I)/p),R=0;R<d.inChannels;++R)for(var M=0;M<d.outChannels;++M){for(var O=0,D=0;D<d.batchSize;++D)for(var L=E;L<T;++L)for(var j=C+L*h-x,P=A;P<N;++P){var F=I+P*p-b;O+=g?S.get(D,j,F,R)*_.get(D,L,P,M):S.get(D,R,j,F)*_.get(D,M,L,P)}y.set(O,C,I,R,M)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var AL={kernelName:Wh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,l=r.dataFormat,c=r.dimRoundingMode;BO([a,i],"conv2dBackpropInput");var f=Xd(i.shape),d=Xd(a.shape),h=fx(l),p=ex(o,i.shape,s,1,u,c,!1,h),v=new ag(p.inShape,"float32"),m=v.values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,b=C(f,3),x=b[0],w=b[1],k=b[2],S=p.batchSize,_=p.filterHeight,E=p.filterWidth,T=p.inChannels,I=p.inHeight,A=p.inWidth,N=p.outChannels,R=p.outHeight,M=p.outWidth,O=p.strideHeight,D=p.strideWidth;h=p.dataFormat;for(var L=_-1-p.padInfo.top,j=E-1-p.padInfo.left,P="channelsLast"===h,F=v.strides[0],B=P?v.strides[1]:v.strides[2],z=P?v.strides[2]:1,U=P?1:v.strides[1],W=d[0],G=P?d[1]:d[2],V=P?d[2]:1,H=P?1:d[1],q=0;q<S;++q)for(var X=0;X<T;++X)for(var Y=0;Y<I;++Y)for(var K=Y-L,Z=Math.max(0,Math.ceil(K/O)),Q=Math.min(R,(_+K)/O),$=0;$<A;++$){for(var J=$-j,ee=Math.max(0,Math.ceil(J/D)),te=Math.min(M,(E+J)/D),ne=0,re=Z;re<Q;++re)for(var ae=re*O-K,ie=ee;ie<te;++ie)for(var oe=W*q+G*re+V*ie,se=x*(_-1-ae)+w*(E-1-(ie*D-J))+k*X,ue=0;ue<N;++ue){ne+=g[oe+H*ue]*y[se+ue]}m[F*q+B*Y+z*$+U*X]=ne}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var NL={kernelName:Gh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations;BO([a,i],"conv3d");for(var l=tx(a.shape,i.shape,o,u,s),c=l.filterDepth,f=l.filterHeight,d=l.filterWidth,h=l.dilationDepth,p=l.dilationHeight,v=l.dilationWidth,m=l.padInfo,g=m.front,y=m.left,b=m.top,x=new ag(l.outShape,a.dtype),w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,S=x.values,_=Xd(a.shape),C=Xd(i.shape),E=0;E<l.batchSize;++E)for(var T=E*_[0],I=E*x.strides[0],A=0;A<l.outDepth;++A)for(var N=I+A*x.strides[1],R=A*l.strideDepth-g,M=0;M<c;++M){var O=R+M*h;if(!(O<0||O>=l.inDepth))for(var D=M*C[0],L=T+O*_[1],j=0;j<l.outHeight;++j)for(var P=N+j*x.strides[2],F=j*l.strideHeight-b,B=0;B<f;++B){var z=F+B*p;if(!(z<0||z>=l.inHeight))for(var U=D+B*C[1],W=L+z*_[2],G=0;G<l.outWidth;++G)for(var V=P+G*l.outChannels,H=G*l.strideWidth-y,q=0;q<d;++q){var X=H+q*v;if(!(X<0||X>=l.inWidth))for(var Y=U+q*C[2],K=W+X*l.inChannels,Z=Y,Q=0;Q<l.inChannels;++Q){for(var $=w[K+Q],J=0;J<l.outChannels;++J)S[V+J]+=$*k[Z+J];Z+=l.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var RL={kernelName:Vh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape;BO([a,i],"conv3dBackpropFilterV2");for(var l=Xd(a.shape),c=Xd(i.shape),f=tx(a.shape,u,o,1,s),d=f.strideDepth,h=f.strideHeight,p=f.strideWidth,v=f.filterDepth,m=f.filterHeight,g=f.filterWidth,y=new ag(f.filterShape,"float32"),b=y.values,x=C(y.strides,4),w=x[0],k=x[1],S=x[2],_=x[3],E=n.data.get(i.dataId).values,T=C(c,4),I=T[0],A=T[1],N=T[2],R=T[3],M=n.data.get(a.dataId).values,O=C(l,4),D=O[0],L=O[1],j=O[2],P=O[3],F=f.padInfo.front,B=f.padInfo.left,z=f.padInfo.top,U=0;U<v;++U)for(var W=Math.max(0,Math.ceil((F-U)/d)),G=Math.min(f.outDepth,(f.inDepth+F-U)/d),V=U*w,H=0;H<m;++H)for(var q=Math.max(0,Math.ceil((z-H)/h)),X=Math.min(f.outHeight,(f.inHeight+z-H)/h),Y=H*k+V,K=0;K<g;++K)for(var Z=Math.max(0,Math.ceil((B-K)/p)),Q=Math.min(f.outWidth,(f.inWidth+B-K)/p),$=K*S+Y,J=0;J<f.inChannels;++J)for(var ee=J*_+$,te=0;te<f.outChannels;++te){for(var ne=0,re=0;re<f.batchSize;++re)for(var ae=re*D,ie=re*I,oe=W;oe<G;++oe)for(var se=(U+oe*d-F)*L+ae,ue=oe*A+ie,le=q;le<X;++le)for(var ce=(H+le*h-z)*j+se,fe=le*N+ue,de=Z;de<Q;++de){var he=de*R+fe;ne+=M[(K+de*p-B)*P+ce+J]*E[he+te]}b[ee+te]=ne}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var ML={kernelName:Hh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape;BO([a],"conv3dBackpropInputV2");for(var l=Xd(a.shape),c=Xd(i.shape),f=tx(u,i.shape,s,1,o),d=new ag(f.inShape,"float32"),h=d.values,p=C(d.strides,4),v=p[0],m=p[1],g=p[2],y=p[3],b=n.data.get(a.dataId).values,x=C(l,4),w=x[0],k=x[1],S=x[2],_=x[3],E=n.data.get(i.dataId).values,T=C(c,4),I=T[0],A=T[1],N=T[2],R=T[3],M=f.batchSize,O=f.filterDepth,D=f.filterHeight,L=f.filterWidth,j=f.inChannels,P=f.inDepth,F=f.inHeight,B=f.inWidth,z=f.outChannels,U=f.outDepth,W=f.outHeight,G=f.outWidth,V=f.strideDepth,H=f.strideHeight,q=f.strideWidth,X=O-1-f.padInfo.front,Y=D-1-f.padInfo.top,K=L-1-f.padInfo.left,Z=0;Z<M;++Z)for(var Q=0;Q<j;++Q)for(var $=0;$<P;++$)for(var J=$-X,ee=Math.max(0,Math.ceil(J/V)),te=Math.min(U,(O+J)/V),ne=0;ne<F;++ne)for(var re=ne-Y,ae=Math.max(0,Math.ceil(re/H)),ie=Math.min(W,(D+re)/H),oe=0;oe<B;++oe){for(var se=oe-K,ue=Math.max(0,Math.ceil(se/q)),le=Math.min(G,(L+se)/q),ce=0,fe=ee;fe<te;++fe)for(var de=fe*V-J,he=ae;he<ie;++he)for(var pe=he*H-re,ve=ue;ve<le;++ve)for(var me=w*Z+k*fe+S*he+_*ve,ge=I*(O-1-de)+A*(D-1-pe)+N*(L-1-(ve*q-se))+R*Q,ye=0;ye<z;++ye){ce+=b[me+ye]*E[ge+ye]}h[v*Z+m*$+g*ne+y*oe+Q]=ce}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},OL=WO(qh,(function(e){return Math.cos(e)})),DL={kernelName:qh,backendName:"cpu",kernelFunc:OL},LL=WO(Xh,(function(e){return Math.cosh(e)})),jL={kernelName:Xh,backendName:"cpu",kernelFunc:LL};var PL={kernelName:Zh,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,l=r.extrapolationValue,c=C(a.shape,4),f=c[0],d=c[1],h=c[2],p=c[3],v=i.shape[0],m=C(s,2),g=m[0],y=m[1],b=Qy([v,g,y,p],"float32"),x=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,k=n.data.get(a.dataId).values,S=Xd(a.shape),_=Xd(b.shape),E=0;E<v;E++){var T=4*E,I=x[T],A=x[T+1],N=x[T+2],R=x[T+3],M=w[E];if(!(M>=f))for(var O=g>1?(N-I)*(d-1)/(g-1):0,D=y>1?(R-A)*(h-1)/(y-1):0,L=0;L<g;L++){var j=g>1?I*(d-1)+L*O:.5*(I+N)*(d-1);if(j<0||j>d-1)for(var P=0;P<y;P++)for(var F=0;F<p;F++){var B=F+P*_[2]+L*_[1]+E*_[0];b.values[B]=l}else if("bilinear"===u)for(var z=Math.floor(j),U=Math.ceil(j),W=j-z,G=0;G<y;G++){var V=y>1?A*(h-1)+G*D:.5*(A+R)*(h-1);if(V<0||V>h-1)for(var H=0;H<p;H++){var q=H+G*_[2]+L*_[1]+E*_[0];b.values[q]=l}else for(var X=Math.floor(V),Y=Math.ceil(V),K=V-X,Z=0;Z<p;Z++){var Q=Z+X*S[2]+z*S[1]+M*S[0],$=k[Q],J=k[Q=Z+Y*S[2]+z*S[1]+M*S[0]],ee=k[Q=Z+X*S[2]+U*S[1]+M*S[0]],te=$+(J-$)*K,ne=ee+(k[Q=Z+Y*S[2]+U*S[1]+M*S[0]]-ee)*K;Q=Z+G*_[2]+L*_[1]+E*_[0],b.values[Q]=te+(ne-te)*W}}else for(var re=0;re<y;++re){var ae=y>1?A*(h-1)+re*D:.5*(A+R)*(h-1);if(ae<0||ae>h-1)for(var ie=0;ie<p;ie++){var oe=ie+re*_[2]+L*_[1]+E*_[0];b.values[oe]=l}else for(var se=Math.round(ae),ue=Math.round(j),le=0;le<p;le++){var ce=le+se*S[2]+ue*S[1]+M*S[0],fe=le+re*_[2]+L*_[1]+E*_[0];b.values[fe]=k[ce]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var FL={kernelName:Yh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;BO(a,"cumprod");var u=vw([i],a.shape.length),l=a;null!=u&&(l=jD({inputs:{x:a},backend:n,attrs:{perm:u}}));var c=gw(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(c));for(var f=mg(l.dtype,"int32"),d=Zd(Id(l.shape),f),h=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],v=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},m=0;m<h.length;m+=p)for(var g=0;g<p;g++){var y=v(m,g);if(0===g)d[y]=o?1:h[y];else{var b=v(m,g-1);d[y]=o?h[b]*d[b]:h[y]*d[b]}}var x=n.makeTensorInfo(l.shape,f,d);if(null!=u){var w=jD({inputs:{x:x},backend:n,attrs:{perm:mw(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(l),w}return x}};var BL={kernelName:Kh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;BO(a,"cumsum");var u=vw([i],a.shape.length),l=a;null!=u&&(l=jD({inputs:{x:a},backend:n,attrs:{perm:u}}));var c=gw(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(c));for(var f=mg(l.dtype,"int32"),d=Qd(Id(l.shape),f),h=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],v=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},m=0;m<h.length;m+=p)for(var g=0;g<p;g++){var y=v(m,g);if(0===g)d[y]=o?0:h[y];else{var b=v(m,g-1);d[y]=o?h[b]+d[b]:h[y]+d[b]}}var x=n.makeTensorInfo(l.shape,f,d);if(null!=u){var w=jD({inputs:{x:x},backend:n,attrs:{perm:mw(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(l),w}return x}};var zL={kernelName:Qh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=fL(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}if(2===a.shape.length){var l=dL(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(l.shape,i.dtype,l.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var UL={kernelName:$h,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;_d("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],l=a.shape[2],c=a.shape[3],f=u*i,d=l*i,h=c/(i*i),p=n.data.get(a.dataId).values,v=new Float32Array(s*f*d*h),m=0,g=0;g<s;++g)for(var y=0;y<f;++y)for(var b=Math.floor(y/i),x=y%i,w=0;w<d;++w)for(var k=Math.floor(w/i),S=(x*i+w%i)*h,_=0;_<h;++_){var C=_+S+c*(k+l*(b+u*g));v[m++]=p[C]}return n.makeTensorInfo([s,f,d,h],a.dtype,v)}};function WL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode;BO([a,i],"depthwiseConv2DNative");var c=Xd(a.shape),f=Xd(i.shape),d=u;null==d&&(d=[1,1]),_d(cx(o,d),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(d,"'")}));for(var h=ex(a.shape,i.shape,o,d,s,l,!0),p=h.filterHeight,v=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,y=h.padInfo,b=y.left,x=y.top,w=h.outChannels/h.inChannels,k=new ag(h.outShape,a.dtype),S=n.data.get(a.dataId).values,_=n.data.get(i.dataId).values,C=k.values,E=0;E<h.batchSize;++E)for(var T=E*c[0],I=E*k.strides[0],A=0;A<h.outHeight;++A)for(var N=I+A*k.strides[1],R=A*h.strideHeight-x,M=0;M<p;++M){var O=R+M*m;if(!(O<0||O>=h.inHeight))for(var D=M*f[0],L=T+O*c[1],j=0;j<h.outWidth;++j)for(var P=N+j*k.strides[2],F=j*h.strideWidth-b,B=0;B<v;++B){var z=F+B*g;if(!(z<0||z>=h.inWidth))for(var U=D+B*f[1],W=L+z*h.inChannels,G=P,V=U,H=0;H<h.inChannels;++H){for(var q=S[W+H],X=0;X<w;++X)C[G+X]+=q*_[V+X];G+=w,V+=w}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}var GL={kernelName:Jh,backendName:"cpu",kernelFunc:WL};var VL={kernelName:ep,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.filterShape;BO([a,i],"depthwiseConv2dNativeBackpropFilter");for(var f=ex(a.shape,c,o,s,u,l,!0),d=f.strideHeight,h=f.strideWidth,p=f.filterHeight,v=f.filterWidth,m=new ag(f.filterShape,"float32"),g=f.padInfo.left,y=f.padInfo.top,b=f.outChannels/f.inChannels,x=n.data.get(a.dataId).values,w=new ag(a.shape,a.dtype,x),k=n.data.get(i.dataId).values,S=new ag(i.shape,i.dtype,k),_=0;_<p;++_)for(var C=Math.max(0,Math.ceil((y-_)/d)),E=Math.min(f.outHeight,(f.inHeight+y-_)/d),T=0;T<v;++T)for(var I=Math.max(0,Math.ceil((g-T)/h)),A=Math.min(f.outWidth,(f.inWidth+g-T)/h),N=0;N<f.outChannels;++N){for(var R=Math.trunc(N/b),M=N%b,O=0,D=0;D<f.batchSize;++D)for(var L=C;L<E;++L)for(var j=_+L*d-y,P=I;P<A;++P){var F=T+P*h-g;O+=w.get(D,j,F,R)*S.get(D,L,P,N)}m.set(O,_,T,R,M)}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var HL={kernelName:tp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.inputShape;BO([a,i],"depthwiseConv2DNativeBackpropInput");for(var f=Xd(a.shape),d=Xd(i.shape),h=ex(c,i.shape,o,s,u,l,!0),p=new ag(h.inShape,"float32"),v=p.values,m=C(p.strides,3),g=m[0],y=m[1],b=m[2],x=n.data.get(a.dataId).values,w=C(f,3),k=w[0],S=w[1],_=w[2],E=n.data.get(i.dataId).values,T=C(d,3),I=T[0],A=T[1],N=T[2],R=h.batchSize,M=h.filterHeight,O=h.filterWidth,D=h.inChannels,L=h.inHeight,j=h.inWidth,P=h.outChannels,F=h.outHeight,B=h.outWidth,z=h.strideHeight,U=h.strideWidth,W=M-1-h.padInfo.top,G=O-1-h.padInfo.left,V=P/D,H=0;H<R;++H)for(var q=0;q<D;++q)for(var X=0;X<L;++X)for(var Y=X-W,K=Math.max(0,Math.ceil(Y/z)),Z=Math.min(F,(M+Y)/z),Q=0;Q<j;++Q){for(var $=Q-G,J=Math.max(0,Math.ceil($/U)),ee=Math.min(B,(O+$)/U),te=0,ne=K;ne<Z;++ne)for(var re=ne*z-Y,ae=J;ae<ee;++ae)for(var ie=k*H+S*ne+_*ae,oe=I*(M-1-re)+A*(O-1-(ae*U-$))+N*q,se=0;se<V;++se){te+=x[ie+(q*V+se)]*E[oe+se]}v[g*H+y*X+b*Q+q]=te}return n.makeTensorInfo(p.shape,p.dtype,p.values)}};var qL={kernelName:np,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=Id(r.shape),i=n.data.get(r.dataId).values,o=Qy([a,a],r.dtype),s=o.values,u=0;u<i.length;u++)s[u*a+u]=i[u];var l=[].concat(f(r.shape),f(r.shape));return n.makeTensorInfo(l,o.dtype,o.values)}},XL={kernelName:rp,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=n,c=l.data.get(a.dataId).values,f=a.shape.length,d=l.data.get(i.dataId).values,h=i.shape.length,p=Qb(a.shape,i.shape,o,s,"NHWC",u),v=p.batchSize,m=p.inHeight,g=p.inWidth,y=p.inChannels,b=p.outHeight,x=p.outWidth,w=p.padInfo,k=p.strideHeight,S=p.strideWidth,_=p.filterHeight,C=p.filterWidth,E=p.dilationHeight,T=p.dilationWidth,I=p.outShape,A=Id(I),N=I.length,R=Fd(a.dtype,A),M=0;M<v;++M)for(var O=0;O<b;++O)for(var D=O*k-w.top,L=0;L<x;++L)for(var j=L*S-w.left,P=0;P<y;++P){for(var F=Number.MIN_SAFE_INTEGER,B=0;B<_;++B){var z=D+B*E;if(z>=0&&z<m)for(var U=0;U<C;++U){var W=j+U*T;if(W>=0&&W<g){var G=eh([M,z,W,P],f,Xd(a.shape)),V=eh([B,U,P],h,Xd(i.shape)),H=c[G]+d[V];H>F&&(F=H)}}}R[eh([M,O,L,P],N,Xd(I))]=F}return{dataId:l.write(Hm(R,a.dtype),I,a.dtype),shape:I,dtype:a.dtype}}},YL={kernelName:ip,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,l=r.dilations,c=n,f=Kd(a.shape,c.data.get(a.dataId).values),d=Kd(i.shape,c.data.get(i.dataId).values),h=Qb(a.shape,i.shape,s,u,"NHWC",l),p=h.batchSize,v=h.inHeight,m=h.inWidth,g=h.inChannels,y=h.outHeight,b=h.outWidth,x=h.padInfo,w=h.strideHeight,k=h.strideWidth,S=h.filterHeight,_=h.filterWidth,C=h.dilationHeight,E=h.dilationWidth,T=h.outShape;_d(o.rank===T.length,(function(){return"Error in ".concat(ip,", dy ")+"must have the same rank as output ".concat(T.length,", but got ")+"".concat(o.rank)}));for(var I=Kd(T,c.data.get(o.dataId).values),A=$d(i.shape,i.dtype),N=0;N<p;++N)for(var R=0;R<y;++R)for(var M=R*w-x.top,O=0;O<b;++O)for(var D=O*k-x.left,L=0;L<g;++L){for(var j=Number.MIN_SAFE_INTEGER,P=0,F=0,B=0;B<S;++B){var z=M+B*C;if(z>=0&&z<v)for(var U=0;U<_;++U){var W=D+U*E;if(W>=0&&W<m){var G=f[N][z][W][L]+d[B][U][L];G>j&&(j=G,P=B,F=U)}}}A[P][F][L]+=I[N][R][O][L]}return{dataId:c.write(Hm(A,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},KL={kernelName:ap,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,l=r.dilations,c=n,f=Kd(a.shape,c.data.get(a.dataId).values),d=Kd(i.shape,c.data.get(i.dataId).values),h=Qb(a.shape,i.shape,s,u,"NHWC",l),p=h.batchSize,v=h.inHeight,m=h.inWidth,g=h.inChannels,y=h.outHeight,b=h.outWidth,x=h.padInfo,w=h.strideHeight,k=h.strideWidth,S=h.filterHeight,_=h.filterWidth,C=h.dilationHeight,E=h.dilationWidth,T=h.outShape;_d(o.rank===T.length,(function(){return"Error in ".concat(ap,", dy ")+"must have the same rank as output ".concat(T.length,", but got ")+"".concat(o.rank)}));for(var I=Kd(T,c.data.get(o.dataId).values),A=$d(a.shape,a.dtype),N=0;N<p;++N)for(var R=0;R<y;++R)for(var M=R*w-x.top,O=0;O<b;++O)for(var D=O*k-x.left,L=0;L<g;++L){for(var j=Number.MIN_SAFE_INTEGER,P=M<0?0:M,F=D<0?0:D,B=0;B<S;++B){var z=M+B*C;if(z>=0&&z<v)for(var U=0;U<_;++U){var W=D+U*E;if(W>=0&&W<m){var G=f[N][z][W][L]+d[B][U][L];G>j&&(j=G,P=z,F=W)}}}A[N][P][F][L]+=I[N][R][O][L]}return{dataId:c.write(Hm(A,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},ZL=ZO((function(e,t){return e*t})),QL=yD((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),$L=gD(tv,ZL,QL),JL={kernelName:tv,backendName:"cpu",kernelFunc:$L};function ej(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims;BO(i,"sum");var u=(t="bool"===i.dtype?vD({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):qO({inputs:{x:i},backend:r})).shape.length,l=Ld(o,t.shape),c=vw(l,u),f=l,d=t;null!=c&&(d=jD({inputs:{x:t},backend:r,attrs:{perm:c}}),f=gw(f.length,u)),pw("sum",f,d.shape.length);for(var h=C(dw(d.shape,f),2),p=h[0],v=h[1],m=fD(r,p,mg(d.dtype,"int32")),g=Id(v),y=r.data.get(m.dataId).values,b=r.data.get(d.dataId).values,x=0;x<y.length;++x){for(var w=x*g,k=0,S=0;S<g;++S)k+=b[w+S];y[x]=k}if(s){var _=m;m=SD({inputs:{x:m},backend:r,attrs:{shape:hw(m.shape,l)}}),r.disposeIntermediateTensorInfo(_)}return r.disposeIntermediateTensorInfo(t),null!=c&&r.disposeIntermediateTensorInfo(d),m}var tj={kernelName:Uv,backendName:"cpu",kernelFunc:ej};var nj={kernelName:sp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=n_(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;a_(i.length,s,r);for(var u=i_(o,s),l=u.path,c=u.steps,f=c.length,d=null,h=i.length,p=[],v=0;v<f;++v){var m,g=E(c[v]);try{for(g.s();!(m=g.n()).done;){var y=m.value,b=r_(h,s[y]),x=b.permutationIndices,w=b.expandDims,k=void 0;o_(x)?k=r[y]:(k=jD({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),p.push(k));for(var S=k.shape.slice(),_=0;_<w.length;++_)S.splice(w[_],0,1);Ad(k.shape,S)||(k=SD({inputs:{x:k},backend:n,attrs:{shape:S}}),p.push(k)),null===d?d=k:(d=$L({inputs:{a:k,b:d},backend:n}),p.push(d))}}catch(cZ){g.e(cZ)}finally{g.f()}v<f-1&&(l[v]>=0&&(d=ej({inputs:{x:d},backend:n,attrs:{axis:l[v]-(i.length-h),keepDims:!1}}),p.push(d)),h--)}for(var C=0,T=p;C<T.length;C++){var I=T[C];I!==d&&n.disposeIntermediateTensorInfo(I)}return d}};var rj={kernelName:lp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;BO([r,a],"eluGrad");for(var i=new Float32Array(Id(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<o.length;++u){var l=o[u];i[u]=l>=1?s[u]:s[u]*(l+1)}return n.makeTensorInfo(a.shape,"float32",i)}},aj=ZO((function(e,t){return e===t?1:0})),ij=gD(fp,aj,null,"bool"),oj={kernelName:fp,backendName:"cpu",kernelFunc:ij},sj=WO(cp,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))})),uj={kernelName:cp,backendName:"cpu",kernelFunc:sj},lj=aD((function(e){return Math.exp(e)})),cj=GO(dp,lj,"float32"),fj={kernelName:dp,backendName:"cpu",kernelFunc:cj};function dj(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(_d(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),SD({inputs:{x:a},backend:n,attrs:{shape:s}})}var hj={kernelName:hp,backendName:"cpu",kernelFunc:dj},pj=aD((function(e){return Math.expm1(e)})),vj=GO(pp,pj),mj={kernelName:pp,backendName:"cpu",kernelFunc:vj},gj=ZO((function(e,t){return e/t})),yj=gD(op,gj),bj={kernelName:op,backendName:"cpu",kernelFunc:yj},xj=ZO((function(e,t){return e-t})),wj=yD((function(e,t,n,r){return{real:e-n,imag:t-r}})),kj=gD(nm,xj,wj),Sj={kernelName:nm,backendName:"cpu",kernelFunc:kj};function _j(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,l=[a,i],c=Id(l),f=Pd("float32",c),d=Pd("float32",c),h=0;h<a;h++){for(var p=uL({inputs:{x:s},backend:n,attrs:{begin:[h,0],size:[1,i]}}),v=uL({inputs:{x:u},backend:n,attrs:{begin:[h,0],size:[1,i]}}),m=lD({inputs:{real:p,imag:v},backend:n}),g=Cj(m,t,n),y=ZS(g.real,g.imag),b=0;b<i;b++){var x=QS(y,b);f[h*i+b]=x.real,d[h*i+b]=x.imag}n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m)}var w=n.makeTensorInfo(l,"float32",f),k=n.makeTensorInfo(l,"float32",d),S=lD({inputs:{real:w,imag:k},backend:n});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(k),S}function Cj(e,t,n){var r=Id(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((g=r)&g-1)){var s=Ej(i,o,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(u,"float32",s.real),c=n.makeTensorInfo(u,"float32",s.imag),f=n.makeTensorInfo([],"float32",Vm(r,"float32")),d=qO({inputs:{x:f},backend:n}),h=bj.kernelFunc({inputs:{a:l,b:f},backend:n}),p=bj.kernelFunc({inputs:{a:c,b:d},backend:n}),v=n.data.get(h.dataId).values,m=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:v,imag:m}}return s}var g,y=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=JS(a*s,t,n),l=QS(e,s);i+=l.real*u.real-l.imag*u.imag,o+=l.real*u.imag+l.imag*u.real}n&&(i/=t,o/=t),$S(r,i,o,a)}return r}(ZS(i,o),r,t);return function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(y)}function Ej(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=ZS(e,t),o=n/2,s=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(i),u=s.real,l=s.imag,c=[u.length],f=a.makeTensorInfo(c,"float32",u),d=a.makeTensorInfo(c,"float32",l),h=lD({inputs:{real:f,imag:d},backend:a}),p=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(i),v=p.real,m=p.imag,g=[v.length],y=a.makeTensorInfo(g,"float32",v),b=a.makeTensorInfo(g,"float32",m),x=lD({inputs:{real:y,imag:b},backend:a}),w=Ej(u,l,o,r,a),k=w.real,S=w.imag,_=[k.length],C=a.makeTensorInfo(_,"float32",k),E=a.makeTensorInfo(_,"float32",S),T=lD({inputs:{real:C,imag:E},backend:a}),I=Ej(v,m,o,r,a),A=I.real,N=I.imag,R=[A.length],M=a.makeTensorInfo(R,"float32",A),O=a.makeTensorInfo(R,"float32",N),D=lD({inputs:{real:M,imag:O},backend:a}),L=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}(n,r),j=[L.real.length],P=a.makeTensorInfo(j,"float32",L.real),F=a.makeTensorInfo(j,"float32",L.imag),B=lD({inputs:{real:P,imag:F},backend:a}),z=$L({inputs:{a:B,b:D},backend:a}),U=wD({inputs:{a:T,b:z},backend:a}),W=kj({inputs:{a:T,b:z},backend:a}),G=dD({inputs:{input:U},backend:a}),V=dD({inputs:{input:W},backend:a}),H=kL({inputs:{input:U},backend:a}),q=kL({inputs:{input:W},backend:a}),X=_L({inputs:[G,V],backend:a,attrs:{axis:0}}),Y=_L({inputs:[H,q],backend:a,attrs:{axis:0}}),K=a.data.get(X.dataId).values,Z=a.data.get(Y.dataId).values;return a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(X),a.disposeIntermediateTensorInfo(Y),{real:K,imag:Z}}var Tj={kernelName:vp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Id(r.shape),i=r.shape[r.shape.length-1],o=SD({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=_j(o,!1,n),u=SD({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}};function Ij(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||Vd(a),o=Fd(i,Id(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var Aj={kernelName:mp,backendName:"cpu",kernelFunc:Ij};var Nj={kernelName:gp,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=Pd(r.dtype,Id(r.shape)),o=C(r.shape,4),s=o[0],u=o[1],l=o[2],c=o[3],f=a.data.get(r.dataId).values,d=0;d<s;d++)for(var h=d*l*u*c,p=0;p<u;p++)for(var v=p*(l*c),m=0;m<l;m++)for(var g=m*c,y=0;y<c;y++){var b=Math.round(l-m-1),x=h+v+g+y,w=f[x];if(b>=0&&b<l)w=f[h+v+b*c+y];i[x]=w}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Rj=aD((function(e){return Math.floor(e)})),Mj=GO(yp,Rj),Oj={kernelName:yp,backendName:"cpu",kernelFunc:Mj},Dj=ZO((function(e,t){return Math.floor(e/t)})),Lj=gD(bp,Dj,null,"int32"),jj={kernelName:bp,backendName:"cpu",kernelFunc:Lj};var Pj={kernelName:mm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dataFormat,f=r.dilations,d=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,v=EL({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d}});if(o){var m=v;if("NCHW"===c&&1===o.shape.length&&1!==o.shape[0]){var g=SD({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=wD({inputs:{a:v,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else v=wD({inputs:{a:v,b:o},backend:n});n.disposeIntermediateTensorInfo(m)}if(h){var y=v;if("NCHW"===c&&"prelu"===h&&1===s.shape.length&&1!==s.shape[0]){var b=SD({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});v=uD(n,v,h,b,p),n.disposeIntermediateTensorInfo(b)}else v=uD(n,v,h,s,p);n.disposeIntermediateTensorInfo(y)}return v}};var Fj={kernelName:gm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dataFormat,f=r.dilations,d=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,v=WL({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d}});if(o){var m=v;v=wD({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(h){var g=v;v=uD(n,v,h,s,p),n.disposeIntermediateTensorInfo(g)}return v}};function Bj(e,t,n,r,a,i,o,s,u){for(var l=Qy([r,i],n),c=0;c<r;c++){for(var d=[],h=0,p=0;p<a;p++){var v=e[c*a+p];h+=v*o[p],d.push(v)}if(h<0||h>=u/i)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(s));for(var m=0;m<i;m++)l.values[c*i+m]=t.get.apply(t,f(t.indexToLoc(h*i+m)))}return l}var zj={kernelName:kp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=Id(r.shape),o=a.shape,s=o[o.length-1],u=C(zS(r,a),4),l=u[0],c=u[1],f=u[2],d=u[3];if(0===c)return n.makeTensorInfo(l,r.dtype,[]);var h=Bj(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,c,s,f,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,h.values)}};function Uj(e,t,n){for(var r=Qy(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var l=e.locToIndex(i);0<=l&&l<e.values.length&&(r.values[a]=e.values[l])}return r}var Wj={kernelName:wp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;BO([a,i],"gatherV2");for(var u=Ld(o,a.shape)[0],l=n.data.get(i.dataId).values,c=a.shape[u],f=function(e){var t=l[e];_d(t<=c-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(c-1,"]")}))},d=0;d<l.length;++d)f(d);var h=s;null==s&&(h=0);var p=Id(i.shape),v=h_(a,i,u,h),m=SD({inputs:{x:a},backend:n,attrs:{shape:[v.batchSize,v.outerSize,v.dimSize,v.sliceSize]}}),g=SD({inputs:{x:i},backend:n,attrs:{shape:[v.batchSize,p/v.batchSize]}}),y=[v.batchSize,v.outerSize,p/v.batchSize,v.sliceSize],b=n.bufferSync(g),x=Uj(n.bufferSync(m),b,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(v.outputShape,x.dtype,x.values)}},Gj=ZO((function(e,t){return e>t?1:0})),Vj=gD(Sp,Gj,null,"bool"),Hj={kernelName:Sp,backendName:"cpu",kernelFunc:Vj},qj=ZO((function(e,t){return e>=t?1:0})),Xj=gD(_p,qj,null,"bool"),Yj={kernelName:_p,backendName:"cpu",kernelFunc:Xj};var Kj={kernelName:Ep,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Id(r.shape),i=r.shape[r.shape.length-1],o=SD({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=_j(o,!0,n),u=SD({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}},Zj=WO(Ip,(function(e){return Number.isFinite(e)?1:0}),"bool"),Qj={kernelName:Ip,backendName:"cpu",kernelFunc:Zj},$j=WO(Ap,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),Jj={kernelName:Ap,backendName:"cpu",kernelFunc:$j},eP=WO(Np,(function(e){return Number.isNaN(e)?1:0}),"bool"),tP={kernelName:Np,backendName:"cpu",kernelFunc:eP},nP=ZO((function(e,t){return e<t?1:0})),rP=gD(Mp,nP,null,"bool"),aP={kernelName:Mp,backendName:"cpu",kernelFunc:rP},iP=ZO((function(e,t){return e<=t?1:0})),oP=gD(Op,iP,null,"bool"),sP={kernelName:Op,backendName:"cpu",kernelFunc:oP};function uP(e,t,n){var r=(t-e)/(n-1),a=Qd(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var lP={kernelName:Dp,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=uP(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},cP=aD((function(e){return Math.log(e)})),fP=GO(Lp,cP),dP={kernelName:Lp,backendName:"cpu",kernelFunc:fP},hP=WO(jp,(function(e){return Math.log1p(e)})),pP={kernelName:jp,backendName:"cpu",kernelFunc:hP},vP=ZO((function(e,t){return e&&t})),mP=gD(Pp,vP,null,"bool"),gP={kernelName:Pp,backendName:"cpu",kernelFunc:mP},yP=WO(Fp,(function(e){return e?0:1}),"bool"),bP={kernelName:Fp,backendName:"cpu",kernelFunc:yP},xP=ZO((function(e,t){return e||t})),wP=gD(Bp,xP,null,"bool"),kP={kernelName:Bp,backendName:"cpu",kernelFunc:wP};var SP={kernelName:zp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta;BO(a,"LRN");var l=a.shape[3],c=l-1,f=n.data.get(a.dataId).values,d=Id(a.shape),h=new Float32Array(d);function p(e){for(var t=e%l,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,c),a=0;n<=r;n++){var o=f[n];a+=o*o}return a}for(var v=0;v<d;v++){var m=p(v),g=f[v]*Math.pow(o+s*m,-u);h[v]=g}return n.makeTensorInfo(a.shape,a.dtype,h)}};var _P={kernelName:Up,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,l=r.alpha,c=r.beta;BO(o,"LRNGrad");for(var f=Id(o.shape),d=o.shape[3],h=n.data.get(o.dataId).values,p=n.data.get(a.dataId).values,v=n.data.get(i.dataId).values,m=new Float32Array(f),g=f,y=0;y<g;y++){for(var b=y%d,x=y-b+Math.max(0,b-s),w=y-b+Math.min(d,b+s+1),k=0,S=x;S<w;S++)k+=Math.pow(p[S],2);k=l*k+u;for(var _=x;_<w;_++){var C=-2*l*c*p[_]*v[y]/k;y===_&&(C+=Math.pow(k,-c)),C*=h[y],m[_]+=C}}return n.makeTensorInfo(o.shape,a.dtype,m)}};function CP(e,t,n,r){for(var a=Pd(r,Id(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var l=e[o+u];(Number.isNaN(l)||l>s)&&(s=l)}a[i]=s}return a}function EP(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=n,u=a.shape,l=u.length,c=Ld(i,u),f=c,d=vw(f,l),h=s.data.get(a.dataId).values;if(null!=d){for(var p=new Array(l),v=0;v<p.length;v++)p[v]=u[d[v]];h=LD(h,u,a.dtype,d,p),f=gw(f.length,l),u=p}BO(a,"max"),pw("max",f,l);var m=C(dw(u,f),2),g=m[0],y=CP(h,Id(m[1]),g,a.dtype),b=s.write(y,g,a.dtype),x=g;o&&(x=p=hw(g,c));return{dataId:b,shape:x,dtype:a.dtype}}var TP={kernelName:Wp,backendName:"cpu",kernelFunc:EP},IP=ZO((function(e,t){return Math.max(e,t)})),AP=gD(Gp,IP),NP={kernelName:Gp,backendName:"cpu",kernelFunc:AP};var RP={kernelName:Vp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;BO(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;_d(cx(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var l,c=$b(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Ad(c.inShape,c.outShape))l=qO({inputs:{x:a},backend:n});else{var f=n.data.get(a.dataId).values,d=Xd(a.shape),h=JD(f,a.shape,a.dtype,d,c,"max");l=n.makeTensorInfo(c.outShape,a.dtype,h.values)}return l}};var MP={kernelName:qp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat;BO(a,"maxPool3d");var c=Jb(a.shape,i,o,1,s,u,l),f=tL(n.data.get(a.dataId).values,a.shape,a.dtype,Xd(a.shape),c,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}};var OP={kernelName:Xp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode;BO([a,i],"maxPool3DGrad");for(var c=Jb(i.shape,o,s,1,u,l),f=function(e,t){for(var n=Qy(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left,v=0;v<t.batchSize;++v)for(var m=0;m<t.inChannels;++m)for(var g=0;g<t.outDepth;++g){for(var y=g*r-d,b=y;b<0;)b+=o;for(var x=Math.min(t.inDepth,l+y),w=0;w<t.outHeight;++w){for(var k=w*a-h,S=k;S<0;)S+=s;for(var _=Math.min(t.inHeight,c+k),C=0;C<t.outWidth;++C){for(var E=C*i-p,T=E;T<0;)T+=u;for(var I=Math.min(t.inWidth,f+E),A=Number.NEGATIVE_INFINITY,N=-1,R=b;R<x;R+=o)for(var M=R-y,O=S;O<_;O+=s)for(var D=O-k,L=T;L<I;L+=u){var j=L-E,P=e.get(v,R,O,L,m);P>=A&&(A=P,N=M*c*f+D*c+j)}n.set(N,v,g,w,C,m)}}}return n}(n.bufferSync(i),c),d=c.strideDepth,h=c.strideHeight,p=c.strideWidth,v=c.dilationDepth,m=c.dilationHeight,g=c.dilationWidth,y=c.effectiveFilterDepth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=y-1-c.padInfo.front,k=x-1-c.padInfo.left,S=b-1-c.padInfo.top,_=Qy(i.shape,"float32"),C=n.bufferSync(a),E=0;E<c.batchSize;++E)for(var T=0;T<c.inChannels;++T)for(var I=0;I<c.inDepth;++I)for(var A=0;A<c.inHeight;++A)for(var N=0;N<c.inWidth;++N){for(var R=I-w,M=A-S,O=N-k,D=0,L=0;L<y;L+=v){var j=(R+L)/d;if(!(j<0||j>=c.outDepth||Math.floor(j)!==j))for(var P=0;P<b;P+=m){var F=(M+P)/h;if(!(F<0||F>=c.outHeight||Math.floor(F)!==F))for(var B=0;B<x;B+=g){var z=(O+B)/p;if(!(z<0||z>=c.outWidth||Math.floor(z)!==z)){var U=y*b*x-1-f.get(E,j,F,z,T)===L*b*x+P*x+B?1:0;if(0!==U)D+=C.get(E,j,F,z,T)*U}}}}_.set(D,E,I,A,N,T)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};var DP={kernelName:Hp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;BO([i,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,l=r.pad,c=r.dimRoundingMode,f=$b(o.shape,s,u,1,l,c),d=n.data.get(o.dataId).values,h=Qy(f.outShape,o.dtype,eL(d,o.shape,o.dtype,f).values),p=f.strideHeight,v=f.strideWidth,m=f.dilationHeight,g=f.dilationWidth,y=f.effectiveFilterHeight,b=f.effectiveFilterWidth,x=b-1-f.padInfo.left,w=y-1-f.padInfo.top,k=Qy(o.shape,"float32"),S=n.data.get(a.dataId).values,_=Qy(a.shape,"float32",S),C=0;C<f.batchSize;++C)for(var E=0;E<f.inChannels;++E)for(var T=0;T<f.inHeight;++T)for(var I=0;I<f.inWidth;++I){for(var A=T-w,N=I-x,R=0,M=0;M<y;M+=m){var O=(A+M)/p;if(!(O<0||O>=f.outHeight||Math.floor(O)!==O))for(var D=0;D<b;D+=g){var L=(N+D)/v;if(!(L<0||L>=f.outWidth||Math.floor(L)!==L)){var j=y*b-1-h.get(C,O,L,E)===M*b+D?1:0;if(0!==j)R+=_.get(C,O,L,E)*j}}}k.set(R,C,T,I,E)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var LP={kernelName:Yp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,l=r;BO(a,"MaxPoolWithArgmax");var c=l.data.get(a.dataId).values,f=$b(a.shape,i,o,[1,1],s),d=function(e,t,n,r,a){var i=JD(e,0,n,Xd(t),a,"max"),o=eL(e,t,n,a,!0,r);return[i.values,o.values]}(c,a.shape,a.dtype,u,f),h=C(d,2),p=h[0],v=h[1],m=l.write(p,f.outShape,a.dtype),g=l.write(v,f.outShape,a.dtype);return[{dataId:m,shape:f.outShape,dtype:a.dtype},{dataId:g,shape:f.outShape,dtype:"int32"}]}};var jP={kernelName:Kp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=Ld(i,a.shape),u=Id(dw(a.shape,s)[1]),l=[],c=n.makeTensorInfo([],"float32",new Float32Array([u]));l.push(c);var f=vD({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});l.push(f);var d=yj({inputs:{a:f,b:c},backend:n});l.push(d);var h=ej({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:o}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),h}};var PP={kernelName:Zp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;BO(a,"min");var s=Ld(i,a.shape),u=s,l=vw(u,a.shape.length),c=a;null!=l&&(c=jD({inputs:{x:a},backend:n,attrs:{perm:l}}),u=gw(u.length,a.shape.length)),pw("min",u,c.shape.length);for(var f=C(dw(c.shape,u),2),d=f[0],h=Id(f[1]),p=Qd(Id(d),c.dtype),v=n.data.get(c.dataId).values,m=0;m<p.length;++m){for(var g=m*h,y=v[g],b=0;b<h;++b){var x=v[g+b];(Number.isNaN(x)||x<y)&&(y=x)}p[m]=y}null!=l&&n.disposeIntermediateTensorInfo(c);var w=n.makeTensorInfo(d,c.dtype,p);if(o){var k=SD({inputs:{x:w},backend:n,attrs:{shape:hw(d,s)}});return n.disposeIntermediateTensorInfo(w),k}return w}},FP=ZO((function(e,t){return Math.min(e,t)})),BP=gD(Qp,FP),zP={kernelName:Qp,backendName:"cpu",kernelFunc:BP};var UP={kernelName:$p,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;BO(a,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),l=i.map((function(e,t){return e[0]+a.shape[t]})),c="reflect"===o?0:1,f=n.data.get(a.dataId).values,d=a.shape.length,h=Xd(a.shape),p=Id(s),v=s.length,m=Xd(s),g=Pd(a.dtype,p),y=0;y<p;y++){for(var b=th(y,v,m),x=0;x<v;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-c:b[x]>=l[x]&&(b[x]=2*(l[x]-1)-b[x]+c);b=b.map((function(e,t){return e-u[t]}));var w=eh(b,d,h);g[y]=f[w]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},WP=ZO((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),GP=gD(Jp,WP),VP={kernelName:Jp,backendName:"cpu",kernelFunc:GP};function HP(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(o," and dim was ").concat(s));var u=Ld([s],a.shape),l=EP({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=hw(l.shape,u),f=SD({inputs:{x:l},backend:n,attrs:{shape:c}}),d=kj({inputs:{a:a,b:f},backend:n}),h=cj({inputs:{x:d},backend:n}),p=ej({inputs:{x:h},backend:n,attrs:{axis:u,keepDims:!1}}),v=SD({inputs:{x:p},backend:n,attrs:{shape:c}}),m=yj({inputs:{a:h,b:v},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}var qP={kernelName:Vv,backendName:"cpu",kernelFunc:HP};var XP={kernelName:ev,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;BO(a,"multinomial");for(var u=s?a:HP({inputs:{logits:a},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],f=n.data.get(u.dataId).values,d=[l,i],h=Qd(Id(d),"int32"),p=0;p<l;++p){var v=p*c,m=new Float32Array(c-1);m[0]=f[v];for(var g=1;g<m.length;++g)m[g]=m[g-1]+f[v+g];for(var y=Iw.alea(o.toString()),b=p*i,x=0;x<i;++x){var w=y();h[b+x]=m.length;for(var k=0;k<m.length;k++)if(w<m[k]){h[b+x]=k;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(d,"int32",h)}};function YP(e,t,n){var r=Vm(-1,n);return ZL([],t,r,e,n)}var KP={kernelName:nv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;BO(r,"neg");var a=C(YP(n.data.get(r.dataId).values,r.shape,r.dtype),2),i=a[0],o=a[1];return n.makeTensorInfo(o,r.dtype,i)}},ZP=Dk;var QP={kernelName:av,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;BO(a,"NonMaxSuppression");var l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,f=ZP(l,c,o,s,u).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},$P=Lk;var JP={kernelName:iv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize;BO(a,"NonMaxSuppressionPadded");var c=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,d=$P(c,f,o,s,u,l),h=d.selectedIndices,p=d.validOutputs;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},eF=jk;var tF={kernelName:ov,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma;BO(a,"NonMaxSuppressionWithScore");var c=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,d=eF(c,f,o,s,u,l),h=d.selectedIndices,p=d.selectedScores;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},nF=ZO((function(e,t){return e!==t?1:0})),rF=gD(rv,nF,null,"bool"),aF={kernelName:rv,backendName:"cpu",kernelFunc:rF};var iF={kernelName:uv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,s=r.onValue,u=r.offValue;BO(a,"oneHot");var l=Id(a.shape),c=new Float32Array(l*o);c.fill(u);for(var d=n.data.get(a.dataId).values,h=0;h<l;++h)d[h]>=0&&d[h]<o&&(c[h*o+d[h]]=s);return n.makeTensorInfo([].concat(f(a.shape),[o]),i,c)}};function oF(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=dD({inputs:{input:r},backend:n}),i=oF({inputs:{x:a},backend:n}),o=kL({inputs:{input:r},backend:n}),s=oF({inputs:{x:o},backend:n}),u=lD({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return Ij({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var sF={kernelName:dm,backendName:"cpu",kernelFunc:oF};var uF={kernelName:sv,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=dD({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=kL({inputs:{input:a},backend:r}),u=oF({inputs:{x:s},backend:r}),l=lD({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}return Ij({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function lF(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return dj({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Cd(a,e.shape,"All tensors passed to stack must have matching shapes"),_d(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=_L({inputs:t.map((function(e){var t=dj({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var cF={kernelName:lv,backendName:"cpu",kernelFunc:lF};var fF={kernelName:cv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;BO(a,"pad");var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),l=n.data.get(a.dataId).values,c=Id(a.shape),f=a.shape.length,d=Xd(a.shape),h=Id(s),p=s.length,v=Xd(s),m=Pd(a.dtype,h);0!==o&&m.fill(o);for(var g=0;g<c;g++){m[eh(th(g,f,d).map((function(e,t){return e+u[t]})),p,v)]=l[g]}return{dataId:n.write(m,s,a.dtype),shape:s,dtype:a.dtype}}},dF=ZO((function(e,t){return Math.pow(e,t)})),hF=gD(fv,dF),pF={kernelName:fv,backendName:"cpu",kernelFunc:hF};function vF(e,t,n,r){for(var a=C(dw(e,r),2),i=a[0],o=a[1],s=mg(t,"int32"),u=Qd(Id(i),s),l=Id(o),c=0;c<u.length;++c){for(var f=c*l,d=1,h=0;h<l;++h)d*=n[f+h];u[c]=d}return{outVals:u,outShape:i,outDtype:s}}var mF={kernelName:hv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;BO(a,"prod");var s=a.shape.length,u=Ld(i,a.shape),l=vw(u,s),c=u,f=a,d=[];null!=l&&(f=jD({inputs:{x:a},backend:n,attrs:{perm:l}}),d.push(f),c=gw(c.length,s));var h=n.data.get(f.dataId).values,p=vF(f.shape,f.dtype,h,c),v=p.outVals,m=p.outShape,g=p.outDtype,y=m;return o&&(y=hw(m,u)),d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,g,v)}};function gF(e,t,n,r){var a=[],i=0,o=t.length-1+n.length,s=new Array(o).fill(null).map((function(){return[0]}));!function(e,t){for(var n=0;n<e.length;++n){var r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(var i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);for(var u=1,l=0;l<t.length-1;++l){u*=t[l];for(var c=t[l+1],f=1;f<u+1;++f)s[l].push(f*c)}for(var d=0;d<e.length;++d){for(var h=e[d],p=e[d]+1,v=0;v<n.length;++v){var m=n[v],g=v+t.length-1;if(g>=0)for(var y=s[g],b=y[y.length-1]-m[h],x=h;x<p;++x)s[g].push(m[x+1]+b);h=m[h],p=m[p]}p!==h&&(a.push([h,p]),i+=p-h)}return{outSplits:s,valueSlices:a,numValues:i}}function yF(e,t){for(var n=e.slice(0,t);n.length<t;)n.push(1);for(var r=t;r<e.length;r++)n[t-1]*=e[r];return n}function bF(e,t,n,r,a){var i=t.slice();i[0]=a;var o=Fd(n,Id(i)),s=e.length;return function(e,t,n,r,a,i){var o,s=yF(t,2)[1],u=yF(i,2)[1],l=0,c=E(n);try{for(c.s();!(o=c.n()).done;)for(var f=o.value,d=f[0];d<f[1];++d){for(var h=0;h<r;++h)a[l*u+h]=e[d*s+h];++l}}catch(cZ){c.e(cZ)}finally{c.f()}}(e,t,r,0===s?0:s/t[0],o,i),[o,i]}function xF(e,t,n,r,a,i,o,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((function(e,r){if(e<0||e>=n){var a=th(r,t.length,Xd(t)).join(",");throw new Error("indices[".concat(a,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(i,o,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");var u=gF(i,o,e,r[0]),l=u.outSplits,c=u.valueSlices,f=u.numValues,d=function(e){for(var t=[],n=function(n){var r=Fd("int32",e[n].length);t.push(r),e[n].forEach((function(e,t){return r[t]=e}))},r=0;r<e.length;++r)n(r);return t}(l),h=bF(n,r,a,c,f);return[d,h[0],h[1]]}var wF={kernelName:pv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices,s=(r.outputRaggedRank,a.map((function(e){return n.data.get(e.dataId).values}))),u=a.map((function(e){return e.shape})),l=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,f=C(xF(s,u,l,i.shape,i.dtype,c,o.shape),3),d=f[0],h=f[1],p=f[2],v=d.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),m=n.makeTensorInfo(p,i.dtype,h);return v.concat([m])}},kF=2147483647;function SF(e,t,n,r,a,i,o){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");var s=0===t.length,u=0===a.length,l=0===o.length,c=[];s||c.push(t[0]),u||c.push(a[0]),l||c.push(o[0]);for(var f=1;f<c.length;++f)if(c[f]!==c[f-1])throw new Error("starts, limits, and deltas must have the same shape");var d=0===c.length?1:c[0],h=Fd("int32",d+1);h[0]=0;for(var p=0;p<d;++p){var v=s?e[0]:e[p],m=u?r[0]:r[p],g=l?i[0]:i[p];if(0===g)throw new Error("Requires delta != 0");var y=void 0;if(g>0&&m<v||g<0&&m>v)y=0;else if((y=Math.ceil(Math.abs((m-v)/g)))>kF)throw new Error("Requires ((limit - start) / delta) <= ".concat(kF));h[p+1]=h[p]+y}for(var b=Fd(n,h[d]),x=0,w=0;w<d;++w)for(var k=h[w+1]-h[w],S=s?e[0]:e[w],_=l?i[0]:i[w],C=0;C<k;++C)b[x++]=S,S+=_;return[h,b]}var _F={kernelName:vv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,i=t.deltas,o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=C(SF(o,r.shape,r.dtype,s,a.shape,u,i.shape),2),c=l[0],f=l[1];return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([f.length],r.dtype,f)]}},CF=ES,EF=function(){function e(t,n,r,a,i,o,s,u,l,c){var f;d(this,e),this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=function(e){var t,n={FIRST_DIM_SIZE:ES.FIRST_DIM_SIZE,VALUE_ROWIDS:ES.VALUE_ROWIDS,ROW_LENGTHS:ES.ROW_LENGTHS,ROW_SPLITS:ES.ROW_SPLITS,ROW_LIMITS:ES.ROW_LIMITS,ROW_STARTS:ES.ROW_STARTS},r=[],a=E(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(!(i in n))break;r.push(n[i])}}catch(cZ){a.e(cZ)}finally{a.f()}return r}(c),this.raggedRank=0===(f=this.rowPartitionTypes).length?0:f[0]===ES.FIRST_DIM_SIZE?f.length-1:f.length}return p(e,[{key:"getRowPartitionTypeByDimension",value:function(e){return this.rowPartitionTypes[0]===CF.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}},{key:"getRowPartitionTensor",value:function(e){return this.rowPartitionTypes[0]===CF.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}},{key:"getMaxWidth",value:function(t){var n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case CF.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case CF.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(CF[this.getRowPartitionTypeByDimension(t-1)]))}}},{key:"tensorShapeFromTensor",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return IF(e,n)}},{key:"calculateOutputSize",value:function(e){var t=this.valuesShape;!function(e,t){if(null!=e&&null!=t){var n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(var a=0;a<Math.min(n,r-1);++a){var i=e[a],o=t[a+1];if(i>=0&&o>=0&&1!==i&&i!==o)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(i," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(o))}}}(this.defaultValueShape,t);var n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=function(e,t,n){var r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(var a=1;a<n.length;++a){var i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(i," but shape[").concat(a+e,"] = ").concat(s))}else r[o]=i}return r}(this.raggedRank,n,t),a=r;a[0]<0&&(a[0]=e);for(var i=1;i<=this.raggedRank;++i)a[i]<0&&(a[i]=this.getMaxWidth(i));return a}},{key:"calculateFirstParentOutputIndex",value:function(e,t,n){for(var r=Math.min(e,n),a=[],i=0,o=0;o<r;++o,i+=t)a.push(i);for(var s=r;s<e;++s)a.push(-1);return _d(a.length===e,(function(){return"Final length of result must be equal to firstDimension."})),a}},{key:"calculateOutputIndexRowSplit",value:function(e,t,n,r){for(var a=e.length,i=[],o=0;o<a-1;++o){var s=e[o+1]-e[o],u=Math.min(r,s),l=t[o];-1===l&&(u=0);for(var c=0;c<u;++c)i.push(l),l+=n;for(var f=0;f<s-u;++f)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}},{key:"calculateOutputIndexValueRowID",value:function(e,t,n,r){var a=e.length,i=[];if(0===a)return[];var o=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));var u=t[s];i.push(u);for(var l=1;l<a;++l){var c=e[l];if(c===s)u>=0&&(++o<r?u+=n:u=-1);else{if(o=0,s=c,c>=t.length)throw new Error("Got nextValueRowId=".concat(c," which is not less than ").concat(t.length));u=t[c]}i.push(u)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}},{key:"calculateOutputIndex",value:function(e,t,n,r){var a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case CF.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case CF.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(CF[i]))}}},{key:"getFirstDimensionSize",value:function(){var e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");var t=this.rowPartitionTypes[0];switch(t){case CF.FIRST_DIM_SIZE:return e[0];case CF.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case CF.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(CF[t]))}}},{key:"compute",value:function(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");var e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(var r=n.length-2;r>=0;--r)n[r]=n[r+1]*t[r+1];var a=IF(t,!1),i=Fd(this.valuesDType,Id(a));if(n[0]*t[0]>0){for(var o=this.calculateFirstParentOutputIndex(e,n[0],t[0]),s=1;s<=this.raggedRank;++s){o=this.calculateOutputIndex(s-1,o,n[s],t[s])}this.setOutput(this.raggedRank,o,i,a)}return[a,i]}},{key:"setOutput",value:function(e,t,n,r){if(0!==n.length){var a=this.values,i=n,o=r.slice(),s=Id(o=o.slice(e+1)),u=t.length,l=this.defaultValue;if(l.length!==s&&1!==l.length){var c=this.defaultValueShape;Bb((function(){var e=hx(l,c),t=xx(e,o);l=t.dataSync()}))}for(var f=0,d=0,h=0,p=0;p<=u;++p){var v=p<u?t[p]:-1;if(v!==h){if(d<h){var m=a.subarray(f*s);TF(i.subarray(d*s),m,(h-d)*s)}if(p>=u){var g=n.length;v=Math.floor(g/s)}if(v>h)if(1===this.defaultValue.length)i.subarray(h*s,v*s).fill(this.defaultValue[0]),h=v;else for(;v>h;){TF(i.slice(h*s),l,s),++h}v<0?(f=p+1,d=h):(f=p,h=(d=h)+1)}else++h}}}}],[{key:"getMaxWidthRowSplit",value:function(e){var t=e.length;if(0===t||1===t)return 0;for(var n=0,r=0;r<t-1;++r){var a=e[r+1]-e[r];a>n&&(n=a)}return n}},{key:"getMaxWidthValueRowID",value:function(e){var t=e.length;if(0===t)return 0;for(var n=0,r=e[0],a=0,i=1;i<t;++i){var o=e[i];o!==r&&(r=o,a=Math.max(i-n,a),n=i)}return Math.max(t-n,a)}}]),e}();function TF(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function IF(e,t){var n,r=[],a=E(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i<0){if(!t)throw new Error("Dimension ".concat(i," must be >= 0"));if(i<-1)throw new Error("Dimension ".concat(i," must be >= -1"));i=-1}r.push(i)}}catch(cZ){a.e(cZ)}finally{a.f()}return r}function AF(e,t,n,r,a,i,o,s,u,l){return new EF(e,t,n,r,a,i,o,s,u,l).compute()}var NF={kernelName:mv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,f=n.data.get(o.dataId).values,d=s.map((function(e){return n.data.get(e.dataId).values})),h=s.map((function(e){return e.shape})),p=C(AF(l,a.shape,c,i.shape,i.dtype,f,o.shape,d,h,u),2),v=p[0],m=p[1];return n.makeTensorInfo(v,i.dtype,m)}};function RF(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Qd(0,r);var a=Qd(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return a}var MF={kernelName:gv,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=RF(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},OF=WO(bv,(function(e){return 1/e})),DF={kernelName:bv,backendName:"cpu",kernelFunc:OF};var LF={kernelName:_v,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;BO(a,"resizeBilinear");for(var u=Xd(a.shape),l=C(s,2),c=l[0],f=l[1],d=C(a.shape,4),h=d[0],p=d[1],v=d[2],m=d[3],g=n.data.get(a.dataId).values,y=new Float32Array(Id([h,c,f,m])),b=[i&&c>1?p-1:p,i&&f>1?v-1:v],x=[i&&c>1?c-1:c,i&&f>1?f-1:f],w=0,k=b[0]/x[0],S=b[1]/x[1],_=0;_<h;_++)for(var E=0;E<c;E++){var T=void 0;T=o?k*(E+.5)-.5:k*E;for(var I=Math.max(0,Math.floor(T)),A=T-I,N=Math.min(p-1,Math.ceil(T)),R=_*u[0]+I*u[1],M=_*u[0]+N*u[1],O=0;O<f;O++){var D=void 0;D=o?S*(O+.5)-.5:S*O;for(var L=Math.max(0,Math.floor(D)),j=D-L,P=Math.min(v-1,Math.ceil(D)),F=R+L*u[2],B=M+L*u[2],z=R+P*u[2],U=M+P*u[2],W=0;W<m;W++){var G=g[F+W],V=g[B+W],H=G+(g[z+W]-G)*j,q=H+(V+(g[U+W]-V)*j-H)*A;y[w++]=q}}}return n.makeTensorInfo([h,c,f,m],"float32",y)}};var jF={kernelName:Cv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;BO([i,a],"resizeBilinearGrad");for(var s=Xd(a.shape),u=C(a.shape,4),l=u[0],c=u[1],f=u[2],d=u[3],h=C(i.shape,3),p=h[1],v=h[2],m=new Float32Array(l*c*f*d),g=[o&&p>1?c-1:c,o&&v>1?f-1:f],y=[o&&p>1?p-1:p,o&&v>1?v-1:v],b=g[0]/y[0],x=g[1]/y[1],w=n.data.get(i.dataId).values,k=0,S=0;S<l;S++)for(var _=S*s[0],E=0;E<p;E++)for(var T=E*b,I=Math.floor(T),A=Math.min(Math.ceil(T),c-1),N=_+I*s[1],R=_+A*s[1],M=T-I,O=1-M,D=0;D<v;D++)for(var L=D*x,j=Math.floor(L),P=Math.min(Math.ceil(L),f-1),F=L-j,B=1-F,z=N+j*s[2],U=N+P*s[2],W=R+j*s[2],G=R+P*s[2],V=O*B,H=O*F,q=M*B,X=M*F,Y=0;Y<d;Y++){var K=w[k++];m[z+Y]+=K*V,m[U+Y]+=K*H,m[W+Y]+=K*q,m[G+Y]+=K*X}return n.makeTensorInfo([l,f,c,d],"float32",m)}};var PF={kernelName:kv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;BO(a,"resizeNearestNeighbor");for(var u=Xd(a.shape),l=C(s,2),c=l[0],f=l[1],d=C(a.shape,4),h=d[0],p=d[1],v=d[2],m=d[3],g=n.data.get(a.dataId).values,y=new Float32Array(h*c*f*m),b=[i&&c>1?p-1:p,i&&f>1?v-1:v],x=[i&&c>1?c-1:c,i&&f>1?f-1:f],w=b[0]/x[0],k=b[1]/x[1],S=0,_=0;_<h;_++)for(var E=_*u[0],T=0;T<c;T++){var I=o?w*(T+.5):w*T,A=Math.min(p-1,i?Math.round(I):Math.floor(I));o&&(A=Math.max(0,A));for(var N=E+A*u[1],R=0;R<f;R++){var M=o?k*(R+.5):k*R,O=Math.min(v-1,i?Math.round(M):Math.floor(M));o&&(O=Math.max(0,O));for(var D=N+O*u[2],L=0;L<m;L++){var j=g[D+L];y[S++]=j}}}return n.makeTensorInfo([h,c,f,m],a.dtype,y)}};var FF={kernelName:Sv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;BO([i,a],"resizeNearestNeighborGrad");for(var s=Xd(a.shape),u=Xd(i.shape),l=C(a.shape,4),c=l[0],f=l[1],d=l[2],h=l[3],p=C(i.shape,3),v=p[1],m=p[2],g=new Float32Array(c*f*d*h),y=n.data.get(i.dataId).values,b=[o&&v>1?f-1:f,o&&m>1?d-1:d],x=[o&&v>1?v-1:v,o&&m>1?m-1:m],w=b[0]/x[0],k=b[1]/x[1],S=1/w,_=1/k,E=2*Math.ceil(S)+2,T=2*Math.ceil(_)+2,I=0;I<c;I++)for(var A=I*s[0],N=0;N<f;N++)for(var R=A+N*s[1],M=Math.floor(N*S),O=Math.floor(M-E/2),D=0;D<d;D++)for(var L=R+D*s[2],j=Math.floor(D*_),P=Math.floor(j-T/2),F=0;F<h;F++){for(var B=0,z=0;z<E;z++){var U=z+O;if(!(U<0||U>=v)){var W=A+U*u[1],G=U*w;if(N===Math.min(f-1,o?Math.round(G):Math.floor(G)))for(var V=0;V<T;V++){var H=V+P;if(!(H<0||H>=m)){var q=W+H*u[2],X=H*k;D===Math.min(d-1,o?Math.round(X):Math.floor(X))&&(B+=y[q+F])}}}}g[L+F]=B}return n.makeTensorInfo(a.shape,a.dtype,g)}};var BF={kernelName:Tv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;BO(a,"reverse");var o=a.shape.length,s=Ld(i,a.shape);if(0===o)return qO({inputs:{x:a},backend:n});for(var u=new ag(a.shape,a.dtype),l=n.bufferSync(a),c=function(e){var t=u.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[l.get.apply(l,f(n))].concat(f(t)))},d=0;d<u.size;d++)c(d);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},zF={kernelName:pm,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,l=Pd(a.dtype,Id(a.shape)),c=C(a.shape,4),f=c[0],d=c[1],h=c[2],p=c[3],v=C(DS(s,d,h),2),m=v[0],g=v[1],y=Math.sin(i),b=Math.cos(i),x=u.data.get(a.dataId).values,w=0;w<f;w++)for(var k=w*h*d*p,S=0;S<d;S++)for(var _=S*(h*p),E=0;E<h;E++)for(var T=E*p,I=0;I<p;I++){var A=[f,S,E,I],N=A[2],R=A[1],M=(N-m)*b-(R-g)*y,O=(N-m)*y+(R-g)*b;M=Math.round(M+m),O=Math.round(O+g);var D=o;if("number"!==typeof o&&(D=3===I?255:o[I]),M>=0&&M<h&&O>=0&&O<d)D=x[k+O*(h*p)+M*p+I];l[k+_+T+I]=D}return{dataId:u.write(l,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},UF=WO(Iv,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),WF={kernelName:Iv,backendName:"cpu",kernelFunc:UF},GF=aD((function(e){return 1/Math.sqrt(e)})),VF=GO(Av,GF),HF={kernelName:Av,backendName:"cpu",kernelFunc:VF};function qF(e,t,n,r,a,i,o,s,u,l){var c=[r/a,a],f=e.values,d=t.values;if(0===r)return Qy(n,t.dtype);var h=Qy(c,t.dtype);"string"===typeof u||"number"===typeof u?h.values.fill(u):"boolean"===typeof u&&h.values.fill(+u);for(var p=0;p<i;p++){for(var v=[],m=0,g=0;g<o;g++){var y=f[p*o+g];v.push(y),m+=y*s[g]}if(m<0||m>=r/a)throw new Error("Invalid indices: ".concat(v," does not index into ").concat(n));for(var b=0;b<a;b++)l?h.values[m*a+b]+=d[p*a+b]:h.values[m*a+b]=0===t.rank?d[0]:d[p*a+b]}return h}var XF={kernelName:Nv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=US(0,a,o),u=s.sliceRank,l=s.numUpdates,c=s.sliceSize,f=s.strides,d=s.outputSize,h=qF(n.bufferSync(a),n.bufferSync(i),o,d,c,l,u,f,0,!0);return n.makeTensorInfo(o,h.dtype,h.values)}};function YF(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function KF(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var ZF={kernelName:Rv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=function(e,t,n,r,a,i){for(var o=Fd("int32",n*a),s=0;s<n;++s)for(var u=e.slice(s*r,(s+1)*r),l=s*a,c=0;c<a;++c)o[l+c]="left"===i?YF(u,t[c+l]):KF(u,t[c+l]);return o}(n.data.get(a.dataId).values,n.data.get(i.dataId).values,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",s)}};var QF={kernelName:Mv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;BO([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=mg(a.dtype,i.dtype),f=Qd(Id(a.shape),c),d=0,h=0===o||o>1||1===a.shape.length?1:Id(a.shape.slice(1)),p=0;p<s.length;p++)for(var v=0;v<h;v++)1===s[p]?f[d++]=u[p]:f[d++]=l[p];return n.makeTensorInfo(a.shape,c,f)}},$F=WO(Ov,(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)})),JF={kernelName:Ov,backendName:"cpu",kernelFunc:$F},eB=WO(Pv,(function(e){return e<0?-1:e>0?1:0})),tB={kernelName:Pv,backendName:"cpu",kernelFunc:eB},nB=WO(Lv,(function(e){return Math.sin(e)})),rB={kernelName:Lv,backendName:"cpu",kernelFunc:nB},aB=WO(jv,(function(e){return Math.sinh(e)})),iB={kernelName:jv,backendName:"cpu",kernelFunc:aB},oB=Math.log(1.1920928955078125e-7)+2,sB=WO(Bv,(function(e){var t=e>-oB,n=e<oB,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),uB={kernelName:Bv,backendName:"cpu",kernelFunc:sB};var lB={kernelName:Wv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;BO([a],"spaceToBatchND");var s=Id(i),u=[[0,0]];u.push.apply(u,f(o));for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=fF.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=LS(c.shape,i,s,!1),h=jS(d.length,i.length,!1),p=PS(c.shape,i,s,!1),v=SD({inputs:{x:c},backend:n,attrs:{shape:d}}),m=jD({inputs:{x:v},backend:n,attrs:{perm:h}}),g=SD({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),g}};function cB(e,t,n,r,a,i,o){var s=t[0],u=i[0],l=new Array(u),c=new Array(s),f=t[1];if(0===u){if(0!==s)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(s));return[Fd(n,0),[0,f],Fd(a,0),l,c]}for(var d=!0,h=0,p=new Array(u).fill(0),v=0;v<s;++v){var m=e[v*f];if(m<0)throw new Error(l_(v,m));if(m>=u)throw new Error(c_(v,m,u));++p[m],d=d&&m>=h,h=m}for(var g=!0,y=0;y<u;++y){var b=0===p[y];l[y]=b,g=g&&!b,p[y]=Math.max(p[y],1),y>0&&(p[y]+=p[y-1])}if(g&&d){for(var x=e,w=r,k=0;k<s;++k)c[k]=k;return[x,[s,f],w,l,c]}for(var S=p[u-1],_=Fd(n,S*f),C=Fd(a,S),E=new Array(u).fill(0),T=0;T<s;++T){var I=e[T*f],A=E[I],N=(0===I?0:p[I-1])+A;E[I]++;for(var R=0;R<f;++R)_[N*f+R]=e[T*f+R];C[N]=r[T],c[T]=N}for(var M=0;M<u;++M){if(0===E[M]){var O=0===M?0:p[M-1];_[O*f+0]=M;for(var D=1;D<f;++D)_[O*f+D]=0;C[O]=o}}return[_,[S,f],C,l,c]}var fB={kernelName:Hv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],f=C(cB(s,r.shape,r.dtype,u,a.dtype,l,c),5),d=f[0],h=f[1],p=f[2],v=f[3],m=f[4];return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],a.dtype,p),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};function dB(e,t,n,r,a){for(var i,o,s=Id(r),u=t[0],l=a.length,c=[],f=1,d=-1,h=0;h<l;++h){var p=a[h];if(-1===p){if(-1!==d)throw new Error((o=h,"only one output dimension may be -1, not both ".concat(d," and ").concat(o)));d=h,c.push(1)}else{if(p<0)throw new Error((i=p,"size ".concat(h," must be non-negative, not ").concat(i)));f*=p,c.push(p)}}if(-1!==d){if(f<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var v=Math.trunc(s/f);if(f*v!==s)throw new Error(function(e,t){var n=Id(e),r=Id(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}(r,c));c[d]=v}if(Id(c)!==s)throw new Error(function(e,t){var n=Id(e),r=Id(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}(r,c));var m=r.length,g=[];if(m>0){g[m-1]=1;for(var y=m-2;y>=0;--y)g[y]=g[y+1]*r[y+1]}var b=[];if(l>0){b[l-1]=1;for(var x=l-2;x>=0;--x)b[x]=b[x+1]*c[x+1]}for(var w=Fd(n,u*l),k=0;k<u;++k){for(var S=0,_=0;_<m;++_)S+=e[k*m+_]*g[_];for(var C=0;C<l;++C)w[k*l+C]=Math.trunc(S/b[C]),S%=b[C]}return[w,[u,l],c]}var hB={kernelName:qv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(i.dataId).values),l=C(dB(s,r.shape,r.dtype,o,u),3),c=l[0],f=l[1],d=l[2];return[n.makeTensorInfo(f,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}};function pB(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],l=u[1],c=s>0?a[s-1]+1:0,f=c;if(f<0)throw new Error("segment ids must be >= 0");var d=t.slice();d[0]=f;var h=d.reduce((function(e,t){return e*t}),1),p=Fd(n,h);if(0===s)return f>0&&p.fill(o),[p,d];if(f<=0)throw new Error("segment ids must be >= 0");for(var v=0,m=1,g=0,y=a[v];;){var b=0;if(m<s){if(y===(b=a[m])){++m;continue}if(y>=b)throw new Error("segment ids are not increasing")}if(y<0||y>=f)throw new Error(f_(y,f));y>g&&p.fill(o,g*l,y*l);for(var x=v;x<m;++x){var w=r[x];if(w<0||w>=u[0])throw new Error(d_(x,r[x],u[0]));for(var k=0;k<l;k++)p[y*l+k]+=e[w*l+k]}if(i)for(var S=0;S<l;S++)p[y*l+S]/=m-v;if(v=m,g=y+1,y=b,++m>s)break}return g<f&&p.fill(o,g*l,f*l),[p,d]}var vB={kernelName:Xv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=C(pB(o,r.shape,r.dtype,s,u,!0),2),c=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,c)}};var mB={kernelName:Yv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=C(pB(o,r.shape,r.dtype,s,u),2),c=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,c)}};var gB={kernelName:Kv,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.sparseIndices,o=n.sparseValues,s=n.defaultValue,u=a.outputShape,l=US(0,i,u),c=l.sliceRank,f=l.numUpdates,d=l.sliceSize,h=l.strides,p=l.outputSize,v=!1,m=r.bufferSync(i);switch(o.dtype){case"bool":t=qF(m,r.bufferSync(o),u,p,d,f,c,h,Boolean(r.data.get(s.dataId).values[0]),v);break;case"float32":t=qF(m,r.bufferSync(o),u,p,d,f,c,h,r.data.get(s.dataId).values[0],v);break;case"int32":t=qF(m,r.bufferSync(o),u,p,d,f,c,h,r.data.get(s.dataId).values[0],v);break;case"string":t=qF(m,r.bufferSync(o),u,p,d,f,c,h,Ym(r.data.get(s.dataId).values[0]),v);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return r.makeTensorInfo(u,t.dtype,t.values)}};var yB={kernelName:Gv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=Ld(r.axis,a.shape)[0],s=u_(a,i,o),u=new Array(a.shape.length).fill(0),l=a.shape.slice();return s.map((function(e){var t=f(l);t[o]=e;var r=uL({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r}))}},bB=aD((function(e){return Math.sqrt(e)})),xB=WO(zv,(function(e){return Math.sqrt(e)})),wB={kernelName:zv,backendName:"cpu",kernelFunc:xB},kB={kernelName:Qv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;BO(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},SB=ZO((function(e,t){var n=e-t;return n*n})),_B=gD(Zv,SB),CB={kernelName:Zv,backendName:"cpu",kernelFunc:_B},EB=WO(hm,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),TB={kernelName:hm,backendName:"cpu",kernelFunc:EB};function IB(e,t,n,r){for(var a=Qy(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat(f(o)))}return a}var AB={kernelName:$v,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,l=r.endMask,c=r.ellipsisMask,f=r.newAxisMask,d=r.shrinkAxisMask;BO(a,"stridedSlice");var h,p=Mb(a.shape,i,o,s,u,l,c,f,d),v=p.finalShapeSparse,m=p.finalShape,g=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,w=p.end,k=p.strides;if(g)h=SD({inputs:{x:a},backend:n,attrs:{shape:m}});else if(y||b){_d(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var S=Ib(x,w,k),_=uL({inputs:{x:a},backend:n,attrs:{begin:x,size:S}});h=SD({inputs:{x:_},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(_)}else{var C=IB(v,n.bufferSync(a),k,x);h=n.makeTensorInfo(m,C.dtype,C.values)}return h}},NB=function(){function e(t,n,r,a,i,o){d(this,e),this.separator=Xm(t),this.nGramWidths=n,this.leftPad=Xm(r),this.rightPad=Xm(a),this.padWidth=i,this.preserveShort=o}return p(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(s){var u=o.getPadWidth(i),l=Math.max(0,u-s),c=Math.max(0,u-(a-(s+1))),f=i-(l+c),d=t+(l>0?0:s-u),h=0;h+=l*o.leftPad.length;for(var p=0;p<f;++p)h+=e[d+p].length;h+=c*o.rightPad.length,h+=(l+c+f-1)*o.separator.length,n[r+s]=new Uint8Array(h);for(var v=n[r+s],m=0,g=function(e){return e.forEach((function(e){return v[m++]=e}))},y=0;y<l;++y)g(o.leftPad),g(o.separator);for(var b=0;b<f-1;++b)g(e[d+b]),g(o.separator);if(f>0){g(e[d+f-1]);for(var x=0;x<c;++x)g(o.separator),g(o.rightPad)}else{for(var w=0;w<c-1;++w)g(o.rightPad),g(o.separator);g(o.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=a-1,l=Fd("int32",a);if(0===r||0===a){for(var c=new Array(r),f=0;f<=u;++f)l[f]=0;return[c,l]}l[0]=0;for(var d=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),l[e]=l[e-1]+a},h=1;h<=u;++h)d(h);for(var p=new Array(l[u]),v=function(r){var a=t[r],i=l[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,p,i,u,o),i+=u})),n.preserveShort&&i===l[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,p,i,1,s)}},m=0;m<u;++m)v(m);return[p,l]}}]),e}();function RB(e,t,n,r,a,i,o,s){return new NB(n,r,a,i,o,s).compute(e,t)}var MB={kernelName:Jv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,l=r.preserveShortSequences,c=t.data,f=t.dataSplits,d=C(RB(n.data.get(c.dataId).values,n.data.get(f.dataId).values,a,i,o,s,u,l),2),h=d[0],p=d[1];return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(f.shape,"int32",p)]}};function OB(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var l=e.subarray(0,u);n&&0===l.length||r.push(l),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var c=0;c<e.length;++c)r.push(e.subarray(c,c+1))}function DB(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var l=a.length;OB(e[u],t,n,a);var c=a.length-l;s[u]=c,i+=c,o=Math.max(o,c)}for(var f=Fd("int32",2*i),d=new Array(i),h=[r,o],p=0,v=0;v<r;++v)for(var m=0;m<s[v];++m)f[2*p]=v,f[2*p+1]=m,d[p]=a[p],++p;return[f,d,h]}var LB={kernelName:em,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=C(DB(n.data.get(a.dataId).values,n.data.get(i.dataId).values[0],r),3),s=o[0],u=o[1],l=o[2],c=u.length;return[n.makeTensorInfo([c,2],"int32",s),n.makeTensorInfo([c],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(l))]}};function jB(e,t){for(var n=Fd("int32",e.length),r=0;r<e.length;++r)n[r]=Gm(e[r]).modulo(t).getLowBitsUnsigned();return n}var PB={kernelName:tm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=jB(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",i)}},FB=WO(rm,(function(e){return Math.tan(e)})),BB={kernelName:rm,backendName:"cpu",kernelFunc:FB},zB=WO(am,(function(e){return Math.tanh(e)}));function UB(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=Qy(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var l=e.locToIndex(s);a.values[i]=e.values[l]}return a}var WB={kernelName:im,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;BO(a,"tile");var o=UB(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},GB=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function VB(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2),l=Math.max(n,Math.floor(t-i*s/a+u)),c=Math.min(r,Math.floor(t+(a-i)*s/a+u));VB(e,t,l,c)}var f=e[t],d=n,h=r;for(kd(e,n,t),GB(e[r],f)>0&&kd(e,n,r);d<h;){for(kd(e,d,h),d++,h--;GB(e[d],f)<0;)d+=1;for(;GB(e[h],f)>0;)h-=1}0===GB(e[n],f)?kd(e,n,h):kd(e,h+=1,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function HB(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=Pd(n,o*r),l=Pd("int32",o*r),c=function(t){var n=t*s,i=e.subarray(n,n+s),o=new Array(i.length);i.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(VB(o,r),o=o.slice(0,r)),a&&o.sort(GB);for(var c=t*r,f=u.subarray(c,c+r),d=l.subarray(c,c+r),h=0;h<r;h++)f[h]=o[h].value,d[h]=o[h].index},f=0;f<o;f++)c(f);var d=t.slice();return d[d.length-1]=r,[Qy(d,n,u),Qy(d,"int32",l)]}var qB={kernelName:om,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;BO(a,"topk");var s=C(HB(n.data.get(a.dataId).values,a.shape,a.dtype,i,o),2),u=s[0],l=s[1];return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}};var XB={kernelName:sm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=t.transforms,o=n.interpolation,s=n.fillMode,u=n.fillValue,l=n.outputShape,c=C(a.shape,4),f=c[0],d=c[1],h=c[2],p=c[3],v=C(null!=l?l:[d,h],2),m=v[0],g=v[1],y=[f,m,g,p],b=Xd(a.shape),x=b[0],w=b[1],k=b[2],S=Xd(y),_=S[0],E=S[1],T=S[2],I=Pd(a.dtype,Id(y));I.fill(u);for(var A=r.data.get(a.dataId).values,N=r.data.get(i.dataId).values,R=0;R<f;++R){for(var M=1===i.shape[0]?N:N.subarray(8*R,8*R+8),O=0;O<m;++O)for(var D=0;D<g;++D)for(var L=0;L<p;++L){var j=void 0,P=M[6]*D+M[7]*O+1;if(0!==P){var F=(M[0]*D+M[1]*O+M[2])/P,B=(M[3]*D+M[4]*O+M[5])/P,z=YB(F,h,s),U=YB(B,d,s);switch(o){case"nearest":j=ZB(A,d,h,x,w,k,R,U,z,L,u);break;case"bilinear":j=QB(A,d,h,x,w,k,R,U,z,L,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(o))}I[R*_+O*E+D*T+L]=j}}return r.makeTensorInfo(y,a.dtype,I)}return{dataId:r.write(I,y,a.dtype),shape:a.shape,dtype:a.dtype}}};function YB(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return xd(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return xd(0,n,t-1)}(e,t);case"nearest":return function(e,t){return xd(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function KB(e,t,n,r,a,i,o,s,u,l,c){return 0<=s&&s<t&&0<=u&&u<n?e[o*r+s*a+u*i+l]:c}function ZB(e,t,n,r,a,i,o,s,u,l,c){return KB(e,t,n,r,a,i,o,Math.round(s),Math.round(u),l,c)}function QB(e,t,n,r,a,i,o,s,u,l,c){var f=Math.floor(s),d=Math.floor(u),h=f+1,p=d+1;return(h-s)*((p-u)*KB(e,t,n,r,a,i,o,f,d,l,c)+(u-d)*KB(e,t,n,r,a,i,o,f,p,l,c))+(s-f)*((p-u)*KB(e,t,n,r,a,i,o,h,d,l,c)+(u-d)*KB(e,t,n,r,a,i,o,h,p,l,c))}function $B(e,t,n,r){for(var a=Ld(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u={},l=new Int32Array(n[a]),c=new ag(i,r,e),f=[],d=1===i[0]&&1===i[2],h=0;h<n[a];h++){var p=void 0;if(d)p=e[h].toString();else{for(var v=[],m=0;m<i[0];m++)for(var g=0;g<i[2];g++)v.push(c.get(m,h,g));p=v.join(",")}if(void 0!==u[p])l[h]=u[p];else{var y=Object.keys(u).length;u[p]=y,l[h]=y,f.push(h)}}var b=i.slice();b[1]=Object.keys(u).length;var x=new ag(b,r);f.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)x.set(c.get(n,e,r),n,t,r)}));var w=n.slice();return w[a]=b[1],{outputValues:x.values,outputShape:w,indices:l}}var JB={kernelName:lm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;BO(i,"unique");var o=$B(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,u=o.outputShape,l=o.indices;return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}};var ez={kernelName:cm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),l=0,c=0;c<o;c++)c!==i&&(u[l++]=a.shape[c]);var f=new Array(o).fill(0),d=a.shape.slice();d[i]=1;for(var h=new Array(s),p=0;p<h.length;p++){f[i]=p;var v=uL({inputs:{x:a},backend:n,attrs:{begin:f,size:d}});h[p]=SD({inputs:{x:v},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(v)}return h}};for(var tz={kernelName:fm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;BO(a,"unsortedSegmentSum");for(var s=[],u=[],l=a.shape.length-i.shape.length,c=i,f=0;f<l;++f){var d=dj({inputs:{input:c},backend:n,attrs:{dim:f+1}});c=d,u.push(d)}for(var h=0;h<o;++h){var p=Vm(h,"int32"),v=n.makeTensorInfo([],"int32",p),m=ij({inputs:{a:v,b:c},backend:n}),g=vD({inputs:{x:m},backend:n,attrs:{dtype:"float32"}}),y=$L({inputs:{a:g,b:a},backend:n}),b=ej({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(v),u.push(m),u.push(g),u.push(y),u.push(b)}var x=lF({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},nz=0,rz=[TD,AD,RD,OD,kD,DD,FD,BD,zD,UD,GD,HD,XD,ZD,$D,nL,rL,aL,iL,ED,oL,cL,hL,pL,mD,gL,bL,cD,xL,CL,TL,IL,AL,NL,RL,ML,DL,jL,PL,FL,BL,zL,UL,GL,VL,HL,qL,XL,YL,KL,nj,HO,rj,oj,uj,fj,hj,mj,Tj,Aj,Nj,Oj,jj,Pj,Fj,zj,Wj,Hj,Yj,XO,Kj,SL,Qj,Jj,tP,KO,aP,sP,lP,dP,pP,gP,bP,kP,SP,_P,TP,NP,RP,MP,OP,DP,LP,jP,PP,zP,UP,VP,XP,JL,KP,QP,JP,tF,aF,iF,uF,cF,fF,pF,JO,mF,wF,_F,NF,MF,hD,bj,DF,tD,rD,_D,LF,jF,PF,FF,BF,zF,WF,HF,XF,ZF,QF,JF,sD,tB,rB,iB,lL,qP,uB,lB,fB,hB,vB,mB,gB,yB,wB,kB,CB,TB,AB,MB,LB,PB,Sj,tj,BB,{kernelName:am,backendName:"cpu",kernelFunc:zB},WB,qB,XB,PD,JB,ez,tz,sF];nz<rz.length;nz++){_m(rz[nz])}var az,iz,oz,sz={},uz={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function lz(e,t){if(!(e in sz)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete sz[e]}),!1),sh().getBool("SOFTWARE_WEBGL_ENABLED")&&(uz.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",uz)||n.getContext("experimental-webgl",uz);return n.getContext("webgl2",uz)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;sz[e]=n}var r=sz[e];return null==r||r.isContextLost()?(delete sz[e],lz(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),sz[e])}function cz(e,t){return[t,e]}function fz(e){var t=Id(e);return Rd(Math.ceil(t/4))}function dz(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function hz(e,t){var n,r,a,i,o,s,u,l,c,f,d=e;return 2===sh().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,i=d.RGBA32F,o=d.RED,u=4,l=1,c=d.HALF_FLOAT,f=d.FLOAT,s=d.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=d.RGBA,o=e.RGBA,u=4,l=4,c=null!=t?t.HALF_FLOAT_OES:null,f=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:l,textureTypeHalfFloat:c,textureTypeFloat:f}}function pz(e,t){var n=t();return sh().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(az||(az={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(iz||(iz={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(oz||(oz={}));function vz(e){return!!(sh().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function mz(e,t){return Az(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}var gz,yz,bz=/ERROR: [0-9]+:([0-9]+):/g;function xz(e,t){var n=bz.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return Md((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var l=o.slice(0,r-1),c=o.slice(r-1,r),f=o.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(Md(c[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}function wz(e,t){if(pz(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function kz(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(pz(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),pz(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),pz(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function Sz(e,t,n){return Az(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function _z(e,t,n){return e.getUniformLocation(t,n)}function Cz(e,t,n,r){pz(e,(function(){return function(e,t,n){Nz(e,n),pz(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),pz(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),pz(e,(function(){return e.uniform1i(n,r)}))}function Ez(e,t,n){pz(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),pz(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function Tz(e,t){pz(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),pz(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Iz(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function Az(e,t,n){var r=pz(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function Nz(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function Rz(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Id(e.slice(0,e.length-t))}function Mz(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Oz(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Rz(e)].concat(f(Mz(e)))),t}function Dz(e){return e%2===0}function Lz(e,t){if(Ad(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Dz(n)&&Dz(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Dz(e[0])&&Dz(t[0])}function jz(e,t){return null!=e.getExtension(t)}function Pz(e){try{if(null!=lz(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function Fz(e){if(0===e)return!1;var t=lz(e);if(1!==e){if(jz(t,"EXT_color_buffer_float"))return Bz(t);var n="EXT_color_buffer_half_float";if(jz(t,n)){var r=t.getExtension(n);return function(e,t){var n=hz(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!jz(t,"OES_texture_float")&&(!!jz(t,"WEBGL_color_buffer_float")&&Bz(t))}function Bz(e){var t=hz(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function zz(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&_d("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var Uz=sh();function Wz(){var e,t,n,r,a,i,o,s,u,l;return 2===sh().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=sh().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Gz(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Xd(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function Vz(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Xd(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function Hz(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function qz(e){var t=Xd(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}Uz.registerFlag("HAS_WEBGL",(function(){return Uz.getNumber("WEBGL_VERSION")>0})),Uz.registerFlag("WEBGL_VERSION",(function(){return Pz(2)?2:Pz(1)?1:0})),Uz.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),Uz.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===Uz.get("WEBGL_VERSION")})),Uz.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Uz.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),Uz.registerFlag("WEBGL_PACK",(function(){return Uz.getBool("HAS_WEBGL")})),Uz.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Uz.getBool("WEBGL_PACK")})),Uz.registerFlag("WEBGL_PACK_CLIP",(function(){return Uz.getBool("WEBGL_PACK")})),Uz.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return Uz.getBool("WEBGL_PACK")})),Uz.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Uz.getBool("WEBGL_PACK")})),Uz.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return Uz.getBool("WEBGL_PACK")})),Uz.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Uz.getBool("WEBGL_PACK")})),Uz.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Uz.getBool("WEBGL_PACK")})),Uz.registerFlag("WEBGL_PACK_REDUCE",(function(){return Uz.getBool("WEBGL_PACK")})),Uz.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Uz.getBool("WEBGL_PACK")})),Uz.registerFlag("WEBGL_CONV_IM2COL",(function(){return Uz.getBool("WEBGL_PACK")})),Uz.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==gz){var t=lz(e);gz=t.getParameter(t.MAX_TEXTURE_SIZE)}return gz}(Uz.getNumber("WEBGL_VERSION"))})),Uz.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==yz){var t=lz(e);yz=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,yz)}(Uz.getNumber("WEBGL_VERSION"))})),Uz.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=Uz.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=lz(e);return jz(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:jz(t,"EXT_disjoint_timer_query")?1:0}(e)})),Uz.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Uz.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Ng()})),Uz.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=lz(e);if(1===e){if(!jz(t,"OES_texture_float"))return!1}else if(!jz(t,"EXT_color_buffer_float"))return!1;return Bz(t)}(Uz.getNumber("WEBGL_VERSION"))})),Uz.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!Uz.getBool("WEBGL_FORCE_F16_TEXTURES")&&Uz.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),Uz.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Fz(Uz.getNumber("WEBGL_VERSION"))})),Uz.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=Uz.getNumber("WEBGL_VERSION"))&&null!=lz(e).fenceSync;var e})),Uz.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Uz.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Uz.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),Uz.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return Ng()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),Uz.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),Uz.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),Uz.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),Uz.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128})),Uz.registerFlag("WEBGL_EXP_CONV",(function(){return!1})),Uz.registerFlag("SOFTWARE_WEBGL_ENABLED",(function(){return Uz.getBool("IS_TEST")})),Uz.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(function(){return 1/0})),Uz.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(function(){return!1})),Uz.registerFlag("WEBGL2_ISNAN_CUSTOM",(function(){return!1}));var Xz="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",Yz=_b;function Kz(e,t,n){var r=[];if(e.forEach((function(e){var t=Id(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(pU(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?Qz(e,r):Zz(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?fU(e,t):dU(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,l=Wz(),c=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(l),f=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat($z,"\n    ").concat(Jz,"\n    ").concat(eU,"\n  ")}(l);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Ad(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",l=2;l<e.length-1;l++)o*=e[e.length-l-1],s="\n      int b".concat(l," = index / ").concat(o,";\n      index -= b").concat(l," * ").concat(o,";\n    ")+s,u="b".concat(l,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(l)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(Ad(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=Vz(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=Gz(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=Vz(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=Gz(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=Gz(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=Gz(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(l)),n.packedInputs&&(f+=tU),[f,c,i,o,a,s,n.userCode].join("\n")}function Zz(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return rU(e,t);case 1:return aU(e,t);case 2:return iU(e,t);case 3:return oU(e,t);case 4:return sU(e,t);case 5:return uU(e);case 6:return lU(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function Qz(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Wz();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=Wz();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=Wz();if(null!=i&&Ad(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(c,", ").concat(l[0],", ").concat(l[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=vU(e,n.slice(1)),l=["b","row","col"];return"\n        ".concat(Qz(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(mU(l,s),");\n        }\n      ")}var c=Wz();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ");var f=o[0],d=o[1],h=Math.ceil(n[2]/2),p=h*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(f,", ").concat(d,", ").concat(p,", ").concat(h,", b, row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Wz();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=u[0],c=u[1],f=Math.ceil(i[o-1]/2),d=f*Math.ceil(i[o-2]/2),h="int b, int row, int col",p="b * ".concat(d," + (row / 2) * ").concat(f," + (col / 2)"),v=2;v<o-1;v++)h="int b".concat(v,", ")+h,d*=i[o-v-1],p="b".concat(v," * ").concat(d," + ")+p;return"\n    vec4 ".concat(r,"(").concat(h,") {\n      int index = ").concat(p,";\n      int texR = index / ").concat(c,";\n      int texC = index - texR * ").concat(c,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(c,", ").concat(l,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var $z="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Jz="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",eU="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",tU="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function nU(e){return"offset".concat(e)}function rU(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=C(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=nU(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=C(e.shapeInfo.texShape,2),l=u[0],c=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(l,", ").concat(c,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function aU(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(cU(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=nU(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function iU(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&Ad(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=jd(n),l=u.newShape,c=u.keptDims,f=l;if(f.length<n.length){var d=vU(e,f);return"\n      ".concat(Zz(d,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(mU(["row","col"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(cU(e),"\n      }\n    ");var h=i[0],p=i[1],v=nU(r);return 1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===h?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(p,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(v,";\n    vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function oU(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=jd(n),u=s.newShape,l=s.keptDims,c=u;if(c.length<n.length){var f=vU(e,c);return"\n        ".concat(Zz(f,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(mU(["row","col","depth"],l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(cU(e),"\n      }\n    ");var d=e.shapeInfo.texShape,h=d[0],p=d[1],v=e.shapeInfo.flatOffset;if(p===i&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(p,".0, ").concat(h,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(p===o&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,".0, ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var m=nU(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function sU(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=jd(n),l=u.newShape,c=u.keptDims;if(l.length<n.length){var f=vU(e,l);return"\n      ".concat(Zz(f,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(mU(["row","col","depth","depth2"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(cU(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],v=h[1],m="int stride2 = ".concat(r,"Shape[3];"),g="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(v===s&&null==d)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(m,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(v===i&&null==d)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=nU(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(m,"\n      ").concat(g,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function uU(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=jd(t),l=u.newShape,c=u.keptDims;if(l.length<t.length){var f=vU(e,l);return"\n      ".concat(Zz(f),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(mU(["row","col","depth","depth2","depth3"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(cU(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],v=h[1];if(v===s&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=nU(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function lU(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=jd(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=vU(e,i);return"\n      ".concat(Zz(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(mU(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var u=t[5],l=t[4]*u,c=t[3]*l,f=t[2]*c,d=t[1]*f;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(d,", ").concat(f,", ").concat(c,", ").concat(l,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(cU(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,v=p[0],m=p[1];if(m===d&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(f,", ").concat(c,", ").concat(l,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===u&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=nU(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(d," + col * ").concat(f," + depth * ").concat(c," +\n          depth2 * ").concat(l," + depth3 * ").concat(u," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function cU(e){var t=e.name,n=Id(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function fU(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=Yz(e.shapeInfo.logicalShape,t.logicalShape),l=hU(s),c=s-o,f=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(f[e+c]," = 0;")})).join("\n");var d="";d=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+c])})).join(", ");var h="return outputValue;",p=1===Id(e.shapeInfo.logicalShape),v=1===Id(t.logicalShape);if(1!==o||p||v){if(p&&!v)h=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var m=o-2,g=o-1;u.indexOf(m)>-1&&u.indexOf(g)>-1?h="return vec4(outputValue.x);":u.indexOf(m)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(d,");\n      ").concat(h,"\n    }\n  ")}function dU(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&Ad(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var l,c=hU(u),f=Yz(e.shapeInfo.logicalShape,t.logicalShape),d=u-s,h=["x","y","z","w","u","v"];l=0===s?"":u<2&&f.length>=1?"coords = 0;":f.map((function(e){return"coords.".concat(h[e+d]," = 0;")})).join("\n");var p="";return p=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(h[t+d])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(l,"\n      return get").concat(r,"(").concat(p,");\n    }\n  ")}function hU(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function pU(e,t,n){var r=jd(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],u=s?t.slice(1):a,l=!e&&o>1&&!Ad(t,n)&&a.length<o||s;return{useSqueezeShape:l,uniformShape:l?u:t,keptDims:i}}function vU(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function mU(e,t){return t.map((function(t){return e[t]})).join(", ")}function gU(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=Kz(a,o,t),u=function(e,t){var n=Az(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(pz(e,(function(){return e.shaderSource(n,t)})),pz(e,(function(){return e.compileShader(n)})),sh().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw xz(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),l=e.createProgram(u);return sh().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:i,outShapeInfo:o},yU(e,t,l))}function yU(e,t,n){var r,a,i,o,s={},u={},l={},c=[],f=null;o=e.getUniformLocation(n,"NAN",!1),1===sh().getNumber("WEBGL_VERSION")&&(f=e.getUniformLocation(n,"INFINITY",!1));for(var d=!1,h=0;h<t.variableNames.length;h++){var p=t.variableNames[h];s[p]=e.getUniformLocation(n,p,d),s["offset".concat(p)]=e.getUniformLocation(n,"offset".concat(p),d),t.enableShapeUniforms&&(u["".concat(p,"Shape")]=e.getUniformLocation(n,"".concat(p,"Shape"),d),l["".concat(p,"TexShape")]=e.getUniformLocation(n,"".concat(p,"TexShape"),d))}return t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",d),i=e.getUniformLocation(n,"outShapeStrides",d),a=e.getUniformLocation(n,"outTexShape",d)),t.customUniforms&&t.customUniforms.forEach((function(t,r){c[r]=e.getUniformLocation(n,t.name,d)})),{uniformLocations:s,customUniformLocations:c,infLoc:f,nanLoc:o,inShapesLocations:u,inTexShapesLocations:l,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function bU(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!Ad(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!Ad(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function xU(e,t,n,r,a){t.program.enableShapeUniforms||(bU(t.inShapeInfos,n),bU([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===sh().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var l=pU(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(l.length){case 1:e.gl.uniform1iv(s,new Int32Array(l));break;case 2:e.gl.uniform2iv(s,new Int32Array(l));break;case 3:e.gl.uniform3iv(s,new Int32Array(l));break;case 4:e.gl.uniform4iv(s,new Int32Array(l))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=i)if(n.isUniform)if(Id(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var c=n.uniformValues;c instanceof Float32Array||(c=new Float32Array(c)),e.gl.uniform1fv(i,c)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=Xd(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var i=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(i,o)}})),e.executeProgram()}function wU(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=pU(e.packedInputs,t.shape,i),s=o.useSqueezeShape,u=o.uniformShape,l=o.keptDims,c="",f="",d="";if(1===u.length&&e.packedInputs){var h=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];c="".concat(h[0]>1,"_").concat(h[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var p=Xd(u);d="".concat(p[0]===i[1],"_").concat(p[p.length-1]===i[1])}}else f="".concat(u[0]>1,"_").concat(u[1]>1);var v=t.shape.length,m=2===u.length&&Ad(t.shape,i),g=1===Id(t.shape),y=_b(t.shape,n.shape),b=!e.packedInputs&&v===n.shape.length&&Ad(i,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(v,"_").concat(b,"_").concat(s?l:"","_").concat(u.length,"_").concat(g,"_").concat(y,"_").concat(m,"_").concat(c,"_").concat(f,"_").concat(d,"_").concat(x,"_").concat(a)}else{var w=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(w,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(sh().getNumber("WEBGL_VERSION"))}function kU(e){return sh().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var SU=p((function e(t){d(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=az.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Wz();this.outputShape=t,this.enableShapeUniforms=kU(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Vz(["r","c","d"],t):Gz(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),_U=p((function e(t){d(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=az.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Wz();this.outputShape=t,this.enableShapeUniforms=kU(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Vz(["r","c","d"],t):Gz(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),CU=p((function e(t){d(this,e),this.variableNames=["A"],this.outTexUsage=iz.DOWNLOAD;var n=Wz();this.outputShape=t,this.userCode="\n      ".concat(Xz,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),EU=p((function e(t){d(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=iz.DOWNLOAD;var n=Wz();this.outputShape=t,this.userCode="\n      ".concat(Xz,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),TU={R:0,G:1,B:2,A:3},IU=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";d(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var a=Wz();this.outputShape=t,this.enableShapeUniforms=kU(this.outputShape.length);var i="result";n&&(i="floor(result * 255. + 0.5)");for(var o="",s=0;s<r.length;s++){var u=r[s];o+="\n          if(offset == ".concat(s,") {\n            result = values[").concat(TU[u],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":qz(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(r.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(r.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(a.texture2D,"(A, uv);\n          ").concat(o,"\n        }\n        ").concat(a.output," = vec4(").concat(i,", 0., 0., 0.);\n      }\n    ")})),AU=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];d(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Wz();this.outputShape=t,this.enableShapeUniforms=kU(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":qz(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")}));function NU(e){var t=Wz();return function(e,t){var n=Az(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(pz(e,(function(){return e.shaderSource(n,t)})),pz(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function RU(e){return function(e,t){var n=Az(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return pz(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),pz(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function MU(e){return function(e,t){var n=Az(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return pz(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),pz(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function OU(e,t,n,r,a,i){!function(e,t){var n=sh().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);var o=function(e){return Az(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return pz(e,(function(){return e.bindTexture(s,o)})),pz(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),pz(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),pz(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),pz(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===sh().getNumber("WEBGL_VERSION")?pz(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):pz(e,(function(){return e.texStorage2D(s,1,r,t,n)})),pz(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function DU(e){return e.internalFormatFloat}function LU(e){return e.internalFormatHalfFloat}function jU(e){return e.downloadTextureFormat}function PU(e){return e.internalFormatPackedFloat}function FU(e){return e.internalFormatPackedHalfFloat}function BU(e,t,n,r,a,i,o,s){var u=e,l=new Float32Array(function(e,t){var n=C(dz(e,t),2);return n[0]*n[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}var zU=function(){function e(t){d(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=sh().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){sz[e]=t}(n,t)):this.gl=lz(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===sh().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=mz(this.gl,"OES_texture_float"),jz(this.gl,i))this.textureHalfFloatExtension=mz(this.gl,i);else if(sh().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),jz(this.gl,a))this.colorBufferHalfFloatExtension=mz(this.gl,a);else if(sh().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",jz(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!jz(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=RU(this.gl),this.indexBuffer=MU(this.gl),this.framebuffer=function(e){return Az(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=hz(this.gl,this.textureHalfFloatExtension)}return p(e,[{key:"debug",get:function(){return sh().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;pz(t,(function(){return t.finish()})),pz(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),pz(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),pz(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),pz(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),pz(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=C(cz(t,n),2);return OU(e,a[0],a[1],DU(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=C(cz(t,n),2);return OU(e,a[0],a[1],LU(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=C(cz(t,n),2);return OU(e,a[0],a[1],jU(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){pz(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===sh().getNumber("WEBGL_VERSION")?pz(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):pz(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===sh().getNumber("WEBGL_VERSION")?pz(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):pz(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),pz(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,s,u;pz(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),2===sh().getNumber("WEBGL_VERSION")?pz(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):pz(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),pz(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=C(dz(t,n),2);return OU(e,a[0],a[1],FU(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=C(dz(t,n),2);return OU(e,a[0],a[1],PU(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Tz(this.gl,this.framebuffer),this.outputTexture=null),pz(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=C(cz(t,n),2),i=a[0],o=a[1],s=new Uint8Array(t*n*4);return pz(e,(function(){return e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return BU(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();pz(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return pz(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),pz(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),pz(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(sh().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else sh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,sh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return pz(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=NU(n));var r=function(e){return Az(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return pz(n,(function(){return n.attachShader(r,t.vertexShader)})),pz(n,(function(){return n.attachShader(r,e)})),function(e,t){if(pz(e,(function(){return e.linkProgram(t)})),!sh().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,r),this.debug&&wz(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return pz(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),kz(e,t,"clipSpacePos",n,3,20,0)&&kz(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&pz(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&wz(this.gl,this.program),pz(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?Sz(this.gl,e,t):_z(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),pz(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Cz(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=C(dz(t,n),2),a=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,a,i)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&wz(this.gl,this.program),Iz(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),pz(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),pz(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=mz(this.gl,2===sh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===sh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==sh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=A(T().mark((function e(t){var n=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Od((function(){return n.disposed||n.isQueryAvailable(t,sh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,sh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)){var r=void 0;"setTimeoutCustom"in sh().platform&&(r=sh().platform.setTimeoutCustom.bind(sh().platform)),Od((function(){return n.pollItems(),0===n.itemsToPoll.length}),(function(){return 0}),null,r)}}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),Ez(this.gl,e,this.framebuffer),this.debug&&Iz(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(Ez(this.gl,this.outputTexture,this.framebuffer),this.debug&&Iz(this.gl)):Tz(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;Ez(r,e,this.framebuffer),this.debug&&Iz(r),this.outputTexture=e,pz(r,(function(){return r.viewport(0,0,t,n)})),pz(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),pz(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var UU=bD,WU=fL,GU=dL,VU=pD,HU=vL,qU=wL,XU=aj,YU=lj,KU=pj,ZU=Rj,QU=Bj,$U=Uj,JU=Gj,eW=qj,tW=nP,nW=iP,rW=uP,aW=cP,iW=CP,oW=IP,sW=FP,uW=ZL,lW=YP,cW=nF,fW=vF,dW=xF,hW=SF,pW=AF,vW=RF,mW=GF,gW=qF,yW=iD,bW=ID,xW=sL,wW=cB,kW=dB,SW=pB,_W=bB,CW=IB,EW=RB,TW=DB,IW=jB,AW=xj,NW=UB,RW=HB,MW=LD,OW=$B;function DW(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function LW(e,t){return 1===t?[e]:DW(e,t)}var jW=function(){function e(t){if(d(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=kU(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=LW("rc",this.rank),r=hU(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return p(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),PW=p((function e(t,n){d(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=kU(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=Hz(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):Gz(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":qz(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var FW=function(){function e(t){d(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return p(e,[{key:"acquireTexture",value:function(e,t,n){var r=zW(t,n),a=UW(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=BW(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===oz.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===oz.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===oz.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===oz.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===oz.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=zW(n,r),i=UW(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=BW(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=sh().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],l=u.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(l,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function BW(e,t,n,r,a){var i,o=function(e,t){switch(e){case oz.PACKED_2X2_FLOAT32:return PU(t);case oz.PACKED_2X2_FLOAT16:return FU(t);case oz.UNPACKED_FLOAT32:return DU(t);case oz.UNPACKED_FLOAT16:return LU(t);case oz.PACKED_4X1_UNSIGNED_BYTE:return jU(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=C(dz(e[0],e[1]),2);i=s[0]*s[1]}else{var u=C(cz(e[0],e[1]),2);i=u[0]*u[1]}var l=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*l}function zW(e,t){if(e===iz.UPLOAD)return oz.PACKED_2X2_FLOAT32;if(e===iz.RENDER||null==e)return function(e){return sh().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?oz.PACKED_2X2_FLOAT32:oz.UNPACKED_FLOAT32:e?oz.PACKED_2X2_FLOAT16:oz.UNPACKED_FLOAT16}(t);if(e===iz.DOWNLOAD||e===iz.PIXELS)return oz.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function UW(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var WW=p((function e(t,n){d(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=kU(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),GW="if (isnan(x)) return x;",VW="return x;",HW="return abs(x);";var qW="return (x >= 0.0) ? x : (exp(x) - 1.0);",XW=GW+"\n  return (x < 0.0) ? 0.0 : x;\n",YW=GW+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",KW="return x;",ZW="return 1.0 / (1.0 + exp(-1.0 * x));",QW="return x;",$W="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",JW="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",eG="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",tG="return 1.0 / (1.0 + exp(-1.0 * x));",nG=p((function e(t,n){d(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=kU(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),rG=p((function e(t){d(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=kU(this.outputShape.length);var n=t.length,r=LW("rc",n),a=hU(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),aG=v_,iG={};var oG=sh().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var sG=function(e){m(n,e);var t=k(n);function n(e){var r,a,i;if(d(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!sh().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof zU)a=e;else{var o=lz(sh().getNumber("WEBGL_VERSION"),e);a=new zU(o)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=lz(sh().getNumber("WEBGL_VERSION"));a=new zU(s),r.binaryCache=((i=sh().getNumber("WEBGL_VERSION"))in iG||(iG[i]={}),iG[i]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new FW(r.gpgpu),r.numMBBeforeWarning=null==sh().global.screen?1024:sh().global.screen.height*sh().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new md(x(r),Pb()),r}return p(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"writeTexture",value:function(e,t,n,r,a,i){var o=this.makeTensorInfo(t,n),s=this.texData.get(o.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,a]},s.texShape=[r,a];var u=Oz(t),l=new IU(u,!1,i),c=this.runWebGLProgram(l,[o],n,[[r,a]]);return c.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(o),c.dataId}},{key:"write",value:function(e,t,n){if((sh().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||sh().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:iz.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(sh().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:iz.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new nG(o,KW):new WW(o,KW);var l=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),c=this.readSync(l.dataId);return this.disposeIntermediateTensorInfo(l),c}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var f,d,h=null!=this.activeTimers;(h&&(f=qm()),"complex64"===r)?d=ZS(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):d=this.getValuesFromTexture(e);return h&&(this.downloadWaitMs+=qm()-f),this.convertAndCacheOnCPU(e,d)}},{key:"read",value:function(){var e=A(T().mark((function e(t){var n,r,a,i,o,s,u,l,c,d,h,p,v,m,g,y,b,x,w,k,S,_,C;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,u=r.complexTensorInfos,l=r.isPacked,null==o){e.next=11;break}return c=l?new nG(i,KW):new WW(i,KW),d=this.runWebGLProgram(c,[{dataId:t,shape:i,dtype:s}],s),h=this.read(d.dataId),this.disposeIntermediateTensorInfo(d),e.abrupt("return",h);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!sh().getBool("DEBUG")){e.next=16;break}if(sh().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==sh().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(p=null,"complex64"!==s&&sh().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(t),g=this.texData.get(v.dataId),p=(m=this.gpgpu).createBufferFromTexture.apply(m,[g.texture.texture].concat(f(fz(i))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 25:b=e.sent,x=b[0],w=b[1],y=ZS(x,w),e.next=32;break;case 31:null==p?y=this.getValuesFromTexture(t):(k=Id(i),y=this.gpgpu.downloadFloat32MatrixFromBuffer(p,k));case 32:return null!=v&&this.disposeIntermediateTensorInfo(v),null!=p&&pz(S=this.gpgpu.gl,(function(){return S.deleteBuffer(p)})),_=this.convertAndCacheOnCPU(t,y),C=this.pendingRead.get(t),this.pendingRead.delete(t),C.forEach((function(e){return e(_)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Pb().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",_);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var l;l=s?new nG(a,KW):new WW(a,KW);var c=this.runWebGLProgram(l,[{dataId:e,shape:a,dtype:o}],o),f=this.readToGPU(c,t);return this.disposeIntermediateTensorInfo(c),f}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var d=this.decode(e,t.customTexShape),h=Pb().makeTensorFromTensorInfo(d),p=this.texData.get(d.dataId);return Object.assign({tensorRef:h},p.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return Ym(e)}));return Qy(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return Qy(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!vz(n)){if(sh().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=Id(n);if(sh().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),l=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture.texture].concat(f(fz(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),l}var c=sh().getBool("WEBGL_PACK")&&!0===a,d=c?Oz(n):n,h=c?new EU(d):new CU(d),p=this.runWebGLProgram(h,[{shape:d,dtype:r,dataId:e}],"float32"),v=this.texData.get(p.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture.texture,v.texShape[0],v.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(p),m}},{key:"timerAvailable",value:function(){return sh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=Td(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=Td(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return A(T().mark((function e(){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(sh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=Sd(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return sh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:qm(),endMs:null}}},{key:"endTimer",value:function(e){return sh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=qm(),e)}},{key:"getQueryTime",value:function(){var e=A(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(sh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oG;return sh().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&Id(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){ym("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return aG(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new nG(e.shape,t),a=this.compileAndRun(r,[e],n);return Pb().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=bW(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(sh().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,HW,e.dtype);var n=new WW(e.shape,HW),r=this.compileAndRun(n,[e]);return Pb().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Wd(n[0])){var a=n.map((function(e){return Xm(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return Pb().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new rG(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new jW(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[Rz(e.shape)].concat(f(Mz(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[Rz(t)].concat(f(Mz(t))),i=new PW(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;null!=t&&_d(Id(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var o,s=Oz(a);o=r?new _U(s):new SU(s);var u=[null!=t?t:fz(s)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,u,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===az.DENSE){var l=null!=o?o:fz(e.outputShape);u.texShape=l.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===Id(s.shape))return u.values=Pd(s.dtype,0),s;var c=[],f=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Id(t.shape)<=sh().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),c.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!Lz(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),c.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var d,h={shape:s.shape,texData:u,isUniform:!1},p=wU(e,f,h),v=this.getAndSaveBinary(p,(function(){return gU(a.gpgpu,e,f,h)})),m=null!=this.activeTimers;m&&(d=this.startTimer()),sh().get("ENGINE_COMPILE_ONLY")||xU(this.gpgpu,v,f,h,r),c.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),m&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)}));var g=sh().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var y=qm();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!sh().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return i}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!sh().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Bb((function(){if(!sh().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=sh().getBool("DEBUG");sh().set("DEBUG",!1);var n=e.abs(Vb(1e-8)).dataSync()[0];if(sh().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var u,l=null!=this.activeTimers;l&&(u=qm());var c=t.texShape;if(null==c&&(c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=sh().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=sh().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&sh().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?wd(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=jd(e);e=a.newShape}var i=Id(e),o=null;e.length<=1&&i<=n?o=[1,i]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);var s=null!=o&&Math.max.apply(Math,f(o))>r&&Math.min.apply(Math,f(o))<=(t?2:1)&&Math.min.apply(Math,f(o))>0;if(null==o||s)if(t){var u=Rz(e),l=2,c=2;if(e.length){var d=C(Mz(e),2);l=d[0],c=d[1]}o=Rd(i=u*(l/2)*(c/2)).map((function(e){return 2*e}))}else o=Rd(i);return o}(n,s),t.texShape=c),null!=a){var d,h=Oz(n),p=c[1],v=c[0],m=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(s||!m){var g=C(dz(c[0],c[1]),2);p=g[0],v=g[1]}d=s?new AU(h,m):new IU(h,m);var y=m?[v,p]:c,b=this.makeTensorInfo(y,r),x=this.texData.get(b.dataId);x.usage=m?iz.PIXELS:iz.UPLOAD,x.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,v,a);var w=[[v,p]],k=this.runWebGLProgram(d,[b],r,w,!0),S=this.texData.get(k.dataId);t.texShape=S.texShape,t.isPacked=S.isPacked,t.usage=S.usage,sh().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(t.texture=S.texture,t.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(b),l&&(this.uploadWaitMs+=qm()-u)}else{var _=this.acquireTexture(c,o,r,s);t.texture=_}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*Ud(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=C(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=A(T().mark((function e(){var t,n,r,a,i,o,s,u,l=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=C(r[n],2),i=a[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:for(o=function(){var e=C(u[s],2)[1],n=new Promise((function(t){try{l.checkCompletion_(e),t(!0)}catch(n){throw n}}));t.push(n)},s=0,u=Object.entries(this.binaryCache);s<u.length;s++)o();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=A(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,NS();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw xz(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=C(t[e],2)[1],r=yU(this.gpgpu,n.program,n.webGLProgram),a=r.uniformLocations,i=r.customUniformLocations,o=r.infLoc,s=r.nanLoc,u=r.inShapesLocations,l=r.inTexShapesLocations,c=r.outShapeLocation,f=r.outShapeStridesLocation,d=r.outTexShapeLocation;n.uniformLocations=a,n.customUniformLocations=i,n.infLoc=o,n.nanLoc=s,n.inShapesLocations=u,n.inTexShapesLocations=l,n.outShapeLocation=c,n.outShapeStridesLocation=f,n.outTexShapeLocation=d}}},{key:"createTensorFromTexture",value:function(e,t,n){var r=e.texture,a=e.height,i=e.width,o=e.channels,s=Pb().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");var u=s.writeTexture(r,t,n,a,i,o);return Pb().makeTensorFromDataId(u,t,n,s)}}]),n}(gd);sG.nextDataId=0;Rg()&&Wb("webgl",(function(){return new sG}),2);var uG=p((function e(t,n,r){d(this,e),this.variableNames=["A","B"],this.outputShape=Eb(n,r),this.enableShapeUniforms=kU(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),lG=p((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];d(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Eb(n,r);var i=this.outputShape.length;this.enableShapeUniforms=kU(i);var o="";if(a)if(0===i||1===Id(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=hU(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=LW("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function cG(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var fG={kernelName:Cp,backendName:"webgl",kernelFunc:cG};function dG(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=cG({inputs:{x:r},backend:n}),u=cG({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var hG={kernelName:Ph,backendName:"webgl",kernelFunc:dG},pG="return (a < 0.) ? b * a : a;",vG="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var mG={kernelName:Rp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",Vm(i,"float32")),s=sh().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lG(vG,a.shape,o.shape):new uG(pG,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},gG="return (a < 0.) ? b * a : a;",yG="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var bG={kernelName:dv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=sh().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lG(yG,r.shape,a.shape):new uG(gG,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}};function xG(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,l=s,c=a||u.dtype;if(l.shouldExecuteOnCPU([u])&&null!=r){var f=l.texData.get(u.dataId),d=r(f.values,c);return l.makeTensorInfo(u.shape,c,d)}return i=sh().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new nG(u.shape,n):new WW(u.shape,t),l.runWebGLProgram(i,[u],c)}}function wG(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,i=e.backend,l=r.a,c=r.b,f=i;if(o&&"complex64"===l.dtype){var d=f.texData.get(l.dataId),h=f.texData.get(c.dataId),p=[[d.complexTensorInfos.real,h.complexTensorInfos.real],[d.complexTensorInfos.imag,h.complexTensorInfos.imag]].map((function(e){var n=C(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:l.shape},o={dataId:a.dataId,dtype:a.dtype,shape:c.shape},s=new uG(t,l.shape,c.shape);return f.runWebGLProgram(s,[i,o],mg(r.dtype,a.dtype))})),v=C(p,2),m=v[0],g=v[1],y=dG({inputs:{real:m,imag:g},backend:f});return f.disposeIntermediateTensorInfo(m),f.disposeIntermediateTensorInfo(g),y}var b,x=u||mg(l.dtype,c.dtype);if(("string"===l.dtype||"string"===c.dtype||f.shouldExecuteOnCPU([l,c]))&&null!=s){var w=f.texData.get(l.dataId).values,k=f.texData.get(c.dataId).values,S="string"===l.dtype?p_(w):w,_="string"===l.dtype?p_(k):k,E=C(s(l.shape,c.shape,S,_,x),2),T=E[0],I=E[1],A=f.makeTensorInfo(I,x);return f.texData.get(A.dataId).values=T,A}return b=sh().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new lG(n,l.shape,c.shape,a):new uG(t,l.shape,c.shape),f.runWebGLProgram(b,[l,c],x)}}function kG(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?QW:VW;if("relu"===e)return t?JW:XW;if("elu"===e)return t?$W:qW;if("relu6"===e)return t?eG:YW;if("prelu"===e)return t?yG:gG;if("leakyrelu"===e)return t?vG:pG;if("sigmoid"===e)return t?tG:ZW;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var SG=p((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];d(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=kU(this.outputShape.length);var c=a?t[1]:t[2],f=Math.ceil(c/2),h=a?"i * 2, rc.y":"rc.y, i * 2",p=i?"rc.z, i * 2":"i * 2, rc.z",v=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",y="";s&&(g=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):l?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),y="result = activation(result);");var b=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");var x="rc.x",w="rc.x";t[0]<n[0]?x="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(w="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(g,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(f,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(f,"; i++) {\n          int batchA = ").concat(x,";\n          int batchB = ").concat(w,";\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(v[0]," * ").concat(m[0],");\n          result += (").concat(v[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(b,"\n\n        ").concat(y,"\n\n        setOutput(result);\n      }\n    ")})),_G="return areal * breal - aimag * bimag;",CG="return areal * bimag + aimag * breal;",EG=p((function e(t,n,r){d(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Eb(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),TG="return a * b;";function IG(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=mg(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(i.dataId),l=new EG(_G,a.shape,i.shape),c=new EG(CG,a.shape,i.shape),f=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],d=r.runWebGLProgram(l,f,"float32"),h=r.runWebGLProgram(c,f,"float32"),p=dG({inputs:{real:d,imag:h},backend:r});return r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(h),p}if(r.shouldExecuteOnCPU([a,i])){var v=r.texData.get(a.dataId),m=r.texData.get(i.dataId),g=C(uW(a.shape,i.shape,v.values,m.values,o),2),y=g[0],b=g[1],x=r.makeTensorInfo(b,o);return r.texData.get(x.dataId).values=y,x}return t=sh().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lG(TG,a.shape,i.shape):new uG(TG,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var AG={kernelName:tv,backendName:"webgl",kernelFunc:IG};function NG(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=Id(a.shape),u=Dd(i,s),l=Id(u);_d(s===l,(function(){return"The new shape (".concat(u,") has ").concat(l," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var c=o.texData.get(a.dataId);return!c.isPacked||Lz(a.shape,u)||null!==c.texture&&Lz(c.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[Rz(e.shape)].concat(f(Mz(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Rz(t)].concat(f(Mz(t))),o=new PW(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,o)}var RG={kernelName:wv,backendName:"webgl",kernelFunc:NG},MG=p((function e(t,n){d(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),u=r%4,l="sumValue += dot(values, ones);";if(null!=n){var c=1/n;l="sumValue += dot(values * ".concat(Nd(c)?c.toPrecision(2):c,", ones);")}var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),OG=p((function e(t,n){d(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var l="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?l="sumValue":"prod"===n?l="prodValue":"all"===n?l="allValue":"any"===n&&(l="anyValue");var c=4*Math.floor(r/4),f=r%4,h="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),p="vec4";"all"===n?(s="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(s="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var v="";i%r>0&&(v="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(v,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===f,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}));function DG(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=OS(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],l=u.inSize,c=u.windowSize,f=u.outSize,d=void 0;d="mean"===n?0===o?new MG({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:f},l):new MG({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:f}):new OG({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:f},n),s=i,i=r.runWebGLProgram(d,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var LG=p((function e(t,n){d(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=hU(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var jG=p((function e(t,n){d(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=hU(this.rank),o=DW("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var l="vec2(".concat(s.slice(-2).join(),")"),c="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),f="getChannel(getA(".concat(s.join(),"), ").concat(l,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(f,";\n      if(").concat(c,") {\n        result[1] = ").concat(f,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(f,";\n        if(").concat(c,") {\n          result[3] = ").concat(f,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function PG(e,t,n){var r=sh().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jG(e.shape,t):new LG(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function FG(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=Ld(a,e.shape),s=o,u=vw(s,i),l=null!=u,c=e;l&&(c=PG(e,u,r),s=gw(s.length,i)),pw("sum",s,i);var f=C(dw(c.shape,s),2),d=f[0],h=f[1],p=d;n&&(p=hw(d,o));var v=Id(h),m=NG({inputs:{x:c},attrs:{shape:[Id(e.shape)/v,v]},backend:r}),g=DG(m,gg(e.dtype),"sum",r),y=NG({inputs:{x:g},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),l&&r.disposeIntermediateTensorInfo(c),y}(t.x,r.axis,r.keepDims,n)}var BG={kernelName:Uv,backendName:"webgl",kernelFunc:FG};function zG(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,l=new Array(u),c=0;c<l.length;c++)l[c]=i.shape[o[c]];if(s.shouldExecuteOnCPU([i])){var f=s.texData.get(i.dataId).values,d=MW(f,i.shape,i.dtype,o,l);t=s.makeTensorInfo(l,i.dtype),s.texData.get(t.dataId).values=d}else t=PG(i,o,s);return t}var UG={kernelName:um,backendName:"webgl",kernelFunc:zG};function WG(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,l=void 0===u?null:u,c=e.leakyreluAlpha,f=void 0===c?0:c,d=e.activation,h=void 0===d?null:d,p=t.shape.length,v=n.shape.length,m=r?t.shape[p-2]:t.shape[p-1],g=a?n.shape[v-1]:n.shape[v-2],y=r?t.shape[p-1]:t.shape[p-2],b=a?n.shape[v-2]:n.shape[v-1],x=t.shape.slice(0,-2),w=n.shape.slice(0,-2),k=Id(x),S=Id(w),_=Eb(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);_d(m===g,(function(){return"Error in matMul: inner shapes (".concat(m,") and (")+"".concat(g,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var C,E=r?[k,m,y]:[k,y,m],T=a?[S,b,g]:[S,g,b],I=NG({inputs:{x:t},backend:i,attrs:{shape:E}}),A=NG({inputs:{x:n},backend:i,attrs:{shape:T}}),N=[I,A],R=Math.max(k,S),M=r?I.shape[1]:I.shape[2],O=null!=s,D=null!=l,L="leakyrelu"===h,j=null!=h?kG(h,!0):null;if((1===y||1===b)&&M>1e3&&!1===(O||D||L||null!=j)){var P=I,F=A;r&&(P=zG({inputs:{x:I},backend:i,attrs:{perm:[0,2,1]}}),N.push(P)),a&&(F=zG({inputs:{x:A},backend:i,attrs:{perm:[0,2,1]}}),N.push(F));var B=1===b,z=P;1!==b&&(z=NG({inputs:{x:P},backend:i,attrs:{shape:[R,M,1]}}),N.push(z));var U=1===b?2:1,W=F;B&&(W=NG({inputs:{x:F},backend:i,attrs:{shape:[R,1,M]}}),N.push(W));var G=IG({inputs:{a:z,b:W},backend:i});C=FG({inputs:{x:G},backend:i,attrs:{axis:U,keepDims:!0}}),N.push(G)}else{var V=mg(t.dtype,n.dtype),H=new SG(E,T,[R,y,b],r,a,O,j,D,L),q=[I,A];if(null!=s&&q.push(s),D&&q.push(l),L){var X=i.makeTensorInfo([],"float32",Vm(f,"float32"));q.push(X),N.push(X)}C=i.runWebGLProgram(H,q,V)}var Y=NG({inputs:{x:C},backend:i,attrs:{shape:_}});N.push(C);for(var K=0,Z=N;K<Z.length;K++){var Q=Z[K];i.disposeIntermediateTensorInfo(Q)}return Y}var GG={kernelName:vm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,l=r.transposeB,c=r.activation;return WG({a:a,b:i,transposeA:u,transposeB:l,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:c})}},VG="return abs(x);";var HG={kernelName:dh,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=bW(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=sh().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new nG(a.shape,VG):new WW(a.shape,VG),r.runWebGLProgram(t,[a],a.dtype)}},qG=xG({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),XG={kernelName:hh,backendName:"webgl",kernelFunc:qG},YG=xG({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),KG={kernelName:ph,backendName:"webgl",kernelFunc:YG},ZG="return a + b;",QG=wG({opSnippet:ZG,packedOpSnippet:ZG,supportsComplex:!0,cpuKernelImpl:UU}),$G={kernelName:vh,backendName:"webgl",kernelFunc:QG},JG=p((function e(t,n){d(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),eV=p((function e(t,n){d(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var tV={kernelName:mh,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return cG({inputs:{x:a[0]},backend:r});if(a.length>sh().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return mg(e,t)})),l=a.map((function(e){return e.shape})),c=sh().getBool("WEBGL_PACK")?new eV(a[0].shape,l):new JG(a[0].shape,l);return r.runWebGLProgram(c,a,u)}};var nV={kernelName:gh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=Ld(i,a.shape),l=u,c=vw(l,s),f=a;null!=c&&(f=zG({inputs:{x:a},backend:n,attrs:{perm:c}}),l=gw(l.length,s)),pw("all",l,s);var d,h=C(dw(f.shape,l),2),p=h[0],v=NG({inputs:{x:f},backend:n,attrs:{shape:[-1,Id(h[1])]}}),m=DG(v,v.dtype,"all",n);return d=NG(o?{inputs:{x:m},backend:n,attrs:{shape:hw(p,u)}}:{inputs:{x:m},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(f),d}};var rV={kernelName:yh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=Ld(i,a.shape),l=u,c=vw(l,s),f=a;null!=c&&(f=zG({inputs:{x:a},backend:n,attrs:{perm:c}}),l=gw(l.length,s)),pw("any",l,s);var d,h=C(dw(f.shape,l),2),p=h[0],v=NG({inputs:{x:f},backend:n,attrs:{shape:[-1,Id(h[1])]}}),m=DG(v,v.dtype,"any",n);return d=NG(o?{inputs:{x:m},backend:n,attrs:{shape:hw(p,u)}}:{inputs:{x:m},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(f),d}},aV=p((function e(t,n,r){d(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),iV=p((function e(t,n,r,a){d(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,_d(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,u,l=this.outputShape,c=l.length,f=hU(c),h=LW("coords",c);if(1===o){var p=hU(u=c+1);s="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(h.join(),", 0);\n        ++").concat(h[c-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(h.join(),", 0);\n        ++").concat(h[c-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(h.join(),", 0);\n        --").concat(h[c-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(h.join(),", 0);\n        --").concat(h[c-2],";")}else u=c,s="\n        ".concat(f," sourceLocR = coords;\n        ++").concat(h[c-1],";\n        ").concat(f," sourceLocG = coords;\n        ++").concat(h[c-2],";\n        ").concat(f," sourceLocA = coords;\n        --").concat(h[c-1],";\n        ").concat(f," sourceLocB = coords;\n        --").concat(h[c-2],";");var v=["x","y","z","w","u","v"].slice(0,u),m="."+v[u-1],g=v.map((function(e){return"int "+e})),y=LW("sourceLocR",u-1).concat("inIdx.r"),b=LW("sourceLocG",u-1).concat("inIdx.g"),x=LW("sourceLocB",u-1).concat("inIdx.b"),w=LW("sourceLocA",u-1).concat("inIdx.a"),k="max"===r?"greaterThan":"lessThan",S=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),"),\n                             getBestIndicesAChannel(").concat(w.join(),")));"),_="vec4(\n            getAChannel(".concat(y.join(),"),\n            hasNextCol ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(x.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(w.join(),") : 0.)"),C=a?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(v.join(),"),\n                                          vec2(").concat(v.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(v.join(),"),\n                               vec2(").concat(v.slice(-2).join(),"));\n      }\n      ").concat(C,"\n      void main() {\n        ").concat(f," coords = getOutputCoords();\n        bool hasNextCol = ").concat(h[c-1]," < ").concat(l[c-1]-1,";\n        bool hasNextRow = ").concat(h[c-2]," < ").concat(l[c-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(_,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(S,"\n          vec4 candidate = ").concat(_,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function oV(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=OS(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new aV(s,n,null==r),l=[t];null!=r&&l.push(r);var c=e.runWebGLProgram(u,l,"int32");if(1===c.shape[1])return c;var f=oV(e,t,n,c);return e.disposeIntermediateTensorInfo(c),f}function sV(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=OS(i),s=new iV(a,o,n,null==r),u=null==r?[t]:[t,r],l=e.runWebGLProgram(s,u,"int32");if(l.shape.length===t.shape.length){var c=sV(e,t,n,l);return e.disposeIntermediateTensorInfo(l),c}return l}function uV(e,t,n,r){var a=[n];if(pw("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!sh().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var u=C(dw(s.shape,a),2),l=u[0],c=Id(u[1]),f=NG({inputs:{x:s},backend:e,attrs:{shape:[-1,c]}});i.push(f);var d=oV(e,f,r);i.push(d);var h=NG({inputs:{x:d},backend:e,attrs:{shape:l}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),h}return sV(e,t,r)}var lV={kernelName:bh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=Ld(r.axis,a.shape),o=vw(i,a.shape.length),s=a,u=[];null!=o&&(s=zG({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=gw(i.length,s.shape.length)),pw("argMax",[i[0]],s.shape.length);var l=uV(n,s,i[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}};var cV={kernelName:xh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=Ld(r.axis,a.shape),o=vw(i,a.shape.length),s=a,u=[];null!=o&&(s=zG({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=gw(i.length,s.shape.length)),pw("argMin",[i[0]],s.shape.length);var l=uV(n,s,i[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}},fV=xG({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),dV={kernelName:wh,backendName:"webgl",kernelFunc:fV},hV=xG({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),pV={kernelName:kh,backendName:"webgl",kernelFunc:hV},vV=xG({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),mV={kernelName:Sh,backendName:"webgl",kernelFunc:vV},gV=wG({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),yV={kernelName:Ch,backendName:"webgl",kernelFunc:gV},bV=xG({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),xV={kernelName:_h,backendName:"webgl",kernelFunc:bV},wV=p((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(d(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,l=t.dilationHeight,c=t.dilationWidth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,g="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),b="0.0";if(m||(b="-1.0 / 1e-20"),r){var x=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(v,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(x," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?g:y:"wR * ".concat(h," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="max",k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / count");var S=4*Math.floor(o/4),_=o%4,C="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(w,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(v,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(f,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(S,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat(C,"\n          }\n\n          int xC = xCCorner + ").concat(S,";\n          if (").concat(1===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(C,"\n          } else if (").concat(2===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(C,"\n          } else if (").concat(3===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat(C,"\n          }\n        }\n        setOutput(").concat(k,");\n      }\n    ")}})),kV=p((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(d(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,l=t.strideWidth,c=t.dilationDepth,f=t.dilationHeight,h=t.dilationWidth,p=t.effectiveFilterDepth,v=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=t.padInfo.front,y=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;var x="avg"===n,w="0.0";if(x||(w="-1.0 / 1e-20"),r){var k=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(y,", ").concat(b,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(v,";\n                wR += ").concat(f,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(h,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(k," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(v," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var S="max",_="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(_="avgValue / count");var C=4*Math.floor(o/4),E=o%4,T="\n      if (".concat(x,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(S,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(y,", ").concat(b,");\n      const float initializationValue = ").concat(w,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(w,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(v,";\n            wR += ").concat(f,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(C,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(h,", ch)\n              );\n\n              ").concat(T,"\n            }\n\n            int xC = xCCorner + ").concat(C,";\n            if (").concat(1===E,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(T,"\n            } else if (").concat(2===E,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(T,"\n            } else if (").concat(3===E,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                initializationValue\n              );\n\n              ").concat(T,"\n            }\n          }\n          setOutput(").concat(_,");\n        }\n      }\n    ")}}));var SV={kernelName:Eh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;zz(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;_d(cx(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var l=$b(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Ad(l.inShape,l.outShape))return cG({inputs:{x:a},backend:n});var c=new wV(l,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}};var _V={kernelName:Ih,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat,c=Jb(a.shape,i,o,[1,1,1],s,u,l),f=new kV(c,"avg",!1);return n.runWebGLProgram(f,[a],"float32")}},CV=p((function e(t){d(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=u-1-t.padInfo.top,f=l-1-t.padInfo.left,h=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(c,", ").concat(f,");\n      const float avgMultiplier = float(").concat(h,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),EV=p((function e(t){d(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,c=t.dilationWidth,f=t.effectiveFilterDepth,h=t.effectiveFilterHeight,p=t.effectiveFilterWidth,v=f-1-t.padInfo.front,m=h-1-t.padInfo.top,g=p-1-t.padInfo.left,y=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(v,", ").concat(m,", ").concat(g,");\n      const float avgMultiplier = float(").concat(y,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(c,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var TV={kernelName:Ah,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode,c=Jb(i.shape,o,s,[1,1,1],u,l),f=new EV(c);return n.runWebGLProgram(f,[a],i.dtype)}};var IV={kernelName:Th,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;zz([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,c=$b(o.shape,s,u,1,l),f=new CV(c);return n.runWebGLProgram(f,[a],o.dtype)}};var AV={kernelName:Nh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return WG({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},NV=p((function e(t,n,r,a,i,o){d(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],Eb(t,n),Eb(t,r);var s="0.0";null!=a&&(Eb(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(Eb(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),RV=p((function e(t,n,r,a,i,o){d(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Eb(t,n),Eb(t,r);var s="vec4(0.0)";null!=a&&(Eb(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(Eb(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),MV={kernelName:xp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;_d(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),_d(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),_d(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var l=r.varianceEpsilon;null==l&&(l=.001);var c=[a,i,o],f=null;null!=s&&(f=s.shape,c.push(s));var d=null;null!=u&&(d=u.shape,c.push(u));var h=sh().getBool("WEBGL_PACK_NORMALIZATION")?new RV(a.shape,i.shape,o.shape,f,d,l):new NV(a.shape,i.shape,o.shape,f,d,l);return n.runWebGLProgram(h,c,c[0].dtype)}},OV=p((function e(t){d(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=hU(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return DV.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(DV[t]," = start[").concat(t,"] + coords.").concat(DV[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),DV=["x","y","z","w","u","v"];var LV=p((function e(t){d(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=hU(this.rank),r=LW("coords",this.rank),a=LW("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function jV(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=C(Rb(a,r.begin,r.size),2),o=i[0],s=i[1];if(Tb(a,o,s),0===Id(s))return n.makeTensorInfo(s,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var u=n.texData.get(a.dataId),l=xW(u.values,o,s,a.shape,a.dtype);return n.makeTensorInfo(s,a.dtype,l)}var c=n.texData.get(a.dataId).isPacked,f=Ab(a.shape,o,s);if(c||!f){var d=sh().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new LV(s):new OV(s),h=[o];return n.runWebGLProgram(d,[a],a.dtype,h)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=Nb(t,Xd(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,o,s,n)}var PV={kernelName:Dv,backendName:"webgl",kernelFunc:jV},FV={kernelName:Rh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;_d(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=LS(a.shape,i,s),l=jS(u.length,i.length),c=PS(a.shape,i,s),f=FS(o,i.length),d=BS(c,o,i.length),h=[],p=NG({inputs:{x:a},backend:n,attrs:{shape:u}}),v=zG({inputs:{x:p},backend:n,attrs:{perm:l}}),m=NG({inputs:{x:v},backend:n,attrs:{shape:c}}),g=jV({inputs:{x:m},backend:n,attrs:{begin:f,size:d}});return h.push(p),h.push(v),h.push(m),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var BV={kernelName:Mh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=WU(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}};var zV={kernelName:Oh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=Eb(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},UV=wG({opSnippet:"return float(a != b);",cpuKernelImpl:cW,dtype:"bool"}),WV={kernelName:rv,backendName:"webgl",kernelFunc:UV};function GV(e){var t=e.inputs,n=e.backend,r=t.input;return cG({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var VV={kernelName:yv,backendName:"webgl",kernelFunc:GV};var HV={kernelName:Dh,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return cG({inputs:{x:i},backend:r});var s=Sw(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),l=dG({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),l}if("complex64"===i.dtype){var c=GV({inputs:{input:i},backend:r}),f=e({inputs:{x:c},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(c),f}if(!Bd(i.dtype,o)){var d=cG({inputs:{x:i},backend:r});return{dataId:d.dataId,shape:d.shape,dtype:o}}if(r.shouldExecuteOnCPU([i])){var h=r.texData.get(i.dataId).values,p=C(VU(h,i.shape,i.dtype,o),3),v=p[0],m=p[1],g=p[2];return r.makeTensorInfo(v,m,g)}if("int32"===o)return function(e,t){var n=new WW(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var y=r.makeTensorInfo([],"bool",Pd("bool",1)),b=UV({inputs:{a:i,b:y},backend:r});return r.disposeIntermediateTensorInfo(y),b}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},qV="return ceil(x);",XV=xG({opSnippet:qV,packedOpSnippet:qV,cpuKernelImpl:HU}),YV={kernelName:Lh,backendName:"webgl",kernelFunc:XV},KV=p((function e(t){d(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),ZV=p((function e(t){d(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var QV={kernelName:jh,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=sh().getBool("WEBGL_PACK_CLIP")?new ZV(i.shape):new KV(i.shape);var u=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},$V=p((function e(t){d(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function JV(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var eH={kernelName:Fh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new $V(r.shape),o=[JV(r,a.complexTensorInfos.real),JV(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},tH=p((function e(t){d(this,e),this.outputShape=[],this.outputShape=MS(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),nH=p((function e(t,n){d(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=MS(t,n);var r=this.outputShape,a=r.length,i=hU(a),o=LW("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var l=1;l<u.length;l++)u[l]=u[l-1]+t[l][n];for(var c=s[n],f=s.slice(-2),h=s.join(),p="if (".concat(c," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(h,"), vec2(").concat(f.join(),"));\n        }"),v=1;v<u.length;v++){var m=u[v-1];p+="\n        if (".concat(c," < ").concat(u[v],"  && ").concat(c," >= ").concat(u[v-1],") {\n          return getChannel(\n            getT").concat(v,"(").concat(rH(s,c,m),"),\n            vec2(").concat(rH(f,c,m),"));\n        }")}var g=u.length,y=u[u.length-1];p+="\n        return getChannel(\n          getT".concat(g,"(").concat(rH(s,c,y),"),\n          vec2(").concat(rH(f,c,y),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function rH(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function aH(e){var t=e.inputs,n=e.backend,r=t.input;return cG({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var iH={kernelName:Tp,backendName:"webgl",kernelFunc:aH};function oH(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return GV({inputs:{input:e},backend:n})})),i=e.map((function(e){return aH({inputs:{input:e},backend:n})})),o=oH(a,t,n),s=oH(i,t,n),u=dG({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}var l=n.shouldExecuteOnCPU(e);if("string"===r&&(l=!0),l){var c=e.map((function(e){var r=Id(e.shape.slice(t));return NG({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),f=c.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),d=MS(c.map((function(e){return e.shape})),1),h=1===c[0].shape[0],p=qU(f,d,r,h),v=MS(e.map((function(e){return e.shape})),t),m=n.makeTensorInfo(v,r,p);return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}var g=sh().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(e.length>g){for(var y=[],b=0;b<e.length;b+=g){var x=e.slice(b,b+g);y.push(oH(x,t,n))}for(var w=oH(y,t,n),k=0,S=y;k<S.length;k++){var _=S[k];n.disposeIntermediateTensorInfo(_)}return w}if(sh().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var C=new nH(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(C,e,r)}var E=function(e,t,n){var r=MS(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return NG({inputs:{x:e},attrs:{shape:[-1,Id(e.shape.slice(t))]},backend:n})})),outShape:r}}(e,t,n),T=E.tensors2D,I=E.outShape,A=new tH(T.map((function(e){return e.shape}))),N=n.runWebGLProgram(A,T,r);T.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var R=NG({inputs:{x:N},attrs:{shape:I},backend:n});return n.disposeIntermediateTensorInfo(N),R}function sH(e){var t=e.inputs,n=e.backend,r=Ld(e.attrs.axis,t[0].shape)[0];RS(t.map((function(e){return e.shape})),r);var a=MS(t.map((function(e){return e.shape})),r);if(0===Id(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return Id(e.shape)>0}));return 1===i.length?cG({inputs:{x:i[0]},backend:n}):oH(i,r,n)}var uH={kernelName:Bh,backendName:"webgl",kernelFunc:sH},lH=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,p=t.filterWidth,v=4*Math.floor(t.inChannels/4),m=t.inChannels%4,g="channelsLast"===t.dataFormat,y=g?1:2,b=g?2:3,x=g?3:1,w="",k="";r&&(w=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(w,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(x,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(y,"], coords[").concat(b,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(c,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(f,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(v,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(v,") *\n                    getW(wR, wC, ").concat(v,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(v,", xR, xC) *\n                    getW(wR, wC, ").concat(v,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(v,", d2),\n                getW(wR, wC, ").concat(v," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(v,"),\n                  getX(batch, xR, xC, ").concat(v," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(v,", xR, xC),\n                  getX(batch, ").concat(v," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(v,", d2),\n                getW(wR, wC, ").concat(v," + 1, d2),\n                getW(wR, wC, ").concat(v," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(v,"),\n                  getX(batch, xR, xC, ").concat(v," + 1),\n                  getX(batch, xR, xC, ").concat(v," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(v,", xR, xC),\n                  getX(batch, ").concat(v," + 1, xR, xC),\n                  getX(batch, ").concat(v," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(S,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")})),cH=p((function e(t){d(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,c=t.dilationWidth,f=t.filterDepth,h=t.filterHeight,p=t.filterWidth,v=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(f,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(v,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(v,") *\n                  getW(wF, wR, wC, ").concat(v,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(v,"),\n                  getX(batch, xF, xR, xC, ").concat(v," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(v,", d2),\n                  getW(wF, wR, wC, ").concat(v," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(v,"),\n                  getX(batch, xF, xR, xC, ").concat(v," + 1),\n                  getX(batch, xF, xR, xC, ").concat(v," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(v,", d2),\n                  getW(wF, wR, wC, ").concat(v," + 1, d2),\n                  getW(wF, wR, wC, ").concat(v," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),fH=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=kU(this.outputShape.length);for(var o=t.padInfo.left,s=t.strideWidth,u=t.dilationWidth,l=t.filterHeight,c=t.filterWidth,f=c,h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;",p=0;p<c;p++)h+="\n           vec4 xTexelC".concat(2*p,";\n           int xTexelC").concat(2*p,"Ready;\n           vec4 xTexelC").concat(2*p+1,";\n           int xTexelC").concat(2*p+1,"Ready;\n           vec4 xC").concat(p,";");h+="\n     for (int r = 0; r < ".concat(l,"; r++) {\n      for (int d1 = 0; d1 < ").concat(t.inChannels,"; d1 += 2) {\n       ");for(var v=0;v<c;v++)h+="\n           xTexelC".concat(2*v," = vec4(0.0);\n           xTexelC").concat(2*v,"Ready = 0;\n           xTexelC").concat(2*v+1," = vec4(0.0);\n           xTexelC").concat(2*v+1,"Ready = 0;\n           xC").concat(v," = vec4(0.0);");h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(var m=0;m<(f+1)/2;m++){var g=2*m;if(h+="\n           xC = xCCorner + ".concat(g*u,";\n           "),1===s){if(g<c&&(o%2===1?(h+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n               "),h+=1===u&&g>0?"\n                 xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                   } else {\n                     xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                   }\n                   ")):h+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 xC").concat(g," = xTexelC").concat(g,";\n                 "),g+1<c)){var y=o%2===0?wd(u):u;u%2===0&&o%2===1||u%2!==0&&o%2!==1?(h+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                     xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(g+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(g+1,"Ready = 1;\n                   }\n                   "),h+=u>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(g+1," = vec4(previous.zw, xTexelC").concat(g+1,".xy);\n                     } else {\n                      xC").concat(g+1," = vec4(0.0, 0.0, xTexelC").concat(g+1,".xy);\n                     }\n                     "):"\n                     xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                     ")):h+=1===y?"\n                     xC".concat(g+1," = xTexelC").concat(g,";\n                     "):"\n                     xCOffset = xC + ".concat(y,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                       xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(g+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(g+1,"Ready = 1;\n                     }\n\n                     xC").concat(g+1," = xTexelC").concat(g+1,";\n                     ")}}else g<c&&(o%2===1?(h+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                   xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(g+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g+1,"Ready = 1;\n                 }\n\n                 xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n               "),g+1<c&&(h+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                 "))):(h+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                   xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(g+1,"Ready = 1;\n                 }\n\n                 xC").concat(g," = vec4(\n                   xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n               "),g+1<c&&(h+="\n                   xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                 "))));g<c&&(h+="\n             wTexel = getW(r, ".concat(g,", d1, d2);\n             dotProd += xC").concat(g,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(t.inChannels,") {\n               dotProd += xC").concat(g,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),g+1<c&&(h+="\n               wTexel = getW(r, ".concat(g+1,", d1, d2);\n               dotProd += xC").concat(g+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(t.inChannels,") {\n                 dotProd += xC").concat(g+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(r,"\n         }"):i?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(r,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(r,"\n         }"),x="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(b,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(h,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(w,"\n         ").concat(x,"\n         setOutput(result);\n       }\n     ")})),dH=p((function e(t,n){d(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=kU(this.outputShape.length);for(var r=n.dataFormat,a=Wz(),i="channelsLast"===r,o=i?1:2,s=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),l="",c=0;c<=1;c++)for(var f=0;f<=1;f++)l+="\n          blockIndex = rc.z + ".concat(f,";\n          pos = rc.y + ").concat(c,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*c+f,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*c+f,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(l,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function hH(e,t){var n=e.length;return n>=3?[].concat(f(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function pH(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,l=void 0===u?null:u,c=e.leakyreluAlpha,f=void 0===c?0:c,d=e.activation,h=void 0===d?null:d,p=n.shape,v=i.texData.get(n.dataId),m=a.inChannels,g=p[0]*p[1]*p[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(null!=l){var w=hH(l.shape,b);null!=w&&(l=NG({inputs:{x:l},backend:i,attrs:{shape:w}}),x.push(l))}if(null!=s){var k=hH(s.shape,b);null!=k&&(s=NG({inputs:{x:s},backend:i,attrs:{shape:k}}),x.push(s))}if(!((1===g||1===y)&&m>1e3)&&v.isPacked&&b&&null!=v.texture&&p[2]%2!==0&&Ad(v.shape.slice(-3),p.slice(-3))){var S=p[0]*p[1]*(p[2]+1),_={dataId:n.dataId,shape:[1,S,a.inChannels],dtype:n.dtype},C=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,_d(Lz(v.shape,_.shape),(function(){return"packed reshape ".concat(v.shape," to ").concat(_.shape," isn't free")}));var E=NG({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(E);var T=WG({a:_,b:E,backend:i,transposeA:!1,transposeB:false,bias:s,activation:h,preluActivationWeights:l,leakyreluAlpha:f}),I=i.texData.get(T.dataId);_d(I.isPacked,(function(){return"batchMatMul result is expected to be packed"})),v.shape=C,I.shape=a.outShape,(t=cG({inputs:{x:T},backend:i})).shape=a.outShape,x.push(T)}else{var A=a.outHeight*a.outWidth,N=NG({inputs:{x:n},backend:i,attrs:{shape:b?[a.batchSize,A,a.inChannels]:[a.batchSize,a.inChannels,A]}}),R=NG({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),M=WG({a:b?N:R,b:b?R:N,transposeA:!b,transposeB:false,backend:i,bias:s,activation:h,preluActivationWeights:l,leakyreluAlpha:f});t=NG({inputs:{x:M},backend:i,attrs:{shape:a.outShape}}),x.push(N),x.push(R),x.push(M)}for(var O=0,D=x;O<D.length;O++){var L=D[O];i.disposeIntermediateTensorInfo(L)}return t}function vH(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,l=e.leakyreluAlpha,c=void 0===l?0:l,f=e.activation,d=void 0===f?null:f,h=r.filterWidth,p=r.filterHeight,v=r.inChannels,m=r.outWidth,g=r.outHeight,y="channelsLast"===r.dataFormat,b=h*p*v,x=g*m,w=[r.batchSize,b,x],k=[];if(null!=u){var S=hH(u.shape,y);null!=S&&(u=NG({inputs:{x:u},backend:a,attrs:{shape:S}}),k.push(u))}if(null!=o){var _=hH(o.shape,y);null!=_&&(o=NG({inputs:{x:o},backend:a,attrs:{shape:_}}),k.push(o))}var C=NG({inputs:{x:n},backend:a,attrs:{shape:[1,b,Id(n.shape)/b]}});k.push(C);var E=new dH(w,r),T=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],I=a.runWebGLProgram(E,[t],"float32",T),A=NG({inputs:{x:I},backend:a,attrs:{shape:w}});k.push(I),k.push(A);var N=null!=o,R=null!=u,M="leakyrelu"===d,O=d?kG(d,!0):null,D=new SG(y?A.shape:C.shape,y?C.shape:A.shape,y?[r.batchSize,x,r.outChannels]:[r.batchSize,r.outChannels,x],!0,!1,N,O,R,M),L=y?[A,C]:[C,A];if(o&&L.push(o),R&&L.push(u),M){var j=a.makeTensorInfo([],"float32",Vm(c,"float32"));L.push(j),k.push(j)}var P=a.runWebGLProgram(D,L,"float32"),F=NG({inputs:{x:P},backend:a,attrs:{shape:r.outShape}});k.push(P);for(var B=0,z=k;B<z.length;B++){var U=z[B];a.disposeIntermediateTensorInfo(U)}return F}var mH={kernelName:zh,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,l=a.dataFormat,c=a.dilations,f=a.dimRoundingMode,d=fx(l),h=ex(i.shape,o.shape,s,c,u,f,!1,d);if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(h.strideWidth<=2&&"channelsLast"===d&&sh().getBool("WEBGL_EXP_CONV")){var p=new fH(h),v=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];t=r.runWebGLProgram(p,[i,o],"float32",v)}else if(sh().getBool("WEBGL_CONV_IM2COL"))t=vH({x:i,filter:o,convInfo:h,backend:r});else{var m=new lH(h);t=r.runWebGLProgram(m,[i,o],"float32")}else t=pH({x:i,filter:o,convInfo:h,backend:r});var g=NG({inputs:{x:t},backend:r,attrs:{shape:h.outShape}});return r.disposeIntermediateTensorInfo(t),g}},gH=p((function e(t){d(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),yH=p((function e(t){d(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,l=o?1:2,c=o?2:3,f=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(f,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(c,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),bH=p((function e(t){d(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),xH=p((function e(t){d(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,l=r-1-t.padInfo.top,c=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(l,", ").concat(c,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var wH={kernelName:Uh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=r.filterShape,f=fx(u),d=ex(a.shape,c,o,1,s,l,!1,f),h=new gH(d);return n.runWebGLProgram(h,[a,i],"float32")}};var kH={kernelName:Wh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,l=r.dataFormat,c=r.dimRoundingMode,f=fx(l),d=ex(o,i.shape,s,1,u,c,!1,f),h=new yH(d);return n.runWebGLProgram(h,[a,i],"float32")}};var SH={kernelName:Gh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=tx(a.shape,i.shape,o,u,s),c=new cH(l);return n.runWebGLProgram(c,[a,i],"float32")}};var _H={kernelName:Vh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,l=tx(a.shape,u,o,1,s),c=new bH(l);return n.runWebGLProgram(c,[a,i],"float32")}};var CH,EH={kernelName:Hh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=tx(r.inputShape,i.shape,s,1,o),l=new xH(u);return n.runWebGLProgram(l,[a,i],"float32")}},TH=xG({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),IH={kernelName:qh,backendName:"webgl",kernelFunc:TH},AH=xG({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),NH={kernelName:Xh,backendName:"webgl",kernelFunc:AH},RH=p((function e(t,n,r,a,i){d(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=C(t,4),s=o[0],u=o[1],l=o[2],c=o[3],f=C(n,1)[0],h=C(r,2),p=h[0],v=h[1];this.outputShape=[f,p,v,c];var m="bilinear"===a?1:0,g="".concat(u-1,".0"),y="".concat(l-1,".0"),b=C(p>1?["".concat((u-1)/(p-1)),"(y2-y1) * height_ratio","y1*".concat(g," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(g)],3),x=b[0],w=b[1],k=b[2],S=C(v>1?["".concat((l-1)/(v-1)),"(x2-x1) * width_ratio","x1*".concat(y," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(y)],3),_=S[0],E=S[1],T=S[2];this.userCode="\n      const float height_ratio = float(".concat(x,");\n      const float width_ratio = float(").concat(_,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(w,";\n        float width_scale = ").concat(E,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(T,";\n        if( in_x < 0.0 || in_x > ").concat(y," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),MH={kernelName:Zh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,l=r.extrapolationValue,c=new RH(a.shape,i.shape,s,u,l);return n.runWebGLProgram(c,[a,i,o],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(CH||(CH={}));var OH=p((function e(t,n,r,a){d(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var i=this.outputShape.length,o=this.op===CH.Prod?"1.0":"0.0",s=r?o:"getX(".concat(DH(i,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],l="",c="";r?(l=a?"end != ".concat(u-1):"end != 0",c=a?"end + 1":"end - 1"):(l=a?"end + pow2 < ".concat(u):"end >= pow2",c=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(hU(i)," coords = getOutputCoords();\n        int end = ").concat(LH(i,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(c,";\n          ").concat(LH(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(DH(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function DH(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function LH(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function jH(e,t,n,r,a,i){var o=t.shape.length,s=vw([r],o),u=t;null!=s&&(u=zG({inputs:{x:t},backend:n,attrs:{perm:s}}));var l=gw(1,o)[0];if(l!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var c=u.shape[l],f=cG({inputs:{x:u},backend:n}),d=0;d<=Math.ceil(Math.log2(c))-1;d++){var h=new OH(e,u.shape,!1,i),p=[[d]],v=f;f=n.runWebGLProgram(h,[f],f.dtype,p),n.disposeIntermediateTensorInfo(v)}if(a){var m=new OH(e,u.shape,a,i),g=f;f=n.runWebGLProgram(m,[f],f.dtype),n.disposeIntermediateTensorInfo(g)}if(null!=s){var y=zG({inputs:{x:f},backend:n,attrs:{perm:mw(s)}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(u),y}return f}var PH={kernelName:Yh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return jH(CH.Prod,a,n,i,o,s)}};var FH={kernelName:Kh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return jH(CH.Sum,a,n,i,o,s)}};var BH={kernelName:Qh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=WU(u,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}if(2===a.shape.length){var f=n.bufferSync(a),d=n.bufferSync(i),h=GU(f,d,o,s);return n.makeTensorInfo(h.shape,i.dtype,h.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},zH=function(){function e(t,n,r){d(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return p(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var UH={kernelName:$h,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,l=("NHWC"===o?a.shape[2]:a.shape[3])*i,c=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),f=new zH("NHWC"===o?[s,u,l,c]:[s,c,u,l],i,o);return n.runWebGLProgram(f,[a],a.dtype)}},WH=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=kU(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,l="",c="";r&&(l=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),c="result = activation(result);");var f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(l,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(f,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")})),GH=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=kU(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,l=t.dilationWidth,c=t.filterHeight,f=t.filterWidth,h=f,p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",v=0;v<f;v++)p+="\n          vec4 xTexelC".concat(2*v,";\n          int xTexelC").concat(2*v,"Ready;\n          vec4 xTexelC").concat(2*v+1,";\n          int xTexelC").concat(2*v+1,"Ready;\n          vec4 xC").concat(v,";");p+="\n    for (int r = 0; r < ".concat(c,"; r++) {\n      ");for(var m=0;m<f;m++)p+="\n          xTexelC".concat(2*m," = vec4(0.0);\n          xTexelC").concat(2*m,"Ready = 0;\n          xTexelC").concat(2*m+1," = vec4(0.0);\n          xTexelC").concat(2*m+1,"Ready = 0;\n          xC").concat(m," = vec4(0.0);");p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var g=0;g<(h+1)/2;g++){var y=2*g;if(p+="\n          xC = xCCorner + ".concat(y*l,";\n          "),1===u){if(y<f&&(s%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n              "),p+=1===l&&y>0?"\n                xC".concat(y," = vec4(xTexelC").concat(y-2,".zw, xTexelC").concat(y,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(y," = vec4(previous.zw, xTexelC").concat(y,".xy);\n                  } else {\n                    xC").concat(y," = vec4(0.0, 0.0, xTexelC").concat(y,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                xC").concat(y," = xTexelC").concat(y,";\n                "),y+1<f)){var b=s%2===0?wd(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(b,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                    xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(y+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(y+1,"Ready = 1;\n                  }\n                  "),p+=l>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(y+1," = vec4(previous.zw, xTexelC").concat(y+1,".xy);\n                    } else {\n                     xC").concat(y+1," = vec4(0.0, 0.0, xTexelC").concat(y+1,".xy);\n                    }\n                    "):"\n                    xC".concat(y+1," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".xy);\n                    ")):p+=1===b?"\n                    xC".concat(y+1," = xTexelC").concat(y,";\n                    "):"\n                    xCOffset = xC + ".concat(b,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                      xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(y+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(y+1,"Ready = 1;\n                    }\n\n                    xC").concat(y+1," = xTexelC").concat(y+1,";\n                    ")}}else y<f&&(s%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                  xTexelC").concat(y+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(y+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y+1,"Ready = 1;\n                }\n\n                xC").concat(y," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".zw);\n              "),y+1<f&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(y+1," = vec4(xTexelC").concat(y+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                  xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(y+1,"Ready = 1;\n                }\n\n                xC").concat(y," = vec4(\n                  xTexelC").concat(y,".xy, xTexelC").concat(y+1,".xy);\n              "),y+1<f&&(p+="\n                  xC".concat(y+1," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".zw);\n                "))));y<f&&(p+="\n            wTexel = getW(r, ".concat(y,", d1, q);\n            dotProd += xC").concat(y," * vec4(wTexel.xz, wTexel.xz);\n          "),y+1<f&&(p+="\n              wTexel = getW(r, ".concat(y+1,", d1, q);\n              dotProd += xC").concat(y+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n    }\n  ",p+="\n      }\n    ";var x="",w="";r&&(x=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),w="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(k,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")}));var VH={kernelName:Jh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode,c=u;null==c&&(c=[1,1]),_d(cx(o,c),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(c,"'")}));var f,d=ex(a.shape,i.shape,o,c,s,l,!0);f=sh().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new GH(d):new WH(d);var h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[a,i],"float32",h)}},HH=p((function e(t){d(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),qH=p((function e(t){d(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var XH={kernelName:ep,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.filterShape,f=ex(a.shape,c,o,s,u,l,!0),d=new HH(f);return n.runWebGLProgram(d,[a,i],"float32")}};var YH={kernelName:tp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=ex(r.inputShape,i.shape,o,s,u,l,!0),f=new qH(c);return n.runWebGLProgram(f,[a,i],"float32")}},KH=p((function e(t){d(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var ZH={kernelName:np,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat(f(r.shape),f(r.shape)),i=Id(r.shape),o=NG({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new KH(i),u=n.runWebGLProgram(s,[o],o.dtype),l=NG({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}},QH=p((function e(t){d(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,l=t.dilationHeight,c=t.dilationWidth,f=a.top,h=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(h,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(c,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var $H={kernelName:rp,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,l=a.dilations,c=Qb(i.shape,o.shape,s,u,"NHWC",l),f=new QH(c),d=NG({inputs:{x:t=r.runWebGLProgram(f,[i,o],"float32")},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(t),d}};var JH={kernelName:sp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=n_(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;a_(i.length,s,r);for(var u=i_(o,s),l=u.path,c=u.steps,f=c.length,d=null,h=i.length,p=[],v=0;v<f;++v){var m,g=E(c[v]);try{for(g.s();!(m=g.n()).done;){var y=m.value,b=r_(h,s[y]),x=b.permutationIndices,w=b.expandDims,k=void 0;o_(x)?k=r[y]:(k=zG({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),p.push(k));for(var S=k.shape.slice(),_=0;_<w.length;++_)S.splice(w[_],0,1);Ad(k.shape,S)||(k=NG({inputs:{x:k},backend:n,attrs:{shape:S}}),p.push(k)),null===d?d=k:(d=IG({inputs:{a:k,b:d},backend:n}),p.push(d))}}catch(cZ){g.e(cZ)}finally{g.f()}v<f-1&&(l[v]>=0&&(d=FG({inputs:{x:d},backend:n,attrs:{axis:l[v]-(i.length-h),keepDims:!1}}),p.push(d)),h--)}for(var C=0,T=p;C<T.length;C++){var I=T[C];I!==d&&n.disposeIntermediateTensorInfo(I)}return d}},eq=xG({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),tq={kernelName:up,backendName:"webgl",kernelFunc:eq},nq={kernelName:lp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=sh().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lG("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new uG("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},rq=wG({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:XU}),aq={kernelName:fp,backendName:"webgl",kernelFunc:rq},iq=xG({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(VS,";\n  float a1 = ").concat(HS,";\n  float a2 = ").concat(qS,";\n  float a3 = ").concat(XS,";\n  float a4 = ").concat(YS,";\n  float a5 = ").concat(KS,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),oq={kernelName:cp,backendName:"webgl",kernelFunc:iq},sq=xG({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:YU,dtype:"float32"}),uq={kernelName:dp,backendName:"webgl",kernelFunc:sq};function lq(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(_d(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),NG({inputs:{x:i},backend:r,attrs:{shape:s}})}var cq={kernelName:hp,backendName:"webgl",kernelFunc:lq},fq="return exp(x) - 1.0;",dq=xG({opSnippet:fq,packedOpSnippet:fq,cpuKernelImpl:KU}),hq={kernelName:pp,backendName:"webgl",kernelFunc:dq},pq=p((function e(t,n,r){d(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function vq(e,t,n){var r=n.texData.get(e.dataId),a=Id(e.shape),i=e.shape[e.shape.length-1],o=NG({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new pq("real",s,t),l=new pq("imag",s,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],f=n.runWebGLProgram(u,c,"float32"),d=n.runWebGLProgram(l,c,"float32"),h=dG({inputs:{real:f,imag:d},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d);var p=NG({inputs:{x:h},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(h),p}var mq={kernelName:vp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return vq(t.input,!1,n)}},gq=p((function e(t,n){d(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function yq(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||Vd(a))){var o=Fd(i,Id(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new gq(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}var bq,xq={kernelName:mp,backendName:"webgl",kernelFunc:yq},wq=p((function e(t){d(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),kq={kernelName:gp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new wq(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},Sq="return floor(x);",_q=xG({opSnippet:Sq,packedOpSnippet:Sq,cpuKernelImpl:ZU}),Cq={kernelName:yp,backendName:"webgl",kernelFunc:_q},Eq=wG({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Tq={kernelName:bp,backendName:"webgl",kernelFunc:Eq},Iq=p((function e(t){d(this,e),this.variableNames=["A"];var n=Wz(),r=C(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),Aq=p((function e(t){d(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Wz(),r=C(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),Nq={kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,u=C(o?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),l=u[0],c=u[1],f=[c,l],d=[c,l,i];if(s||o){var h=sh().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=bq&&h===Rq||(Rq=h,bq=document.createElement("canvas").getContext("2d",{willReadFrequently:Rq})),bq.canvas.width=l,bq.canvas.height=c,bq.drawImage(a,0,0,l,c),a=bq.canvas}var p=n.makeTensorInfo(f,"int32");n.texData.get(p.dataId).usage=iz.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),a);var v=sh().getBool("WEBGL_PACK")?new Aq(d):new Iq(d),m=n.runWebGLProgram(v,[p],"int32");return n.disposeData(p.dataId),m}},Rq=sh().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");var Mq={kernelName:mm,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,l=a.strides,c=a.pad,f=a.dataFormat,d=a.dilations,h=a.dimRoundingMode,p=a.activation,v=a.leakyreluAlpha,m=fx(f),g=ex(i.shape,o.shape,l,d,c,h,!1,m),y=[],b=null!=s,x=null!=u,w="leakyrelu"===p,k=function(){var e=[i,o],t=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=NG({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return y.push(n),n}return e};if(b&&e.push(t(s,f)),x&&e.push(t(u,f)),w){var n=r.makeTensorInfo([],"float32",Vm(v,"float32"));e.push(n),y.push(n)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&sh().getBool("WEBGL_EXP_CONV")){var S=p?kG(p,!0):null,_=new fH(g,b,S,x,w),C=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],E=k();t=r.runWebGLProgram(_,E,"float32",C)}else if(sh().getBool("WEBGL_CONV_IM2COL"))t=vH({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:v});else{var T=p?kG(p,!1):null,I=new lH(g,b,T,x,w),A=k();t=r.runWebGLProgram(I,A,"float32")}else t=pH({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:v});var N=NG({inputs:{x:t},backend:r,attrs:{shape:g.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),N}};var Oq={kernelName:gm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dilations,f=r.dimRoundingMode,d=r.activation,h=r.leakyreluAlpha,p=[],v=c;null==v&&(v=[1,1]),_d(cx(u,v),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(v,"'")}));var m,g=ex(a.shape,i.shape,u,v,l,f,!0),y=sh().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=d?kG(d,y):null,x=[a,i],w=null!=o,k=null!=s,S="leakyrelu"===d;if(w&&x.push(o),k&&x.push(s),S){var _=n.makeTensorInfo([],"float32",Vm(h,"float32"));x.push(_),p.push(_)}m=y?new GH(g,w,b,k,S):new WH(g,w,b,k,S);var C=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],E=n.runWebGLProgram(m,x,"float32",C);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),E}},Dq=p((function e(t,n,r,a){d(this,e),this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;for(var i=hU(r.length),o="\n    int index;",s=0;s<this.sliceDim;s++)o+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(o,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}));var Lq={kernelName:kp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=Id(r.shape),u=C(zS(r,a),4),l=u[0],c=u[1],f=u[2],d=u[3],h=NG({inputs:{x:a},backend:n,attrs:{shape:[c,o]}}),p=NG({inputs:{x:r},backend:n,attrs:{shape:[Id(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var v=n.readSync(a.dataId),m=n.bufferSync(r),g=QU(v,m,r.dtype,c,o,f,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,g.values)}var y=new Dq(o,d,[c,f],r.shape),b=n.runWebGLProgram(y,[p,h],p.dtype),x=NG({inputs:{x:b},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(b),x}},jq=p((function e(t,n){d(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=hU(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function Pq(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=Ld(o,a.shape)[0];sh().get("DEBUG")&&function(){for(var e=n.readSync(i.dataId),t=a.shape[u],r=function(n){var r=e[n];_d(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},o=0;o<e.length;++o)r(o)}();var l=h_(a,i,u,s),c=Id(i.shape),f=[],d=NG({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),h=NG({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}});f.push(d),f.push(h);var p=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var v=n.bufferSync(h),m=n.bufferSync(d),g=$U(m,v,p);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(l.outputShape,g.dtype,g.values)}var y=new jq(d.shape,p),b=n.runWebGLProgram(y,[d,h],d.dtype);f.push(b);var x=NG({inputs:{x:b},backend:n,attrs:{shape:l.outputShape}});return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var Fq={kernelName:wp,backendName:"webgl",kernelFunc:Pq},Bq=wG({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:JU,dtype:"bool"}),zq={kernelName:Sp,backendName:"webgl",kernelFunc:Bq},Uq=wG({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:eW}),Wq={kernelName:_p,backendName:"webgl",kernelFunc:Uq};var Gq={kernelName:Ep,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return vq(t.input,!0,n)}},Vq=xG({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Hq={kernelName:Ip,backendName:"webgl",kernelFunc:Vq},qq=xG({opSnippet:"return float(isinf(x));",dtype:"bool"}),Xq={kernelName:Ap,backendName:"webgl",kernelFunc:qq},Yq=xG({opSnippet:"return float(isnan(x));",dtype:"bool"}),Kq={kernelName:Np,backendName:"webgl",kernelFunc:Yq},Zq=wG({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:tW,dtype:"bool"}),Qq={kernelName:Mp,backendName:"webgl",kernelFunc:Zq},$q=wG({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:nW,dtype:"bool"}),Jq={kernelName:Op,backendName:"webgl",kernelFunc:$q};var eX={kernelName:Dp,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=rW(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},tX=xG({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:aW}),nX={kernelName:Lp,backendName:"webgl",kernelFunc:tX},rX=xG({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),aX={kernelName:jp,backendName:"webgl",kernelFunc:rX},iX=wG({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),oX={kernelName:Pp,backendName:"webgl",kernelFunc:iX},sX=xG({opSnippet:"return float(!(x >= 1.0));"}),uX={kernelName:Fp,backendName:"webgl",kernelFunc:sX},lX=wG({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),cX={kernelName:Bp,backendName:"webgl",kernelFunc:lX},fX=p((function e(t,n,r,a,i){d(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=t[3]-1;this.outputShape=t;var l="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(l,")"):1===i?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),dX=p((function e(t,n,r,a,i){d(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=t[3]-1;this.outputShape=t;var l="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(l,")"):1===i?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),hX={kernelName:zp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,l=sh().getBool("WEBGL_PACK_NORMALIZATION")?new dX(a.shape,i,o,s,u):new fX(a.shape,i,o,s,u);return n.runWebGLProgram(l,[a],a.dtype)}},pX=p((function e(t,n,r,a,i){d(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),vX={kernelName:Up,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,l=r.alpha,c=r.beta,f=new pX(a.shape,s,u,l,c);return n.runWebGLProgram(f,[a,i,o],a.dtype)}};function mX(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,u=Ld(i,a.shape),l=u,c=vw(l,s),f=null!=c,d=n.shouldExecuteOnCPU([a]),h=a;if(f){if(d){for(var p=n.texData.get(h.dataId).values,v=new Array(s),m=0;m<v.length;m++)v[m]=a.shape[c[m]];var g=MW(p,a.shape,a.dtype,c,v);h=n.makeTensorInfo(v,a.dtype),n.texData.get(h.dataId).values=g}else h=PG(a,c,n);l=gw(l.length,s)}pw("max",l,s);var y,b=C(dw(h.shape,l),2),x=b[0],w=b[1],k=x;if(o&&(k=hw(x,u)),d){p=n.texData.get(h.dataId).values;var S=iW(p,Id(w),k,a.dtype);y=n.makeTensorInfo(k,a.dtype),n.texData.get(y.dataId).values=S}else y=function(e,t,n,r){var a=Id(t),i=NG({inputs:{x:e},attrs:{shape:[Id(e.shape)/a,a]},backend:r}),o=DG(i,e.dtype,"max",r),s=NG({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(h,w,k,n);return f&&n.disposeIntermediateTensorInfo(h),y}var gX={kernelName:Wp,backendName:"webgl",kernelFunc:mX},yX=wG({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:oW}),bX={kernelName:Gp,backendName:"webgl",kernelFunc:yX};var xX={kernelName:Vp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;zz(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;_d(cx(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var l=$b(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Ad(l.inShape,l.outShape))return cG({inputs:{x:a},backend:n});var c=new wV(l,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}};var wX={kernelName:qp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=Jb(a.shape,i,o,[1,1,1],s,l,u),f=new kV(c,"max",!1);return n.runWebGLProgram(f,[a],a.dtype)}},kX=p((function e(t){d(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,l=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),SX=p((function e(t){d(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,l=t.effectiveFilterHeight,c=t.effectiveFilterWidth,f=u-1-t.padInfo.front,h=l-1-t.padInfo.top,p=c-1-t.padInfo.left,v=u*l*c-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(f,", ").concat(h,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(v," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(c," +\n                  wR * ").concat(c," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var _X={kernelName:Xp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode,c=Jb(i.shape,o,s,[1,1,1],u,l),f=new kV(c,"max",!0),d=n.runWebGLProgram(f,[i],i.dtype),h=new SX(c),p=n.runWebGLProgram(h,[a,d],i.dtype);return n.disposeIntermediateTensorInfo(d),p}};var CX={kernelName:Hp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;zz([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,c=r.dimRoundingMode,f=$b(o.shape,s,u,1,l,c),d=new wV(f,"max",!0),h=n.runWebGLProgram(d,[o],o.dtype),p=new kX(f),v=n.runWebGLProgram(p,[a,h],o.dtype);return n.disposeIntermediateTensorInfo(h),v}};var EX={kernelName:Yp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,l=r;_d(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var c=[1,1];_d(cx(o,c),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(c,"'")}));var f=$b(a.shape,i,o,c,s),d=function(e,t,n,r){var a=new wV(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new wV(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,u,f,l),h=C(d,2);return[h[0],h[1]]}};var TX={kernelName:Kp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,u=a.shape.length,l=Ld(o,a.shape),c=l,f=vw(c,u),d=null!=f,h=s.shouldExecuteOnCPU([a]),p=[],v=a;if(d){if(h){for(var m=s.texData.get(v.dataId).values,g=new Array(u),y=0;y<g.length;y++)g[y]=a.shape[f[y]];var b=MW(m,a.shape,a.dtype,f,g);v=s.makeTensorInfo(g,a.dtype),s.texData.get(v.dataId).values=b}else v=PG(a,f,s);p.push(v),c=gw(c.length,u)}pw("sum",c,u);var x=C(dw(v.shape,c),2),w=x[0],k=x[1],S=w;i&&(S=hw(w,l));for(var _=function(e,t,n,r){var a=Id(t),i=NG({inputs:{x:e},attrs:{shape:[Id(e.shape)/a,a]},backend:r}),o=DG(i,"float32","mean",r),s=NG({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(v,k,S,s),E=0,T=p;E<T.length;E++){y=T[E];s.disposeIntermediateTensorInfo(y)}return _}};var IX={kernelName:Zp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=Ld(i,a.shape),l=u,c=vw(l,s),f=a;null!=c&&(f=zG({inputs:{x:a},backend:n,attrs:{perm:c}}),l=gw(l.length,a.shape.length)),pw("min",l,s);var d,h=C(dw(f.shape,l),2),p=h[0],v=NG({inputs:{x:f},backend:n,attrs:{shape:[-1,Id(h[1])]}}),m=DG(v,v.dtype,"min",n);return d=NG(o?{inputs:{x:m},backend:n,attrs:{shape:hw(p,u)}}:{inputs:{x:m},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(f),d}},AX=wG({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:sW}),NX={kernelName:Qp,backendName:"webgl",kernelFunc:AX},RX=p((function e(t,n,r){d(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=hU(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),l="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(l,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(l,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(l,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(l,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),MX=p((function e(t,n,r){d(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=hU(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=LW("rc",a),l=LW("source",a),c="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(l.slice(-2).join(),")"),h="reflect"===r?0:1,p="";if(1===a){var v="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(h,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(h,";\n        }\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(f,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(c,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(f,");\n        }\n      ")}else{var m="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(h,") +\n                gte * ((end - 1) * 2 - source + ").concat(h,");\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(f,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(c,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(f,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(l.join(),"), ").concat(f,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(c,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(l.join(),"), ").concat(f,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),OX={kernelName:$p,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=sh().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new MX(a.shape,i,o):new RX(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},DX=wG({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),LX={kernelName:Jp,backendName:"webgl",kernelFunc:DX},jX=p((function e(t,n,r){d(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),PX=wG({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),FX={kernelName:op,backendName:"webgl",kernelFunc:PX},BX="return a - b;",zX=wG({opSnippet:BX,packedOpSnippet:BX,supportsComplex:!0,cpuKernelImpl:AW}),UX={kernelName:nm,backendName:"webgl",kernelFunc:zX};function WX(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=Ld([r.dim],a.shape),o=mX({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),s=hw(o.shape,i),u=NG({inputs:{x:o},backend:n,attrs:{shape:s}}),l=zX({inputs:{a:a,b:u},backend:n}),c=sq({inputs:{x:l},backend:n}),f=FG({inputs:{x:c},backend:n,attrs:{axis:i,keepDims:!1}}),d=NG({inputs:{x:f},backend:n,attrs:{shape:s}}),h=PX({inputs:{a:c,b:d},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),h}var GX={kernelName:Vv,backendName:"webgl",kernelFunc:WX};var VX={kernelName:ev,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:WX({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),l=u.shape[0],c=u.shape[1],f=new jX(l,c,i),d=[[o]],h=n.runWebGLProgram(f,[u],"int32",d);return s||n.disposeIntermediateTensorInfo(u),h}};var HX={kernelName:nv,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=C(lW(i.values,a.shape,a.dtype),2),s=o[0],u=o[1];return r.makeTensorInfo(u,a.dtype,s)}return t=sh().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new nG(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new WW(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},qX=Dk;var XX={kernelName:av,backendName:"webgl",kernelFunc:function(e){ym("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=n.readSync(a.dataId),c=n.readSync(i.dataId),f=qX(l,c,o,s,u).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},YX=Lk;var KX={kernelName:iv,backendName:"webgl",kernelFunc:function(e){ym("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize,c=n.readSync(a.dataId),f=n.readSync(i.dataId),d=YX(c,f,o,s,u,l),h=d.selectedIndices,p=d.validOutputs;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},ZX=jk;var QX={kernelName:ov,backendName:"webgl",kernelFunc:function(e){ym("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma,c=n.readSync(a.dataId),f=n.readSync(i.dataId),d=ZX(c,f,o,s,u,l),h=d.selectedIndices,p=d.selectedScores;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},$X=p((function e(t,n,r,a){d(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),JX={kernelName:uv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,s=r.onValue,u=r.offValue,l=Id(a.shape),c=new $X(l,o,s,u),d=NG({inputs:{x:a},backend:n,attrs:{shape:[l]}}),h=n.runWebGLProgram(c,[d],i);n.disposeIntermediateTensorInfo(d);var p=NG({inputs:{x:h},backend:n,attrs:{shape:[].concat(f(a.shape),[o])}});return n.disposeIntermediateTensorInfo(h),p}};function eY(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=GV({inputs:{input:r},backend:n}),i=eY({inputs:{x:a},backend:n}),o=aH({inputs:{input:r},backend:n}),s=eY({inputs:{x:o},backend:n}),u=dG({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return yq({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var tY={kernelName:dm,backendName:"webgl",kernelFunc:eY};var nY={kernelName:sv,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=GV({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=aH({inputs:{input:a},backend:r}),u=eY({inputs:{x:s},backend:r}),l=dG({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}return yq({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var rY={kernelName:lv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return lq({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Cd(a,e.shape,"All tensors passed to stack must have matching shapes"),_d(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=sH({inputs:t.map((function(e){var t=lq({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},aY=p((function e(t,n,r){d(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=hU(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),iY=p((function e(t,n,r){d(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=hU(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=LW("rc",a),l=LW("source",a),c="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(l.slice(-2).join(),")"),h=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(c,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(c,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",v="",m=0,g=1===a?2:4;m<g;m++)v+="\n        ".concat(h[m],"\n        if (").concat(p,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(l.join(),"), ").concat(f,");\n        }\n      ");v+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(v,"\n        setOutput(result);\n      }\n    ")})),oY=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===Id(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return yq({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=sh().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iY(a.shape,i,o):new aY(a.shape,i,o),l=[[o]];return n.runWebGLProgram(u,[a],a.dtype,l)},sY={kernelName:cv,backendName:"webgl",kernelFunc:oY},uY=wG({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),lY={kernelName:fv,backendName:"webgl",kernelFunc:uY};var cY={kernelName:hv,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,u=i.shape.length,l=[],c=Ld(o,i.shape),f=c,d=vw(f,u),h=i;if(null!=d&&(h=zG({inputs:{x:i},backend:r,attrs:{perm:d}}),f=gw(f.length,u),l.push(h)),pw("prod",f,u),r.shouldExecuteOnCPU([h])){var p=r.texData.get(h.dataId).values,v=fW(h.shape,h.dtype,p,f),m=v.outVals,g=v.outShape,y=v.outDtype;t=r.makeTensorInfo(g,y,m)}else{var b=C(dw(h.shape,f),2),x=b[0],w=Id(b[1]),k=NG({inputs:{x:h},backend:r,attrs:{shape:[-1,w]}}),S=DG(k,gg(i.dtype),"prod",r);t=NG({inputs:{x:S},backend:r,attrs:{shape:x}}),l.push(k),l.push(S)}if(s){l.push(t);var _=hw(t.shape,c);t=NG({inputs:{x:t},backend:r,attrs:{shape:_}})}return l.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}};var fY={kernelName:pv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices,s=r.outputRaggedRank,u=a.map((function(e){return n.readSync(e.dataId)})),l=a.map((function(e){return e.shape})),c=n.readSync(i.dataId),f=n.readSync(o.dataId),d=C(dW(u,l,c,i.shape,i.dtype,f,o.shape,s),3),h=d[0],p=d[1],v=d[2],m=h.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),g=n.makeTensorInfo(v,i.dtype,p);return m.concat([g])}};var dY={kernelName:vv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,i=t.deltas,o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=C(hW(o,r.shape,r.dtype,s,a.shape,u,i.shape),2),c=l[0],f=l[1];return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([f.length],r.dtype,f)]}};var hY={kernelName:mv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,l=n.readSync(a.dataId),c=n.readSync(i.dataId),f=n.readSync(o.dataId),d=s.map((function(e){return n.readSync(e.dataId)})),h=s.map((function(e){return e.shape})),p=C(pW(l,a.shape,c,i.shape,i.dtype,f,o.shape,d,h,u),2),v=p[0],m=p[1];return n.makeTensorInfo(v,i.dtype,m)}},pY=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=vW(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},vY={kernelName:gv,backendName:"webgl",kernelFunc:pY},mY=xG({opSnippet:"return 1.0 / x;"}),gY={kernelName:bv,backendName:"webgl",kernelFunc:mY},yY=xG({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),bY={kernelName:xv,backendName:"webgl",kernelFunc:yY},xY=xG({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),wY={kernelName:Ev,backendName:"webgl",kernelFunc:xY},kY=p((function e(t,n,r,a,i){d(this,e),this.variableNames=["A"],this.outputShape=[];var o=C(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var f,h=[a&&n>1?u-1:u,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),SY=p((function e(t,n,r,a,i){d(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=C(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var f,h=[a&&n>1?u-1:u,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],",\n          ").concat(h[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var _Y={kernelName:_v,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=C(r.size,2),u=s[0],l=s[1],c=sh().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new SY(a.shape,u,l,i,o):new kY(a.shape,u,l,i,o);return n.runWebGLProgram(c,[a],"float32")}},CY=p((function e(t,n,r){d(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=C(n,3),i=a[1],o=a[2],s=C(t,3),u=s[1],l=s[2],c=[r&&u>1?i-1:i,r&&l>1?o-1:o],f=[r&&u>1?u-1:u,r&&l>1?l-1:l],h=c[0]/f[0],p=c[1]/f[1],v=1/h,m=1/p,g=2*Math.ceil(v)+2,y=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var EY={kernelName:Cv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new CY(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},TY=p((function e(t,n,r,a,i){d(this,e),this.variableNames=["A"],this.outputShape=[];var o=C(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var f,h=[a&&n>1?u-1:u,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],v=a?"0.5":"0.0";f=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(v,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),IY=p((function e(t,n,r,a,i){d(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=C(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var f,h=[a&&n>1?u-1:u,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],v=a?"0.5":"0.0";f=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],",\n          ").concat(h[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(v,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var AY={kernelName:kv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=C(r.size,2),u=s[0],l=s[1],c=sh().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new IY(a.shape,u,l,i,o):new TY(a.shape,u,l,i,o);return n.runWebGLProgram(c,[a],a.dtype)}},NY=p((function e(t,n,r){d(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=C(n,3),i=a[1],o=a[2],s=C(t,3),u=s[1],l=s[2],c=[r&&u>1?i-1:i,r&&l>1?o-1:o],f=[r&&u>1?u-1:u,r&&l>1?l-1:l],h=c[0]/f[0],p=c[1]/f[1],v=1/h,m=1/p,g=2*Math.ceil(v)+2,y=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(c[0],") *\n                (float(dyR) / float(").concat(f[0],"));\n\n            float sourceFracCol =\n                float(").concat(c[1],") *\n                  (float(dyC) / float(").concat(f[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var RY={kernelName:Sv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new NY(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},MY=p((function e(t,n){d(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=hU(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),OY=p((function e(t,n){d(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=LW("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=hU(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var DY={kernelName:Tv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=Ld(i,a.shape);if(0===o)return cG({inputs:{x:a},backend:n});var u=sh().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new OY(a.shape,s):new MY(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},LY=p((function e(t,n){d(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),jY={kernelName:pm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,l=new LY(a.shape,o),c=C(DS(s,a.shape[1],a.shape[2]),2),f=[[c[0],c[1],Math.sin(i),Math.cos(i)]];return u.runWebGLProgram(l,[a],a.dtype,f)}},PY=xG({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),FY={kernelName:Iv,backendName:"webgl",kernelFunc:PY},BY=xG({opSnippet:"return inversesqrt(x);",cpuKernelImpl:mW}),zY={kernelName:Av,backendName:"webgl",kernelFunc:BY},UY=p((function e(t,n,r,a,i,o){d(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=hU(i.length),u=hU(o.length),l="";1===r?l="i":2===r&&(l="i, j");var c="getIndices(".concat(l,")"),f="";1===a?f="i":2===a&&(f="i, coords[1]");var h="getUpdates(".concat(f,")"),p=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(c,");\n              flattenedIndex += index * ").concat(p,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var WY={kernelName:Nv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=US(0,a,o),u=s.sliceRank,l=s.numUpdates,c=s.sliceSize,f=s.strides,d=s.outputSize,h=[d/c,c];if(0===d)return n.makeTensorInfo(o,a.dtype);var p=NG({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),v=NG({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new UY(l,u,p.shape.length,v.shape.length,f,h),y=n.runWebGLProgram(g,[v,p,m],v.dtype),b=NG({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),b}},GY=p((function e(t,n,r,a){d(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),o=2===sh().getNumber("WEBGL_VERSION")?"while (left < right) {":i,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var VY={kernelName:Rv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=new GY(a.shape[0],a.shape[1],i.shape[1],o),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",u)}},HY=p((function e(t,n,r){var a,i;if(d(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],l=0;l<n.length;l++)u.push("".concat(o[l])),l<t&&s.push("".concat(o[l]));a=s.join(),i=u.join()}var c=hU(r);this.userCode="\n      void main() {\n        ".concat(c," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var qY={kernelName:Mv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new HY(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],mg(a.dtype,i.dtype))}},XY=xG({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(WS,";\n  float scale = ").concat(GS,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),YY={kernelName:Ov,backendName:"webgl",kernelFunc:XY},KY=xG({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:yW}),ZY={kernelName:Fv,backendName:"webgl",kernelFunc:KY},QY=xG({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),$Y={kernelName:Pv,backendName:"webgl",kernelFunc:QY},JY=xG({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),eK={kernelName:Lv,backendName:"webgl",kernelFunc:JY},tK=xG({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),nK={kernelName:jv,backendName:"webgl",kernelFunc:tK},rK=xG({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),aK={kernelName:Bv,backendName:"webgl",kernelFunc:rK},iK={kernelName:Wv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;_d(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,f(o));for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=[],d=oY({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),h=LS(d.shape,i,s,!1),p=jS(h.length,i.length,!1),v=PS(d.shape,i,s,!1),m=NG({inputs:{x:d},backend:n,attrs:{shape:h}}),g=zG({inputs:{x:m},backend:n,attrs:{perm:p}}),y=NG({inputs:{x:g},backend:n,attrs:{shape:v}});return c.push(d),c.push(m),c.push(g),c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}};var oK={kernelName:Hv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],f=C(wW(s,r.shape,r.dtype,u,a.dtype,l,c),5),d=f[0],h=f[1],p=f[2],v=f[3],m=f[4];return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],a.dtype,p),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};var sK={kernelName:qv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),l=C(kW(s,r.shape,r.dtype,o,u),3),c=l[0],f=l[1],d=l[2];return[n.makeTensorInfo(f,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}};var uK={kernelName:Xv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=C(SW(o,r.shape,r.dtype,s,u,!0),2),c=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,c)}};var lK={kernelName:Yv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=C(SW(o,r.shape,r.dtype,s,u),2),c=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,c)}};var cK={kernelName:Kv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=US(0,a,s),l=u.sliceRank,c=u.numUpdates,f=u.sliceSize,d=u.strides,h=u.outputSize;if("string"===i.dtype){var p=n.bufferSync(a),v=n.bufferSync(i),m=Ym(n.readSync(o.dataId)[0]),g=gW(p,v,s,h,f,c,l,d,m,false);return n.makeTensorInfo(s,g.dtype,g.values)}var y=new UY(c,l,a.shape.length,i.shape.length,d,[h,1],false),b=n.runWebGLProgram(y,[i,a,o],i.dtype),x=NG({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),x}};var fK={kernelName:Gv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=Ld(r.axis,a.shape)[0],s=u_(a,i,o),u=a.shape.length,l=new Array(u).fill(0),c=a.shape.slice();return s.map((function(e){var t=f(c);t[o]=e;var r=jV({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[o]+=e,r}))}},dK="return sqrt(x);",hK=xG({opSnippet:dK,packedOpSnippet:dK,cpuKernelImpl:_W}),pK={kernelName:zv,backendName:"webgl",kernelFunc:hK},vK={kernelName:Qv,backendName:"webgl",kernelFunc:xG({opSnippet:"return x * x;"})},mK="return (a - b) * (a - b);",gK=wG({opSnippet:mK,packedOpSnippet:mK}),yK={kernelName:Zv,backendName:"webgl",kernelFunc:gK};var bK={kernelName:hm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=GW+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new WW(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},xK=p((function e(t,n,r){d(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=hU(r.length),o=hU(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var wK={kernelName:$v,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,l=a.beginMask,c=a.endMask,f=a.ellipsisMask,d=a.newAxisMask,h=a.shrinkAxisMask,p=Mb(i.shape,o,s,u,l,c,f,d,h),v=p.finalShapeSparse,m=p.finalShape,g=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,w=p.end,k=p.strides;if(g)t=NG({inputs:{x:i},backend:r,attrs:{shape:m}});else if(y||b){_d(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var S=Ib(x,w,k),_=jV({inputs:{x:i},backend:r,attrs:{begin:x,size:S}});t=NG({inputs:{x:_},backend:r,attrs:{shape:m}}),r.disposeIntermediateTensorInfo(_)}else{if(r.shouldExecuteOnCPU([i])){var C=r.readSync(i.dataId),E=Qy(i.shape,i.dtype,C),T=CW(v,E,k,x);t=r.makeTensorInfo(m,i.dtype,T.values)}else{var I=new xK(x,k,v);t=r.runWebGLProgram(I,[i],i.dtype)}}var A=NG({inputs:{x:t},backend:r,attrs:{shape:m}});return r.disposeIntermediateTensorInfo(t),A}};var kK={kernelName:Jv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,l=r.preserveShortSequences,c=t.data,f=t.dataSplits,d=n.readSync(c.dataId),h=n.readSync(f.dataId),p=C(EW(d,h,a,i,o,s,u,l),2),v=p[0],m=p[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(f.shape,"int32",m)]}};var SK={kernelName:em,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],u=C(TW(o,s,r),3),l=u[0],c=u[1],f=u[2],d=c.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}};var _K={kernelName:tm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=IW(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},CK=xG({opSnippet:"return tan(x);"}),EK={kernelName:rm,backendName:"webgl",kernelFunc:CK},TK=xG({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),IK={kernelName:am,backendName:"webgl",kernelFunc:TK},AK=p((function e(t,n){d(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=hU(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function NK(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return Ym(e)})):o,u=Qy(a.shape,a.dtype,s),l=NW(u,i);return n.makeTensorInfo(l.shape,l.dtype,l.values)}var c=new AK(a.shape,i);return n.runWebGLProgram(c,[a],a.dtype)}var RK={kernelName:im,backendName:"webgl",kernelFunc:NK},MK=p((function e(t){d(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),OK=p((function e(t){d(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function DK(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function LK(e){for(var t=1;t<e;)t*=2;return t}var jK={kernelName:om,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=sh().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=sh().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=a.shape,c=l[l.length-1];if(n.shouldExecuteOnCPU([a])||c<s||i>u){var f=n.readSync(a.dataId),d=C(RW(f,l,a.dtype,i,o),2),h=d[0],p=d[1];return[n.makeTensorInfo(h.shape,h.dtype,h.values),n.makeTensorInfo(p.shape,p.dtype,p.values)]}if(0===i)return l[l.length-1]=0,[n.makeTensorInfo(l,a.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(1===c)return[a,yq({attrs:{shape:l,dtype:"int32",value:0},backend:n})];var v=n.texData.get(a.dataId),m=null!==v&&v.isPacked,g=m?n.unpackTensor(a):a,y=Id(l)/c,b=NG({inputs:{x:g},attrs:{shape:[y,c]},backend:n});m&&DK(n,g);for(var x=LK(i),w=LK(c),k=null,S=function(){return null===k?[b,b]:[b,k]},_=function(e,t,r){var a=S(),i=new MK(r),o=[[c],[null===k?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=k;k=n.runWebGLProgram(i,a,"int32",o),DK(n,s)},E=1;E<x;E*=2)for(var T=2*E,I=E;I>=1;I/=2)_(T,I,[y,w]);for(var A=w;A>x;A/=2){var N=S(),R=new OK([y,A/2]),M=[[c],[null===k?1:0],[x]],O=k;k=n.runWebGLProgram(R,N,"int32",M),DK(n,O);for(var D=x/2,L=2*D,j=D;j>=1;j/=2)_(L,j,k.shape)}var P=k;k=jV({inputs:{x:k},backend:n,attrs:{begin:0,size:[y,i]}}),DK(n,P);var F=Pq({inputs:{x:b,indices:k},backend:n,attrs:{axis:1,batchDims:1}});DK(n,b);var B=l.slice(0,-1);B.push(i),P=k,k=NG({inputs:{x:k},attrs:{shape:B},backend:n}),DK(n,P);var z=F;return F=NG({inputs:{x:F},attrs:{shape:B},backend:n}),DK(n,z),[F,k]}},PK=p((function e(t,n,r,a,i,o){d(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var FK={kernelName:sm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,u=r.fillValue,l=r.outputShape,c=C(a.shape,4),f=c[0],d=c[1],h=c[2],p=c[3],v=C(null!=l?l:[d,h],2),m=v[0],g=v[1],y=new PK(d,h,o,s,u,[f,m,g,p]);return n.runWebGLProgram(y,[a,i],"float32")}};var BK={kernelName:lm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;zz(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=OW(o,a,i.shape,i.dtype),u=s.outputValues,l=s.outputShape,c=s.indices;return[r.makeTensorInfo(l,i.dtype,u),r.makeTensorInfo([c.length],"int32",c)]}};var zK={kernelName:cm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],l=new Array(s-1),c=0,f=0;f<s;f++)f!==i&&(l[c++]=o.shape[f]);var d=[],h=new Array(s).fill(0),p=o.shape.slice();p[i]=1;for(var v=new Array(u),m=0;m<v.length;m++){h[i]=m;var g=jV({inputs:{x:o},backend:n,attrs:{begin:h,size:p}}),y=NG({inputs:{x:g},backend:n,attrs:{shape:l}});v[m]=y,d.push(g)}return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},UK=p((function e(t,n){d(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),l=r%4,c="\n        sumValue += dot(values, segFilter);\n    ",f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(h,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var WK={kernelName:fm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],l=0,c=vw([l],s),f=a;null!=c&&(f=zG({inputs:{x:a},backend:n,attrs:{perm:c}}),u.push(f),l=gw(1,s)[0]);var d=function(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}(f.shape,l,o),h=Id([f.shape[l]]),p=NG({inputs:{x:f},backend:n,attrs:{shape:[-1,h]}});u.push(p);var v=function e(t,r,a,i,o){var s=t.shape[0],l=t.shape[1],c=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=qd(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=qd(e,n+1);return n}(l,o),f=new UK({windowSize:c,inSize:l,batchSize:s,numSegments:o},r),d=n.compileAndRun(f,[t,a],i);if(u.push(d),d.shape[1]===o)return d;var h=pY({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=NK({inputs:{x:h},backend:n,attrs:{reps:[l/c]}});return u.push(h),u.push(p),e(d,r,p,i,o)}(p,"unsortedSegmentSum",i,gg(a.dtype),o),m=NG({inputs:{x:v},backend:n,attrs:{shape:d}}),g=m;if(null!=c){u.push(m);var y=mw(c);g=zG({inputs:{x:g},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},GK=0,VK=[GG,HG,XG,KG,$G,tV,nV,rV,lV,cV,dV,pV,mV,yV,xV,SV,_V,TV,IV,AV,MV,FV,BV,zV,HV,YV,QV,hG,eH,uH,mH,wH,kH,SH,_H,EH,IH,NH,MH,PH,FH,BH,UH,VH,XH,YH,ZH,$H,JH,tq,nq,aq,oq,uq,cq,hq,mq,xq,kq,Cq,Tq,Nq,Mq,Oq,Lq,Fq,zq,Wq,fG,Gq,iH,Hq,Xq,Kq,mG,Qq,Jq,eX,nX,aX,oX,uX,cX,hX,vX,gX,bX,xX,wX,_X,CX,EX,TX,IX,NX,OX,LX,VX,AG,HX,XX,KX,QX,WV,JX,nY,rY,sY,lY,bG,cY,fY,dY,hY,vY,VV,FX,gY,bY,wY,RG,_Y,EY,AY,RY,DY,jY,FY,zY,WY,VY,qY,YY,ZY,$Y,eK,nK,PV,GX,aK,iK,oK,sK,uK,lK,cK,fK,pK,vK,yK,bK,wK,kK,SK,_K,UX,BG,EK,IK,RK,jK,FK,UG,BK,zK,WK,tY];GK<VK.length;GK++){_m(VK[GK])}var HK,qK=function(){function e(t,n){d(this,e),this.model=t,this.memory=n,this.eps=.1,this.discountRate=.5}return p(e,[{key:"perceive",value:function(e,t,n,r){return Qw([[e.y/r.canvasHeight,t.y/r.canvasHeight,n.position.x/r.canvasWidth,n.position.y/r.canvasHeight]])}},{key:"think",value:function(e,t,n,r){var a=this.perceive(e,t,n,r),i=this.model.chooseAction(a,this.eps);e.move(i);var o=e.score-e.other_score,s=this.perceive(e,t,n,r);this.memory.addSample([a,i,o,s])}},{key:"replay",value:function(){var e=A(T().mark((function e(){var t,n,r,a,i,o,s,u=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.memory.sample(this.model.batchSize,.5),n=t.map((function(e){return C(e,3)[0]})),r=t.map((function(e){var t=C(e,4)[3];return t||Sw([u.model.nStates])})),a=n.map((function(e){return u.model.predict(e)})),i=r.map((function(e){return u.model.predict(e)})),o=[],s=[],t.forEach((function(e,t){var n=C(e,4),r=n[0],l=n[1],c=n[2],f=n[3],d=a[t];d[l]=f?c+u.discountRate*i[t].max().dataSync():c,o.push(r.dataSync()),s.push(d.dataSync())})),a.forEach((function(e){return e.dispose()})),i.forEach((function(e){return e.dispose()})),o=Qw(o,[o.length,this.model.nStates]),s=Qw(s,[s.length,this.model.nActions]),e.next=14,this.model.train(o,s);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),XK=function(){function e(t,n,r,a){d(this,e),this.nStates=n,this.nActions=r,this.batchSize=a,t instanceof HN?(this.network=t,this.network.summary(),this.network.compile({optimizer:"adam",loss:"meanSquaredError"})):this.defineModel(t)}return p(e,[{key:"defineModel",value:function(e){var t,n=this;Array.isArray(e)||(e=[e]),this.network=new XN(t),e.forEach((function(e,t){n.network.add(iO({units:e,activation:"sigmoid",inputShape:0===t?[n.nStates]:void 0}))})),this.network.add(iO({units:this.nActions})),this.network.compile({optimizer:"adam",loss:"meanSquaredError"})}},{key:"predict",value:function(e){var t=this;return Bb((function(){return t.network.predict(e)}))}},{key:"train",value:function(){var e=A(T().mark((function e(t,n){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.network.fit(t,n,{epochs:10,verbose:!0});case 3:r=e.sent,console.log(r.loss),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:return e.prev=10,t.dispose(),n.dispose(),e.finish(10);case 14:case"end":return e.stop()}}),e,this,[[0,7,10,14]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"chooseAction",value:function(e,t){var n=this;return Math.random()<t?Math.floor(Math.random()*this.nActions)-1:Bb((function(){return n.network.predict(e).argMax(1).dataSync()[0]-1}))}}]),e}(),YK=n(763),KK=function(){function e(t){d(this,e),this.maxMemory=t,this.samples=[]}return p(e,[{key:"addSample",value:function(e){this.samples.push(e),this.samples.length>this.maxMemory&&this.samples.shift()}},{key:"sample",value:function(e,t){for(var n=this.samples.map((function(e){return C(e,3)[2]})),r=n.reduce((function(e,t,n,r){return e+t/r.length}),0),a=n.reduce((function(e,t,n,a){return e+Math.pow(t-r,2)/a.length}),0),i=Math.sqrt(a),o=0,s=new Array(n.length).fill(0),u=n.length-1;u>=0;--u)0!==n[u]&&(o=0),o+=t*n[u],s[u]=(o-r)/i;var l=this.samples.map((function(e,t){var n=C(e,4),r=n[0],a=n[1],i=n[3];return[r,a,s[t],i]}));return(0,YK.sampleSize)(l,e)}}]),e}(),ZK=600,QK=400,$K=function(){function e(t){d(this,e),this._p5=t,this.radius=5,this.resetBall()}return p(e,[{key:"resetBall",value:function(){this.position=this._p5.createVector(300,200);var e=this._p5.map(Math.random(),0,1,3*this._p5.PI/4,5*this._p5.PI/4),t=Math.random()<.5?-1:1,n=Math.cos(e)*t,r=Math.sin(e);this.velocity=this._p5.createVector(10*n,10*r)}},{key:"display",value:function(){this._p5.noStroke(),this._p5.ellipse(this.position.x,this.position.y,2*this.radius,2*this.radius)}},{key:"update",value:function(e){var t=this.position.x<=this.radius,n=this.position.x>=ZK-this.radius;t|n&&this.resetBall(),this.position.y>=QK-this.radius|this.position.y<=this.radius&&(this.velocity.y=-this.velocity.y);var r,a=E(e);try{for(a.s();!(r=a.n()).done;){var i=r.value,o=i.playerTwo?this.position.x+this.radius>=i.x-i.thickness:this.position.x-this.radius<=i.x+i.thickness,s=this.position.y<i.upperEdge&&this.position.y>i.lowerEdge;o&&s&&(this.velocity.x=-this.velocity.x,this.velocity.y=i.velocityY),i.playerTwo?(t&&(i.score+=1),n&&(i.other_score+=1)):(n&&(i.score+=1),t&&(i.other_score+=1))}}catch(cZ){a.e(cZ)}finally{a.f()}this.position.add(this.velocity)}}]),e}(),JK=function(){function e(t){d(this,e),this._p5=t,this.canvasWidth=ZK,this.canvasHeight=QK,this.max_score=10}return p(e,[{key:"display",value:function(){this._p5.noStroke(),this._p5.rectMode(this._p5.CENTER);for(var e=0;e<QK;e+=5)this._p5.rect(300,e,2,2)}}]),e}(),eZ=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];d(this,e),this._p5=t,this.size=60,this.offset=10,this.thickness=5,this.playerTwo=n,this.x=this.playerTwo?ZK-this.offset:this.offset,this.y=200,this.velocityY=0,this.upperEdge=this.y+this.size/2,this.lowerEdge=this.y+this.size/2,this.score=0,this.other_score=0,this.brain=new qK(new XK(4,4,3,100),new KK(500))}return p(e,[{key:"display",value:function(){this._p5.noStroke(),this._p5.rectMode(this._p5.CENTER),this._p5.rect(this.x,this.y,this.thickness,this.size);for(var e=(this.playerTwo?3:1)*ZK/4-50,t=1;t<=this.score;t++)this._p5.rect(e+10*t,390,5,5)}},{key:"move",value:function(e){this.velocityY=10*e;var t=this.velocityY+this.y;this.upperEdge=t+this.size/2,this.lowerEdge=t-this.size/2,this.upperEdge>QK|this.lowerEdge<0||(this.y=t,this.velocityY=0)}}]),e}(),tZ=function(){function e(t){d(this,e),this._p5=t,this.ball=new $K(this._p5),this.field=new JK(this._p5),this.playerOne=new eZ(this._p5,!1),this.playerTwo=new eZ(this._p5,!0)}return p(e,[{key:"resetGame",value:function(){var e=A(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._p5.noLoop(),e.next=3,this.playerOne.brain.replay();case 3:this.playerOne.score=0,this.playerOne.other_score=0,this.playerOne.y=200,this.playerTwo.score=0,this.playerTwo.other_score=0,this.playerTwo.y=200,this._p5.loop();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"step",value:function(){this.field.display(),this.ball.display(),this.playerOne.display(),this.playerTwo.display(),this.playerOne.brain.think(this.playerOne,this.playerTwo,this.ball,this.field),this.playerTwo.brain.think(this.playerTwo,this.playerOne,this.ball,this.field),this.ball.update([this.playerOne,this.playerTwo]),[this.playerOne,this.playerTwo].some((function(e){return 10===e.score}))&&this.resetGame()}}]),e}();function nZ(e,t){HK=new tZ(e),e.createCanvas(HK.field.canvasWidth,HK.field.canvasHeight).parent(t)}function rZ(e){e.background(0),HK.step()}function aZ(e){var t=So();return(0,_o.jsx)(_o.Fragment,{children:(0,_o.jsx)(go,{className:t.container,children:(0,_o.jsxs)(Us,{className:t.card,children:[(0,_o.jsx)(qs,{component:vd(),setup:nZ,draw:rZ}),(0,_o.jsx)(Ys,{children:(0,_o.jsx)(xo,{children:"Still working on it"})})]})})})}function iZ(){var e=at();return"true"===e.state.jupyter?(0,_o.jsx)(hd,{ipynb:n(2585)("./".concat(e.state.filename))}):"neuropong"===e.state.tag?(0,_o.jsx)(aZ,{}):void 0}var oZ=Dn({typography:{fontFamily:"Rubik"},overrides:{MuiCard:{root:{overflow:"scroll"}}}});oZ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.breakpoints,r=void 0===n?["sm","md","lg"]:n,a=t.disableAlign,i=void 0!==a&&a,o=t.factor,s=void 0===o?2:o,u=t.variants,l=void 0===u?["h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","caption","button","overline"]:u,c=Ot({},e);c.typography=Ot({},c.typography);var f=c.typography,d=Pn(f.htmlFontSize),h=r.map((function(e){return c.breakpoints.values[e]}));return l.forEach((function(e){var t=f[e],n=parseFloat(d(t.fontSize,"rem"));if(!(n<=1)){var r=n,a=1+(r-1)/s,o=t.lineHeight;if(!Ln(o)&&!i)throw new Error(Bt(6));Ln(o)||(o=parseFloat(d(o,"rem"))/parseFloat(n));var u=null;i||(u=function(e){return Fn({size:e,grid:Bn({pixels:4,lineHeight:o,htmlFontSize:f.htmlFontSize})})}),f[e]=Ot({},t,zn({cssProperty:"fontSize",min:a,max:r,unit:"rem",breakpoints:h,transform:u}))}})),c}(oZ);var sZ=function(e,t){var n,r;return ce({basename:null==t?void 0:t.basename,history:(r={window:null==t?void 0:t.window},void 0===r&&(r={}),z((function(e,t){var n=e.location;return P("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:F(t)}),null,r)),hydrationData:(null==t?void 0:t.hydrationData)||(null==(n=window)?void 0:n.__staticRouterHydrationData),routes:_t(e)}).initialize()}(St((0,_o.jsxs)(bt,{path:"/homepage",element:(0,_o.jsx)(Ps,{theme:oZ}),children:[(0,_o.jsx)(bt,{index:!0,element:(0,_o.jsx)($s,{theme:oZ})}),(0,_o.jsx)(bt,{path:"/homepage/projects/:project_tag",element:(0,_o.jsx)(iZ,{})})]})));function uZ(){return(0,_o.jsx)(Vn,{theme:oZ,children:(0,_o.jsx)(io,{children:(0,_o.jsx)(gt,{router:sZ})})})}var lZ=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};s.createRoot(document.getElementById("root")).render((0,_o.jsx)(i.StrictMode,{children:(0,_o.jsx)(uZ,{})})),lZ()}()}();
//# sourceMappingURL=main.529f8b6f.js.map